!function(t){var n={};function e(r){if(n[r])return n[r].exports;var l=n[r]={i:r,l:!1,exports:{}};return t[r].call(l.exports,l,l.exports,e),l.l=!0,l.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var l in t)e.d(r,l,function(n){return t[n]}.bind(null,l));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t){t.exports={screen:{width:400,height:400},fps:60,camera:{x:0,y:0},stage:{width:1800,height:1800},tilemap:{data:[0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,2,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0],columns:10,gridWidth:40,gridHeight:40}}},function(t,n,e){"use strict";e.r(n);var r=e(0);class l{constructor(){this.id=i()}}var u=1;function i(){return u++}class c{constructor(t=0){this.entityId=t,this.id=t}}class o{constructor(t=0){this.priority=t,this.id=i()}onStart(){}onUpdate(t=0){}onEnd(){}}const s=2;function a(t=null,n=0){t.onUpdate(n)}function d(t=null){t.state=s,t.onEnd()}class f{constructor(t=null,n=null,e=null){this.data=t,this.prep=n,this.next=e}}class h{constructor(){this.head=new f,this.tail=new f,this.head.next=this.tail,this.tail.prep=this.head,this._map=new Map,this._size=0,this._delList=[],this._curr=this.head,this._lock=!1}}function p(){return new h}function x(t=null,n=0,e=!1){if(!t)return void console.error("link is null.");let r=t._map.get(n);return r?r.data:(e&&console.error("can't find keyId: ",n),null)}function y(t=null,n=null){return g(t,n,t.tail)}function g(t=null,n=null,e=null){if(!t||!n||!n.id)return console.error("error param: ",t,n,n.id),null;if(t._map.get(n.id))return console.error("error id:%d is exist",n.id),null;let r=e.prep,l=new f(n,r,e);return r.next=l,e.prep=l,t._map.set(n.id,l),t._size++,l}function w(t=null,n=0){t&&0!=n?t._lock?t._delList.push(n):v(t,n):console.error("error param: ",t,n)}function v(t=null,n=0){let e=t._map.get(n);if(!e)return;t._map.delete(n);let r=e.prep,l=e.next;r.next=l,l.prep=r,t._size--}function m(t=null,n=null){if(!t||!n)return;t._lock=!0;let e=t.head.next;for(;e!=t.tail&&!n(e.data);)e=e.next;for(;t._delList.length>0;)v(t,t._delList.pop());t._lock=!1}var k=p();class b extends o{onUpdate(t=0){m(k,n=>{a(n,t),n.isEnd()&&d(n)})}}var _=null;class H{constructor(t=0,n=0){this.x=t,this.y=n}}function U(t=0,n=0){return new H(t,n)}class I{constructor(t=0,n=0){this.x=t,this.y=n,this.distance=t*t+n*n}}function L(t=0,n=0){return new I(t,n)}class P{constructor(t=null,n=0,e=0,r=null){this.offset=t,this.width=n,this.height=e,this.center=r}}function E(t=0,n=0,e=0,r=0){if(0==e||0==r)return null;let l=L(t,n);return new P(l,e,r,U())}function S(t=null){return U(t.center.x-O(t),t.center.y-C(t))}function B(t=null){return U(t.center.x+O(t),t.center.y+C(t))}function M(t=null){return t.width}function j(t=null){return t.height}function O(t=null){return.5*t.width}function C(t=null){return.5*t.height}class D{constructor(t=null,n=0,e=0,r=null){this.unitPos=t,this.offset=L(n,e),this.rect=r}}function G(t=null,n=0,e=0,r=null){return t&&r?new D(t,n,e,r):null}function R(t=null){return U(t.unitPos.x+t.offset.x,t.unitPos.y+t.offset.y)}function W(t=null){let n=R(t);return U(n.x-O(t.rect),n.y-C(t.rect))}function T(t=null){let n=R(t);return U(n.x+O(t.rect),n.y+C(t.rect))}new Map;class z extends c{constructor(t=0,n=0,e=0){super(t),this.pos=U(n,e),this.vec=L()}}var A=p();function F(t=0){let n=x(A,t);return n||function(t=0){let n=new z(t);return y(A,n),n}(t)}function X(){return A}function Y(t=0,n=0,e=0){let r=F(t).pos;return r.x=n,r.y=e,r}function q(t=0){return F(t).pos}p();var J=p();function K(t=0){return t>=0?t:-t}function N(t=0,n=0){return t>n?t:n}function Q(t=0,n=0){return t<n?t:n}function V(t=null,n=null){let e=R(t),r=R(n);return!(K(e.x-r.x)>O(t.rect)+O(n.rect))&&!(K(e.y-r.y)>C(t.rect)+C(n.rect))}function Z(t=null,n=0,e=0){t.unitPos.x=n-t.offset.x,t.unitPos.y=e-t.offset.y}class $ extends l{constructor(){super(),this.pos=null,this.rect=null}}function tt(t=0,n=0,e=0,r=0){let l=new $;return l.pos=Y(l.id,t,n),l.rect=G(l.pos,0,0,E(0,0,e,r)),l}function nt(t=null,n=null){return V(t.rect,n)}function et(t=null,n=null){return function(t=null,n=null){return U(t.x-n.x,t.y-n.y)}(n,W(t.rect))}const rt=87,lt=65,ut=83,it=68;var ct={ctx:null,canvas:null,fps:0,tick:0};function ot(){return ct}var st=ot();Math.PI;function at(t=null,n=null){return!!function(t=null,n=null){let e=S(t),r=S(n),l=B(t),u=B(n),i=e.x,c=r.x,o=i>c?i:c,s=l.x,a=u.x,d=s<a?s:a;if(d<o)return null;let f=e.y,h=r.y,p=f>h?f:h,x=l.y,y=u.y,g=x<y?x:y;return g<p?null:E(0,0,d-o,g-p)}(t,n)}class dt extends l{constructor(t=0,n=null,e=0){super(),this.entityId=t,this.rect=n,this.tag=e}}class ft extends o{constructor(t=null){this.callback=t}check(t=0,n=null,e=null){return!!at(n.rect,e.rect)&&(this.callback(t,n,e),!0)}}var ht=p();function pt(){return ht}var xt=p();function yt(){return xt}class gt extends o{onUpdate(t=0){!function(){let t=st.canvas;st.ctx.clearRect(0,0,t.width,t.height)}(),m(J,t=>{let n=q(t.entityId);UpdateRectPosByUnit(t.displayArea,n.x,n.y),function(t=null){let n=mn(),e=t.displayArea;if(!nt(n,e))return;let r=et(n,GetRectStartPos(e)),l=t.spriteFrame.textureArea;!function(t,n=0,e=0,r=0,l=0,u=0,i=0,c=0,o=0){st.ctx.drawImage(t,n,e,r,l,u,i,c,o)}(t.spriteFrame.bitmapData,l.x,l.y,l.width,l.height,r.x,r.y,M(e),j(e))}(t)})}}var wt=null;class vt extends o{onUpdate(t=0){m(yt(),t=>{kt(t.rect)}),m(pt(),t=>{kt(t.rect)})}}var mt=null;function kt(t=null){let n=mn();if(!nt(n,t))return;let e=et(n,W(t));!function(t=0,n=0,e=0,r=0){st.ctx.strokeRect(t,n,e,r)}(e.x,e.y,M(t.rect),j(t.rect))}class bt extends o{onUpdate(t=0){m(X(),t=>{let n=t.vec,e=t.pos;e.x+=n.x,e.y+=n.y,n.x=0,n.y=0})}}var _t=null;var Ht,Ut=ot();var It=!1;var Lt=null,Pt=(new Date).getTime();var Et=new Map;_t||(_t=new bt);var St=null,Bt=null;function Mt(t=!1){y(St=p(),(_||(_=new b),_)),y(Bt=p(),(wt||(wt=new gt),wt)),t&&y(Bt,(mt||(mt=new vt),mt))}var jt=16,Ot=41,Ct=0,Dt=0;function Gt(t){m(St,t=>{t.onStart()}),m(Bt,t=>{t.onStart()}),t.onStart(),function(t=null){It=!1,Ht=t,setInterval(()=>{Lt=(new Date).getTime(),It||Ht(Lt-Pt),Pt=(new Date).getTime()},Ut.tick)}(n=>{(Ct+=n)>=jt&&(Ct-=jt,t.onUpdate(n),m(St,t=>{t.onUpdate(n)})),(Dt+=n)>=Ot&&(Dt-=Ot,m(Bt,t=>{t.onUpdate(n)}))})}function Rt(t=null){t&&function(t=null,n=null){let e=n&&n.priority?n.priority:0,r=t.head.next;for(;r!=t.tail&&!(e>r.data.priority);)r=r.next;g(t,n,r)}(St,t)}class Wt{constructor(t=0,n=0,e=null){this.rowIndex=t,this.colIndex=n,this.data=e}}class Tt{constructor(t=0,n=0,e=0,r=0,l=null){this.rows=t,this.columns=n,this.gridWidth=e,this.gridHeight=r,this.grids=l}}function zt(t=null){return t.gridWidth}function At(t=null){return t.gridHeight}function Ft(t=null){return t.columns*t.gridWidth}function Xt(t=null){return t.rows*t.gridHeight}class Yt{constructor(t=null,n=0,e=0){this.gridmap=t,this.pos=U(n,e)}}function qt(t=0,n=0,e=0,r=0,l=0,u=0){let i=function(t=0,n=0,e=0,r=0){let l=[];for(let e=0;e<t;e++)for(let t=0;t<n;t++){let n=new Wt(e,t);l.push(n)}return new Tt(t,n,e,r,l)}(t,n,e,r);return new Yt(i,l,u)}function Jt(t=null){return U(t.pos.x-.5*Ft(t.gridmap),t.pos.y-.5*Xt(t.gridmap))}class Kt{constructor(t=0,n=null,e=0,r=null){this.type1=t,this.type2=e,this.team1=n,this.team2=r,this.mask=t|e,this.id=this.mask}}var Nt=new Map;function Qt(t=0){let n=Nt.get(t);return n||(n=new Link,Nt.set(t,n)),n}var Vt=p();class Zt extends ft{constructor(t=null){super(t)}onUpdate(t=0){m(Vt,n=>{n.mask==n.type1?function(t=null,n=null){if(!t||!n)return;t._lock=!0;let e=t.head.next;for(;e!=t.tail;){let r=e.next;for(;r!=t.tail;)n(e.data,r.data),r=r.next;e=e.next}t._lock=!1,t._delList.forEach(n=>{w(t,n)})}(n.team1,(e,r)=>{super.check(t,e,r,n.type1,n.type2)}):m(n.team1,e=>{m(n.team2,r=>{super.check(t,e,r,n.type1,n.type2)})})})}}var $t=null;p();p();p();class tn extends o{onUpdate(t=0){m(pt(),t=>{(function(t=null){if(0==(hn=function(t=0){return F(t).vec}(t.entityId)).x&&0==hn.y)return!1;pn=O(t.rect.rect),xn=C(t.rect.rect);let n=R(t.rect);en=n.x,rn=n.y;let e=W(t.rect);sn=U(e.x-hn.x,e.y-hn.y);let r=T(t.rect);return an=U(r.x-hn.x,r.y-hn.y),ln=r.x,un=e.x,cn=r.y,on=e.y,!0})(t)&&(m(yt(),n=>{!function(t=null,n=null){if(!V(t.rect,n.rect))return;(function(t=null){dn=W(t.rect),fn=T(t.rect)})(n),function(){if(0==hn.x)return!1;if(!function(){let t=N(sn.y,dn.y);return Q(an.y,fn.y)>t}())return!1;return function(){hn.x>0?dn.x<ln&&(ln=dn.x):fn.x>un&&(un=fn.x);return!0}()}()||function(){if(0==hn.y)return!1;if(!function(){let t=N(sn.x,dn.x);return Q(an.x,fn.x)>t}())return!1;(function(){hn.y>0?dn.y<cn&&(cn=dn.y):fn.y>on&&(on=fn.y)})()}()}(t,n)}),function(t=null){let n=0;n=hn.x>0?ln-pn:hn.x<0?un+pn:en;let e=0;e=hn.y>0?cn-xn:hn.y<0?on+xn:rn;Z(t.rect,n,e)}(t))})}}var nn=null;var en=0,rn=0,ln=0,un=0,cn=0,on=0,sn=null,an=null,dn=null,fn=null,hn=null,pn=0,xn=0;var yn={useGroup:!1,pairs:[],useBox:!1,callback:null,sysList:[]};function gn(t=null){yn.useGroup=t.useGroup?t.useGroup:yn.useGroup,yn.pairs=t.pairs?t.pairs:yn.pairs,yn.useBox=t.useBox?t.useBox:yn.useBox,yn.callback=t.callback,yn.useBox&&yn.sysList.push(function(t=null){return nn||(nn=new tn(t)),nn}(t.callback)),yn.useGroup&&(yn.sysList.push(function(t=null){return $t||($t=new Zt(t)),$t}(t.callback)),yn.pairs.forEach(t=>{!function(t=0,n=0){let e=Qt(t),r=Qt(n),l=new Kt(t,e,n,r);y(Vt,l)}(t[0],t[1])})),yn.sysList.forEach(t=>{Rt(t)})}function wn(t=null){!function(t=0,n=0,e=10){let r=document.getElementById("canvas");r.width=t,r.height=n,ct.canvas=r,ct.ctx=r.getContext("2d"),ct.ctx.strokeStyle="#0000ff",ct.fps=e,ct.tick=1e3/e}(t.screen.width,t.screen.height,t.fps),t.keyDownHandler&&t.keyUpHanler&&function(t=null,n=null){window.addEventListener("keydown",n=>{let e=n.keyCode;Et.get(e)||(Et.set(e,1),t(n.keyCode))}),window.addEventListener("keyup",t=>{let e=t.keyCode;Et.delete(e),n(t.keyCode)})}(t.keyDownHandler,t.keyUpHanler),t.mousedownHandler&&t.mouseupHandler&&function(t=null,n=null){Ut.canvas.addEventListener("mousedown",n=>{let e=canvas.getBoundingClientRect(),r=n.clientX-e.left*(canvas.width/e.width),l=n.clientY-e.top*(canvas.height/e.height);t(r,l)}),Ut.canvas.addEventListener("mouseup",t=>{let e=canvas.getBoundingClientRect(),r=t.clientX-e.left*(canvas.width/e.width),l=t.clientY-e.top*(canvas.height/e.height);n(r,l)})}(t.mousedownHandler,t.mouseupHandler),function(t=null,n=null){let e=t.width?t.width:n.width,r=t.height?t.height:n.height;vn=tt(t.x,t.y,e,r)}(t.camera,t.screen),Mt(t.debug),t.tilemap&&function(t=null){(function(t=null,n=null){if(!t||t.columns<=0||!t.data||0==t.data.length||t.gridWidth<=0||t.gridHeight<=0)return null;let e=t.columns,r=parseInt(t.data.length/e);if(r*e!=t.data.length)return console.log("error param: len(grids):",t.data.length," columns:",e),null;let l=qt(r,e,t.gridWidth,t.gridHeight,t.x,t.y);return n&&function(t=null,n=null){t.grids.forEach(t=>{n(t)})}(l.gridmap,r=>{let u=t.data[r.rowIndex*e+r.colIndex];n(u,l,r)}),l})(t,t.initHandler)}(t.tilemap),t.collide&&gn(t.collide)}var vn=null;function mn(){return vn}var kn=Object.assign(r,{debug:!0,collide:{useBox:!0},keyDownHandler:function(t=0){switch(t){case rt:Hn|=8;break;case lt:Hn|=2;break;case ut:Hn|=4;break;case it:Hn|=1}},keyUpHanler:function(t=0){switch(t){case rt:Hn&=7;break;case lt:Hn&=13;break;case ut:Hn&=11;break;case it:Hn&=14}}});kn.tilemap.initHandler=function(t=0,n=null,e=null){let r=function(t=null,n=null){let e=Jt(t);return U(e.x+zt(t.gridmap)*(n.colIndex+.5),e.y+At(t.gridmap)*(n.rowIndex+.5))}(n,e);1==t?function(t=0,n=0,e=0,r=0){!function(t=0,n=null,e=0){let r=new dt(t,n,e);y(xt,r)}((new l).id,G(U(t,n),0,0,E(0,0,e,r)))}(r.x,r.y,zt(n.gridmap),At(n.gridmap)):2==t&&function(t=0,n=0){bn=(new l).id,_n=Y(bn,t,n),function(t=0,n=null,e=0){let r=new dt(t,n,e);y(ht,r)}(bn,G(_n,0,0,E(0,0,25,25)))}(r.x,r.y)};var bn=0,_n=null;var Hn=0;var Un=4;class In{onStart(){}onUpdate(t=0){!function(t=0,n=0,e=0){let r=F(t);r.vec.x=n,r.vec.y=e,r.pos.x+=n,r.pos.y+=e}(bn,1&Hn?Un:2&Hn?-Un:0,4&Hn?Un:8&Hn?-Un:0)}}console.log(kn),function(t,n=null){wn(t),Gt(n)}(kn,new In)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3Bvcy9yZWN0L2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2ZyYW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3Bvcy9jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9jb21wb25lbnQvcG9zL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3ZpZXcvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvbWF0aC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9wb3MvcmVjdC91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9jYW1lcmEvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2VuZ2luZS9oNS9tb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZW5naW5lL2g1L3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L2NvbGxpZGUvYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9jb2xsaWRlL2JveDIvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivc3lzdGVtL21vdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2VuZ2luZS9oNS9wcm9jZXNzb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vcnVuLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZ3JpZG1hcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC90aWxlL3RpbGVtYXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9jb21wb25lbnQvY29sbGlkZS9ncm91cC91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9jb2xsaWRlL2dyb3VwL3N5c3RlbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9jb2xsaWRlL2JveC91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9jb2xsaWRlL25vcm1hbC91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9jb2xsaWRlL2JveDIvc3lzdGVtLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L2NvbGxpZGUvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci93b3JsZC9yZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci93b3JsZC9hZGFwdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvZ2FtZS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImVjc19FbnRpdHkiLCJbb2JqZWN0IE9iamVjdF0iLCJ0aGlzIiwiaWQiLCJOZXdFbnRpdHlJZCIsIkNvbXBvbmVudCIsImVudGl0eUlkIiwiU3lzdGVtIiwicHJpb3JpdHkiLCJkdCIsIkFDVElPTl9TVEFURV9FTkQiLCJhY3Rpb25VcGRhdGUiLCJhY3Rpb24iLCJvblVwZGF0ZSIsImFjdGlvbkVuZCIsInN0YXRlIiwib25FbmQiLCJMaW5rTm9kZSIsImRhdGEiLCJwcmVwIiwibmV4dCIsImxpbmtfTGluayIsImhlYWQiLCJ0YWlsIiwiX21hcCIsIk1hcCIsIl9zaXplIiwiX2RlbExpc3QiLCJfY3VyciIsIl9sb2NrIiwiTmV3TGluayIsIkdldExpbmtEYXRhIiwibGluayIsImtleUlkIiwicmVxdWlyZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJub2RlIiwiUHVzaFRvTGluayIsImFkZFRvTGluayIsInNldCIsIlJlbW92ZUJ5S2V5SWQiLCJwdXNoIiwicmVtb3ZlIiwiZGVsZXRlIiwiTGlua0l0ZXJhdG9yIiwiY2FsbGJhY2siLCJsZW5ndGgiLCJwb3AiLCJhY3Rpb25MaXN0IiwiYWN0aW9uX0FjdGlvblN5c3RlbSIsImlzRW5kIiwiYWN0aW9uX3N5cyIsIlBvcyIsIngiLCJ5IiwiTmV3UG9zIiwiVmVjIiwiZGlzdGFuY2UiLCJOZXdWZWMiLCJSZWN0YW5nbGUiLCJvZmZzZXQiLCJ3aWR0aCIsImhlaWdodCIsImNlbnRlciIsIk5ld1JlY3QiLCJ4T2Zmc2V0IiwieU9mZnNldCIsInJlY3RfR2V0UmVjdFN0YXJ0UG9zIiwicmVjdCIsIkdldFJlY3RIYWxmV2lkdGgiLCJHZXRSZWN0SGFsZkhlaWdodCIsIkdldFJlY3RFbmRQb3MiLCJHZXRSZWN0V2lkdGgiLCJHZXRSZWN0SGVpZ2h0IiwiY29tcG9uZW50X1JlY3RQb3NUdXBsZSIsInVuaXRQb3MiLCJOZXdSZWN0UG9zVHVwbGUiLCJHZXRSZWN0UG9zQ2VudGVyIiwicmVjdFBvc1R1cGxlIiwiR2V0UmVjdFBvc1N0YXJ0IiwicG9zIiwiR2V0UmVjdFBvc0VuZCIsImNvbXBvbmVudF9Qb3NDb21wb25lbnQiLCJzdXBlciIsInZlYyIsInBvc0NvbXMiLCJHZXRQb3NDb21wb25lbnQiLCJjb20iLCJjcmVhdGVQb3NDb21wb25lbnQiLCJHZXRQb3NDb21wb25lbnRMaXN0IiwiU2V0UG9zIiwiR2V0UG9zIiwiZGlzcGxheUxpc3QiLCJBYnMiLCJ2YWwiLCJNYXgiLCJ2YWwxIiwidmFsMiIsIk1pbiIsIklzUmVjdHNDcm9zcyIsInJlY3RQb3NUdXBsZTEiLCJyZWN0UG9zVHVwbGUyIiwicG9zMSIsInBvczIiLCJ1dGlsc19GaXhVbml0UG9zIiwicmVjdFgiLCJyZWN0WSIsInV0aWxzX0NhbWVyYSIsIk5ld0NhbWVyYSIsImNhbWVyYSIsIklzSW5DYW1lcmEiLCJUb1NjcmVlblBvcyIsInRhcmdldFBvcyIsInJlZmVyUG9zIiwiVG9Mb2NhdGVQb3MiLCJLRVlfVyIsIktFWV9BIiwiS0VZX1MiLCJLRVlfRCIsIl9lbmdpbmUiLCJjdHgiLCJjYW52YXMiLCJmcHMiLCJ0aWNrIiwiZ2V0RW5naW5lIiwicmVuZGVyX2VuZ2luZSIsIk1hdGgiLCJQSSIsInV0aWxzX0lzUmVjdHNDcm9zcyIsInJlY3QxIiwicmVjdDIiLCJzdGFydDEiLCJzdGFydDIiLCJlbmQxIiwiZW5kMiIsInIxeDEiLCJyMngxIiwibWF4WDEiLCJyMXgyIiwicjJ4MiIsIm1pblgyIiwicjF5MSIsInIyeTEiLCJtYXhZMSIsInIxeTIiLCJyMnkyIiwibWluWTIiLCJ1dGlsc19OZXdJbm5lclJlY3QiLCJiYXNlX0NvbGxpZGVyIiwidGFnIiwiYmFzZV9Db2xsaWRlclN5c3RlbSIsImNvbGxpZGVyMSIsImNvbGxpZGVyMiIsImJvZHlDb2xsaWRlckxpc3QiLCJHZXRCb2R5Q29sbGlkZXJMaXN0IiwiYmxvY2tDb2xsaWRlckxpc3QiLCJHZXRCbG9ja0NvbGxpZGVyTGlzdCIsInJlbmRlcl9SZW5kZXJVcGRhdGVTeXN0ZW0iLCJjbGVhclJlY3QiLCJjbGVhciIsImRpc3BsYXlUdXBsZSIsIlVwZGF0ZVJlY3RQb3NCeVVuaXQiLCJkaXNwbGF5QXJlYSIsIkdldENhbWVyYSIsInNjcmVlblBvcyIsIkdldFJlY3RTdGFydFBvcyIsInRleHR1cmVBcmVhIiwic3ByaXRlRnJhbWUiLCJpbWdEYXRhIiwic3giLCJzeSIsInN3aWR0aCIsInNoZWlnaHQiLCJkcmF3SW1hZ2UiLCJiaXRtYXBEYXRhIiwiZHJhd0ZyYW1lSW5DYW1lcmEiLCJyZW5kZXJTeXMiLCJyZW5kZXJfRHJhd1JlY3RTeXN0ZW0iLCJjb2xsaWRlciIsImRyYXdSZWN0SW5DYW1lcmEiLCJkZWJ1Z1N5cyIsInN0cm9rZVJlY3QiLCJkcmF3UmVjdCIsIm1vdmVfUG9zVXBkYXRlU3lzdGVtIiwibW92ZUNvbSIsIm1vdmVfc3lzIiwiX2NhbGxiYWNrIiwicHJvY2Vzc29yX2VuZ2luZSIsIl9pc0VuZCIsInByb2Nlc3Nvcl9zdGFydCIsImxhc3QiLCJEYXRlIiwiZ2V0VGltZSIsIl9rZXlEb3duTWFwIiwibG9naWNTeXN0ZW1zIiwicmVuZGVyU3lzdGVtcyIsImluaXRTeXN0ZW1zIiwiZGVidWciLCJsb2dpY1RpY2siLCJyZW5kZXJUaWNrIiwiX3QxIiwiX3QyIiwicnVuV2l0aFNjZW5lIiwic2NlbmUiLCJzeXN0ZW0iLCJvblN0YXJ0Iiwib25VcGRhdGVDYWxsYmFjayIsInNldEludGVydmFsIiwicnVuVGljayIsIkFkZFN5c3RlbSIsIkluc2VydFRvTGluayIsIkdyaWQiLCJyb3dJbmRleCIsImNvbEluZGV4IiwiR3JpZE1hcCIsInJvd3MiLCJjb2x1bW5zIiwiZ3JpZFdpZHRoIiwiZ3JpZEhlaWdodCIsImdyaWRzIiwiR2V0R3JpZFdpZHRoIiwiZ3JpZG1hcCIsIkdldEdyaWRIZWlnaHQiLCJHZXRHcmlkTWFwV2lkdGgiLCJHZXRHcmlkTWFwSGVpZ2h0IiwidGlsZW1hcF9UaWxlTWFwIiwiTmV3VGlsZU1hcCIsImdyaWQiLCJOZXdHcmlkTWFwIiwiR2V0VGlsZW1hcFN0YXJ0IiwidGlsZW1hcCIsIkdyb3VwUGFpciIsInR5cGUxIiwidGVhbTEiLCJ0eXBlMiIsInRlYW0yIiwibWFzayIsInRlYW1zIiwiZ2V0VGVhbSIsInR5cGUiLCJ0ZWFtIiwiTGluayIsInBhaXJzIiwic3lzdGVtX0dyb3VwQ29sbGlkZXJTeXN0ZW0iLCJwYWlyIiwib3V0Tm9kZSIsImluTm9kZSIsImZvckVhY2giLCJMaW5rQ29tcGFyZSIsImNoZWNrIiwic3lzdGVtX3N5cyIsInN5c3RlbV9Cb3hDb2xsaWRlclN5c3RlbSIsImJvZHkiLCJib2R5Q29sbGlkZXIiLCJ1bml0VmVjIiwiR2V0VmVjIiwiYm9keUhhbGZXaWR0aCIsImJvZHlIYWxmSGVpZ2h0IiwiYm9keVgiLCJib2R5WSIsInN0YXJ0IiwibGFzdEJvZHlTdGFydCIsImVuZCIsImxhc3RCb2R5RW5kIiwibWluWCIsIm1heFgiLCJtaW5ZIiwibWF4WSIsImJvZHlCZWZvcmUiLCJibG9jayIsImJsb2NrQ29sbGlkZXIiLCJibG9ja1N0YXJ0IiwiYmxvY2tFbmQiLCJibG9ja0JlZm9yZSIsImNoZWNrVkVkZ2UiLCJtaW5EaXN0YW5jZVgiLCJpc0xSIiwiY2hlY2tIRWRnZSIsIm1pbkRpc3RhbmNlWSIsImlzVUQiLCJsb2dpYyIsImJvZHlBZnRlciIsImJveENvbGxpZGVyU3lzIiwiY2ZnIiwidXNlR3JvdXAiLCJ1c2VCb3giLCJzeXNMaXN0IiwiT3BlbkNvbGxpZGVyIiwib3B0aW9ucyIsIkdldEJveENvbGxpZGVyU3lzdGVtIiwiR2V0R3JvdXBDb2xsaWRlclN5c3RlbSIsIkFkZEdyb3VwUGFpciIsInN5cyIsImluaXRHYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJzdHJva2VTdHlsZSIsImluaXRDYW52YXMiLCJzY3JlZW4iLCJrZXlEb3duSGFuZGxlciIsImtleVVwSGFubGVyIiwia2V5RG93bkNhbGxiYWNrIiwia2V5VXBDYWxsYmFjayIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29kZSIsImtleUNvZGUiLCJvbktleUNhbGxiYWNrIiwibW91c2Vkb3duSGFuZGxlciIsIm1vdXNldXBIYW5kbGVyIiwibW91c2Vkb3duQ2FsbGJhY2siLCJtb3VzZXVwQ2FsbGJhY2siLCJldmVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNsaWVudFgiLCJsZWZ0IiwiY2xpZW50WSIsInRvcCIsIm9uTW91c2VDYWxsYmFjayIsImNhbWVyYURhdGEiLCJzY3JlZW5EYXRhIiwicmVzX2NhbWVyYSIsImluaXRDYW1lcmEiLCJ0aWxlbWFwRGF0YSIsImluaXRIYW5kbGVyIiwicGFyc2VJbnQiLCJsb2ciLCJJdGVyYXRvckdyaWRtYXAiLCJjcmVhdGVUaWxlTWFwV2l0aERhdGEiLCJpbml0VGlsZSIsImNvbGxpZGUiLCJtYWluX29wdGlvbnMiLCJhc3NpZ24iLCJrZXlzIiwiR2V0R3JpZENlbnRlciIsIkFkZEJsb2NrQ29sbGlkZXIiLCJOZXdCbG9jayIsInBseUlkIiwicGx5UG9zIiwiQWRkQm9keUNvbGxpZGVyIiwiTmV3UGxheWVyIiwibWFpbl9NeVNjZW5lIiwiZHgiLCJkeSIsIk1vdmUiLCJTdGFydFRlc3QiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVB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LEVBQWVqRixHQUM3QmtGLEVBQUFILElBQUEvQixFQUFBbVMsRUFDQWpRLEVBQUFILElBQUE5QixFQUFBbVMsRUFDQWxRLEVBQUFQLElBQUEzQixHQUFBbVMsRUFDQWpRLEVBQUFQLElBQUExQixHQUFBbVMsRXdCNkVRQyxDQUFJUCxHQWZaLEVBQUFKLEdBQ2MxVyxHQUNMLEVBQUEwVyxJQUNLMVcsR0FFQSxFQUdkLEVBQUEwVyxHQUNjMVcsR0FDTCxFQUFBMFcsSUFDSzFXLEdBRUEsSUFRZDZELFFBQUFzUyxJQUFnQkssSUN0RWhCLFNBQUE3QyxFQUFBckYsRUFBQSxNQUNJMEYsR0FBUUwsR0FDUnRGLEdBQVlDLEdEcUVaZ0osQ0FBVWQsR0FBTyxJQUFNVSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvKipcclxuICogMjAxOS4xMC4xMFxyXG4gKiBcdOazqOaEj++8jGxpbmstaW50ZXJmYWNl77yM6ZyA6KaB5pyJaWQsIHByaW9yaXR55Lik5Liq5bGe5oCnXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4qICAgVGhlIEJhc2UgU3RydWN0XHJcbipcdOWwveeuoeaIkeS7rOWPqumcgOimgU5ld0VudGl0eUlkKCnvvIzkvYbmmK/miYDmnInpnIDopoFpZOeahOexu+mDveimgee7p+aJv+atpOexu1xyXG4qL1xyXG5jbGFzcyBFbnRpdHkge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5pZCA9IE5ld0VudGl0eUlkKCk7XHJcblx0fVxyXG59XHJcblxyXG52YXIgaWQgPSAxO1xyXG5mdW5jdGlvbiBOZXdFbnRpdHlJZCgpe1xyXG5cdHJldHVybiBpZCsrO1xyXG59XHJcblxyXG4vKipcclxuKlx0VGhlIGJhc2UgQ29tcG9uZW50XHJcbipcdOavj+S4qmVudGl0eeWvueavj+enjee7hOS7tuWPquiDveaMgeacieS4gOS4qlxyXG4qL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG5cdGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCkge1xyXG5cdFx0dGhpcy5lbnRpdHlJZCA9IGVudGl0eUlkO1xyXG5cdFx0dGhpcy5pZCA9IGVudGl0eUlkO1x0XHRcdC8v57uZbGlua+S9v+eUqFxyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuehgOWFg+S7tlxyXG4gKiBUT0RPIOaaguaXtuayoeS7gOS5iOeUqFxyXG4gKi9cclxuY2xhc3MgVHVwbGUge1xyXG5cdGNvbnN0cnVjdG9yKHByaW9yaXR5ID0gMCl7XHJcblx0XHR0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHQvL+e7mWxpbmvkvb/nlKhcclxuXHRcdHRoaXMuaWQgPSBOZXdFbnRpdHlJZCgpO1x0Ly/nu5lsaW5r5L2/55SoXHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuKlx0VGhlIGJhc2UgU3lzdGVtXHJcbiovXHJcbmNsYXNzIFN5c3RlbSB7XHJcblx0Y29uc3RydWN0b3IocHJpb3JpdHkgPSAwKXtcclxuXHRcdHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcdC8v57uZbGlua+S9v+eUqFxyXG5cdFx0dGhpcy5pZCA9IE5ld0VudGl0eUlkKCk7XHJcblx0fVxyXG4gICAgb25TdGFydCgpe31cclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7fVxyXG4gICAgb25FbmQoKXt9XHJcbn1cclxuXHJcbmV4cG9ydCB7RW50aXR5LCBDb21wb25lbnQsIFR1cGxlLCBTeXN0ZW19IiwiaW1wb3J0IHsgVHVwbGUgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCJcclxuXHJcbmNvbnN0IEFDVElPTl9TVEFURV9SVU5OSU5HID0gMTtcclxuY29uc3QgQUNUSU9OX1NUQVRFX0VORCA9IDI7XHJcblxyXG4vKipcclxuKiAgIGFjdGlvbuaooeWdl+eahOiuvuiuoeeQhuW/teaYr++8mlxyXG4qICAgICAgIOe7meetluWIkuS6uuWRmOaTjeS9nOeahOWKqOaAgemFjee9ru+8jOeUsWpzb27pqbHliqjvvIhkYXRhLWRyaXZlbu+8ie+8jOWGjeeUseiEmuacrOezu+e7n+eUn+aIkOS4uumdmeaAgeS7o+eggVxyXG4qICAg55uu5YmN5YWI55So56a75pWj6YWN572u5Luj5pu/XHJcblxyXG4qICAg55Sf5ZG95ZGo5pyf566h55CGXHJcbiAgICAgICAgb25TdGFydCAtPiDliJ3lp4vljJbvvIznlLF1dGlscy5SdW5BY3Rpb27op6blj5FcclxuICAgICAgICBvblVwZGF0ZSAtPiDnlLFzeXN0ZW3kuLvmtYHnqIvosIPnlKjvvIzlj6rmiafooYzkuLvpgLvovpHvvIzkuI3pnIDopoHliKTmlq3nu4jmraLmnaHku7ZcclxuICAgICAgICBpc0VuZDog55Sxc3lzdGVt5Zyo5omn6KGMb25VcGRhdGXlkI7orr/pl67vvIzov5Tlm55ib29s77yM5Yaz5a6a5piv5ZCm6L6+5Yiw57uI5q2i5p2h5Lu25LqG77yM6L+U5ZuedHJ1ZeWImeihqOekuuWPr+S7pee7iOatouatpGFjdGlvblxyXG4gICAgICAgIG9uRW5kOiDlnKhzeXN0ZW3or7fmsYJpc0VuZD10cnVl5ZCO6LCD55So77yM55So5LqO5pS25bC+77yM5aaC6LWE5rqQ5Zue5pS2XHJcbiAgICAgICAgb25TdG9wOiDnlLF1dGlscy5TdG9wQWN0aW9u6Kem5Y+R77yM5by65Yi25Lit5pat77yM5LiN6LWwaXNFbmTmtYHnqIvvvIzpu5jorqTosIPnlKhvbkVuZO+8jOWboOatpOagueaNruaDheWGteWPr+iDvemcgOimgemineWkluWkhOeQhlxyXG4qL1xyXG5jbGFzcyBBY3Rpb24gZXh0ZW5kcyBUdXBsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDAsIHByaW9yaXR5ID0gMCl7XHJcbiAgICAgICAgc3VwZXIocHJpb3JpdHkpO1xyXG4gICAgICAgIHRoaXMuZW50aXR5SWQgPSBlbnRpdHlJZDsgICAvL+aJgOWxnuiAhVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBBQ1RJT05fU1RBVEVfRU5EO1xyXG4gICAgfVxyXG4gICAgLy8gb25TdGFydCgpe31cclxuICAgIC8vIG9uVXBkYXRlKGR0ID0gMCl7fVxyXG4gICAgLy8gb25FbmQoKXt9XHJcbiAgICBpc0VuZCgpeyAgICByZXR1cm4gZmFsc2U7ICAgIH1cclxuICAgIG9uU3RvcCgpeyAgIHRoaXMub25FbmQoKTsgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBhY3Rpb25TdGFydChhY3Rpb24gPSBudWxsKXtcclxuICAgIGFjdGlvbi5zdGF0ZSA9IEFDVElPTl9TVEFURV9SVU5OSU5HO1xyXG4gICAgYWN0aW9uLm9uU3RhcnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aW9uVXBkYXRlKGFjdGlvbiA9IG51bGwsIGR0ID0gMCl7XHJcbiAgICBhY3Rpb24ub25VcGRhdGUoZHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3Rpb25FbmQoYWN0aW9uID0gbnVsbCl7XHJcbiAgICBhY3Rpb24uc3RhdGUgPSBBQ1RJT05fU1RBVEVfRU5EO1xyXG4gICAgYWN0aW9uLm9uRW5kKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGlvblN0b3AoYWN0aW9uID0gbnVsbCl7XHJcbiAgICBhY3Rpb24uc3RhdGUgPSBBQ1RJT05fU1RBVEVfRU5EO1xyXG4gICAgYWN0aW9uLm9uU3RvcCgpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNTdGFydChhY3Rpb24gPSBudWxsKXtcclxuICAgIHJldHVybiBhY3Rpb24uc3RhdGUgPT0gQUNUSU9OX1NUQVRFX1JVTk5JTkc7XHJcbn1cclxuZnVuY3Rpb24gaXNTdG9wKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGFjdGlvbi5zdGF0ZSA9PSBBQ1RJT05fU1RBVEVfRU5EO1xyXG59XHJcblxyXG5leHBvcnQge0FjdGlvbiwgYWN0aW9uU3RhcnQsIGFjdGlvblVwZGF0ZSwgYWN0aW9uRW5kLCBhY3Rpb25TdG9wLCBpc1N0YXJ0LCBpc1N0b3B9IiwiY2xhc3MgTGlua05vZGUge1xyXG5cdGNvbnN0cnVjdG9yKGRhdGEgPSBudWxsLCBwcmVwID0gbnVsbCwgbmV4dCA9IG51bGwpIHtcclxuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XHJcblx0XHR0aGlzLnByZXAgPSBwcmVwO1xyXG4gICAgICAgIHRoaXMubmV4dCA9IG5leHQ7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBMaW5rIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuaGVhZCA9IG5ldyBMaW5rTm9kZSgpO1x0XHQvL2VtcHR5IGRhdGEgbm9kZVxyXG5cdFx0dGhpcy50YWlsID0gbmV3IExpbmtOb2RlKCk7XHJcblx0XHR0aGlzLmhlYWQubmV4dCA9IHRoaXMudGFpbDtcclxuXHRcdHRoaXMudGFpbC5wcmVwID0gdGhpcy5oZWFkO1xyXG5cdFx0dGhpcy5fbWFwID0gbmV3IE1hcCgpO1xyXG5cdFx0dGhpcy5fc2l6ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZGVsTGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2N1cnIgPSB0aGlzLmhlYWQ7XHJcbiAgICAgICAgdGhpcy5fbG9jayA9IGZhbHNlO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3TGluaygpe1xyXG4gICAgcmV0dXJuIG5ldyBMaW5rKCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog6I635Y+WXHJcbiAqL1xyXG5mdW5jdGlvbiBHZXRMaW5rRGF0YShsaW5rID0gbnVsbCwga2V5SWQgPSAwLCByZXF1aXJlZCA9IGZhbHNlKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImxpbmsgaXMgbnVsbC5cIik7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsuX21hcC5nZXQoa2V5SWQpO1xyXG4gICAgaWYobm9kZSl7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YTtcclxuICAgIH1cclxuICAgIGlmKHJlcXVpcmVkKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiY2FuJ3QgZmluZCBrZXlJZDogXCIsIGtleUlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRMaW5rU2l6ZShsaW5rID0gbnVsbCl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHJldHVybiBsaW5rLl9zaXplO1xyXG59XHJcblxyXG4vKipcclxuICog5re75Yqg5Yiw5pyr5bC+XHJcbiAqL1xyXG5mdW5jdGlvbiBQdXNoVG9MaW5rKGxpbmsgPSBudWxsLCBkYXRhID0gbnVsbCkge1xyXG4gICAgcmV0dXJuIGFkZFRvTGluayhsaW5rLCBkYXRhLCBsaW5rLnRhaWwpO1xyXG59XHJcblxyXG4vKipcclxuICog5o+S5YWl5Yiw5YiX6KGo5LitXHJcbiAqIGRhdGEucHJpb3JpdHnpobrluo/lj7fvvIznlLHlpKfliLDlsI/mjpLluo/vvIzpu5jorqTkuLowXHJcbiAqL1xyXG5mdW5jdGlvbiBJbnNlcnRUb0xpbmsobGluayA9IG51bGwsIGRhdGEgPSBudWxsKXtcclxuICAgIGxldCBwcmlvcml0eSA9IGRhdGEgJiYgZGF0YS5wcmlvcml0eSA/IGRhdGEucHJpb3JpdHkgOiAwO1xyXG4gICAgbGV0IG5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuXHR3aGlsZShub2RlICE9IGxpbmsudGFpbCl7XHJcbiAgICAgICAgaWYocHJpb3JpdHkgPiBub2RlLmRhdGEucHJpb3JpdHkpe1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblx0XHRub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFkZFRvTGluayhsaW5rLCBkYXRhLCBub2RlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9MaW5rKGxpbmsgPSBudWxsLCBkYXRhID0gbnVsbCwgbmV4dCA9IG51bGwpe1xyXG4gICAgaWYoIWxpbmsgfHwgIWRhdGEgfHwgIWRhdGEuaWQpe1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiZXJyb3IgcGFyYW06IFwiLCBsaW5rLCBkYXRhLCBkYXRhLmlkKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8v5LiN6IO96YeN5aSN5re75YqgXHJcbiAgICBpZihsaW5rLl9tYXAuZ2V0KGRhdGEuaWQpKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiZXJyb3IgaWQ6JWQgaXMgZXhpc3RcIiwgZGF0YS5pZCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvL+aWsOiKgueCuei/nuaOpVxyXG4gICAgbGV0IHByZXAgPSBuZXh0LnByZXA7XHJcbiAgICBsZXQgbm9kZSA9IG5ldyBMaW5rTm9kZShkYXRhLCBwcmVwLCBuZXh0KTtcclxuICAgIHByZXAubmV4dCA9IG5vZGU7XHJcbiAgICBuZXh0LnByZXAgPSBub2RlO1xyXG5cclxuICAgIGxpbmsuX21hcC5zZXQoZGF0YS5pZCwgbm9kZSk7XHJcbiAgICBsaW5rLl9zaXplKys7XHJcbiAgICByZXR1cm4gbm9kZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWIoOmZpFxyXG4gKi9cclxuZnVuY3Rpb24gUmVtb3ZlQnlLZXlJZChsaW5rID0gbnVsbCwga2V5SWQgPSAwKXtcclxuICAgIGlmKCFsaW5rIHx8IGtleUlkPT0wKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvciBwYXJhbTogXCIsIGxpbmssIGtleUlkKTtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmKGxpbmsuX2xvY2spe1xyXG4gICAgICAgIGxpbmsuX2RlbExpc3QucHVzaChrZXlJZCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlKGxpbmssIGtleUlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlKGxpbmsgPSBudWxsLCBrZXlJZCA9IDApe1xyXG4gICAgbGV0IG5vZGUgPSBsaW5rLl9tYXAuZ2V0KGtleUlkKTtcclxuICAgIGlmKCFub2RlKXtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsaW5rLl9tYXAuZGVsZXRlKGtleUlkKTtcclxuICAgIGxldCBwID0gbm9kZS5wcmVwO1xyXG4gICAgbGV0IG4gPSBub2RlLm5leHQ7XHJcbiAgICBwLm5leHQgPSBuO1xyXG4gICAgbi5wcmVwID0gcDtcclxuICAgIGxpbmsuX3NpemUtLTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOi9ruivoiwgY2FsbGJhY2sgPSBmdW5jdGlvbig8PyBleHRlbmRzIGVudGl0eT4pe31cclxuICovXHJcbmZ1bmN0aW9uIExpbmtJdGVyYXRvcihsaW5rID0gbnVsbCwgY2FsbGJhY2sgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rIHx8ICFjYWxsYmFjaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxpbmsuX2xvY2sgPSB0cnVlO1xyXG4gICAgbGV0IG5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuXHR3aGlsZShub2RlICE9IGxpbmsudGFpbCl7XHJcblx0XHRpZihjYWxsYmFjayhub2RlLmRhdGEpKXtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cdFx0bm9kZSA9IG5vZGUubmV4dDtcclxuICAgIH1cclxuICAgIHdoaWxlKGxpbmsuX2RlbExpc3QubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgcmVtb3ZlKGxpbmssIGxpbmsuX2RlbExpc3QucG9wKCkpO1xyXG4gICAgfVxyXG4gICAgbGluay5fbG9jayA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRGaXJzdChsaW5rID0gbnVsbCl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBub2RlID0gbGluay5oZWFkLm5leHQ7XHJcbiAgICBpZihub2RlKXtcclxuICAgICAgICByZXR1cm4gbm9kZS5kYXRhXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0TGFzdChsaW5rID0gbnVsbCl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBub2RlID0gbGluay50YWlsLnByZXA7XHJcbiAgICBpZihub2RlKXtcclxuICAgICAgICByZXR1cm4gbm9kZS5kYXRhXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWwhuWIl+ihqOS4reeahOWFg+e0oOS4pOS4pOWvueavlO+8jGNhbGxiYWNrID0gZnVuY3Rpb24oPD8gZXh0ZW5kcyBlbnRpdHkgb3IgY29tcG9uZW50PiBmcm9udCwgbmV4dCl7fVxyXG4gKi9cclxuZnVuY3Rpb24gTGlua0NvbXBhcmUobGluayA9IG51bGwsIGNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICBpZighbGluayB8fCAhY2FsbGJhY2spIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsaW5rLl9sb2NrID0gdHJ1ZTtcclxuICAgIGxldCBvdXROb2RlID0gbGluay5oZWFkLm5leHQ7XHJcbiAgICB3aGlsZShvdXROb2RlICE9IGxpbmsudGFpbCl7XHJcbiAgICAgICAgbGV0IGluTm9kZSA9IG91dE5vZGUubmV4dDtcclxuICAgICAgICB3aGlsZShpbk5vZGUgIT0gbGluay50YWlsKXtcclxuICAgICAgICAgICAgY2FsbGJhY2sob3V0Tm9kZS5kYXRhLCBpbk5vZGUuZGF0YSk7XHJcbiAgICAgICAgICAgIGluTm9kZSA9IGluTm9kZS5uZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBvdXROb2RlID0gb3V0Tm9kZS5uZXh0O1xyXG4gICAgfVxyXG4gICAgbGluay5fbG9jayA9IGZhbHNlO1xyXG4gICAgbGluay5fZGVsTGlzdC5mb3JFYWNoKGtleUlkID0+IHtcclxuICAgICAgICBSZW1vdmVCeUtleUlkKGxpbmssIGtleUlkKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQge0xpbmssIExpbmtOb2RlLCBOZXdMaW5rLCBHZXRGaXJzdCwgR2V0TGFzdCwgR2V0TGlua0RhdGEsIEdldExpbmtTaXplLCBQdXNoVG9MaW5rLCBJbnNlcnRUb0xpbmssIFJlbW92ZUJ5S2V5SWQsIExpbmtJdGVyYXRvciwgTGlua0NvbXBhcmV9IiwiaW1wb3J0IHsgaXNTdG9wLCBpc1N0YXJ0LCBhY3Rpb25TdGFydCwgYWN0aW9uU3RvcCB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIFJlbW92ZUJ5S2V5SWQsIE5ld0xpbmsgfSBmcm9tICcuLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rJztcclxuXHJcblxyXG52YXIgYWN0aW9uTGlzdCA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gR2V0UnVubmlnQWN0aW9uTGlzdCgpe1xyXG4gICAgcmV0dXJuIGFjdGlvbkxpc3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDov5DooYxhY3Rpb27vvIzlubbliqDlhaXliLBhY3Rpb27ns7vnu59saW5r5Lit77yM5LiA6Iis5L6b5aSW6YOo6LCD55SoIFxyXG4gKi9cclxuZnVuY3Rpb24gUnVuQWN0aW9uKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgaWYoaXNTdG9wKGFjdGlvbikpe1xyXG4gICAgICAgIGFjdGlvblN0YXJ0KGFjdGlvbik7XHJcbiAgICAgICAgUHVzaFRvTGluayhhY3Rpb25MaXN0LCBhY3Rpb24sIGFjdGlvbi5pZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDnq4vljbPnu4jmraJhY3Rpb27lubbnp7vlh7phY3Rpb27ns7vnu59saW5r77yM5LiA6Iis5L6b5aSW6YOo6LCD55SoXHJcbiAqL1xyXG5mdW5jdGlvbiBTdG9wQWN0aW9uKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgaWYoaXNTdGFydChhY3Rpb24pKXtcclxuICAgICAgICBhY3Rpb25TdG9wKGFjdGlvbik7XHJcbiAgICAgICAgUmVtb3ZlQnlLZXlJZChhY3Rpb25MaXN0LCBhY3Rpb24uaWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0dldFJ1bm5pZ0FjdGlvbkxpc3QsIFJ1bkFjdGlvbiwgU3RvcEFjdGlvbn0iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IEdldFJ1bm5pZ0FjdGlvbkxpc3QgfSBmcm9tIFwiLi4vLi4vYWN0aW9uL3V0aWxzXCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IGFjdGlvblVwZGF0ZSwgYWN0aW9uRW5kIH0gZnJvbSBcIi4uLy4uL2FjdGlvbi9iYXNlXCI7XHJcblxyXG4vKipcclxuICog5Yqo5L2c57O757ufXHJcbiAqL1xyXG5jbGFzcyBBY3Rpb25TeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xyXG4gICAgb25VcGRhdGUoZHQgPSAwKSB7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldFJ1bm5pZ0FjdGlvbkxpc3QoKSwgYWN0aW9uID0+IHtcclxuICAgICAgICAgICAgYWN0aW9uVXBkYXRlKGFjdGlvbiwgZHQpO1xyXG4gICAgICAgICAgICBpZihhY3Rpb24uaXNFbmQoKSl7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25FbmQoYWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgc3lzID0gbnVsbDtcclxuZnVuY3Rpb24gR2V0QWN0aW9uU3lzdGVtKCl7XHJcbiAgICBpZighc3lzKXtcclxuICAgICAgICBzeXMgPSBuZXcgQWN0aW9uU3lzdGVtKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3lzO1xyXG59XHJcblxyXG5leHBvcnR7R2V0QWN0aW9uU3lzdGVtfSIsIi8qKlxyXG4gKiDln7rnoYAyROWdkOagh1xyXG4gKi9cclxuY2xhc3MgUG9zIHtcclxuICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdQb3MoeCA9IDAsIHkgPSAwKXtcclxuICAgIHJldHVybiBuZXcgUG9zKHgsIHkpO1xyXG59XHJcblxyXG4vKipcclxuICog6K6h566X55u45a+55Z2Q5qCHXHJcbiAqIOS7pXRhcmdldFBvc+S4uuWHhu+8jOiuoeeul3JlZmVyUG9z5LqOdGFyZ2V0UG9z55qE55u45a+55Z2Q5qCHXHJcbiAqIOS4vuS+i++8mlxyXG4gKiAgICAgIOaRhOWDj+acuuS9jeS6jig1MCwgNTAp5aSE77yMcmVmZXJQb3NcclxuICogICAgICDljZXkvY1B5L2N5LqOKDEyMCwgMzAp5aSE77yMdGFyZ2V0UG9zXHJcbiAqICAgICAg6YKj5LmI77yM5Y2V5L2NQeWcqOaRhOWDj+acuueahCgxMjAtNTAsIDMwLTUwKeWkhFxyXG4gKi9cclxuZnVuY3Rpb24gVG9Mb2NhdGVQb3ModGFyZ2V0UG9zID0gbnVsbCwgcmVmZXJQb3MgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgdGFyZ2V0UG9zLnggLSByZWZlclBvcy54LFxyXG4gICAgICAgIHRhcmdldFBvcy55IC0gcmVmZXJQb3MueSk7XHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIFRvTG9jYXRlWCh0YXJnZXRYID0gMCwgcmVmZXJYID0gMCl7XHJcbi8vICAgICByZXR1cm4gdGFyZ2V0WCAtIHJlZmVyWDtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gVG9Mb2NhdGVZKHRhcmdldFkgPSAwLCByZWZlclkgPSAwKXtcclxuLy8gICAgIHJldHVybiB0YXJnZXRZIC0gcmVmZXJZO1xyXG4vLyB9XHJcblxyXG5cclxuLyoqXHJcbiAqIOWfuuehgOWQkemHj1xyXG4gKiBkaXN0YW5jZTog6Led56a757O75pWw77yM5rOo5oSP5LiN5piv5a6e6ZmF6Led56a777yM5Y+q55So5LqO5q+U6L6D6Led56a75aSn5bCPXHJcbiAqL1xyXG5jbGFzcyBWZWMge1xyXG4gICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwKXtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IHggKiB4ICsgeSAqIHk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld1ZlYyh4ID0gMCwgeSA9IDApe1xyXG4gICAgcmV0dXJuIG5ldyBWZWMoeCwgeSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld1ZlY1dpdGhQb3MoeDEgPSAwLCB5MSA9IDAsIHgyID0gMCwgeTIgPSAwKXtcclxuICAgIHJldHVybiBuZXcgTmV3VmVjKHgyIC0geDEsIHkyIC0geTEpO1xyXG59XHJcblxyXG4vKipcclxuICog6Led56a757O75pWwXHJcbiAqIOazqOaEj++8jOW5tumdnuWunumZhei3neemu+WAvO+8jOWboOS4uuW8gOagueWPt+iuoeeul+a2iOiAl+Wkp1xyXG4gKiDoi6Xlj6rnlKjkuo7lr7nmr5TlpKflsI/vvIzmraTns7vmlbDljbPlj69cclxuICovXHJcbmZ1bmN0aW9uIEdldERpc3RhbmNlKHZlYyA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHZlYy5kaXN0YW5jZTtcclxufVxyXG5cclxuZXhwb3J0IHtOZXdQb3MsIFRvTG9jYXRlUG9zLFxyXG4gICAgTmV3VmVjLCBOZXdWZWNXaXRoUG9zLCBHZXREaXN0YW5jZX0iLCJpbXBvcnQgeyBOZXdQb3MsIE5ld1ZlYyB9IGZyb20gXCIuL3BvaW50XCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIDJE5Z+656GA55+p5b2i77yM55Sx5Y+C6ICD5Z2Q5qCH77yM5YGP56e76YeP77yM5a696auY57uE5oiQXHJcbiAqIOS9jee9ruaYr+agueaNruebuOWvueWdkOagh+eul+WHuuadpVxyXG4gKiB4T2Zmc2V0LCB5T2Zmc2V0IDog55u45a+55Z2Q5qCH5YGP56e76YePXHJcbiAqIHdpZHRoLCBoZWlnaHQgOiDlrr3pq5hcclxuICogY2VudGVyIDog5a6e6ZmF5L2N572u77yI55+p5b2i5Lit5b+D77yJ77yM5YaF6YOo5L2/55So77yMY2VudGVyID0gdW5pdC5wb3MgKyByZWN0Lm9mZnNldFxyXG4gKi9cclxuY2xhc3MgUmVjdGFuZ2xlIHtcclxuICAgIGNvbnN0cnVjdG9yKG9mZnNldCA9IG51bGwsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCwgY2VudGVyID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOefqeW9oum7mOiupOWxheS4reS6jm93bmVyXHJcbiAqIOatpOaWueazleS4gOiIrOeUsWNvbGxpZGVy6LCD55SoXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdSZWN0KHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGlmKHdpZHRoPT0wIHx8IGhlaWdodD09MCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgb2Zmc2V0ID0gTmV3VmVjKHhPZmZzZXQsIHlPZmZzZXQpO1xyXG4gICAgcmV0dXJuIG5ldyBSZWN0YW5nbGUob2Zmc2V0LCB3aWR0aCwgaGVpZ2h0LCBOZXdQb3MoKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmm7TmlrDlvZPliY3nn6nlvaLlsZ7mgKfvvIjkvY3nva7jgIHlgY/np7vph4/jgIHlpKflsI/nrYnvvInvvIzlkI7pnaLmiYDmnInmtonlj4rnn6nlvaLorqHnrpfnmoTlh73mlbDvvIzpg73lv4Xpobvlu7rnq4vlnKjlt7Lmm7TmlrDkuobnu53lr7nlnZDmoIfnmoTnn6nlvaLnmoTln7rnoYDkuYvkuIpcclxuICogeCwgeeaYr+e7neWvueWdkOagh1xyXG4gKi9cclxuZnVuY3Rpb24gVXBkYXRlUmVjdFNpemUocmVjdCA9IG51bGwsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICByZWN0LndpZHRoID0gd2lkdGg7XHJcbiAgICByZWN0LmhlaWdodCA9IGhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBVcGRhdGVSZWN0T2Zmc2V0KHJlY3QgPSBudWxsLCB4T2Zmc2V0ID0gMCwgeU9mZnNldCA9IDApe1xyXG4gICAgcmVjdC5vZmZzZXQueCA9IHhPZmZzZXQ7XHJcbiAgICByZWN0Lm9mZnNldC55ID0geU9mZnNldDtcclxufVxyXG5cclxuZnVuY3Rpb24gVXBkYXRlUmVjdENlbnRlclBvcyhyZWN0ID0gbnVsbCwgeCA9IDAsIHkgPSAwKXtcclxuICAgIHJlY3QuY2VudGVyLnggPSB4O1xyXG4gICAgcmVjdC5jZW50ZXIueSA9IHk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmoLnmja7miYDlsZ7ljZXkvY3nmoTkvY3nva7mm7TmlrDnn6nlvaLkvY3nva7vvIjkuIDoiKzlnLrmma/osIPnlKjvvIlcclxuICovXHJcbmZ1bmN0aW9uIFVwZGF0ZVJlY3RQb3NCeVVuaXQocmVjdCA9IG51bGwsIHVuaXRQb3NYID0gMCwgdW5pdFBvc1kgPSAwKXtcclxuICAgIHJlY3QuY2VudGVyLnggPSB1bml0UG9zWCArIHJlY3Qub2Zmc2V0Lng7XHJcbiAgICByZWN0LmNlbnRlci55ID0gdW5pdFBvc1kgKyByZWN0Lm9mZnNldC55O1xyXG59XHJcblxyXG4vKipcclxuICog5Y+N5ZCR5L+u5aSNdW5pdOS9jee9ru+8iGZpeEluUmVjdOiwg+eUqO+8iVxyXG4gKi9cclxuZnVuY3Rpb24gRml4VW5pdFBvcyhyZWN0ID0gbnVsbCwgdW5pdFBvcyA9IG51bGwpe1xyXG4gICAgdW5pdFBvcy54ID0gcmVjdC5jZW50ZXIueCAtIHJlY3Qub2Zmc2V0Lng7XHJcbiAgICB1bml0UG9zLnkgPSByZWN0LmNlbnRlci55IC0gcmVjdC5vZmZzZXQueTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDnn6nlvaLlkITkuKrngrnkvY3nva7lkozlj4LmlbDvvIzorrDkvY/opoHlnKh1cGRhdGXlkI7lho3osIPnlKjvvIzku6XlhY3mlbDmja7mnInor69cclxuICovXHJcbmZ1bmN0aW9uIEdldFJlY3RPZmZzZXRWZWMocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3Qub2Zmc2V0O1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RDZW50ZXJQb3MocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3QuY2VudGVyO1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RTdGFydFBvcyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHJlY3QuY2VudGVyLnggLSBHZXRSZWN0SGFsZldpZHRoKHJlY3QpLFxyXG4gICAgICAgIHJlY3QuY2VudGVyLnkgLSBHZXRSZWN0SGFsZkhlaWdodChyZWN0KVxyXG4gICAgKTtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0RW5kUG9zKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueCArIEdldFJlY3RIYWxmV2lkdGgocmVjdCksXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueSArIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3QpXHJcbiAgICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRSZWN0V2lkdGgocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3Qud2lkdGg7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdEhlaWdodChyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5oZWlnaHQ7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdEhhbGZXaWR0aChyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC53aWR0aCAqIDAuNTtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0SGFsZkhlaWdodChyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5oZWlnaHQgKiAwLjU7XHJcbn1cclxuXHJcblxyXG4vL+axgumdouenr1xyXG5mdW5jdGlvbiBHZXRBcmVhKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LndpZHRoICogcmVjdC5oZWlnaHQ7XHJcbn1cclxuXHJcblxyXG5leHBvcnQge1xyXG4gICAgTmV3UmVjdCwgVXBkYXRlUmVjdFNpemUsIFVwZGF0ZVJlY3RPZmZzZXQsIFVwZGF0ZVJlY3RDZW50ZXJQb3MsIFVwZGF0ZVJlY3RQb3NCeVVuaXQsIEZpeFVuaXRQb3MsXHJcbiAgICBHZXRSZWN0T2Zmc2V0VmVjLCBHZXRSZWN0Q2VudGVyUG9zLCBHZXRSZWN0U3RhcnRQb3MsIEdldFJlY3RFbmRQb3MsXHJcbiAgICBHZXRSZWN0V2lkdGgsIEdldFJlY3RIYWxmV2lkdGgsIEdldFJlY3RIZWlnaHQsIEdldFJlY3RIYWxmSGVpZ2h0LFxyXG4gICAgR2V0QXJlYVxyXG59XHJcblxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0Q2VudGVyWChyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gcmVjdC5jZW50ZXIueDtcclxuLy8gfVxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0WDEocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIEdldFJlY3RDZW50ZXJYKHJlY3QpIC0gcmVjdC53aWR0aCAqIDAuNTtcclxuLy8gfVxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0WDIocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIEdldFJlY3RDZW50ZXJYKHJlY3QpICsgcmVjdC53aWR0aCAqIDAuNTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gR2V0UmVjdE9mZnNldFkocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIHJlY3Qub2Zmc2V0Lnk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RDZW50ZXJZKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiByZWN0LmNlbnRlci55O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RZMShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclkocmVjdCkgLSByZWN0LmhlaWdodCAqIDAuNTtcclxuLy8gfVxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0WTIocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIEdldFJlY3RDZW50ZXJZKHJlY3QpICsgcmVjdC5oZWlnaHQgKiAwLjU7XHJcbi8vIH0iLCJpbXBvcnQgeyBOZXdQb3MsIE5ld1ZlYyB9IGZyb20gXCIuLi8uLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBHZXRSZWN0SGFsZldpZHRoLCBHZXRSZWN0SGFsZkhlaWdodCB9IGZyb20gXCIuLi8uLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcblxyXG4vKipcclxuICog55+p5b2i5LiO5L2N572u55qE5YWz57O75YWD5Lu2XHJcbiAqL1xyXG5jbGFzcyBSZWN0UG9zVHVwbGV7XHJcbiAgICBjb25zdHJ1Y3Rvcih1bml0UG9zID0gbnVsbCwgeE9mZnNldCA9IDAsIHlPZmZzZXQgPSAwLCByZWN0ID0gbnVsbCl7XHJcbiAgICAgICAgdGhpcy51bml0UG9zID0gdW5pdFBvcztcclxuICAgICAgICB0aGlzLm9mZnNldCA9IE5ld1ZlYyh4T2Zmc2V0LCB5T2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnJlY3QgPSByZWN0O1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdSZWN0UG9zVHVwbGUodW5pdFBvcyA9IG51bGwsIHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCwgcmVjdCA9IG51bGwpIHtcclxuICAgIGlmKCF1bml0UG9zIHx8ICFyZWN0KXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgUmVjdFBvc1R1cGxlKHVuaXRQb3MsIHhPZmZzZXQsIHlPZmZzZXQsIHJlY3QpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBVcGRhdGVSZWN0UG9zT2Zmc2V0KHJlY3RQb3NUdXBsZSA9IG51bGwsIHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCl7XHJcbiAgICByZWN0UG9zVHVwbGUub2Zmc2V0LnggPSB4T2Zmc2V0O1xyXG4gICAgcmVjdFBvc1R1cGxlLm9mZnNldC55ID0geU9mZnNldDtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVjdFVuaXRQb3MocmVjdFBvc1R1cGxlID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdFBvc1R1cGxlLnVuaXRQb3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFJlY3RQb3NPZmZzZXQocmVjdFBvc1R1cGxlID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdFBvc1R1cGxlLm9mZnNldDtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVjdFBvc0NlbnRlcihyZWN0UG9zVHVwbGUgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgcmVjdFBvc1R1cGxlLnVuaXRQb3MueCArIHJlY3RQb3NUdXBsZS5vZmZzZXQueCxcclxuICAgICAgICByZWN0UG9zVHVwbGUudW5pdFBvcy55ICsgcmVjdFBvc1R1cGxlLm9mZnNldC55LFxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVjdFBvc1N0YXJ0KHJlY3RQb3NUdXBsZSA9IG51bGwpe1xyXG4gICAgbGV0IHBvcyA9IEdldFJlY3RQb3NDZW50ZXIocmVjdFBvc1R1cGxlKTtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgcG9zLnggLSBHZXRSZWN0SGFsZldpZHRoKHJlY3RQb3NUdXBsZS5yZWN0KSxcclxuICAgICAgICBwb3MueSAtIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3RQb3NUdXBsZS5yZWN0KVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVjdFBvc0VuZChyZWN0UG9zVHVwbGUgPSBudWxsKXtcclxuICAgIGxldCBwb3MgPSBHZXRSZWN0UG9zQ2VudGVyKHJlY3RQb3NUdXBsZSk7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHBvcy54ICsgR2V0UmVjdEhhbGZXaWR0aChyZWN0UG9zVHVwbGUucmVjdCksXHJcbiAgICAgICAgcG9zLnkgKyBHZXRSZWN0SGFsZkhlaWdodChyZWN0UG9zVHVwbGUucmVjdClcclxuICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydHtcclxuICAgIE5ld1JlY3RQb3NUdXBsZSwgVXBkYXRlUmVjdFBvc09mZnNldCxcclxuICAgIEdldFJlY3RVbml0UG9zLCBHZXRSZWN0UG9zT2Zmc2V0LCBHZXRSZWN0UG9zQ2VudGVyLCBHZXRSZWN0UG9zU3RhcnQsIEdldFJlY3RQb3NFbmRcclxufSIsIlxyXG4vKipcclxuICog6K6w5b2VYml0bWFwRGF0YeeahOWJquijgeWMuuWfn1xyXG4gKi9cclxuY2xhc3MgVGV4dHVyZUFyZWEge1xyXG4gICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkuIDlvKDlm77kuK3nmoTkuIDkuKrljLrln5/vvIznurnnkIbluKfmiJbnsr7ngbXluKfvvIzljZXkvovvvIzlkozlvJXmk47mnInlhbNcclxuICog57K+54G15bin55So5LqO5qCH5Ye65LiA5byg57q555CG5Zu+55qE5oyH5a6a5Y+W5p2Q5Yy65Z+f77yM5Lul5Y+K55u45a+555qE5pi+56S65L2N572uXHJcbiAqL1xyXG5jbGFzcyBTcHJpdGVGcmFtZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lID0gXCJcIiwgYml0bWFwRGF0YSA9IG51bGwsIHRleHR1cmVBcmVhID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5iaXRtYXBEYXRhID0gYml0bWFwRGF0YTtcclxuICAgICAgICB0aGlzLnRleHR1cmVBcmVhID0gdGV4dHVyZUFyZWE7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5om+5LiN5Yiw5bin5pe255qE6buY6K6k56m65bin77yM5Y+v5Lul5piv5LiA5byg57qi5Y+J5Zu+54mH77yMXHJcbiAqIFRPRE8g5byV5YWl6buY6K6k6LWE5rqQ5py65Yi2XHJcbiAqL1xyXG52YXIgX3Nwcml0ZUZyYW1lTWFwID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBnZXRTcHJpdGVGcmFtZUJ5TmFtZShuYW1lID0gXCJcIil7XHJcbiAgICBsZXQgZiA9IF9zcHJpdGVGcmFtZU1hcC5nZXQobmFtZSk7XHJcbiAgICByZXR1cm4gZiA/IGYgOiBfc3ByaXRlRnJhbWVNYXAuZ2V0KFwiZGVmYWx1dFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3ByaXRlRnJhbWUobmFtZSA9IFwiXCIsIGJpdG1hcERhdGEgPSBudWxsLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBpZihfc3ByaXRlRnJhbWVNYXAuZ2V0KG5hbWUpKXtcclxuICAgICAgICAvL2V4aXN0c1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGYgPSBuZXcgU3ByaXRlRnJhbWUobmFtZSwgYml0bWFwRGF0YSwgbmV3IFRleHR1cmVBcmVhKHgsIHksIHdpZHRoLCBoZWlnaHQpKTtcclxuICAgIF9zcHJpdGVGcmFtZU1hcC5zZXQobmFtZSwgZik7XHJcbiAgICByZXR1cm4gZjtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0U3ByaXRlRnJhbWVXaWR0aChzcHJpdGVGcmFtZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHNwcml0ZUZyYW1lLnRleHR1cmVBcmVhLndpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldFNwcml0ZUZyYW1lSGVpZ2h0KHNwcml0ZUZyYW1lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gc3ByaXRlRnJhbWUudGV4dHVyZUFyZWEuaGVpZ2h0O1xyXG59XHJcblxyXG5leHBvcnR7Z2V0U3ByaXRlRnJhbWVCeU5hbWUsIGNyZWF0ZVNwcml0ZUZyYW1lLCBHZXRTcHJpdGVGcmFtZVdpZHRoLCBHZXRTcHJpdGVGcmFtZUhlaWdodH0iLCJpbXBvcnQgeyBOZXdQb3MsIE5ld1ZlYyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBQdXNoVG9MaW5rLCBHZXRMaW5rRGF0YSwgTmV3TGluaywgUmVtb3ZlQnlLZXlJZCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuXHJcbi8qKlxyXG4gKiDkvY3nva7nu4Tku7ZcclxuICovXHJcbmNsYXNzIFBvc0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDAsIHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgc3VwZXIoZW50aXR5SWQpO1xyXG4gICAgICAgIHRoaXMucG9zID0gTmV3UG9zKHgsIHkpO1xyXG4gICAgICAgIHRoaXMudmVjID0gTmV3VmVjKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBwb3NDb21zID0gTmV3TGluaygpO1xyXG5mdW5jdGlvbiBjcmVhdGVQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKSB7XHJcbiAgICBsZXQgY29tID0gbmV3IFBvc0NvbXBvbmVudChlbnRpdHlJZCk7XHJcbiAgICBQdXNoVG9MaW5rKHBvc0NvbXMsIGNvbSk7XHJcbiAgICByZXR1cm4gY29tO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKSB7XHJcbiAgICBsZXQgY29tID0gR2V0TGlua0RhdGEocG9zQ29tcywgZW50aXR5SWQpO1xyXG4gICAgcmV0dXJuIGNvbSA/IGNvbSA6IGNyZWF0ZVBvc0NvbXBvbmVudChlbnRpdHlJZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFBvc0NvbXBvbmVudExpc3QoKXtcclxuICAgIHJldHVybiBwb3NDb21zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZW1vdmVQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKXtcclxuICAgIFJlbW92ZUJ5S2V5SWQocG9zQ29tcywgZW50aXR5SWQpO1xyXG59XHJcblxyXG5leHBvcnR7IEdldFBvc0NvbXBvbmVudCwgR2V0UG9zQ29tcG9uZW50TGlzdCwgUmVtb3ZlUG9zQ29tcG9uZW50fSIsImltcG9ydCB7IEdldFBvc0NvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50JztcclxuXHJcbmZ1bmN0aW9uIFNldFBvcyhlbnRpdHlJZCA9IDAsIHggPSAwLCB5ID0gMCl7XHJcbiAgICBsZXQgcG9zID0gR2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKS5wb3M7XHJcbiAgICBwb3MueCA9IHg7XHJcbiAgICBwb3MueSA9IHk7XHJcbiAgICByZXR1cm4gcG9zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRQb3MoZW50aXR5SWQgPSAwKXtcclxuICAgIHJldHVybiBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnBvcztcclxufVxyXG5cclxuZnVuY3Rpb24gU2V0VmVjKGVudGl0eUlkID0gMCwgeCA9IDAsIHkgPSAwKXtcclxuICAgIGxldCB2ZWMgPSBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnZlYztcclxuICAgIHZlYy54ID0geDtcclxuICAgIHZlYy55ID0geTtcclxuICAgIHJldHVybiB2ZWM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFZlYyhlbnRpdHlJZCA9IDApe1xyXG4gICAgcmV0dXJuIEdldFBvc0NvbXBvbmVudChlbnRpdHlJZCkudmVjO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gTW92ZShlbnRpdHlJZCA9IDAsIGR4ID0gMCwgZHkgPSAwKXtcclxuICAgIC8vIGxldCBwb3MgPSBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnBvcztcclxuICAgIC8vIHBvcy54ICs9IGR4O1xyXG4gICAgLy8gcG9zLnkgKz0gZHk7XHJcbiAgICBsZXQgY29tID0gR2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKTtcclxuICAgIGNvbS52ZWMueCA9IGR4O1xyXG4gICAgY29tLnZlYy55ID0gZHk7XHJcbiAgICBjb20ucG9zLnggKz0gZHg7XHJcbiAgICBjb20ucG9zLnkgKz0gZHk7XHJcbn1cclxuXHJcbmV4cG9ydCB7U2V0UG9zLCBHZXRQb3MsIEdldFZlYywgU2V0VmVjLCBNb3ZlfSIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuaW1wb3J0IHsgUHVzaFRvTGluaywgR2V0TGlua0RhdGEsIFJlbW92ZUJ5S2V5SWQsIE5ld0xpbmsgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5pbXBvcnQgeyBOZXdSZWN0UG9zVHVwbGUgfSBmcm9tIFwiLi4vcG9zL3JlY3QvY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IE5ld1JlY3QgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcmVjdFwiO1xyXG5pbXBvcnQgeyBHZXRTcHJpdGVGcmFtZVdpZHRoLCBHZXRTcHJpdGVGcmFtZUhlaWdodCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9mcmFtZVwiO1xyXG5pbXBvcnQgeyBHZXRQb3MgfSBmcm9tIFwiLi4vcG9zL3V0aWxzXCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOaYvuekuue7hOS7tu+8jOWMheWQq+S4gOS6m+efqemYteaVsOaNrlxyXG4gKi9cclxuY2xhc3MgUmVuZGVyQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHRjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDAsIGFuZ2xlID0gMCwgc2NhbGUgPSAxKSB7XHJcbiAgICAgICAgc3VwZXIoZW50aXR5SWQpO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSBhbmdsZTtcclxuICAgICAgICB0aGlzLnNjYWxlID0gc2NhbGU7XHJcblx0fVxyXG59XHJcblxyXG52YXIgcmVuZGVyQ29tcyA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gY3JlYXRlUmVuZGVyQ29tcG9uZW50KGVudGl0eUlkID0gMCwgdmlld0RhdGEgPSBudWxsKSB7XHJcbiAgICB2aWV3RGF0YSA9IHZpZXdEYXRhID8gdmlld0RhdGEgOiB7fTtcclxuICAgIGxldCBjb20gPSBuZXcgUmVuZGVyQ29tcG9uZW50KGVudGl0eUlkLCB2aWV3RGF0YS5hbmdsZSwgdmlld0RhdGEuc2NhbGUpO1xyXG4gICAgUHVzaFRvTGluayhyZW5kZXJDb21zLCBjb20pO1xyXG4gICAgcmV0dXJuIGNvbTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVuZGVyQ29tcG9uZW50KGVudGl0eUlkID0gMCwgdmlld0RhdGEgPSBudWxsKSB7XHJcbiAgICBsZXQgY29tID0gR2V0TGlua0RhdGEocmVuZGVyQ29tcywgZW50aXR5SWQpO1xyXG4gICAgcmV0dXJuIGNvbSA/IGNvbSA6IGNyZWF0ZVJlbmRlckNvbXBvbmVudChlbnRpdHlJZCwgdmlld0RhdGEpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOaYvuekuuWFg+S7tlxyXG4gKiDnm67liY3kvb/nlKh0dXBsZe+8jOWPr+S7peWFvOWuueS4gOS4qnVuaXTlkIzml7bmjILlpJrkuKpzcHJpdGVGcmFtZeeahOmcgOaxglxyXG4gKiDlpoLmnpzpnIDopoHpmZDliLbkuIDkuKp1bml05LuF5pyJ5LiA5Liqc3ByaXRlRnJhbWXvvIzlsLHkvb/nlKhjb21wb25lbnRcclxuICovXHJcbmNsYXNzIERpc3BsYXlUdXBsZSBleHRlbmRzIFR1cGxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgc3ByaXRlRnJhbWUgPSBudWxsLCBkaXNwbGF5QXJlYSA9IG51bGwpe1xyXG4gICAgICAgIHN1cGVyKGVudGl0eUlkKTtcclxuICAgICAgICB0aGlzLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5QXJlYSA9IGRpc3BsYXlBcmVhO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog55S75biD5LiK55qE5pi+56S66Zif5YiXXHJcbiAqL1xyXG52YXIgZGlzcGxheUxpc3QgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldERpc3BsYXlMaXN0KCl7XHJcbiAgICByZXR1cm4gZGlzcGxheUxpc3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliqDlhaXmuLLmn5PpmJ/liJdcclxuICogQHBhcmFtIHsqfSBkaXNwbGF5QXJlYSBSZWN057G75Z6LXHJcbiAqL1xyXG5mdW5jdGlvbiBBZGREaXNwbGF5KGVudGl0eUlkID0gMCwgc3ByaXRlRnJhbWUgPSBudWxsLCB4T2Zmc2V0ID0gMCwgeU9mZnNldCA9IDApIHtcclxuICAgIGxldCBwb3MgPSBHZXRQb3MoZW50aXR5SWQpO1xyXG4gICAgbGV0IHJlY3RQb3MgPSBOZXdSZWN0UG9zVHVwbGUocG9zLCB4T2Zmc2V0LCB5T2Zmc2V0LFxyXG4gICAgICAgIE5ld1JlY3QoXHJcbiAgICAgICAgICAgIEdldFNwcml0ZUZyYW1lV2lkdGgoc3ByaXRlRnJhbWUpLFxyXG4gICAgICAgICAgICBHZXRTcHJpdGVGcmFtZUhlaWdodChzcHJpdGVGcmFtZSkpKTtcclxuICAgIGxldCB0ID0gbmV3IERpc3BsYXlUdXBsZShlbnRpdHlJZCwgc3ByaXRlRnJhbWUsIHJlY3RQb3MpO1xyXG4gICAgUHVzaFRvTGluayhkaXNwbGF5TGlzdCwgdCk7XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZnVuY3Rpb24gUmVtb3ZlRGlzcGxheShkaXNwbGF5SWQgPSAwKSB7XHJcbiAgICBSZW1vdmVCeUtleUlkKGRpc3BsYXlMaXN0LCBkaXNwbGF5SWQpO1xyXG59XHJcblxyXG5leHBvcnQge0dldFJlbmRlckNvbXBvbmVudCwgR2V0RGlzcGxheUxpc3QsIEFkZERpc3BsYXksIFJlbW92ZURpc3BsYXl9IiwiXHJcbmZ1bmN0aW9uIEFicyh2YWwgPSAwKXtcclxuICAgIHJldHVybiB2YWwgPj0gMCA/IHZhbCA6IC12YWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE1heCh2YWwxID0gMCwgdmFsMiA9IDApe1xyXG4gICAgcmV0dXJuIHZhbDEgPiB2YWwyID8gdmFsMSA6IHZhbDI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE1pbih2YWwxID0gMCwgdmFsMiA9IDApe1xyXG4gICAgcmV0dXJuIHZhbDEgPCB2YWwyID8gdmFsMSA6IHZhbDI7XHJcbn1cclxuXHJcbmV4cG9ydHtcclxuICAgIEFicywgTWF4LCBNaW5cclxufSIsImltcG9ydCB7IEdldFJlY3RQb3NTdGFydCwgR2V0UmVjdFBvc0VuZCwgTmV3UmVjdFBvc1R1cGxlLCBHZXRSZWN0UG9zQ2VudGVyIH0gZnJvbSBcIi4vY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IE5ld1BvcyB9IGZyb20gXCIuLi8uLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBOZXdSZWN0LCBHZXRSZWN0SGFsZldpZHRoLCBHZXRSZWN0SGFsZkhlaWdodCB9IGZyb20gXCIuLi8uLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IEFicyB9IGZyb20gXCIuLi8uLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9tYXRoXCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOebruWJjeeahOacuuWItu+8jOWPr+S7peS9v+eUqOefqeW9ouS4reW/g+eCueS5i+mXtOeahOi3neemu+WIpOaWreaYr+WQpuebuOS6pFxyXG4gKi9cclxuZnVuY3Rpb24gSXNSZWN0c0Nyb3NzKHJlY3RQb3NUdXBsZTEgPSBudWxsLCByZWN0UG9zVHVwbGUyID0gbnVsbCl7XHJcbiAgICBsZXQgcG9zMSA9IEdldFJlY3RQb3NDZW50ZXIocmVjdFBvc1R1cGxlMSk7XHJcbiAgICBsZXQgcG9zMiA9IEdldFJlY3RQb3NDZW50ZXIocmVjdFBvc1R1cGxlMik7XHJcbiAgICBsZXQgdyA9IEFicyhwb3MxLnggLSBwb3MyLngpO1xyXG4gICAgaWYodyA+IEdldFJlY3RIYWxmV2lkdGgocmVjdFBvc1R1cGxlMS5yZWN0KSArIEdldFJlY3RIYWxmV2lkdGgocmVjdFBvc1R1cGxlMi5yZWN0KSl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IGggPSBBYnMocG9zMS55IC0gcG9zMi55KTtcclxuICAgIGlmKGggPiBHZXRSZWN0SGFsZkhlaWdodChyZWN0UG9zVHVwbGUxLnJlY3QpICsgR2V0UmVjdEhhbGZIZWlnaHQocmVjdFBvc1R1cGxlMi5yZWN0KSl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkuKTkuKrnn6nlvaLmmK/lkKbnm7jkuqTvvIzln7rnoYDnorDmkp7mo4DmtYvvvIjpnIDopoHlhYjmm7TmlrDlnZDmoIfvvIlcclxuICog5Y6f55CG77yaXHJcbiAqICDlt6Z477yM5Y+W5Lik6ICF5pyA5aSn5YC8XHJcbiAqICDlj7N477yM5Y+W5Lik6ICF5pyA5bCP5YC8XHJcbiAqICDlpoLmnpzlj7N45aSn5LqO5bemeO+8jOWImXjovbTnm7jkuqRcclxuICogWeWQjOeQhu+8mlxyXG4gKiAg5LiKee+8jOWPluS4pOiAheacgOWkp+WAvFxyXG4gKiAg5LiLee+8jOWPluS4pOiAheacgOWwj+WAvFxyXG4gKiAg5aaC5p6c5LiLeeWkp+S6juS4innvvIzliJl56L2055u45LqkXHJcbiAqICDnm67liY3vvIzljbPkvb/kuKTovrnph43lj6DvvIzkuZ/kuI3nrpfnm7jkuqTvvIzov5nmoLfog73pgb/lhY3lvojlpJrpl67pophcclxuICovXHJcbmZ1bmN0aW9uIE5ld0lubmVyUmVjdChyZWN0UG9zVHVwbGUxID0gbnVsbCwgcmVjdFBvc1R1cGxlMiA9IG51bGwpe1xyXG4gICAgaWYoIUlzUmVjdHNDcm9zcyhyZWN0UG9zVHVwbGUxLCByZWN0UG9zVHVwbGUyKSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHN0YXJ0MSA9IEdldFJlY3RQb3NTdGFydChyZWN0UG9zVHVwbGUxKTtcclxuICAgIGxldCBzdGFydDIgPSBHZXRSZWN0UG9zU3RhcnQocmVjdFBvc1R1cGxlMik7XHJcbiAgICBsZXQgZW5kMSA9IEdldFJlY3RQb3NFbmQocmVjdFBvc1R1cGxlMSk7XHJcbiAgICBsZXQgZW5kMiA9IEdldFJlY3RQb3NFbmQocmVjdFBvc1R1cGxlMik7XHJcblxyXG4gICAgbGV0IHIxeDEgPSBzdGFydDEueDtcclxuICAgIGxldCByMngxID0gc3RhcnQyLng7XHJcbiAgICBsZXQgbWF4WDEgPSByMXgxID4gcjJ4MSA/IHIxeDEgOiByMngxO1xyXG5cclxuICAgIGxldCByMXgyID0gZW5kMS54O1xyXG4gICAgbGV0IHIyeDIgPSBlbmQyLng7XHJcbiAgICBsZXQgbWluWDIgPSByMXgyIDwgcjJ4MiA/IHIxeDIgOiByMngyO1xyXG5cclxuICAgIGxldCByMXkxID0gc3RhcnQxLnk7XHJcbiAgICBsZXQgcjJ5MSA9IHN0YXJ0Mi55O1xyXG4gICAgbGV0IG1heFkxID0gcjF5MSA+IHIyeTEgPyByMXkxIDogcjJ5MTtcclxuXHJcbiAgICBsZXQgcjF5MiA9IGVuZDEueTtcclxuICAgIGxldCByMnkyID0gZW5kMi55O1xyXG4gICAgbGV0IG1pblkyID0gcjF5MiA8IHIyeTIgPyByMXkyIDogcjJ5MjtcclxuXHJcbiAgICBsZXQgd2lkdGggPSBtaW5YMiAtIG1heFgxO1xyXG4gICAgbGV0IGhlaWdodCA9IG1pblkyIC0gbWF4WTE7XHJcbiAgICBsZXQgcmVjdCA9IE5ld1JlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICBpZighcmVjdCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5ld1JlY3RQb3NUdXBsZShcclxuICAgICAgICBOZXdQb3MoXHJcbiAgICAgICAgICAgIG1heFgxICsgR2V0UmVjdEhhbGZXaWR0aChyZWN0KSxcclxuICAgICAgICAgICAgbWF4WTEgKyBHZXRSZWN0SGFsZkhlaWdodChyZWN0KVxyXG4gICAgICAgICksIDAsIDAsIHJlY3QpO1xyXG59XHJcblxyXG4vKipcclxuICog5L+u5aSN5L2N572u77yM5qC55o2ucmVjdOeahOS4reW/g+S9jee9ruS/ruWkjXVuaXQucG9zXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhVbml0UG9zKHJlY3RQb3NUdXBsZSA9IG51bGwsIHJlY3RYID0gMCwgcmVjdFkgPSAwKXtcclxuICAgIHJlY3RQb3NUdXBsZS51bml0UG9zLnggPSByZWN0WCAtIHJlY3RQb3NUdXBsZS5vZmZzZXQueDtcclxuICAgIHJlY3RQb3NUdXBsZS51bml0UG9zLnkgPSByZWN0WSAtIHJlY3RQb3NUdXBsZS5vZmZzZXQueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIGlubmVyLnJlY3TkuI3lh4botorlh7pvdXR0ZXIucmVjdO+8jOS/ruato2lubnJlci5wb3PkvY3nva5cclxuICogaW5uZXLlkoxvdXR0ZXLpg73mmK9SZWN0UG9zVHVwbGVcclxuICovXHJcbmZ1bmN0aW9uIEZpeEluUmVjdChvdXR0ZXIgPSBudWxsLCBpbm5lciA9IG51bGwpe1xyXG4gICAgbGV0IGNlbnRlclBvcyA9IEdldFJlY3RQb3NDZW50ZXIoaW5uZXIpO1xyXG4gICAgbGV0IGlubmVyU3RhcnRQb3MgPSBHZXRSZWN0UG9zU3RhcnQoaW5uZXIpO1xyXG4gICAgbGV0IGlubmVyRW5kUG9zID0gR2V0UmVjdFBvc0VuZChpbm5lcik7XHJcbiAgICBsZXQgb3V0dGVyU3RhcnRQb3MgPSBHZXRSZWN0UG9zU3RhcnQob3V0dGVyKTtcclxuICAgIGxldCBvdXR0ZXJFbmRQb3MgPSBHZXRSZWN0UG9zRW5kKG91dHRlcik7XHJcblxyXG4gICAgbGV0IHggPSBjZW50ZXJQb3MueDtcclxuICAgIGlmKGlubmVyU3RhcnRQb3MueCA8IG91dHRlclN0YXJ0UG9zLngpe1xyXG4gICAgICAgIHggPSBvdXR0ZXJTdGFydFBvcy54ICsgR2V0UmVjdEhhbGZXaWR0aChpbm5lcik7XHJcbiAgICB9ZWxzZSBpZihpbm5lckVuZFBvcy54ID4gb3V0dGVyRW5kUG9zLngpe1xyXG4gICAgICAgIHggPSBvdXR0ZXJFbmRQb3MueCAtIEdldFJlY3RIYWxmV2lkdGgoaW5uZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB5ID0gY2VudGVyUG9zLnk7XHJcbiAgICBpZihpbm5lclN0YXJ0UG9zLnkgPCBvdXR0ZXJTdGFydFBvcy55KXtcclxuICAgICAgICB5ID0gb3V0dGVyU3RhcnRQb3MueSArIEdldFJlY3RIYWxmSGVpZ2h0KGlubmVyKTtcclxuICAgIH1lbHNlIGlmKGlubmVyRW5kUG9zLnkgPiBvdXR0ZXJFbmRQb3MueSl7XHJcbiAgICAgICAgeSA9IG91dHRlclN0YXJ0UG9zLnkgLSBHZXRSZWN0SGFsZkhlaWdodChpbm5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgRml4VW5pdFBvcyhpbm5lciwgeCwgeSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5b2T5YmN5L2N572u5piv5ZCm5Zyo55+p5b2i5Lit77yI5ZCM5qC36ZyA6KaB5YWI5pu05pawcmVjdOS9jee9ru+8iVxyXG4gKiDljIXlkKvouKnnur/mg4XlhrVcclxuICovXHJcbmZ1bmN0aW9uIElzUG9zSW5SZWN0KHggPSAwLCB5ID0gMCwgcmVjdFBvc1R1cGxlID0gbnVsbCl7XHJcbiAgICBsZXQgc3RhcnRQb3MgPSBHZXRSZWN0UG9zQ2VudGVyKHJlY3RQb3NUdXBsZSk7XHJcbiAgICBsZXQgZW5kUG9zID0gR2V0UmVjdFBvc0VuZChyZWN0UG9zVHVwbGUpO1xyXG4gICAgcmV0dXJuIHggPj0gc3RhcnRQb3MueCAmJiB4IDw9IGVuZFBvcy54XHJcbiAgICAgICAgJiYgeSA+PSBzdGFydFBvcy55ICYmIHkgPD0gZW5kUG9zLnk7XHJcbn1cclxuXHJcbmV4cG9ydCB7TmV3SW5uZXJSZWN0LCBJc1JlY3RzQ3Jvc3MsIEZpeFVuaXRQb3MsIEZpeEluUmVjdCwgSXNQb3NJblJlY3R9XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tIOS7peS4i+W+heWumlxyXG5cclxuLyoqXHJcbiAqIOagueaNrue6v+auteS9nOefqeW9olxyXG4gKi9cclxuZnVuY3Rpb24gTmV3T3V0dGVyUmVjdCh4MSA9IDAsIHkxID0gMCwgeDIgPSAwLCB5MiA9IDApe1xyXG4gICAgbGV0IHdpZHRoID0geDIgLSB4MTtcclxuICAgIGxldCBoZWlnaHQgPSB5MiAtIHkxO1xyXG4gICAgaWYod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgY2VudGVyWCA9IHgxICsgKHgyIC0geDEpICogMC41O1xyXG4gICAgbGV0IGNlbnRlclkgPSB5MSArICh5MiAtIHkxKSAqIDAuNTtcclxuICAgIGxldCByZWN0ID0gTmV3UmVjdERlZmF1bHQod2lkdGgsIGhlaWdodCk7XHJcbiAgICBVcGRhdGVSZWN0UG9zKHJlY3QsIGNlbnRlclgsIGNlbnRlclkpO1xyXG4gICAgcmV0dXJuIHJlY3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkuKTkuKrnn6nlvaLpl7TnmoTlpJbmjqXnn6nlvaJcclxuICovXHJcbmZ1bmN0aW9uIE5ld091dHRlclJlY3RCeVJlY3RzKHJlY3QxID0gbnVsbCwgcmVjdDIgPSBudWxsKXtcclxuICAgIGxldCByMXgxID0gR2V0UmVjdFgxKHJlY3QxKTtcclxuICAgIGxldCByMngxID0gR2V0UmVjdFgxKHJlY3QyKTtcclxuICAgIGxldCB4MSA9IHIxeDEgPCByMngxID8gcjF4MSA6IHIyeDE7XHJcbiAgICBsZXQgcjF4MiA9IEdldFJlY3RYMihyZWN0MSk7XHJcbiAgICBsZXQgcjJ4MiA9IEdldFJlY3RYMihyZWN0Mik7XHJcbiAgICBsZXQgeDIgPSByMXgyID4gcjJ4MiA/IHIxeDIgOiByMngyO1xyXG5cclxuICAgIGxldCByMXkxID0gR2V0UmVjdFkxKHJlY3QxKTtcclxuICAgIGxldCByMnkxID0gR2V0UmVjdFkxKHJlY3QyKTtcclxuICAgIGxldCB5MSA9IHIxeTEgPCByMnkxID8gcjF5MSA6IHIyeTE7XHJcbiAgICBsZXQgcjF5MiA9IEdldFJlY3RZMihyZWN0MSk7XHJcbiAgICBsZXQgcjJ5MiA9IEdldFJlY3RZMihyZWN0Mik7XHJcbiAgICBsZXQgeTIgPSByMXkyID4gcjJ5MiA/IHIxeTIgOiByMnkyO1xyXG5cclxuICAgIHJldHVybiBOZXdPdXR0ZXJSZWN0KHgxLCB5MSwgeDIsIHkyKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDnn6nlvaLmjpLmlqXvvIx0YXJnZXRSZWN05Lya6KKrYmxvY2tSZWN05by55Ye65Y67XHJcbiAqIFRPRE/vvIzku6XlkI7lrozlloTms6jph4pcclxuICovXHJcbmZ1bmN0aW9uIEZpeEV4Y2x1ZGVSZWN0KGJsb2NrUmVjdCA9IG51bGwsIHRhcmdldFJlY3QgPSBudWxsKXtcclxuICAgIGxldCBwb3MxID0gYmxvY2tSZWN0LnBvcztcclxuICAgIGxldCBwb3MyID0gdGFyZ2V0UmVjdC5wb3M7XHJcbiAgICAvL+iuoeeul+WFs+ezu++8jOS4iuS4i+W3puWPs1xyXG4gICAgbGV0IHZ4ID0gcG9zMS54IC0gcG9zMi54O1xyXG4gICAgbGV0IHZ5ID0gcG9zMS55IC0gcG9zMi55O1xyXG4gICAgbGV0IHggPSB2eCA8IDAgPyB2eCotMSA6IHZ4O1xyXG4gICAgbGV0IHkgPSB2eSA8IDAgPyB2eSotMSA6IHZ5O1xyXG4gICAgaWYoeCA+IHkpe1xyXG4gICAgICAgIC8v5bem5Y+zXHJcbiAgICAgICAgaWYodnggPiAwKXtcclxuICAgICAgICAgICAgLy9yZWN0MuWcqOW3plxyXG4gICAgICAgICAgICBwb3MyLnggPSBibG9ja1JlY3QucG9zU3RhcnQueCAtIHRhcmdldFJlY3Qud2lkdGggLSB0YXJnZXRSZWN0LnhPZmZzZXQ7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vcmVjdDLlnKjlj7NcclxuICAgICAgICAgICAgcG9zMi54ID0gYmxvY2tSZWN0LnBvc0VuZC54IC0gdGFyZ2V0UmVjdC54T2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1lbHNle1xyXG4gICAgICAgIC8v5LiK5LiLXHJcbiAgICAgICAgaWYodnkgPiAwKXtcclxuICAgICAgICAgICAgLy9yZWN0MuWcqOS4ilxyXG4gICAgICAgICAgICBwb3MyLnkgPSBibG9ja1JlY3QucG9zU3RhcnQueSAtIHRhcmdldFJlY3QuaGVpZ2h0IC0gdGFyZ2V0UmVjdC55T2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAvL3JlY3Qy5Zyo5LiLXHJcbiAgICAgICAgICAgIHBvczIueSA9IGJsb2NrUmVjdC5wb3NFbmQueSAtIHRhcmdldFJlY3QueU9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBVcGRhdGVSZWN0KHRhcmdldFJlY3QpO1xyXG59IiwiaW1wb3J0IHsgU2V0UG9zIH0gZnJvbSBcIi4uL3Bvcy91dGlsc1wiO1xyXG5pbXBvcnQgeyBOZXdSZWN0IH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3JlY3RcIjtcclxuaW1wb3J0IHsgVG9Mb2NhdGVQb3MsIE5ld1BvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IElzUmVjdHNDcm9zcyB9IGZyb20gXCIuLi9wb3MvcmVjdC91dGlsc1wiO1xyXG5pbXBvcnQgeyBOZXdSZWN0UG9zVHVwbGUsIEdldFJlY3RQb3NTdGFydCB9IGZyb20gXCIuLi9wb3MvcmVjdC9jb21wb25lbnRcIjtcclxuXHJcblxyXG4vKipcclxuICog5Luj56CB6YeP5bCR77yM5pqC5pe26L+Z5qC35pS+XHJcbiAqL1xyXG5jbGFzcyBDYW1lcmEgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMucG9zID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlY3QgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdDYW1lcmEoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgbGV0IGNhbWVyYSA9IG5ldyBDYW1lcmEoKTtcclxuICAgIFxyXG4gICAgY2FtZXJhLnBvcyA9IFNldFBvcyhjYW1lcmEuaWQsIHgsIHkpO1xyXG4gICAgY2FtZXJhLnJlY3QgPSBOZXdSZWN0UG9zVHVwbGUoY2FtZXJhLnBvcywgMCwgMCwgTmV3UmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KSk7XHJcbiAgICByZXR1cm4gY2FtZXJhO1xyXG59XHJcblxyXG4vL+ebruagh+efqeW9ouaYr+WQpuWcqOmVnOWktOWGhVxyXG5mdW5jdGlvbiBJc0luQ2FtZXJhKGNhbWVyYSA9IG51bGwsIHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiBJc1JlY3RzQ3Jvc3MoY2FtZXJhLnJlY3QsIHJlY3QpO1xyXG59XHJcblxyXG4vKipcclxuICog6L2s5Li66ZWc5aS05Z2Q5qCHXHJcbiAqIHRhcmdldFBvc++8jOWmguaenOaYr3JlY3TvvIzor7fnlKhzdGFydFBvc1xyXG4gKi9cclxuZnVuY3Rpb24gVG9TY3JlZW5Qb3MoY2FtZXJhID0gbnVsbCwgdGFyZ2V0UG9zID0gbnVsbCl7XHJcbiAgICByZXR1cm4gVG9Mb2NhdGVQb3ModGFyZ2V0UG9zLCBHZXRSZWN0UG9zU3RhcnQoY2FtZXJhLnJlY3QpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOmVnOWktOWdkOagh+i9rOS4uuWFqOWxgOWdkOagh1xyXG4gKi9cclxuZnVuY3Rpb24gVG9Xb3JsZFBvcyhjYW1lcmEgPSBudWxsLCBzY3JlZW5YID0gMCwgc2NyZWVuWSA9IDApe1xyXG4gICAgbGV0IHN0YXJ0ID0gR2V0UmVjdFBvc1N0YXJ0KGNhbWVyYS5yZWN0KTtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgc3RhcnQueCArIHNjcmVlblgsXHJcbiAgICAgICAgc3RhcnQueSArIHNjcmVlbllcclxuICAgICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDplZzlpLTnp7vliqhcclxuICovXHJcbmZ1bmN0aW9uIENhbWVyYU1vdmUoY2FtZXJhID0gbnVsbCwgeCA9IDAsIHkgPSAwKXtcclxuICAgIFNldFBvcyhjYW1lcmEuaWQsIHgsIHkpO1xyXG4gICAgVXBkYXRlUmVjdFBvc0J5VW5pdChjYW1lcmEucmVjdCwgeCwgeSk7XHJcbn1cclxuXHJcbmV4cG9ydHtOZXdDYW1lcmEsIElzSW5DYW1lcmEsIFRvU2NyZWVuUG9zLCBUb1dvcmxkUG9zfSIsIlxyXG4vKipcclxuICog5rWP6KeI5Zmo55qEa2V5LWNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBLRVlfUklHSFQgPSAzOTtcclxuZXhwb3J0IGNvbnN0IEtFWV9MRUZUID0gMzc7XHJcbmV4cG9ydCBjb25zdCBLRVlfVVAgPSAzODtcclxuZXhwb3J0IGNvbnN0IEtFWV9ET1dOID0gNDA7XHJcblxyXG5leHBvcnQgY29uc3QgS0VZX1NQQUNFID0gMzI7XHJcblxyXG5leHBvcnQgY29uc3QgS0VZX1cgPSA4NztcclxuZXhwb3J0IGNvbnN0IEtFWV9BID0gNjU7XHJcbmV4cG9ydCBjb25zdCBLRVlfUyA9IDgzO1xyXG5leHBvcnQgY29uc3QgS0VZX0QgPSA2ODtcclxuXHJcbi8qKlxyXG4gKiAgZW5naW5lID0gd2ViLWJyb3dzZXIsIGNhbnZhc1xyXG4gKi9cclxudmFyIF9lbmdpbmUgPSB7XHJcblx0Y3R4IDogbnVsbCxcclxuICAgIGNhbnZhcyA6IG51bGwsXHJcbiAgICBmcHMgOiAwLFxyXG4gICAgdGljayA6IDBcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldEVuZ2luZSgpe1xyXG4gICAgcmV0dXJuIF9lbmdpbmU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRDYW52YXMod2lkdGggPSAwLCBoZWlnaHQgPSAwLCBmcHMgPSAxMCl7XHJcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBfZW5naW5lLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIF9lbmdpbmUuY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIF9lbmdpbmUuY3R4LnN0cm9rZVN0eWxlPVwiIzAwMDBmZlwiOyAgICAgICAgICAvL+eUu+efqeW9ouahhueUqOeahFxyXG4gICAgX2VuZ2luZS5mcHMgPSBmcHM7XHJcbiAgICBfZW5naW5lLnRpY2sgPSAxMDAwIC8gZnBzO1xyXG59XHJcblxyXG5leHBvcnR7Z2V0RW5naW5lLCBpbml0Q2FudmFzfSIsImltcG9ydCB7IGdldEVuZ2luZSB9IGZyb20gXCIuL21vZGVsXCI7XHJcblxyXG52YXIgX2VuZ2luZSA9IGdldEVuZ2luZSgpO1xyXG5cclxuZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICBsZXQgYyA9IF9lbmdpbmUuY2FudmFzO1xyXG4gICAgX2VuZ2luZS5jdHguY2xlYXJSZWN0KDAsIDAsIGMud2lkdGgsIGMuaGVpZ2h0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gRHJhdyhpbWdEYXRhLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCkge1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG5cdGN0eC5kcmF3SW1hZ2UoaW1nRGF0YSwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmNvbnN0IFJhZGl1cyA9IE1hdGguUEkvMTgwO1xyXG5mdW5jdGlvbiBEcmF3SW1hZ2VXaXRoQW5nbGUoYW5nbGUgPSAwLCBpbWdEYXRhLCBzeCA9IDAsIHN5ID0gMCwgc3dpZHRoID0gMCwgc2hlaWdodCA9IDAsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKSB7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcbiAgICBjdHguc2F2ZSgpO1xyXG4gICAgY3R4LnRyYW5zbGF0ZSh4ICsgd2lkdGgvMiwgeSArIGhlaWdodC8yKTtcclxuICAgIGN0eC5yb3RhdGUoYW5nbGUgKiBSYWRpdXMpO1xyXG4gICAgRHJhd0ltYWdlKGltZ0RhdGEsIHN4LCBzeSwgc3dpZHRoLCBzaGVpZ2h0LCAtd2lkdGgvMiwgLWhlaWdodC8yLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgLy8gY3R4LnRyYW5zbGF0ZSgxMDAsIDEwMCk7XHJcblx0Ly8gY3R4LnJvdGF0ZSg5MCAqIE1hdGguUEkvMTgwKTtcdC8v5Lul5LiK6Z2i55qE5YGP56e754K55Li65YeG77yM6L+b6KGM5peL6L2sXHJcblx0Ly8gY3R4LmRyYXdJbWFnZShpLCAxODcsIDAsIDE4NiwgMTMwLCAtMCwgLTAsIDEwMCwgMTAwKTtcclxufVxyXG5cclxuLy/lj4LogIPvvJpjb250ZXh0LmRyYXdJbWFnZShpbWcsc3gsc3ksc3dpZHRoLHNoZWlnaHQseCx5LHdpZHRoLGhlaWdodCk7XHJcbmZ1bmN0aW9uIGRyYXdJbWFnZShpbWdEYXRhLCBzeCA9IDAsIHN5ID0gMCwgc3dpZHRoID0gMCwgc2hlaWdodCA9IDAsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKSB7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcblx0Y3R4LmRyYXdJbWFnZShpbWdEYXRhLCBzeCwgc3ksIHN3aWR0aCwgc2hlaWdodCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdSZWN0KHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuICAgIGN0eC5zdHJva2VSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZSh4MSA9IDAsIHkxID0gMCwgeDIgPSAwLCB5MiA9IDApe1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyh4MSwgeTEpO1xyXG4gICAgY3R4LmxpbmVUbyh4MiwgeTIpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3Q2lyY2xlKHggPSAwLCB5ID0gMCwgcmFkaXVzID0gMCl7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG59XHJcblxyXG5leHBvcnR7Y2xlYXIsIGRyYXdJbWFnZSwgZHJhd1JlY3QsIGRyYXdMaW5lLCBkcmF3Q2lyY2xlfSIsImltcG9ydCB7IE5ld1BvcyB9IGZyb20gXCIuL3BvaW50XCI7XHJcbmltcG9ydCB7IE5ld1JlY3QsIEdldFJlY3RTdGFydFBvcywgR2V0UmVjdEVuZFBvcywgR2V0UmVjdENlbnRlclBvcywgR2V0UmVjdEhhbGZXaWR0aCwgR2V0UmVjdEhhbGZIZWlnaHQsIEZpeFVuaXRQb3MsIFVwZGF0ZVJlY3RDZW50ZXJQb3MgfSBmcm9tIFwiLi9yZWN0XCI7XHJcbmltcG9ydCB7IGludGVyU2VjdGlvblBvcyB9IGZyb20gXCIuL2Zvcm11bGEvYWJjXCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOaxguS4pOebtOe6v+S6pOeCuVxyXG4gKiDnlKjnm7Tnur/kuIDoiKzmlrnnqIvlvI9cclxuICovXHJcbmZ1bmN0aW9uIEludGVyU2VjdGlvblBvcyhsaW5lMSA9IG51bGwsIGxpbmUyID0gbnVsbCl7XHJcbiAgICByZXR1cm4gaW50ZXJTZWN0aW9uUG9zKGxpbmUxLmZvcm11bGEsIGxpbmUyLmZvcm11bGEpO1xyXG59XHJcblxyXG4vKipcclxuICog5piv5ZCm5bmz6KGM5LqOeCx56L2055qE57q/XHJcbiAqL1xyXG5mdW5jdGlvbiBJc0hvcml6b250YWxMaW5lKGxpbmUgPSBudWxsKXtcclxuICAgIHJldHVybiBsaW5lLnZlYy55ID09IDA7XHJcbn1cclxuZnVuY3Rpb24gSXNWZXJ0aWNhbExpbmUobGluZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGxpbmUudmVjLnggPT0gMDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOS4pOS4quefqeW9ouaYr+WQpuebuOS6pO+8jOWfuuehgOeisOaSnuajgOa1i++8iOmcgOimgeWFiOabtOaWsOWdkOagh++8iVxyXG4gKiDljp/nkIbvvJpcclxuICogIOW3pnjvvIzlj5bkuKTogIXmnIDlpKflgLxcclxuICogIOWPs3jvvIzlj5bkuKTogIXmnIDlsI/lgLxcclxuICogIOWmguaenOWPs3jlpKfkuo7lt6Z477yM5YiZeOi9tOebuOS6pFxyXG4gKiBZ5ZCM55CG77yaXHJcbiAqICDkuIp577yM5Y+W5Lik6ICF5pyA5aSn5YC8XHJcbiAqICDkuIt577yM5Y+W5Lik6ICF5pyA5bCP5YC8XHJcbiAqICDlpoLmnpzkuIt55aSn5LqO5LiKee+8jOWImXnovbTnm7jkuqRcclxuICogIOebruWJje+8jOWNs+S9v+S4pOi+uemHjeWPoO+8jOS5n+S4jeeul+ebuOS6pO+8jOi/meagt+iDvemBv+WFjeW+iOWkmumXrumimFxyXG4gKi9cclxuZnVuY3Rpb24gTmV3SW5uZXJSZWN0KHJlY3QxID0gbnVsbCwgcmVjdDIgPSBudWxsKXtcclxuXHJcbiAgICBsZXQgc3RhcnQxID0gR2V0UmVjdFN0YXJ0UG9zKHJlY3QxKTtcclxuICAgIGxldCBzdGFydDIgPSBHZXRSZWN0U3RhcnRQb3MocmVjdDIpO1xyXG4gICAgbGV0IGVuZDEgPSBHZXRSZWN0RW5kUG9zKHJlY3QxKTtcclxuICAgIGxldCBlbmQyID0gR2V0UmVjdEVuZFBvcyhyZWN0Mik7XHJcblxyXG4gICAgbGV0IHIxeDEgPSBzdGFydDEueDtcclxuICAgIGxldCByMngxID0gc3RhcnQyLng7XHJcbiAgICBsZXQgbWF4WDEgPSByMXgxID4gcjJ4MSA/IHIxeDEgOiByMngxO1xyXG5cclxuICAgIGxldCByMXgyID0gZW5kMS54O1xyXG4gICAgbGV0IHIyeDIgPSBlbmQyLng7XHJcbiAgICBsZXQgbWluWDIgPSByMXgyIDwgcjJ4MiA/IHIxeDIgOiByMngyO1xyXG4gICAgaWYobWluWDIgPCBtYXhYMSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHIxeTEgPSBzdGFydDEueTtcclxuICAgIGxldCByMnkxID0gc3RhcnQyLnk7XHJcbiAgICBsZXQgbWF4WTEgPSByMXkxID4gcjJ5MSA/IHIxeTEgOiByMnkxO1xyXG4gICAgbGV0IHIxeTIgPSBlbmQxLnk7XHJcbiAgICBsZXQgcjJ5MiA9IGVuZDIueTtcclxuICAgIGxldCBtaW5ZMiA9IHIxeTIgPCByMnkyID8gcjF5MiA6IHIyeTI7XHJcbiAgICBpZihtaW5ZMiA8IG1heFkxKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV3UmVjdCgwLCAwLCBtaW5YMiAtIG1heFgxLCBtaW5ZMiAtIG1heFkxKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWIpOaWreaYr+WQpuebuOS6pFxyXG4gKiDmmoLml7bkvb/nlKhOZXdJbm5lclJlY3TvvIzlkI7mnJ/nnIvmg4XlhrXmmK/lkKbpnIDopoHmiYvliqjlm57mlLbotYTmupAgXHJcbiAqL1xyXG5mdW5jdGlvbiBJc1JlY3RzQ3Jvc3MocmVjdDEgPSBudWxsLCByZWN0MiA9IG51bGwpe1xyXG4gICAgbGV0IHJlY3QgPSBOZXdJbm5lclJlY3QocmVjdDEsIHJlY3QyKTtcclxuICAgIHJldHVybiByZWN0ID8gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIGlubmVyLnJlY3TkuI3lh4botorlh7pvdXR0ZXIucmVjdO+8jOS/ruato3Bvc+S9jee9rlxyXG4gKiBpbm5lcuWSjG91dHRlcumDveaYr3JlY3RUdXBsZVxyXG4gKi9cclxuZnVuY3Rpb24gRml4SW5SZWN0KG91dHRlciA9IG51bGwsIGlubmVyID0gbnVsbCwgaW5uZXJVbml0UG9zID0gbnVsbCl7XHJcbiAgICBsZXQgaW5uZXJQb3MgPSBHZXRSZWN0Q2VudGVyUG9zKGlubmVyKTtcclxuICAgIGxldCBpbm5lclN0YXJ0UG9zID0gR2V0UmVjdFN0YXJ0UG9zKGlubmVyKTtcclxuICAgIGxldCBpbm5lckVuZFBvcyA9IEdldFJlY3RFbmRQb3MoaW5uZXIpO1xyXG4gICAgbGV0IG91dHRlclN0YXJ0UG9zID0gR2V0UmVjdFN0YXJ0UG9zKG91dHRlcik7XHJcbiAgICBsZXQgb3V0dGVyRW5kUG9zID0gR2V0UmVjdEVuZFBvcyhvdXR0ZXIpO1xyXG5cclxuICAgIGxldCB4ID0gaW5uZXJQb3MueDtcclxuICAgIGlmKGlubmVyU3RhcnRQb3MueCA8IG91dHRlclN0YXJ0UG9zLngpe1xyXG4gICAgICAgIHggPSBvdXR0ZXJTdGFydFBvcy54ICsgR2V0UmVjdEhhbGZXaWR0aChpbm5lcik7XHJcbiAgICB9ZWxzZSBpZihpbm5lckVuZFBvcy54ID4gb3V0dGVyRW5kUG9zLngpe1xyXG4gICAgICAgIHggPSBvdXR0ZXJFbmRQb3MueCAtIEdldFJlY3RIYWxmV2lkdGgoaW5uZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB5ID0gaW5uZXJQb3MueTtcclxuICAgIGlmKGlubmVyU3RhcnRQb3MueSA8IG91dHRlclN0YXJ0UG9zLnkpe1xyXG4gICAgICAgIHkgPSBvdXR0ZXJTdGFydFBvcy55ICsgR2V0UmVjdEhhbGZIZWlnaHQoaW5uZXIpO1xyXG4gICAgfWVsc2UgaWYoaW5uZXJFbmRQb3MueSA+IG91dHRlckVuZFBvcy55KXtcclxuICAgICAgICB5ID0gb3V0dGVyU3RhcnRQb3MueSAtIEdldFJlY3RIYWxmSGVpZ2h0KGlubmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBpZih4ICE9IGlubmVyUG9zLnggfHwgeSAhPSBpbm5lclBvcy55KXtcclxuICAgICAgICBVcGRhdGVSZWN0Q2VudGVyUG9zKGlubmVyLCB4LCB5KTtcclxuICAgICAgICBGaXhVbml0UG9zKHJlY3QsIGlubmVyVW5pdFBvcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5b2T5YmN5L2N572u5piv5ZCm5Zyo55+p5b2i5Lit77yI5ZCM5qC36ZyA6KaB5YWI5pu05pawcmVjdOS9jee9ru+8iVxyXG4gKiDov5nph4zkuI3ljIXlkKvouKnnur/vvIzlm6DmraTkuI3og73nlKg+PeWSjDw9XHJcbiAqIOS4uuS6humBv+WFjeexu+S8vCB0aWxl55qEIHJvd0luZGV4ID0geC9ncmlkV2lkdGjlr7zoh7TmlbDnu4TotornlYzpl67pophcclxuICovXHJcbmZ1bmN0aW9uIElzUG9zSW5SZWN0KHggPSAwLCB5ID0gMCwgcmVjdCA9IG51bGwpe1xyXG4gICAgbGV0IHN0YXJ0UG9zID0gR2V0UmVjdFN0YXJ0UG9zKHJlY3QpO1xyXG4gICAgbGV0IGVuZFBvcyA9IEdldFJlY3RFbmRQb3MocmVjdCk7XHJcbiAgICByZXR1cm4geCA+IHN0YXJ0UG9zLnggJiYgeCA8IGVuZFBvcy54XHJcbiAgICAgICAgJiYgeSA+IHN0YXJ0UG9zLnkgJiYgeSA8IGVuZFBvcy55O1xyXG59XHJcblxyXG5leHBvcnQge0ludGVyU2VjdGlvblBvcywgXHJcbiAgICBJc0hvcml6b250YWxMaW5lLCBJc1ZlcnRpY2FsTGluZSxcclxuICAgIElzUmVjdHNDcm9zcywgRml4SW5SZWN0LCBJc1Bvc0luUmVjdH1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0g5Lul5LiL5b6F5a6aXHJcblxyXG4vKipcclxuICog5qC55o2u57q/5q615L2c55+p5b2iXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdPdXR0ZXJSZWN0KHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICBsZXQgd2lkdGggPSB4MiAtIHgxO1xyXG4gICAgbGV0IGhlaWdodCA9IHkyIC0geTE7XHJcbiAgICBpZih3aWR0aCA8PSAwIHx8IGhlaWdodCA8PSAwKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGxldCBjZW50ZXJYID0geDEgKyAoeDIgLSB4MSkgKiAwLjU7XHJcbiAgICBsZXQgY2VudGVyWSA9IHkxICsgKHkyIC0geTEpICogMC41O1xyXG4gICAgbGV0IHJlY3QgPSBOZXdSZWN0RGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTtcclxuICAgIFVwZGF0ZVJlY3RQb3MocmVjdCwgY2VudGVyWCwgY2VudGVyWSk7XHJcbiAgICByZXR1cm4gcmVjdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOS4pOS4quefqeW9oumXtOeahOWkluaOpeefqeW9olxyXG4gKi9cclxuZnVuY3Rpb24gTmV3T3V0dGVyUmVjdEJ5UmVjdHMocmVjdDEgPSBudWxsLCByZWN0MiA9IG51bGwpe1xyXG4gICAgbGV0IHIxeDEgPSBHZXRSZWN0WDEocmVjdDEpO1xyXG4gICAgbGV0IHIyeDEgPSBHZXRSZWN0WDEocmVjdDIpO1xyXG4gICAgbGV0IHgxID0gcjF4MSA8IHIyeDEgPyByMXgxIDogcjJ4MTtcclxuICAgIGxldCByMXgyID0gR2V0UmVjdFgyKHJlY3QxKTtcclxuICAgIGxldCByMngyID0gR2V0UmVjdFgyKHJlY3QyKTtcclxuICAgIGxldCB4MiA9IHIxeDIgPiByMngyID8gcjF4MiA6IHIyeDI7XHJcblxyXG4gICAgbGV0IHIxeTEgPSBHZXRSZWN0WTEocmVjdDEpO1xyXG4gICAgbGV0IHIyeTEgPSBHZXRSZWN0WTEocmVjdDIpO1xyXG4gICAgbGV0IHkxID0gcjF5MSA8IHIyeTEgPyByMXkxIDogcjJ5MTtcclxuICAgIGxldCByMXkyID0gR2V0UmVjdFkyKHJlY3QxKTtcclxuICAgIGxldCByMnkyID0gR2V0UmVjdFkyKHJlY3QyKTtcclxuICAgIGxldCB5MiA9IHIxeTIgPiByMnkyID8gcjF5MiA6IHIyeTI7XHJcblxyXG4gICAgcmV0dXJuIE5ld091dHRlclJlY3QoeDEsIHkxLCB4MiwgeTIpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOefqeW9ouaOkuaWpe+8jHRhcmdldFJlY3TkvJrooqtibG9ja1JlY3TlvLnlh7rljrtcclxuICogVE9ET++8jOS7peWQjuWujOWWhOazqOmHilxyXG4gKi9cclxuZnVuY3Rpb24gRml4RXhjbHVkZVJlY3QoYmxvY2tSZWN0ID0gbnVsbCwgdGFyZ2V0UmVjdCA9IG51bGwpe1xyXG4gICAgbGV0IHBvczEgPSBibG9ja1JlY3QucG9zO1xyXG4gICAgbGV0IHBvczIgPSB0YXJnZXRSZWN0LnBvcztcclxuICAgIC8v6K6h566X5YWz57O777yM5LiK5LiL5bem5Y+zXHJcbiAgICBsZXQgdnggPSBwb3MxLnggLSBwb3MyLng7XHJcbiAgICBsZXQgdnkgPSBwb3MxLnkgLSBwb3MyLnk7XHJcbiAgICBsZXQgeCA9IHZ4IDwgMCA/IHZ4Ki0xIDogdng7XHJcbiAgICBsZXQgeSA9IHZ5IDwgMCA/IHZ5Ki0xIDogdnk7XHJcbiAgICBpZih4ID4geSl7XHJcbiAgICAgICAgLy/lt6blj7NcclxuICAgICAgICBpZih2eCA+IDApe1xyXG4gICAgICAgICAgICAvL3JlY3Qy5Zyo5bemXHJcbiAgICAgICAgICAgIHBvczIueCA9IGJsb2NrUmVjdC5wb3NTdGFydC54IC0gdGFyZ2V0UmVjdC53aWR0aCAtIHRhcmdldFJlY3QueE9mZnNldDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy9yZWN0MuWcqOWPs1xyXG4gICAgICAgICAgICBwb3MyLnggPSBibG9ja1JlY3QucG9zRW5kLnggLSB0YXJnZXRSZWN0LnhPZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgLy/kuIrkuItcclxuICAgICAgICBpZih2eSA+IDApe1xyXG4gICAgICAgICAgICAvL3JlY3Qy5Zyo5LiKXHJcbiAgICAgICAgICAgIHBvczIueSA9IGJsb2NrUmVjdC5wb3NTdGFydC55IC0gdGFyZ2V0UmVjdC5oZWlnaHQgLSB0YXJnZXRSZWN0LnlPZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIC8vcmVjdDLlnKjkuItcclxuICAgICAgICAgICAgcG9zMi55ID0gYmxvY2tSZWN0LnBvc0VuZC55IC0gdGFyZ2V0UmVjdC55T2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFVwZGF0ZVJlY3QodGFyZ2V0UmVjdCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiByZWN0MeaYr+WQpuWujOWFqOi/h+S6hnJlY3QyXHJcbiAqL1xyXG5mdW5jdGlvbiBJc1JlY3RzQ3Jvc3NPdmVyKHJlY3QxID0gbnVsbCwgcmVjdDIgPSBudWxsKXtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIElzUmVjdHNDcm9zc1dpdGhWZWMocmVjdDEgPSBudWxsLCB2eCA9IDAsIHZ5ID0gMCwgcmVjdDIgPSBudWxsKXtcclxuICAgIFxyXG59IiwiaW1wb3J0IHsgRW50aXR5LCBTeXN0ZW0gfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IElzUmVjdHNDcm9zcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy91dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIOeisOaSnuWFg+S7tlxyXG4gKiB0YWcgOiDoh6rlrprkuYnmoIfor4bnoIFcclxuICovXHJcbmNsYXNzIENvbGxpZGVyIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgcmVjdCA9IG51bGwsIHRhZyA9IDApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZW50aXR5SWQgPSBlbnRpdHlJZDtcclxuICAgICAgICB0aGlzLnJlY3QgPSByZWN0O1xyXG4gICAgICAgIHRoaXMudGFnID0gdGFnO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRSZWN0UG9zVHVwbGUoY29sbGlkZXIgPSBudWxsKXtcclxuICAgIHJldHVybiBjb2xsaWRlci5yZWN0O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOeisOaSnuajgOa1i+S4u+ezu+e7n1xyXG4gKiBjYWxsYmFjayA9IGZ1bmN0aW9uKGR0LCBjb2xsaWRlcjEsIGNvbGxpZGVyMilcclxuICovXHJcbmNsYXNzIENvbGxpZGVyU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG4gICAgY2hlY2soZHQgPSAwLCBjb2xsaWRlcjEgPSBudWxsLCBjb2xsaWRlcjIgPSBudWxsKXtcclxuICAgICAgICBpZihJc1JlY3RzQ3Jvc3MoY29sbGlkZXIxLnJlY3QsIGNvbGxpZGVyMi5yZWN0KSl7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soZHQsIGNvbGxpZGVyMSwgY29sbGlkZXIyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0e0NvbGxpZGVyLCBDb2xsaWRlclN5c3RlbX0iLCJpbXBvcnQgeyBDb2xsaWRlciB9IGZyb20gXCIuLi9iYXNlXCI7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIFJlbW92ZUJ5S2V5SWQsIE5ld0xpbmsgfSBmcm9tIFwiLi4vLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5cclxudmFyIGJvZHlDb2xsaWRlckxpc3QgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldEJvZHlDb2xsaWRlckxpc3QoKXtcclxuICAgIHJldHVybiBib2R5Q29sbGlkZXJMaXN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBBZGRCb2R5Q29sbGlkZXIoZW50aXR5SWQgPSAwLCByZWN0ID0gbnVsbCwgdGFnID0gMCl7XHJcbiAgICBsZXQgYyA9IG5ldyBDb2xsaWRlcihlbnRpdHlJZCwgcmVjdCwgdGFnKTtcclxuICAgIFB1c2hUb0xpbmsoYm9keUNvbGxpZGVyTGlzdCwgYyk7XHJcbiAgICByZXR1cm4gYztcclxufVxyXG5cclxuZnVuY3Rpb24gUmVtb3ZlQm9keUNvbGxpZGVyKGNvbGxpZGVySWQgPSAwKXtcclxuICAgIFJlbW92ZUJ5S2V5SWQoYm9keUNvbGxpZGVyTGlzdCwgY29sbGlkZXJJZCk7XHJcbn1cclxuXHJcblxyXG52YXIgYmxvY2tDb2xsaWRlckxpc3QgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldEJsb2NrQ29sbGlkZXJMaXN0KCl7XHJcbiAgICByZXR1cm4gYmxvY2tDb2xsaWRlckxpc3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEFkZEJsb2NrQ29sbGlkZXIoZW50aXR5SWQgPSAwLCByZWN0ID0gbnVsbCwgdGFnID0gMCl7XHJcbiAgICBsZXQgYyA9IG5ldyBDb2xsaWRlcihlbnRpdHlJZCwgcmVjdCwgdGFnKTtcclxuICAgIFB1c2hUb0xpbmsoYmxvY2tDb2xsaWRlckxpc3QsIGMpO1xyXG4gICAgcmV0dXJuIGM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFJlbW92ZUJsb2NrQ29sbGlkZXIoY29sbGlkZXJJZCA9IDApe1xyXG4gICAgUmVtb3ZlQnlLZXlJZChibG9ja0NvbGxpZGVyTGlzdCwgY29sbGlkZXJJZCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7R2V0Qm9keUNvbGxpZGVyTGlzdCwgQWRkQm9keUNvbGxpZGVyLCBSZW1vdmVCb2R5Q29sbGlkZXIsIEdldEJsb2NrQ29sbGlkZXJMaXN0LCBBZGRCbG9ja0NvbGxpZGVyLCBSZW1vdmVCbG9ja0NvbGxpZGVyfSIsImltcG9ydCB7IEdldERpc3BsYXlMaXN0IH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC92aWV3L2NvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBMaW5rSXRlcmF0b3IgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5pbXBvcnQgeyBHZXRQb3MgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3Bvcy91dGlsc1wiO1xyXG5pbXBvcnQgeyBHZXRSZWN0V2lkdGgsIEdldFJlY3RIZWlnaHQgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcmVjdFwiO1xyXG5pbXBvcnQgeyBHZXRDYW1lcmEgfSBmcm9tIFwiLi4vd29ybGQvcmVzXCI7XHJcbmltcG9ydCB7IElzSW5DYW1lcmEsIFRvU2NyZWVuUG9zIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgZHJhd0ltYWdlLCBkcmF3UmVjdCwgY2xlYXIgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9lbmdpbmUvaDUvcmVuZGVyXCI7XHJcbmltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuaW1wb3J0IHsgR2V0QmxvY2tDb2xsaWRlckxpc3QsIEdldEJvZHlDb2xsaWRlckxpc3QgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L2NvbGxpZGUvYm94Mi91dGlsc1wiO1xyXG5pbXBvcnQgeyBHZXRSZWN0UG9zU3RhcnQgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3Bvcy9yZWN0L2NvbXBvbmVudFwiO1xyXG5cclxuLyoqXHJcbiAqIOa4suafk+ezu+e7n++8jOmAu+i+keatpemqpO+8mlxyXG4gKiAxLiAgIOa4hemZpOeUu+W4g1xyXG4gKiAyLiAgIOmHjeWumuS9jeaRhOWDj+aculxyXG4gKiAzLiAgIOiuoeeul+WNleS9jeaYvuekuuefqeW9ouaYr+WQpuWcqOaRhOWDj+acuuefqeW9ouWGhVxyXG4gKiA0LiAgIOi9rOaNouS4uueUu+W4g+WdkOagh1xyXG4gKiA1LiAgIOeUu+WHuuWbvuWDj1xyXG4gKi9cclxuY2xhc3MgUmVuZGVyVXBkYXRlU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgY2xlYXIoKTtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0RGlzcGxheUxpc3QoKSwgZGlzcGxheVR1cGxlID0+IHtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IEdldFBvcyhkaXNwbGF5VHVwbGUuZW50aXR5SWQpO1xyXG4gICAgICAgICAgICBVcGRhdGVSZWN0UG9zQnlVbml0KGRpc3BsYXlUdXBsZS5kaXNwbGF5QXJlYSwgcG9zLngsIHBvcy55KTtcclxuICAgICAgICAgICAgZHJhd0ZyYW1lSW5DYW1lcmEoZGlzcGxheVR1cGxlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHJlbmRlclN5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldFJlbmRlclVwZGF0ZVN5c3RlbSgpe1xyXG4gICAgaWYoIXJlbmRlclN5cyl7XHJcbiAgICAgICAgcmVuZGVyU3lzID0gbmV3IFJlbmRlclVwZGF0ZVN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlbmRlclN5cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDlsIbmiYDmnInnn6nlvaLnlLvlh7rmnaVcclxuICovXHJcbmNsYXNzIERyYXdSZWN0U3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgLy9EcmF3UmVjdChHZXRDYW1lcmEoKSwgdGhpcy5fY2FtZXJhLnJlY3QpO1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRCbG9ja0NvbGxpZGVyTGlzdCgpLCBjb2xsaWRlciA9PiB7XHJcbiAgICAgICAgICAgIGRyYXdSZWN0SW5DYW1lcmEoY29sbGlkZXIucmVjdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldEJvZHlDb2xsaWRlckxpc3QoKSwgY29sbGlkZXIgPT4ge1xyXG4gICAgICAgICAgICBkcmF3UmVjdEluQ2FtZXJhKGNvbGxpZGVyLnJlY3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgZGVidWdTeXMgPSBudWxsO1xyXG5mdW5jdGlvbiBHZXREcmF3UmVjdFN5c3RlbSgpe1xyXG4gICAgaWYoIWRlYnVnU3lzKXtcclxuICAgICAgICBkZWJ1Z1N5cyA9IG5ldyBEcmF3UmVjdFN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlYnVnU3lzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOa4suafk+WIsOeUu+W4g++8jOWPqua4suafk+WcqOmVnOWktOWGheeahFxyXG4gKi9cclxuZnVuY3Rpb24gZHJhd0ZyYW1lSW5DYW1lcmEoZGlzcGxheVR1cGxlID0gbnVsbCl7XHJcbiAgICBsZXQgY2FtZXJhID0gR2V0Q2FtZXJhKCk7XHJcbiAgICBsZXQgZGlzcGxheUFyZWEgPSBkaXNwbGF5VHVwbGUuZGlzcGxheUFyZWE7XHJcbiAgICBpZighSXNJbkNhbWVyYShjYW1lcmEsIGRpc3BsYXlBcmVhKSl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy/ovazkuLrnlLvluIPlnZDmoIdcclxuICAgIGxldCBzY3JlZW5Qb3MgPSBUb1NjcmVlblBvcyhjYW1lcmEsIEdldFJlY3RTdGFydFBvcyhkaXNwbGF5QXJlYSkpO1xyXG5cclxuICAgIGxldCB0ZXh0dXJlQXJlYSA9IGRpc3BsYXlUdXBsZS5zcHJpdGVGcmFtZS50ZXh0dXJlQXJlYTtcclxuICAgIGRyYXdJbWFnZShkaXNwbGF5VHVwbGUuc3ByaXRlRnJhbWUuYml0bWFwRGF0YSxcclxuICAgICAgICB0ZXh0dXJlQXJlYS54LCB0ZXh0dXJlQXJlYS55LCB0ZXh0dXJlQXJlYS53aWR0aCwgdGV4dHVyZUFyZWEuaGVpZ2h0LFxyXG4gICAgICAgIHNjcmVlblBvcy54LCBzY3JlZW5Qb3MueSwgR2V0UmVjdFdpZHRoKGRpc3BsYXlBcmVhKSwgR2V0UmVjdEhlaWdodChkaXNwbGF5QXJlYSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UmVjdEluQ2FtZXJhKHJlY3RQb3NUdXBsZSA9IG51bGwpe1xyXG4gICAgbGV0IGNhbWVyYSA9IEdldENhbWVyYSgpO1xyXG4gICAgaWYoIUlzSW5DYW1lcmEoY2FtZXJhLCByZWN0UG9zVHVwbGUpKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvL+i9rOS4uueUu+W4g+WdkOagh1xyXG4gICAgbGV0IHNjcmVlblBvcyA9IFRvU2NyZWVuUG9zKGNhbWVyYSwgR2V0UmVjdFBvc1N0YXJ0KHJlY3RQb3NUdXBsZSkpO1xyXG4gICAgZHJhd1JlY3QoXHJcbiAgICAgICAgc2NyZWVuUG9zLngsIHNjcmVlblBvcy55LFxyXG4gICAgICAgIEdldFJlY3RXaWR0aChyZWN0UG9zVHVwbGUucmVjdCksIEdldFJlY3RIZWlnaHQocmVjdFBvc1R1cGxlLnJlY3QpKTtcclxufVxyXG5cclxuZXhwb3J0IHtHZXRSZW5kZXJVcGRhdGVTeXN0ZW0sIEdldERyYXdSZWN0U3lzdGVtLCBkcmF3RnJhbWVJbkNhbWVyYSwgZHJhd1JlY3RJbkNhbWVyYX0iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IEdldFBvc0NvbXBvbmVudExpc3QgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3Bvcy9jb21wb25lbnRcIjtcclxuXHJcbi8qKlxyXG4gKiAyMDE5LjA5LjI5XHJcbiAqICAgICAg57uP6L+H6ICD6JmR77yM55uu5YmN5Y+q5YGa566A5Y2V54mI5pys77yM5LiN6KaB5oOz5b6X5aSq6ZW/6L+cXHJcbiAqICAgICAg5omA5Lul5YWI5LiN55So57O757uf57uf5LiA5pu05paw5L2N572u77yM55u05o6l5ZyoYWN0aW9u5Litc2V0cG9z5bCx5aW9XHJcbiAqL1xyXG5jbGFzcyBQb3NVcGRhdGVTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xyXG4gICAgb25VcGRhdGUoZHQgPSAwKXtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0UG9zQ29tcG9uZW50TGlzdCgpLCBtb3ZlQ29tID0+IHtcclxuICAgICAgICAgICAgbGV0IHZlYyA9IG1vdmVDb20udmVjO1xyXG4gICAgICAgICAgICBsZXQgcG9zID0gbW92ZUNvbS5wb3M7XHJcbiAgICAgICAgICAgIHBvcy54ICs9IHZlYy54O1xyXG4gICAgICAgICAgICBwb3MueSArPSB2ZWMueTtcclxuICAgICAgICAgICAgdmVjLnggPSAwO1xyXG4gICAgICAgICAgICB2ZWMueSA9IDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBzeXMgPSBudWxsO1xyXG5mdW5jdGlvbiBHZXRQb3NVcGRhdGVTeXN0ZW0oKXtcclxuICAgIGlmKCFzeXMpe1xyXG4gICAgICAgIHN5cyA9IG5ldyBQb3NVcGRhdGVTeXN0ZW0oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzeXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmmoLml7bmlL7nnYDvvIzku6XlkI7lj6/og73opoHmlL7lnKhzeXN0ZW1MaXN0WzBd77yM5Lul5L6/5q+P5bin5Yid5aeL5YyW5Li05pe25pWw5o2uXHJcbiAqL1xyXG5jbGFzcyBDbGVhclN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRQb3NDb21wb25lbnRMaXN0KCksIG1vdmVDb20gPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmVjID0gbW92ZUNvbS52ZWM7XHJcbiAgICAgICAgICAgIHZlYy54ID0gMDtcclxuICAgICAgICAgICAgdmVjLnkgPSAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnR7R2V0UG9zVXBkYXRlU3lzdGVtfSIsImltcG9ydCB7IGdldEVuZ2luZSB9IGZyb20gXCIuL21vZGVsXCI7XHJcblxyXG52YXIgX2VuZ2luZSA9IGdldEVuZ2luZSgpO1xyXG5cclxuZnVuY3Rpb24gbG9hZEltZyhpbWdTcmMsIG9uTG9hZENhbGxiYWNrKXtcclxuICAgIGxldCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIGltZy5zcmMgPSBpbWdTcmM7XHJcbiAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG9uTG9hZENhbGxiYWNrKGltZyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBfY2FsbGJhY2s7XHJcbnZhciBfZnJhbWVObyA9IDA7XHJcbnZhciBfZHQgPSAwO1xyXG52YXIgX2xhc3QgPSAwO1xyXG52YXIgX2lzRW5kID0gZmFsc2U7XHJcbmZ1bmN0aW9uIHRpY2sodGltZXN0YW1wKSB7XHJcbiAgICBfZHQgPSB0aW1lc3RhbXAgLSBfbGFzdDtcclxuICAgIF9sYXN0ID0gdGltZXN0YW1wO1xyXG4gICAgX2NhbGxiYWNrKF9kdCk7XHJcbiAgICBpZighX2lzRW5kKXtcclxuICAgICAgICBfZnJhbWVObyA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFJ1bjIyMjIob25VcGRhdGVDYWxsYmFjayA9IG51bGwpIHtcclxuICAgIF9pc0VuZCA9IGZhbHNlO1xyXG4gICAgX2NhbGxiYWNrID0gb25VcGRhdGVDYWxsYmFjaztcclxuICAgIF9mcmFtZU5vID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIGRlYnVnXHJcbiAqL1xyXG52YXIgc3RhcnQgPSBudWxsO1xyXG52YXIgbGFzdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5mdW5jdGlvbiBydW5UaWNrKG9uVXBkYXRlQ2FsbGJhY2sgPSBudWxsKSB7XHJcbiAgICBfaXNFbmQgPSBmYWxzZTtcclxuICAgIF9jYWxsYmFjayA9IG9uVXBkYXRlQ2FsbGJhY2s7XHJcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICBpZighX2lzRW5kKXtcclxuICAgICAgICAgICAgX2NhbGxiYWNrKHN0YXJ0IC0gbGFzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxhc3QgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIH0sIF9lbmdpbmUudGljayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0b3AoKXtcclxuICAgIF9pc0VuZCA9IHRydWU7XHJcbn1cclxuXHJcblxyXG4vL+WboOS4uuaMieS9j+mUrueahOivne+8jOS8muS4jeaWreinpuWPkW9uS2V5ZG93bu+8jOaJgOS7peWBmuS4qm1hcOWIpOaWrVxyXG52YXIgX2tleURvd25NYXAgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIG9uS2V5Q2FsbGJhY2soa2V5RG93bkNhbGxiYWNrID0gbnVsbCwga2V5VXBDYWxsYmFjayA9IG51bGwpe1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGUgPT4ge1xyXG4gICAgICAgIGxldCBjb2RlID0gZS5rZXlDb2RlO1xyXG4gICAgICAgIGlmKF9rZXlEb3duTWFwLmdldChjb2RlKSl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2tleURvd25NYXAuc2V0KGNvZGUsIDEpO1xyXG4gICAgICAgIGtleURvd25DYWxsYmFjayhlLmtleUNvZGUpO1xyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGUgPT4ge1xyXG4gICAgICAgIGxldCBjb2RlID0gZS5rZXlDb2RlO1xyXG4gICAgICAgIF9rZXlEb3duTWFwLmRlbGV0ZShjb2RlKTtcclxuICAgICAgICBrZXlVcENhbGxiYWNrKGUua2V5Q29kZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIGh0dHBzOi8vYmxvZy5jc2RuLm5ldC9xcV8xNzYxNjE2OS9hcnRpY2xlL2RldGFpbHMvNzI4MzMwNDRcclxuICovXHJcbmZ1bmN0aW9uIG9uTW91c2VDYWxsYmFjayhtb3VzZWRvd25DYWxsYmFjayA9IG51bGwsIG1vdXNldXBDYWxsYmFjayA9IG51bGwpe1xyXG4gICAgX2VuZ2luZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgbGV0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgbGV0IHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0ICogKGNhbnZhcy53aWR0aCAvIHJlY3Qud2lkdGgpO1xyXG4gICAgICAgIGxldCB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wICogKGNhbnZhcy5oZWlnaHQgLyByZWN0LmhlaWdodCk7XHJcbiAgICAgICAgbW91c2Vkb3duQ2FsbGJhY2soeCwgeSk7XHJcbiAgICB9KTtcclxuICAgIF9lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICBsZXQgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBsZXQgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQgKiAoY2FudmFzLndpZHRoIC8gcmVjdC53aWR0aCk7XHJcbiAgICAgICAgbGV0IHkgPSBldmVudC5jbGllbnRZIC0gcmVjdC50b3AgKiAoY2FudmFzLmhlaWdodCAvIHJlY3QuaGVpZ2h0KTtcclxuICAgICAgICBtb3VzZXVwQ2FsbGJhY2soeCwgeSk7XHJcbiAgICB9KTtcclxuICAgIC8vIF9lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudCA9PiB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coZXZlbnQueCwgZXZlbnQueSk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vX2VuZ2luZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGRvTW91c2VNb3ZlLGZhbHNlKTtcclxuICAgIC8vX2VuZ2luZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsZG9Nb3VzZU91dCxmYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydHtcclxuICAgIGxvYWRJbWcsIHJ1blRpY2ssIHN0b3AsIG9uS2V5Q2FsbGJhY2ssIG9uTW91c2VDYWxsYmFja1xyXG59IiwiaW1wb3J0IHsgR2V0QWN0aW9uU3lzdGVtIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEdldFJlbmRlclVwZGF0ZVN5c3RlbSwgR2V0RHJhd1JlY3RTeXN0ZW0gfSBmcm9tIFwiLi9yZW5kZXJcIjtcclxuaW1wb3J0IHsgR2V0UG9zVXBkYXRlU3lzdGVtIH0gZnJvbSBcIi4vbW92ZVwiO1xyXG5pbXBvcnQgeyBydW5UaWNrIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZW5naW5lL2g1L3Byb2Nlc3NvclwiO1xyXG5pbXBvcnQgeyBQdXNoVG9MaW5rLCBOZXdMaW5rLCBMaW5rSXRlcmF0b3IsIEluc2VydFRvTGluayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcblxyXG4vKipcclxuICog5Li757O757uf5YiX6KGoXHJcbiAqL1xyXG52YXIgcG9zU3lzID0gR2V0UG9zVXBkYXRlU3lzdGVtKCk7XHJcbnZhciBsb2dpY1N5c3RlbXMgPSBudWxsO1xyXG52YXIgcmVuZGVyU3lzdGVtcyA9IG51bGw7XHJcbmZ1bmN0aW9uIGluaXRTeXN0ZW1zKGRlYnVnID0gZmFsc2Upe1xyXG4gICAgbG9naWNTeXN0ZW1zID0gTmV3TGluaygpO1xyXG4gICAgUHVzaFRvTGluayhsb2dpY1N5c3RlbXMsIEdldEFjdGlvblN5c3RlbSgpKTtcclxuICAgIHJlbmRlclN5c3RlbXMgPSBOZXdMaW5rKCk7XHJcbiAgICBQdXNoVG9MaW5rKHJlbmRlclN5c3RlbXMsIEdldFJlbmRlclVwZGF0ZVN5c3RlbSgpKTtcclxuXHJcbiAgICAvL+WIneWni+m7mOiupOezu+e7n1xyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIFB1c2hUb0xpbmsocmVuZGVyU3lzdGVtcywgR2V0RHJhd1JlY3RTeXN0ZW0oKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBsb2dpY1RpY2sgPSAxNjsgICAgIC8vNjBmcHNcclxudmFyIHJlbmRlclRpY2sgPSA0MTsgICAgLy8yNGZwc1xyXG52YXIgX3QxID0gMDtcclxudmFyIF90MiA9IDA7XHJcbmZ1bmN0aW9uIHJ1bldpdGhTY2VuZShzY2VuZSl7XHJcbiAgICBMaW5rSXRlcmF0b3IobG9naWNTeXN0ZW1zLCBzeXN0ZW0gPT4ge1xyXG4gICAgICAgIHN5c3RlbS5vblN0YXJ0KCk7XHJcbiAgICB9KTtcclxuICAgIExpbmtJdGVyYXRvcihyZW5kZXJTeXN0ZW1zLCBzeXN0ZW0gPT4ge1xyXG4gICAgICAgIHN5c3RlbS5vblN0YXJ0KCk7XHJcbiAgICB9KTtcclxuICAgIHNjZW5lLm9uU3RhcnQoKTtcclxuXHJcbiAgICAvL21haW4gbG9vcFxyXG4gICAgcnVuVGljayhkdCA9PiB7XHJcbiAgICAgICAgX3QxICs9IGR0O1xyXG4gICAgICAgIGlmKF90MSA+PSBsb2dpY1RpY2spe1xyXG4gICAgICAgICAgICBfdDEgLT0gbG9naWNUaWNrO1xyXG4gICAgICAgICAgICBzY2VuZS5vblVwZGF0ZShkdCk7XHJcbiAgICAgICAgICAgIExpbmtJdGVyYXRvcihsb2dpY1N5c3RlbXMsIHN5c3RlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzeXN0ZW0ub25VcGRhdGUoZHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF90MiArPSBkdDtcclxuICAgICAgICBpZihfdDIgPj0gcmVuZGVyVGljayl7XHJcbiAgICAgICAgICAgIF90MiAtPSByZW5kZXJUaWNrO1xyXG4gICAgICAgICAgICBMaW5rSXRlcmF0b3IocmVuZGVyU3lzdGVtcywgc3lzdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHN5c3RlbS5vblVwZGF0ZShkdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBBZGRTeXN0ZW0oc3lzdGVtID0gbnVsbCl7XHJcbiAgICBpZighc3lzdGVtKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBJbnNlcnRUb0xpbmsobG9naWNTeXN0ZW1zLCBzeXN0ZW0pO1xyXG59XHJcblxyXG5leHBvcnR7aW5pdFN5c3RlbXMsIHJ1bldpdGhTY2VuZSwgQWRkU3lzdGVtfSIsIlxyXG4gLyoqXHJcbiAgKiBncmlkbWFw55qE572R5qC85Y2V5YWDXHJcbiAgKi9cclxuY2xhc3MgR3JpZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3dJbmRleCA9IDAsIGNvbEluZGV4ID0gMCwgZGF0YSA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMucm93SW5kZXggPSByb3dJbmRleDtcclxuICAgICAgICB0aGlzLmNvbEluZGV4ID0gY29sSW5kZXg7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsgICAgICAgLy/lrZjlgqjnmoTlr7nosaFcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOe9keagvOihqFxyXG4gKiByb3dzID0g6KGM5pWwXHJcbiAqIGNvbHVtbnMgPSDliJfmlbBcclxuICogZ3JpZFdpZHRoLCBncmlkSGVpZ2h0ID0g5q+P5Liq572R5qC855qE5a696auY6IyD5Zu077yM5bu66K6uMToxXHJcbiAqIFxyXG4gKi9cclxuY2xhc3MgR3JpZE1hcCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwLCBncmlkcyA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucztcclxuICAgICAgICB0aGlzLmdyaWRXaWR0aCA9IGdyaWRXaWR0aDtcclxuICAgICAgICB0aGlzLmdyaWRIZWlnaHQgPSBncmlkSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZ3JpZHMgPSBncmlkcztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3R3JpZE1hcChyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwKXtcclxuICAgIGxldCBncmlkcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3M7IHJvd0luZGV4KyspIHtcclxuICAgICAgICBmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgY29sdW1uczsgY29sSW5kZXgrKykge1xyXG4gICAgICAgICAgICBsZXQgZ3JpZCA9IG5ldyBHcmlkKHJvd0luZGV4LCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgIGdyaWRzLnB1c2goZ3JpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBHcmlkTWFwKHJvd3MsIGNvbHVtbnMsIGdyaWRXaWR0aCwgZ3JpZEhlaWdodCwgZ3JpZHMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRHcmlkV2lkdGgoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuZ3JpZFdpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldEdyaWRIZWlnaHQoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuZ3JpZEhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBHZXRHcmlkTWFwV2lkdGgoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuY29sdW1ucyAqIGdyaWRtYXAuZ3JpZFdpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldEdyaWRNYXBIZWlnaHQoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAucm93cyAqIGdyaWRtYXAuZ3JpZEhlaWdodDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOagueaNruS9jee9ruWumuS9jWdyaWRcclxuICogeCwgeeaYr2dyaWRtYXDlt6bkuIrop5LlvIDlp4vnrpdcclxuICovXHJcbmZ1bmN0aW9uIEdldEdyaWQoZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICBpZighY2hlY2tJbihncmlkbWFwLCB4LCB5KSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgY29sdW1uID0gcGFyc2VJbnQoeCAvIGdyaWRtYXAuZ3JpZFdpZHRoKTtcclxuICAgIGxldCByb3cgPSBwYXJzZUludCh5IC8gZ3JpZG1hcC5ncmlkSGVpZ2h0KTtcclxuICAgIHJldHVybiBncmlkbWFwLmdyaWRzW3JvdyAqIGdyaWRtYXAuY29sdW1ucyArIGNvbHVtbl07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSW4oZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICByZXR1cm4geCA+IDAgJiYgeCA8IEdldEdyaWRNYXBXaWR0aChncmlkbWFwKSAmJiB5ID4gMCAmJiB5IDwgR2V0R3JpZE1hcEhlaWdodChncmlkbWFwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gSXRlcmF0b3JHcmlkbWFwKGdyaWRtYXAgPSBudWxsLCBjYWxsYmFjayA9IG51bGwpe1xyXG4gICAgZ3JpZG1hcC5ncmlkcy5mb3JFYWNoKGdyaWQgPT4ge1xyXG4gICAgICAgIGNhbGxiYWNrKGdyaWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEdyaWREYXRhKGdyaWRtYXAgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IGdyaWQgPSBHZXRHcmlkKGdyaWRtYXAsIHgsIHkpO1xyXG4gICAgcmV0dXJuIGdyaWQgPyBncmlkLmRhdGEgOiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gICAgTmV3R3JpZE1hcCwgR2V0R3JpZFdpZHRoLCBHZXRHcmlkSGVpZ2h0LCBHZXRHcmlkTWFwV2lkdGgsIEdldEdyaWRNYXBIZWlnaHQsIEdldEdyaWQsIEl0ZXJhdG9yR3JpZG1hcCwgR2V0R3JpZERhdGFcclxufSIsImltcG9ydCB7IE5ld1BvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBHZXRHcmlkTWFwV2lkdGgsIEdldEdyaWRNYXBIZWlnaHQsIE5ld0dyaWRNYXAsIEdldEdyaWRXaWR0aCwgR2V0R3JpZEhlaWdodCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9ncmlkbWFwXCI7XHJcblxyXG4vKipcclxuICogMmTnk7fnoJblnLDlm77vvIznlLFHcmlkTWFw5omp5bGVXHJcbiAqIHNhbXBsZTpcclxuICogW1xyXG5cdDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsXHJcblx0MSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgXHJcblx0MSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgXHJcbl1cclxuICovXHJcbmNsYXNzIFRpbGVNYXAge1xyXG4gICAgY29uc3RydWN0b3IoZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgdGhpcy5ncmlkbWFwID0gZ3JpZG1hcDtcclxuICAgICAgICB0aGlzLnBvcyA9IE5ld1Bvcyh4LCB5KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3VGlsZU1hcChyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IGdyaWRtYXAgPSBOZXdHcmlkTWFwKHJvd3MsIGNvbHVtbnMsIGdyaWRXaWR0aCwgZ3JpZEhlaWdodCk7XHJcbiAgICByZXR1cm4gbmV3IFRpbGVNYXAoZ3JpZG1hcCwgeCwgeSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFRpbGVtYXBTdGFydCh0aWxlbWFwID0gbnVsbCl7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHRpbGVtYXAucG9zLnggLSBHZXRHcmlkTWFwV2lkdGgodGlsZW1hcC5ncmlkbWFwKSAqIDAuNSxcclxuICAgICAgICB0aWxlbWFwLnBvcy55IC0gR2V0R3JpZE1hcEhlaWdodCh0aWxlbWFwLmdyaWRtYXApICogMC41XHJcbiAgICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRUaWxlbWFwRW5kKHRpbGVtYXAgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgdGlsZW1hcC5wb3MueCArIEdldEdyaWRNYXBXaWR0aCh0aWxlbWFwLmdyaWRtYXApICogMC41LFxyXG4gICAgICAgIHRpbGVtYXAucG9zLnkgKyBHZXRHcmlkTWFwSGVpZ2h0KHRpbGVtYXAuZ3JpZG1hcCkgKiAwLjVcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFRpbGVtYXBDZW50ZXIodGlsZW1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1Bvcyh0aWxlbWFwLnBvcy54LCB0aWxlbWFwLnBvcy55KTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0R3JpZFN0YXJ0KHRpbGVtYXAgPSBudWxsLCBncmlkID0gbnVsbCl7XHJcbiAgICBsZXQgc3RhcnQgPSBHZXRUaWxlbWFwU3RhcnQodGlsZW1hcCk7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHN0YXJ0LnggKyBHZXRHcmlkV2lkdGgodGlsZW1hcC5ncmlkbWFwKSAqIGdyaWQuY29sSW5kZXgsXHJcbiAgICAgICAgc3RhcnQueSArIEdldEdyaWRIZWlnaHQodGlsZW1hcC5ncmlkbWFwKSAqIGdyaWQucm93SW5kZXhcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEdyaWRFbmQodGlsZW1hcCA9IG51bGwsIGdyaWQgPSBudWxsKXtcclxuICAgIGxldCBzdGFydCA9IEdldFRpbGVtYXBTdGFydCh0aWxlbWFwKTtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgc3RhcnQueCArIEdldEdyaWRXaWR0aCh0aWxlbWFwLmdyaWRtYXApICogKGdyaWQuY29sSW5kZXggKyAxKSxcclxuICAgICAgICBzdGFydC55ICsgR2V0R3JpZEhlaWdodCh0aWxlbWFwLmdyaWRtYXApICogKGdyaWQucm93SW5kZXggKyAxKVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0R3JpZENlbnRlcih0aWxlbWFwID0gbnVsbCwgZ3JpZCA9IG51bGwpe1xyXG4gICAgbGV0IHN0YXJ0ID0gR2V0VGlsZW1hcFN0YXJ0KHRpbGVtYXApO1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICBzdGFydC54ICsgR2V0R3JpZFdpZHRoKHRpbGVtYXAuZ3JpZG1hcCkgKiAoZ3JpZC5jb2xJbmRleCArIDAuNSksXHJcbiAgICAgICAgc3RhcnQueSArIEdldEdyaWRIZWlnaHQodGlsZW1hcC5ncmlkbWFwKSAqIChncmlkLnJvd0luZGV4ICsgMC41KVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIE5ld1RpbGVNYXAsIEdldFRpbGVtYXBTdGFydCwgR2V0VGlsZW1hcEVuZCwgR2V0VGlsZW1hcENlbnRlciwgXHJcbiAgICBHZXRHcmlkV2l0aFBvcywgR2V0R3JpZFN0YXJ0LCBHZXRHcmlkRW5kLCBHZXRHcmlkQ2VudGVyXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmib7lh7rkuI5yZWN055u45Lqk55qE5omA5pyJZ3JpZFxyXG4gKiBUT0RPIOacquWumu+8jOWPr+iDveS4jemcgOimgei/meenjeWBmuazlVxyXG4gKi9cclxuZnVuY3Rpb24gR2V0R3JpZHNCeVJlY3QodGlsZU1hcCA9IG51bGwsIHJlY3QgPSBudWxsKXtcclxuICAgIC8v5piv5ZCm5ZyodGlsZW1hcOS4rVxyXG4gICAgaWYoIUlzUmVjdENyb3NzKHRpbGVNYXAucmVjdCwgcmVjdCkpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGdyaWRzID0gW107XHJcbiAgICBsZXQgcG9zU3RhcnQgPSByZWN0LnBvc1N0YXJ0O1xyXG4gICAgbGV0IGNvbHVtblN0YXJ0ID0gcGFyc2VJbnQocG9zU3RhcnQueCAvIHRpbGVNYXAuZ3JpZFdpZHRoKTtcclxuICAgIGxldCByb3dTdGFydCA9IHBhcnNlSW50KHBvc1N0YXJ0LnkgLyB0aWxlTWFwLmdyaWRIZWlnaHQpO1xyXG4gICAgY29sdW1uU3RhcnQgPSBjb2x1bW5TdGFydCA8IDAgPyAwIDogY29sdW1uU3RhcnQ7XHJcbiAgICByb3dTdGFydCA9IHJvd1N0YXJ0IDwgMCA/IDAgOiByb3dTdGFydDtcclxuXHJcbiAgICBsZXQgcG9zRW5kID0gcmVjdC5wb3NFbmQ7XHJcbiAgICBsZXQgY29sdW1uRW5kID0gcGFyc2VJbnQocG9zRW5kLnggLyB0aWxlTWFwLmdyaWRXaWR0aCk7XHJcbiAgICBsZXQgcm93RW5kID0gcGFyc2VJbnQocG9zRW5kLnkgLyB0aWxlTWFwLmdyaWRIZWlnaHQpO1xyXG4gICAgY29sdW1uRW5kID0gY29sdW1uRW5kID4gdGlsZU1hcC5jb2x1bW5zIC0gMSA/IHRpbGVNYXAuY29sdW1ucyAtIDEgOiBjb2x1bW5FbmQ7XHJcbiAgICByb3dFbmQgPSByb3dFbmQgPiB0aWxlTWFwLnJvd3MgLSAxID8gdGlsZU1hcC5yb3dzIC0gMSA6IHJvd0VuZDtcclxuXHJcbiAgICBmb3IobGV0IHJvdz1yb3dTdGFydDsgcm93PD1yb3dFbmQ7IHJvdysrKXtcclxuICAgICAgICBmb3IobGV0IGNvbHVtbj1jb2x1bW5TdGFydDsgY29sdW1uPD1jb2x1bW5FbmQ7IGNvbHVtbisrKXtcclxuICAgICAgICAgICAgZ3JpZHMucHVzaCh0aWxlTWFwLmdyaWRzW3Jvd11bY29sdW1uXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdyaWRzO1xyXG59IiwiaW1wb3J0IHsgQ29sbGlkZXIgfSBmcm9tIFwiLi4vYmFzZVwiO1xyXG5pbXBvcnQgeyBSZW1vdmVCeUtleUlkLCBQdXNoVG9MaW5rLCBOZXdMaW5rIH0gZnJvbSBcIi4uLy4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuXHJcbmNsYXNzIEdyb3VwUGFpciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlMSA9IDAsIHRlYW0xID0gbnVsbCwgdHlwZTIgPSAwLCB0ZWFtMiA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMudHlwZTEgPSB0eXBlMTtcclxuICAgICAgICB0aGlzLnR5cGUyID0gdHlwZTI7XHJcbiAgICAgICAgdGhpcy50ZWFtMSA9IHRlYW0xO1xyXG4gICAgICAgIHRoaXMudGVhbTIgPSB0ZWFtMjtcclxuICAgICAgICB0aGlzLm1hc2sgPSB0eXBlMSB8IHR5cGUyO1xyXG4gICAgICAgIHRoaXMuaWQgPSB0aGlzLm1hc2sgICAgIC8vbGluayB1c2VcclxuICAgIH1cclxufVxyXG5cclxudmFyIHRlYW1zID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBnZXRUZWFtKHR5cGUgPSAwKXtcclxuICAgIGxldCB0ZWFtID0gdGVhbXMuZ2V0KHR5cGUpO1xyXG4gICAgaWYoIXRlYW0pe1xyXG4gICAgICAgIHRlYW0gPSBuZXcgTGluaygpO1xyXG4gICAgICAgIHRlYW1zLnNldCh0eXBlLCB0ZWFtKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0ZWFtO1xyXG59XHJcbmZ1bmN0aW9uIGFkZFRvVGVhbSh0eXBlID0gMCwgY29sbGlkZXIpe1xyXG4gICAgbGV0IHRlYW0gPSBnZXRUZWFtKHR5cGUpO1xyXG4gICAgUHVzaFRvTGluayh0ZWFtLCBjb2xsaWRlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEFkZEdyb3VwQ29sbGlkZXIoZW50aXR5SWQgPSAwLCByZWN0ID0gbnVsbCwgdGFnID0gMCwgdHlwZSA9IDApIHtcclxuICAgIGxldCBjb2xsaWRlciA9IG5ldyBDb2xsaWRlcihlbnRpdHlJZCwgcmVjdCwgdGFnKTtcclxuICAgIGFkZFRvVGVhbSh0eXBlLCBjb2xsaWRlcik7XHJcbiAgICByZXR1cm4gY29sbGlkZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFJlbW92ZUdyb3VwQ29sbGlkZXIoY29sbGlkZXJJZCA9IDAsIHR5cGUgPSAwKSB7XHJcbiAgICBsZXQgdGVhbSA9IGdldFRlYW0odHlwZSk7XHJcbiAgICBSZW1vdmVCeUtleUlkKHRlYW0sIGNvbGxpZGVySWQpO1xyXG59XHJcblxyXG52YXIgcGFpcnMgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldEdyb3VwUGFpckxpc3QoKXtcclxuICAgIHJldHVybiBwYWlyc1xyXG59XHJcbmZ1bmN0aW9uIEFkZEdyb3VwUGFpcih0eXBlMSA9IDAsIHR5cGUyID0gMCl7XHJcbiAgICBsZXQgdGVhbTEgPSBnZXRUZWFtKHR5cGUxKTtcclxuICAgIGxldCB0ZWFtMiA9IGdldFRlYW0odHlwZTIpO1xyXG4gICAgbGV0IHBhaXIgPSBuZXcgR3JvdXBQYWlyKHR5cGUxLCB0ZWFtMSwgdHlwZTIsIHRlYW0yKTtcclxuICAgIFB1c2hUb0xpbmsocGFpcnMsIHBhaXIpO1xyXG4gICAgcmV0dXJuIHBhaXI7XHJcbn1cclxuXHJcblxyXG5leHBvcnQge0dldEFsbEdyb3VwQ29sbGlkZXJMaXN0LCBBZGRHcm91cENvbGxpZGVyLCBSZW1vdmVHcm91cENvbGxpZGVyLCBHZXRHcm91cENvbGxpZGVyQnlFbnRpdHlJZCwgR2V0R3JvdXBQYWlyTGlzdCwgQWRkR3JvdXBQYWlyfSIsImltcG9ydCB7IEdldEdyb3VwUGFpckxpc3QgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBDb2xsaWRlclN5c3RlbSB9IGZyb20gXCIuLi9iYXNlXCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciwgTGlua0NvbXBhcmUgfSBmcm9tIFwiLi4vLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5cclxuLy/liIbnu4TnorDmkp7mo4DmtYvns7vnu59cclxuY2xhc3MgR3JvdXBDb2xsaWRlclN5c3RlbSBleHRlbmRzIENvbGxpZGVyU3lzdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICAgICAgc3VwZXIoY2FsbGJhY2spXHJcbiAgICB9XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRHcm91cFBhaXJMaXN0KCksIHBhaXIgPT4ge1xyXG4gICAgICAgICAgICBpZihwYWlyLm1hc2sgPT0gcGFpci50eXBlMSl7XHJcbiAgICAgICAgICAgICAgICAvL29uZSB0ZWFtXHJcbiAgICAgICAgICAgICAgICBMaW5rQ29tcGFyZShwYWlyLnRlYW0xLCAoY29sbGlkZXIxLCBjb2xsaWRlcjIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzdXBlci5jaGVjayhkdCwgY29sbGlkZXIxLCBjb2xsaWRlcjIsIHBhaXIudHlwZTEsIHBhaXIudHlwZTIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgLy90d28gdGVhbVxyXG4gICAgICAgICAgICAgICAgTGlua0l0ZXJhdG9yKHBhaXIudGVhbTEsIGNvbGxpZGVyMSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgTGlua0l0ZXJhdG9yKHBhaXIudGVhbTIsIGNvbGxpZGVyMiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cGVyLmNoZWNrKGR0LCBjb2xsaWRlcjEsIGNvbGxpZGVyMiwgcGFpci50eXBlMSwgcGFpci50eXBlMik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBzeXMgPSBudWxsO1xyXG5mdW5jdGlvbiBHZXRHcm91cENvbGxpZGVyU3lzdGVtKGNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICBpZighc3lzKXtcclxuICAgICAgICBzeXMgPSBuZXcgR3JvdXBDb2xsaWRlclN5c3RlbShjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3lzO1xyXG59XHJcblxyXG5leHBvcnR7R2V0R3JvdXBDb2xsaWRlclN5c3RlbX0iLCJpbXBvcnQgeyBDb2xsaWRlciB9IGZyb20gXCIuLi9iYXNlXCI7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIFJlbW92ZUJ5S2V5SWQsIE5ld0xpbmsgfSBmcm9tIFwiLi4vLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5cclxuY2xhc3MgQm9keUNvbGxpZGVyIGV4dGVuZHMgQ29sbGlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXR5SWQgPSAwLCByZWN0ID0gbnVsbCwgdGFnID0gMCl7XHJcbiAgICAgICAgc3VwZXIoZW50aXR5SWQsIHJlY3QsIHRhZyk7XHJcbiAgICAgICAgdGhpcy5saW5lID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxudmFyIGJvZHlDb2xsaWRlckxpc3QgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldEJvZHlDb2xsaWRlckxpc3QoKXtcclxuICAgIHJldHVybiBib2R5Q29sbGlkZXJMaXN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBBZGRCb2R5Q29sbGlkZXIoZW50aXR5SWQgPSAwLCByZWN0ID0gbnVsbCwgdGFnID0gMCl7XHJcbiAgICBsZXQgYyA9IG5ldyBCb2R5Q29sbGlkZXIoZW50aXR5SWQsIHJlY3QpO1xyXG4gICAgUHVzaFRvTGluayhib2R5Q29sbGlkZXJMaXN0LCBjKTtcclxuICAgIHJldHVybiBjO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZW1vdmVCb2R5Q29sbGlkZXIoY29sbGlkZXJJZCA9IDApe1xyXG4gICAgUmVtb3ZlQnlLZXlJZChib2R5Q29sbGlkZXJMaXN0LCBjb2xsaWRlcklkKTtcclxufVxyXG5cclxuXHJcbnZhciBibG9ja0NvbGxpZGVyTGlzdCA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gR2V0QmxvY2tDb2xsaWRlckxpc3QoKXtcclxuICAgIHJldHVybiBibG9ja0NvbGxpZGVyTGlzdDtcclxufVxyXG5cclxuZnVuY3Rpb24gQWRkQmxvY2tDb2xsaWRlcihlbnRpdHlJZCA9IDAsIHJlY3QgPSBudWxsLCB0YWcgPSAwKXtcclxuICAgIGxldCBjID0gbmV3IENvbGxpZGVyKGVudGl0eUlkLCByZWN0LCB0YWcpO1xyXG4gICAgUHVzaFRvTGluayhibG9ja0NvbGxpZGVyTGlzdCwgYyk7XHJcbiAgICByZXR1cm4gYztcclxufVxyXG5cclxuZnVuY3Rpb24gUmVtb3ZlQmxvY2tDb2xsaWRlcihjb2xsaWRlcklkID0gMCl7XHJcbiAgICBSZW1vdmVCeUtleUlkKGJsb2NrQ29sbGlkZXJMaXN0LCBjb2xsaWRlcklkKTtcclxufVxyXG5cclxuZXhwb3J0IHtHZXRCb2R5Q29sbGlkZXJMaXN0LCBBZGRCb2R5Q29sbGlkZXIsIFJlbW92ZUJvZHlDb2xsaWRlciwgR2V0QmxvY2tDb2xsaWRlckxpc3QsIEFkZEJsb2NrQ29sbGlkZXIsIFJlbW92ZUJsb2NrQ29sbGlkZXJ9IiwiaW1wb3J0IHsgQ29sbGlkZXIgfSBmcm9tICcuLi9iYXNlJztcclxuaW1wb3J0IHsgTmV3TGluaywgUHVzaFRvTGluaywgUmVtb3ZlQnlLZXlJZCB9IGZyb20gJy4uLy4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsnO1xyXG5cclxudmFyIGNvbGxpZGVyTGlzdCA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gR2V0Tm9ybWFsQ29sbGlkZXJMaXN0KCl7XHJcbiAgICByZXR1cm4gY29sbGlkZXJMaXN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBBZGROb3JtYWxDb2xsaWRlcihlbnRpdHlJZCA9IDAsIHJlY3QgPSBudWxsLCB0YWcgPSAwKSB7XHJcbiAgICBsZXQgYyA9IG5ldyBDb2xsaWRlcihlbnRpdHlJZCwgcmVjdCwgdGFnKTtcclxuICAgIFB1c2hUb0xpbmsoY29sbGlkZXJMaXN0LCBjKTtcclxuICAgIHJldHVybiBjO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZW1vdmVOb3JtYWxDb2xsaWRlcihjb2xsaWRlcklkID0gMCkge1xyXG4gICAgUmVtb3ZlQnlLZXlJZChjb2xsaWRlckxpc3QsIGNvbGxpZGVySWQpO1xyXG59XHJcblxyXG5leHBvcnR7R2V0Tm9ybWFsQ29sbGlkZXJMaXN0LCBBZGROb3JtYWxDb2xsaWRlciwgUmVtb3ZlTm9ybWFsQ29sbGlkZXJ9IiwiaW1wb3J0IHsgRml4VW5pdFBvcywgSXNSZWN0c0Nyb3NzIH0gZnJvbSBcIi4uLy4uL3Bvcy9yZWN0L3V0aWxzXCI7XHJcbmltcG9ydCB7IEdldEFyZWEsIEdldFJlY3RXaWR0aCwgR2V0UmVjdEhlaWdodCwgR2V0UmVjdEhhbGZIZWlnaHQsIEdldFJlY3RIYWxmV2lkdGggfSBmcm9tIFwiLi4vLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcmVjdFwiO1xyXG5pbXBvcnQgeyBHZXRSZWN0UG9zQ2VudGVyLCBHZXRSZWN0UG9zU3RhcnQsIEdldFJlY3RQb3NFbmQsIEdldFJlY3RVbml0UG9zIH0gZnJvbSBcIi4uLy4uL3Bvcy9yZWN0L2NvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiLi4vLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IEdldEJvZHlDb2xsaWRlckxpc3QsIEdldEJsb2NrQ29sbGlkZXJMaXN0IH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgR2V0VmVjIH0gZnJvbSBcIi4uLy4uL3Bvcy91dGlsc1wiO1xyXG5pbXBvcnQgeyBOZXdQb3MgfSBmcm9tIFwiLi4vLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnRcIjtcclxuaW1wb3J0IHsgQWJzLCBNYXgsIE1pbiB9IGZyb20gXCIuLi8uLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9tYXRoXCI7XHJcbmltcG9ydCB7IEJsb2NrQ29sbGlkZXIgfSBmcm9tIFwiLi4vLi4veC9jb2xsaWRlL21vZGVsXCI7XHJcblxyXG4vKipcclxuICog566A5piT5pa55qGI5p6E5oOz77yM55uu5YmN5py65Yi277yaXHJcbiAqICAgICAgYm9keeW/hemhu+aYr+enu+WKqOS4reeahO+8jOS4lOWSjGJsb2Nr56Kw5pKe5LqGXHJcbiAqICAgICAg5LuldmVj5Li65L6d5o2u77yM56Gu5a6a5pyA5aSn5rS75Yqo6IyD5Zu0XHJcbiAqICAgICAg6Iul5LiA6L656KKr5pS256qE77yM6L+Y5Y6f5Y+m5LiA6L6555qE5rS75YqoXHJcbiAqL1xyXG5jbGFzcyBCb3hDb2xsaWRlclN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRCb2R5Q29sbGlkZXJMaXN0KCksIGJvZHkgPT4ge1xyXG4gICAgICAgICAgICBpZighYm9keUJlZm9yZShib2R5KSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgTGlua0l0ZXJhdG9yKEdldEJsb2NrQ29sbGlkZXJMaXN0KCksIGJsb2NrID0+IHtcclxuICAgICAgICAgICAgICAgIGxvZ2ljKGJvZHksIGJsb2NrKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGJvZHlBZnRlcihib2R5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIGJveENvbGxpZGVyU3lzID0gbnVsbFxyXG5mdW5jdGlvbiBHZXRCb3hDb2xsaWRlclN5c3RlbShjYWxsYmFjayA9IG51bGwpe1xyXG4gICAgaWYoIWJveENvbGxpZGVyU3lzKXtcclxuICAgICAgICBib3hDb2xsaWRlclN5cyA9IG5ldyBCb3hDb2xsaWRlclN5c3RlbShjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYm94Q29sbGlkZXJTeXM7XHJcbn1cclxuXHJcbnZhciBib2R5WCA9IDA7XHJcbnZhciBib2R5WSA9IDA7XHJcbnZhciBtaW5YID0gMDtcclxudmFyIG1heFggPSAwO1xyXG52YXIgbWluWSA9IDA7XHJcbnZhciBtYXhZID0gMDtcclxudmFyIGxhc3RCb2R5U3RhcnQgPSBudWxsO1xyXG52YXIgbGFzdEJvZHlFbmQgPSBudWxsO1xyXG52YXIgYmxvY2tTdGFydCA9IG51bGw7XHJcbnZhciBibG9ja0VuZCA9IG51bGw7XHJcbnZhciB1bml0VmVjID0gbnVsbDtcclxudmFyIGJvZHlIYWxmV2lkdGggPSAwO1xyXG52YXIgYm9keUhhbGZIZWlnaHQgPSAwO1xyXG5cclxuLyoqXHJcbiAqIOWJjee9ruWkhOeQhu+8jOS4tOaXtuWPmOmHj+i1i+WAvO+8jOS7peWFjemHjeWkjeiuoeeul1xyXG4gKi9cclxuZnVuY3Rpb24gYm9keUJlZm9yZShib2R5Q29sbGlkZXIgPSBudWxsKXtcclxuICAgIHVuaXRWZWMgPSBHZXRWZWMoYm9keUNvbGxpZGVyLmVudGl0eUlkKTtcclxuICAgIGlmKHVuaXRWZWMueCA9PSAwICYmIHVuaXRWZWMueSA9PSAwKXtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBib2R5SGFsZldpZHRoID0gR2V0UmVjdEhhbGZXaWR0aChib2R5Q29sbGlkZXIucmVjdC5yZWN0KTtcclxuICAgIGJvZHlIYWxmSGVpZ2h0ID0gR2V0UmVjdEhhbGZIZWlnaHQoYm9keUNvbGxpZGVyLnJlY3QucmVjdCk7XHJcbiAgICBsZXQgcG9zID0gR2V0UmVjdFBvc0NlbnRlcihib2R5Q29sbGlkZXIucmVjdCk7XHJcbiAgICBib2R5WCA9IHBvcy54O1xyXG4gICAgYm9keVkgPSBwb3MueTtcclxuXHJcbiAgICBsZXQgc3RhcnQgPSBHZXRSZWN0UG9zU3RhcnQoYm9keUNvbGxpZGVyLnJlY3QpO1xyXG4gICAgbGFzdEJvZHlTdGFydCA9IE5ld1BvcyhcclxuICAgICAgICBzdGFydC54IC0gdW5pdFZlYy54LFxyXG4gICAgICAgIHN0YXJ0LnkgLSB1bml0VmVjLnlcclxuICAgICk7XHJcbiAgICBsZXQgZW5kID0gR2V0UmVjdFBvc0VuZChib2R5Q29sbGlkZXIucmVjdCk7XHJcbiAgICBsYXN0Qm9keUVuZCA9IE5ld1BvcyhcclxuICAgICAgICBlbmQueCAtIHVuaXRWZWMueCxcclxuICAgICAgICBlbmQueSAtIHVuaXRWZWMueVxyXG4gICAgKTtcclxuICAgIG1pblggPSBlbmQueDtcclxuICAgIG1heFggPSBzdGFydC54O1xyXG4gICAgbWluWSA9IGVuZC55O1xyXG4gICAgbWF4WSA9IHN0YXJ0Lnk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9naWMoYm9keUNvbGxpZGVyID0gbnVsbCwgYmxvY2tDb2xsaWRlciA9IG51bGwpe1xyXG4gICAgaWYoIUlzUmVjdHNDcm9zcyhib2R5Q29sbGlkZXIucmVjdCwgYmxvY2tDb2xsaWRlci5yZWN0KSl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgYmxvY2tCZWZvcmUoYmxvY2tDb2xsaWRlcik7XHJcbiAgICBpc0xSKCkgfHwgaXNVRCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBibG9ja0JlZm9yZShibG9ja0NvbGxpZGVyID0gbnVsbCl7XHJcbiAgICBibG9ja1N0YXJ0ID0gR2V0UmVjdFBvc1N0YXJ0KGJsb2NrQ29sbGlkZXIucmVjdCk7XHJcbiAgICBibG9ja0VuZCA9IEdldFJlY3RQb3NFbmQoYmxvY2tDb2xsaWRlci5yZWN0KTtcclxufVxyXG5cclxuLy/lj6/ku6Xlrp7plKTnmoTlt6blj7PlhbPns7tcclxuZnVuY3Rpb24gaXNMUigpe1xyXG4gICAgaWYodW5pdFZlYy54ID09IDApe1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmKCFjaGVja1ZFZGdlKCkpe1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBtaW5EaXN0YW5jZVgoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOajgOafpee6tei+ueacieaViOaAp++8jOi4qee6v+S4jeeul1xyXG4gKi9cclxuZnVuY3Rpb24gY2hlY2tWRWRnZSgpIHtcclxuICAgIGxldCBtYXhZMSA9IE1heChsYXN0Qm9keVN0YXJ0LnksIGJsb2NrU3RhcnQueSk7XHJcbiAgICBsZXQgbWluWTIgPSBNaW4obGFzdEJvZHlFbmQueSwgYmxvY2tFbmQueSk7XHJcbiAgICByZXR1cm4gbWluWTIgPiBtYXhZMTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiuoeeul3jmnIDmlrDmtLvliqjojIPlm7TvvIjmnIDnn63ot53nprvvvIlcclxuICovXHJcbmZ1bmN0aW9uIG1pbkRpc3RhbmNlWCgpe1xyXG4gICAgaWYodW5pdFZlYy54ID4gMCl7XHJcbiAgICAgICAgaWYoYmxvY2tTdGFydC54IDwgbWluWCl7XHJcbiAgICAgICAgICAgIG1pblggPSBibG9ja1N0YXJ0Lng7XHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaWYoYmxvY2tFbmQueCA+IG1heFgpe1xyXG4gICAgICAgICAgICBtYXhYID0gYmxvY2tFbmQueDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy/lj6/ku6Xlrp7plKTnmoTkuIrkuIvlhbPns7tcclxuZnVuY3Rpb24gaXNVRCgpe1xyXG4gICAgaWYodW5pdFZlYy55ID09IDApe1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmKCFjaGVja0hFZGdlKCkpe1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBtaW5EaXN0YW5jZVkoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOajgOafpeaoqui+ueacieaViOaAp++8jOi4qee6v+S4jeeul1xyXG4gKi9cclxuZnVuY3Rpb24gY2hlY2tIRWRnZSgpIHtcclxuICAgIGxldCBtYXhYMSA9IE1heChsYXN0Qm9keVN0YXJ0LngsIGJsb2NrU3RhcnQueCk7XHJcbiAgICBsZXQgbWluWDIgPSBNaW4obGFzdEJvZHlFbmQueCwgYmxvY2tFbmQueCk7XHJcbiAgICByZXR1cm4gbWluWDIgPiBtYXhYMTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiuoeeul3jmnIDmlrDmtLvliqjojIPlm7TvvIjmnIDnn63ot53nprvvvIlcclxuICovXHJcbmZ1bmN0aW9uIG1pbkRpc3RhbmNlWSgpe1xyXG4gICAgaWYodW5pdFZlYy55ID4gMCl7XHJcbiAgICAgICAgaWYoYmxvY2tTdGFydC55IDwgbWluWSl7XHJcbiAgICAgICAgICAgIG1pblkgPSBibG9ja1N0YXJ0Lnk7XHJcbiAgICAgICAgfVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaWYoYmxvY2tFbmQueSA+IG1heFkpe1xyXG4gICAgICAgICAgICBtYXhZID0gYmxvY2tFbmQueTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYm9keUFmdGVyKGJvZHlDb2xsaWRlciA9IG51bGwpIHtcclxuICAgIGxldCB4ID0gMDtcclxuICAgIGlmKHVuaXRWZWMueCA+IDApe1xyXG4gICAgICAgIHggPSBtaW5YIC0gYm9keUhhbGZXaWR0aDtcclxuICAgIH1lbHNlIGlmKHVuaXRWZWMueCA8IDApe1xyXG4gICAgICAgIHggPSBtYXhYICsgYm9keUhhbGZXaWR0aDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHggPSBib2R5WDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgeSA9IDA7XHJcbiAgICBpZih1bml0VmVjLnkgPiAwKXtcclxuICAgICAgICB5ID0gbWluWSAtIGJvZHlIYWxmSGVpZ2h0O1xyXG4gICAgfWVsc2UgaWYodW5pdFZlYy55IDwgMCl7XHJcbiAgICAgICAgeSA9IG1heFkgKyBib2R5SGFsZkhlaWdodDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHkgPSBib2R5WTtcclxuICAgIH1cclxuICAgIEZpeFVuaXRQb3MoYm9keUNvbGxpZGVyLnJlY3QsIHgsIHkpO1xyXG59XHJcblxyXG4vKipcclxuICog5qOA5p+l57q16L655pyJ5pWI5oCn77yM6Lip57q/5LiN566XXHJcbiAqICB2eT09MO+8jOS4gOWumueul+aVsFxyXG4gKiAgdnk+MCDkuJQgYmxvY2vpobbovrnopoHlnKhZ5rS75Yqo6IyD5Zu05YaFXHJcbiAqICB2eTwwIOS4lCBibG9ja+W6lei+ueimgeWcqFnmtLvliqjojIPlm7TlhoVcclxuICovXHJcbmZ1bmN0aW9uIGNoZWNrVkVkZ2VfYmsoKXtcclxuICAgIHJldHVybiB1bml0VmVjLnkgPT0gMCB8fFxyXG4gICAgICAgICh1bml0VmVjLnkgPiAwICYmIGJsb2NrU3RhcnQueSA8IG1pblkpIHx8XHJcbiAgICAgICAgKHVuaXRWZWMueSA8IDAgJiYgYmxvY2tFbmQueSA+IG1heFkpO1xyXG59XHJcblxyXG5leHBvcnQge0dldEJveENvbGxpZGVyU3lzdGVtfSIsImltcG9ydCB7IEdldEdyb3VwQ29sbGlkZXJTeXN0ZW0gfSBmcm9tICcuL2dyb3VwL3N5c3RlbSc7XHJcbmltcG9ydCB7IEFkZEdyb3VwUGFpciwgQWRkR3JvdXBDb2xsaWRlciwgUmVtb3ZlR3JvdXBDb2xsaWRlciB9IGZyb20gJy4vZ3JvdXAvdXRpbHMnO1xyXG5pbXBvcnQgeyBBZGRCb2R5Q29sbGlkZXIsIEFkZEJsb2NrQ29sbGlkZXIsIFJlbW92ZUJvZHlDb2xsaWRlciwgUmVtb3ZlQmxvY2tDb2xsaWRlciB9IGZyb20gJy4vYm94L3V0aWxzJztcclxuaW1wb3J0IHsgQWRkTm9ybWFsQ29sbGlkZXIsIFJlbW92ZU5vcm1hbENvbGxpZGVyIH0gZnJvbSAnLi9ub3JtYWwvdXRpbHMnO1xyXG5pbXBvcnQgeyBBZGRTeXN0ZW0gfSBmcm9tICcuLi8uLi9kaXJlY3Rvci9zeXN0ZW0vcnVuJztcclxuaW1wb3J0IHsgR2V0Qm94Q29sbGlkZXJTeXN0ZW0gfSBmcm9tICcuL2JveDIvc3lzdGVtJztcclxuXHJcbi8qKlxyXG4gKiDlkK/nlKjnorDmkp7mo4DmtYvmnLrliLZcclxuICoge1xyXG4gKiAgICAgIHVzZUdyb3VwIDogdHJ1ZVxyXG4gKiAgICAgIHBhaXJzIDogW1sxLCAyXSwgWzIsIDRdLCBbMSwgOF0uLi5dXHJcbiAqICAgICAgdXNlQm94IDogdHJ1ZVxyXG4gKiB9XHJcbiAqIGNhbGxiYWNrIDogY2FsbGJhY2sgPSBmdW5jdGlvbihkdCwgY29sbGlkZXIxLCBjb2xsaWRlcjIpXHJcbiAqL1xyXG52YXIgY2ZnID0ge1xyXG4gICAgdXNlR3JvdXAgOiBmYWxzZSxcclxuICAgIHBhaXJzIDogW10sXHJcbiAgICB1c2VCb3ggOiBmYWxzZSxcclxuICAgIGNhbGxiYWNrIDogbnVsbCxcclxuICAgIHN5c0xpc3QgOiBbXVxyXG59O1xyXG5cclxuZnVuY3Rpb24gT3BlbkNvbGxpZGVyKG9wdGlvbnMgPSBudWxsKXtcclxuICAgIGNmZy51c2VHcm91cCA9IG9wdGlvbnMudXNlR3JvdXAgPyBvcHRpb25zLnVzZUdyb3VwIDogY2ZnLnVzZUdyb3VwO1xyXG4gICAgY2ZnLnBhaXJzID0gb3B0aW9ucy5wYWlycyA/IG9wdGlvbnMucGFpcnMgOiBjZmcucGFpcnM7XHJcbiAgICBjZmcudXNlQm94ID0gb3B0aW9ucy51c2VCb3ggPyBvcHRpb25zLnVzZUJveCA6IGNmZy51c2VCb3g7XHJcbiAgICBjZmcuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrO1xyXG5cclxuICAgIGlmKGNmZy51c2VCb3gpe1xyXG4gICAgICAgIGNmZy5zeXNMaXN0LnB1c2goR2V0Qm94Q29sbGlkZXJTeXN0ZW0ob3B0aW9ucy5jYWxsYmFjaykpO1xyXG4gICAgfVxyXG4gICAgaWYoY2ZnLnVzZUdyb3VwKXtcclxuICAgICAgICBjZmcuc3lzTGlzdC5wdXNoKEdldEdyb3VwQ29sbGlkZXJTeXN0ZW0ob3B0aW9ucy5jYWxsYmFjaykpO1xyXG4gICAgICAgIGNmZy5wYWlycy5mb3JFYWNoKHBhaXIgPT4ge1xyXG4gICAgICAgICAgICBBZGRHcm91cFBhaXIocGFpclswXSwgcGFpclsxXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvL2NmZy5zeXNMaXN0LnB1c2goR2V0Tm9ybWFsQ29sbGlkZXJTeXN0ZW0ob3B0aW9ucy5jYWxsYmFjaykpO1xyXG4gICAgY2ZnLnN5c0xpc3QuZm9yRWFjaChzeXMgPT4ge1xyXG4gICAgICAgIEFkZFN5c3RlbShzeXMpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBBZGRDb2xsaWRlcihlbnRpdHlJZCA9IDAsIHJlY3QgPSBudWxsLCB0YWcgPSAwLCBncm91cCA9IDAsIGlzQm9keSA9IGZhbHNlLCBpc0Jsb2NrID0gZmFsc2UpIHtcclxuICAgIGlmKGNmZy51c2VCb3gpe1xyXG4gICAgICAgIGlmKGlzQm9keSl7XHJcbiAgICAgICAgICAgIHJldHVybiBBZGRCb2R5Q29sbGlkZXIoZW50aXR5SWQsIHJlY3QsIHRhZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoaXNCbG9jayl7XHJcbiAgICAgICAgICAgIHJldHVybiBBZGRCbG9ja0NvbGxpZGVyKGVudGl0eUlkLCByZWN0LCB0YWcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKGNmZy51c2VHcm91cCl7XHJcbiAgICAgICAgcmV0dXJuIEFkZEdyb3VwQ29sbGlkZXIoZW50aXR5SWQsIHJlY3QsIHRhZywgZ3JvdXApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEFkZE5vcm1hbENvbGxpZGVyKGVudGl0eUlkLCByZWN0LCB0YWcpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gUmVtb3ZlQ29sbGlkZXIoY29sbGlkZXJJZCA9IDAsIGdyb3VwID0gMCwgaXNCb2R5ID0gZmFsc2UsIGlzQmxvY2sgPSBmYWxzZSkge1xyXG4gICAgaWYoZ3JvdXAgPiAwKXtcclxuICAgICAgICBSZW1vdmVHcm91cENvbGxpZGVyKGNvbGxpZGVySWQsIGdyb3VwKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZihpc0JvZHkpe1xyXG4gICAgICAgIFJlbW92ZUJvZHlDb2xsaWRlcihjb2xsaWRlcklkKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZihpc0Jsb2NrKXtcclxuICAgICAgICBSZW1vdmVCbG9ja0NvbGxpZGVyKGNvbGxpZGVySWQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFJlbW92ZU5vcm1hbENvbGxpZGVyKGNvbGxpZGVySWQpO1xyXG59XHJcblxyXG5leHBvcnQge09wZW5Db2xsaWRlciwgQWRkQ29sbGlkZXIsIFJlbW92ZUNvbGxpZGVyfSIsImltcG9ydCB7IGluaXRTeXN0ZW1zIH0gZnJvbSBcIi4uL3N5c3RlbS9ydW5cIjtcclxuaW1wb3J0IHsgaW5pdENhbnZhcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9tb2RlbFwiO1xyXG5pbXBvcnQgeyBvbktleUNhbGxiYWNrLCBvbk1vdXNlQ2FsbGJhY2sgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9lbmdpbmUvaDUvcHJvY2Vzc29yXCI7XHJcbmltcG9ydCB7IE5ld0NhbWVyYSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvY2FtZXJhL3V0aWxzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVRpbGVNYXBXaXRoRGF0YSB9IGZyb20gXCIuL2FkYXB0ZXJcIjtcclxuaW1wb3J0IHsgT3BlbkNvbGxpZGVyIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jb2xsaWRlL3V0aWxzXCI7XHJcblxyXG4vKipcclxuICog6YCa6L+H5Y+C5pWw6YWN572u5Yid5aeL5YyW57O757uf6LWE5rqQXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0R2FtZShvcHRpb25zID0gbnVsbCkge1xyXG5cclxuICAgIC8v5byV5pOO5Yid5aeL5YyWXHJcbiAgICBpbml0Q2FudmFzKG9wdGlvbnMuc2NyZWVuLndpZHRoLCBvcHRpb25zLnNjcmVlbi5oZWlnaHQsIG9wdGlvbnMuZnBzKTtcclxuXHJcbiAgICAvL+azqOWGjOaMiemUruWbnuiwg1xyXG4gICAgaWYob3B0aW9ucy5rZXlEb3duSGFuZGxlciAmJiBvcHRpb25zLmtleVVwSGFubGVyKXtcclxuICAgICAgICBvbktleUNhbGxiYWNrKG9wdGlvbnMua2V5RG93bkhhbmRsZXIsIG9wdGlvbnMua2V5VXBIYW5sZXIpO1xyXG4gICAgfVxyXG4gICAgaWYob3B0aW9ucy5tb3VzZWRvd25IYW5kbGVyICYmIG9wdGlvbnMubW91c2V1cEhhbmRsZXIpe1xyXG4gICAgICAgIG9uTW91c2VDYWxsYmFjayhvcHRpb25zLm1vdXNlZG93bkhhbmRsZXIsIG9wdGlvbnMubW91c2V1cEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpbml0Q2FtZXJhKG9wdGlvbnMuY2FtZXJhLCBvcHRpb25zLnNjcmVlbik7XHJcbiAgICBpbml0U3lzdGVtcyhvcHRpb25zLmRlYnVnKTtcclxuXHJcbiAgICAvL+eTt+egluWcsOWbvu+8jOiInuWPsFxyXG4gICAgaWYob3B0aW9ucy50aWxlbWFwKXtcclxuICAgICAgICBpbml0VGlsZShvcHRpb25zLnRpbGVtYXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5byA5ZCv56Kw5pKe57O757ufXHJcbiAgICBpZihvcHRpb25zLmNvbGxpZGUpe1xyXG4gICAgICAgIE9wZW5Db2xsaWRlcihvcHRpb25zLmNvbGxpZGUpO1xyXG5cclxuICAgICAgICAvLyBpZihvcHRpb25zLnVzZVRpbGVDb21iaW5lKXtcclxuICAgICAgICAvLyAgICAgbGV0IHJlc3VsdE5vZGVzID0gQ3JlYXRlQ29tYmluZU5vZGVzKHRpbGVtYXAsIGNvbGxpZGUuYm94SGFuZGxlcik7XHJcbiAgICAgICAgLy8gICAgIHJlc3VsdE5vZGVzLmZvckVhY2gocmVzdWx0ID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbGxpZGUubG9hZENhbGxiYWNrKHJlc3VsdC52YWx1ZSwgcmVzdWx0LnJlY3QpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmkYTlg4/mnLrvvIzlhajlsYDljZXkvotcclxuICovXHJcbnZhciBjYW1lcmEgPSBudWxsO1xyXG5mdW5jdGlvbiBpbml0Q2FtZXJhKGNhbWVyYURhdGEgPSBudWxsLCBzY3JlZW5EYXRhID0gbnVsbCl7XHJcbiAgICBsZXQgd2lkdGggPSBjYW1lcmFEYXRhLndpZHRoID8gY2FtZXJhRGF0YS53aWR0aCA6IHNjcmVlbkRhdGEud2lkdGg7XHJcbiAgICBsZXQgaGVpZ2h0ID0gY2FtZXJhRGF0YS5oZWlnaHQgPyBjYW1lcmFEYXRhLmhlaWdodCA6IHNjcmVlbkRhdGEuaGVpZ2h0O1xyXG4gICAgY2FtZXJhID0gTmV3Q2FtZXJhKGNhbWVyYURhdGEueCwgY2FtZXJhRGF0YS55LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5mdW5jdGlvbiBHZXRDYW1lcmEoKXtcclxuICAgIHJldHVybiBjYW1lcmE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55O356CW5Zyw5Zu+77yM6Iie5Y+w77yM5YWo5bGA5Y2V5L6LXHJcbiAqL1xyXG52YXIgdGlsZW1hcCA9IG51bGw7XHJcbmZ1bmN0aW9uIGluaXRUaWxlKHRpbGVtYXBEYXRhID0gbnVsbCl7XHJcbiAgICB0aWxlbWFwID0gY3JlYXRlVGlsZU1hcFdpdGhEYXRhKHRpbGVtYXBEYXRhLCB0aWxlbWFwRGF0YS5pbml0SGFuZGxlcik7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VGlsZW1hcCgpe1xyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcbmV4cG9ydHtpbml0R2FtZSwgaW5pdENhbWVyYSwgR2V0Q2FtZXJhLCBpbml0VGlsZSwgZ2V0VGlsZW1hcH0iLCJpbXBvcnQgeyBjcmVhdGVTcHJpdGVGcmFtZSwgZ2V0U3ByaXRlRnJhbWVCeU5hbWUgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZnJhbWVcIjtcclxuaW1wb3J0IHsgTmV3Q2FtZXJhIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgQ3JlYXRlQW5pbWF0ZUZyYW1lLCBDcmVhdGVBbmltYXRlQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2FjdGlvbi9hbmltYXRlXCI7XHJcbmltcG9ydCB7IE5ld1RpbGVNYXAgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3RpbGUvdGlsZW1hcFwiO1xyXG5pbXBvcnQgeyBJdGVyYXRvckdyaWRtYXAgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZ3JpZG1hcFwiO1xyXG5cclxuLyoqXHJcbiAqIOWIm+W7uueyvueBteW4p1xyXG4gKiB0ZXh0dXJlQXJlYURhdGEgPSB7XHJcbiAqICB4IDogMCxcclxuICogIHkgOiAwLFxyXG4gKiAgd2lkdGggOiAwLFxyXG4gKiAgaGVpZ2h0IDogMFxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTcHJpdGVGcmFtZVdpdGhEYXRhKG5hbWUgPSBcIlwiLCBiaXRtYXBEYXRhID0gbnVsbCwgdGV4dHVyZUFyZWFEYXRhID0gbnVsbCl7XHJcbiAgICBpZihuYW1lPT1cIlwiIHx8ICFiaXRtYXBEYXRhIHx8ICF0ZXh0dXJlQXJlYURhdGEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHdpZHRoID0gdGV4dHVyZUFyZWFEYXRhWyd3aWR0aCddO1xyXG4gICAgbGV0IGhlaWdodCA9IHRleHR1cmVBcmVhRGF0YVsnaGVpZ2h0J107XHJcbiAgICBpZighd2lkdGggfHwgIWhlaWdodCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlU3ByaXRlRnJhbWUobmFtZSwgYml0bWFwRGF0YSwgdGV4dHVyZUFyZWFEYXRhWyd4J10sIHRleHR1cmVBcmVhRGF0YVsneSddLCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHNjcmVlbk9wdGlvbnMgPSB7XHJcbiAqICAgICAgeCA6IDAsIHkgOiAwLCB3aWR0aCA6IDAsIGhlaWdodCA6IDBcclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ2FtZXJhV2l0aERhdGEoc2NyZWVuT3B0aW9ucyA9IG51bGwpe1xyXG4gICAgaWYoIXNjcmVlbk9wdGlvbnMpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHdpZHRoID0gc2NyZWVuT3B0aW9uc1snd2lkdGgnXTtcclxuICAgIGxldCBoZWlnaHQgPSBzY3JlZW5PcHRpb25zWydoZWlnaHQnXTtcclxuICAgIGlmKCF3aWR0aCB8fCAhaGVpZ2h0KXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBOZXdDYW1lcmEoXHJcbiAgICAgICAgc2NyZWVuT3B0aW9uc1sneCddLCBzY3JlZW5PcHRpb25zWyd5J10sXHJcbiAgICAgICAgd2lkdGgsIGhlaWdodFxyXG4gICAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHRpbGVtYXDku6Xlj4pncmlk55qEcmVjdCwgcG9z5YWz57O7XHJcbiAqIHRpbGVtYXDnmoTnm7jlr7nlnZDmoIfmmK8oMCwgMCnvvIzljbPlt6bkuIrop5JcclxuICogZ3JpZOeahOWdkOagh+aYr2dyaWTnn6nlvaLkuK3pl7RcclxuICog5L6L5aaC77yadGlsZW1hcC5wb3MueCA9IDIwLCBncmlkV2lkdGggPSA1MCwgY29sdW1uID0gNTtcclxuICog6YKj5LmIZ3JpZFswXeeahHBvcy54PSAyMCArIDAqNTAgKyA1MC8yID0gNDUsIHBvc1N0YXJ0LnggPSA0NSAtIDUwLzIgPSAyMFxyXG4gKiDlkIznkIZncmlkWzRd55qEcG9zLng9IDIwICsgNCo1MCArIDUwLzIgPSAyNDUsIHBvc1N0YXJ0LnggPSAyNDUgLSA1MC8yID0gMjIwXHJcbiAqIFxyXG4gKiBvcHRpb25zOntcclxuICogICAgICBkYXRhIDogWyAgICAgICAgICAgICAgICDkuIDnu7TmlbDnu4RcclxuICogICAgICAgICAgMSwgMSwgMSwgMCwgMCwgMSxcclxuICogICAgICAgICAgMiwgMSwgMCwgMCwgMSwgMixcclxuICogICAgICAgICAgMiwgMiwgMSwgMSwgMSwgMVxyXG4gKiAgICAgICAgICBdXHJcbiAqICAgICAgY29sdW1ucyA6IDYgICAgIOWIl+aVsFxyXG4gKiAgICAgIGdyaWRXaWR0aCA6IDMyXHJcbiAqICAgICAgZ3JpZEhlaWdodCA6IDMyICAgICDmr4/kuKrmoLzlrZDnmoTlrr3pq5hcclxuICogICAgICB4IDogMFxyXG4gKiAgICAgIHkgOiAwICAgICAgICAgICDliJ3lp4vkvY3nva7vvIzpu5jorqTkuLpzdGFnZeS4reW/g++8jOWNsygwLCAwKVxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVUaWxlTWFwV2l0aERhdGEob3B0aW9ucyA9IG51bGwsIGluaXRIYW5kbGVyID0gbnVsbCl7XHJcbiAgICBpZighb3B0aW9ucyB8fCBvcHRpb25zLmNvbHVtbnMgPD0gMCB8fCAhb3B0aW9ucy5kYXRhIHx8IG9wdGlvbnMuZGF0YS5sZW5ndGggPT0gMCB8fCBvcHRpb25zLmdyaWRXaWR0aCA8PSAwIHx8IG9wdGlvbnMuZ3JpZEhlaWdodCA8PSAwKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8v5Lii5byD5bCP5pWw6YOo5YiGLOS/neeVmeaVtOaVsOmDqOWIhu+8jOmqjOivgXRpbGVtYXDmlbDmja7lrozmlbTmgKdcclxuICAgIGxldCBjb2x1bW5zID0gb3B0aW9ucy5jb2x1bW5zO1xyXG4gICAgbGV0IHJvd3MgPSBwYXJzZUludChvcHRpb25zLmRhdGEubGVuZ3RoIC8gY29sdW1ucyk7XHJcbiAgICBpZihyb3dzICogY29sdW1ucyAhPSBvcHRpb25zLmRhdGEubGVuZ3RoKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIHBhcmFtOiBsZW4oZ3JpZHMpOlwiLCBvcHRpb25zLmRhdGEubGVuZ3RoLCBcIiBjb2x1bW5zOlwiLCBjb2x1bW5zKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGlsZW1hcCA9IE5ld1RpbGVNYXAocm93cywgY29sdW1ucywgb3B0aW9ucy5ncmlkV2lkdGgsIG9wdGlvbnMuZ3JpZEhlaWdodCwgb3B0aW9ucy54LCBvcHRpb25zLnksIGluaXRIYW5kbGVyKTtcclxuICAgIGlmKGluaXRIYW5kbGVyKXtcclxuICAgICAgICBJdGVyYXRvckdyaWRtYXAodGlsZW1hcC5ncmlkbWFwLCBncmlkID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbCA9IG9wdGlvbnMuZGF0YVtncmlkLnJvd0luZGV4ICogY29sdW1ucyArIGdyaWQuY29sSW5kZXhdO1xyXG4gICAgICAgICAgICBpbml0SGFuZGxlcih2YWwsIHRpbGVtYXAsIGdyaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5Yib5bu65bqP5YiX5bin5Yqo55S7XHJcbiAqIGFuaW1hdGVEYXRhID0ge1xyXG4gKiAgdHlwZSA6IDAsXHJcbiAqICBmcmFtZXMgOiBbXHJcbiAqICAgICAge1xyXG4gKiAgICAgICAgICBkdXJhdGlvbiA6IDAsXHJcbiAqICAgICAgICAgIHhPZmZzZXQgOiAwLFxyXG4gKiAgICAgICAgICB5T2Zmc2V0IDogMFxyXG4gKiAgICAgIH1cclxuICogIF1cclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZVdpdGhEYXRhKGFuaW1hdGVEYXRhID0gbnVsbCl7XHJcbiAgICBpZighYW5pbWF0ZURhdGEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsZXQgZnJhbWVzRGF0YSA9IGFuaW1hdGVEYXRhWydmcmFtZXMnXTtcclxuICAgIGlmKCFmcmFtZXNEYXRhIHx8IGZyYW1lc0RhdGEubGVuZ3RoID09IDApe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhbmltYXRlRnJhbWVzID0gW107XHJcbiAgICBmcmFtZXNEYXRhLmZvckVhY2goZnJhbWVEYXRhID0+IHtcclxuICAgICAgICBhbmltYXRlRnJhbWVzLnB1c2goXHJcbiAgICAgICAgICAgIENyZWF0ZUFuaW1hdGVGcmFtZShnZXRTcHJpdGVGcmFtZUJ5TmFtZShzcHJpdGVGcmFtZU5hbWUpLFxyXG4gICAgICAgICAgICAgICAgZnJhbWVEYXRhWydkdXJhdGlvbiddLCBmcmFtZURhdGFbJ3hPZmZzZXQnXSwgZnJhbWVEYXRhWyd5T2Zmc2V0J10pKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENyZWF0ZUFuaW1hdGVBY3Rpb24oYW5pbWF0ZURhdGFbJ3R5cGUnXSwgZW50aXR5SWQsIGFuaW1hdGVGcmFtZXMpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0e0xvYWRSZXNvdXJjZSwgY3JlYXRlU3ByaXRlRnJhbWVXaXRoRGF0YSwgY3JlYXRlQ2FtZXJhV2l0aERhdGEsIGNyZWF0ZVRpbGVNYXBXaXRoRGF0YSwgY3JlYXRlQW5pbWF0ZVdpdGhEYXRhfSIsImltcG9ydCBkYXRhIGZyb20gJy4vZGF0YSc7XHJcbmltcG9ydCB7IFN0YXJ0VGVzdCB9IGZyb20gJy4vZnJhbWV3b3JrL2RpcmVjdG9yL3V0aWxzL2dhbWUnO1xyXG5pbXBvcnQgeyBHZXRHcmlkQ2VudGVyIH0gZnJvbSAnLi9mcmFtZXdvcmsvY29tcG9uZW50L3RpbGUvdGlsZW1hcCc7XHJcbmltcG9ydCB7IEdldEdyaWRXaWR0aCwgR2V0R3JpZEhlaWdodCB9IGZyb20gJy4vZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2dyaWRtYXAnO1xyXG5pbXBvcnQgeyBBZGRCbG9ja0NvbGxpZGVyLCBBZGRCb2R5Q29sbGlkZXIgfSBmcm9tICcuL2ZyYW1ld29yay9jb21wb25lbnQvY29sbGlkZS9ib3gyL3V0aWxzJztcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi9mcmFtZXdvcmsvZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzJztcclxuaW1wb3J0IHsgTmV3UmVjdFBvc1R1cGxlIH0gZnJvbSAnLi9mcmFtZXdvcmsvY29tcG9uZW50L3Bvcy9yZWN0L2NvbXBvbmVudCc7XHJcbmltcG9ydCB7IE5ld1BvcyB9IGZyb20gJy4vZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50JztcclxuaW1wb3J0IHsgTmV3UmVjdCB9IGZyb20gJy4vZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3JlY3QnO1xyXG5pbXBvcnQgeyBTZXRQb3MsIE1vdmUgfSBmcm9tICcuL2ZyYW1ld29yay9jb21wb25lbnQvcG9zL3V0aWxzJztcclxuaW1wb3J0IHsgS0VZX0EsIEtFWV9XLCBLRVlfUywgS0VZX0QgfSBmcm9tICcuL2ZyYW1ld29yay9mb3VuZGF0aW9uL2VuZ2luZS9oNS9tb2RlbCc7XHJcblxyXG4vKipcclxuICogIDIwMTkuMTAuMDlcclxuICogICAgICB2c+W/veeEtuS4jeaPkOekumltcG9ydOS6hu+8jOaMieeFp+e9keS4iueahOaWueazle+8jOWKoOS6huS4qmpzY29uZmlnLmpzb27lsLHlj6/ku6XkuoZcclxuICovXHJcblxyXG4vL+iwqOiusOaVsOaNrumpseWKqFxyXG52YXIgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oZGF0YSwge1xyXG4gICAgZGVidWcgOiB0cnVlLFxyXG4gICAgY29sbGlkZSA6IHtcclxuICAgICAgICB1c2VCb3ggOiB0cnVlXHJcbiAgICB9LFxyXG4gICAga2V5RG93bkhhbmRsZXIgOiBrZXlEb3duSGFuZGxlcixcclxuICAgIGtleVVwSGFubGVyIDoga2V5VXBIYW5sZXJcclxufSk7XHJcbm9wdGlvbnMudGlsZW1hcC5pbml0SGFuZGxlciA9IGluaXRIYW5kbGVyO1xyXG5cclxuZnVuY3Rpb24gaW5pdEhhbmRsZXIodmFsID0gMCwgdGlsZW1hcCA9IG51bGwsIGdyaWQgPSBudWxsKXtcclxuICAgIGxldCBwb3MgPSBHZXRHcmlkQ2VudGVyKHRpbGVtYXAsIGdyaWQpO1xyXG4gICAgaWYodmFsID09IDEpe1xyXG4gICAgICAgIE5ld0Jsb2NrKHBvcy54LCBwb3MueSwgR2V0R3JpZFdpZHRoKHRpbGVtYXAuZ3JpZG1hcCksIEdldEdyaWRIZWlnaHQodGlsZW1hcC5ncmlkbWFwKSk7XHJcbiAgICB9ZWxzZSBpZih2YWwgPT0gMil7XHJcbiAgICAgICAgTmV3UGxheWVyKHBvcy54LCBwb3MueSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld0Jsb2NrKHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIEFkZEJsb2NrQ29sbGlkZXIobmV3IEVudGl0eSgpLmlkLCBOZXdSZWN0UG9zVHVwbGUoXHJcbiAgICAgICAgTmV3UG9zKHgsIHkpLCAwLCAwLCBOZXdSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpXHJcbiAgICApKTtcclxufVxyXG5cclxudmFyIHBseUlkID0gMDtcclxudmFyIHBseVBvcyA9IG51bGw7XHJcbmZ1bmN0aW9uIE5ld1BsYXllcih4ID0gMCwgeSA9IDApe1xyXG4gICAgcGx5SWQgPSBuZXcgRW50aXR5KCkuaWQ7XHJcbiAgICBwbHlQb3MgPSBTZXRQb3MocGx5SWQsIHgsIHkpO1xyXG4gICAgQWRkQm9keUNvbGxpZGVyKHBseUlkLCBOZXdSZWN0UG9zVHVwbGUoXHJcbiAgICAgICAgcGx5UG9zLCAwLCAwLCBOZXdSZWN0KDAsIDAsIDI1LCAyNSlcclxuICAgICkpO1xyXG59XHJcblxyXG52YXIga2V5cyA9IDA7ICAgLy8xMTExID0g5LiK5LiL5bem5Y+zXHJcbmZ1bmN0aW9uIGtleURvd25IYW5kbGVyKGNvZGUgPSAwKXtcclxuICAgIHN3aXRjaChjb2RlKXtcclxuICAgICAgICBjYXNlIEtFWV9XOlxyXG4gICAgICAgICAgICBrZXlzID0ga2V5cyB8IDg7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgS0VZX0E6XHJcbiAgICAgICAgICAgIGtleXMgPSBrZXlzIHwgMjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBLRVlfUzpcclxuICAgICAgICAgICAga2V5cyA9IGtleXMgfCA0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEtFWV9EOlxyXG4gICAgICAgICAgICBrZXlzID0ga2V5cyB8IDE7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGtleVVwSGFubGVyKGNvZGUgPSAwKXtcclxuICAgIHN3aXRjaChjb2RlKXtcclxuICAgICAgICBjYXNlIEtFWV9XOlxyXG4gICAgICAgICAgICBrZXlzID0ga2V5cyAmIDc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgS0VZX0E6XHJcbiAgICAgICAgICAgIGtleXMgPSBrZXlzICYgMTM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgS0VZX1M6XHJcbiAgICAgICAgICAgIGtleXMgPSBrZXlzICYgMTE7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgS0VZX0Q6XHJcbiAgICAgICAgICAgIGtleXMgPSBrZXlzICYgMTQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgZCA9IDQ7XHJcbnZhciBkeCA9IDA7XHJcbnZhciBkeSA9IDA7XHJcbmNsYXNzIE15U2NlbmUge1xyXG4gICAgb25TdGFydCgpe1xyXG5cclxuICAgIH1cclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgaWYoa2V5cyAmIDEpe1xyXG4gICAgICAgICAgICBkeCA9IGQ7XHJcbiAgICAgICAgfWVsc2UgaWYoa2V5cyAmIDIpe1xyXG4gICAgICAgICAgICBkeCA9IC1kO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBkeCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihrZXlzICYgNCl7XHJcbiAgICAgICAgICAgIGR5ID0gZDtcclxuICAgICAgICB9ZWxzZSBpZihrZXlzICYgOCl7XHJcbiAgICAgICAgICAgIGR5ID0gLWQ7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGR5ID0gMFxyXG4gICAgICAgIH1cclxuICAgICAgICBNb3ZlKHBseUlkLCBkeCwgZHkpO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcbihmdW5jdGlvbiAoKXtcclxuICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xyXG4gICAgU3RhcnRUZXN0KG9wdGlvbnMsIG5ldyBNeVNjZW5lKCkpO1xyXG59KSgpIiwiaW1wb3J0IHsgaW5pdEdhbWUgfSBmcm9tIFwiLi4vd29ybGQvcmVzXCI7XHJcbmltcG9ydCB7IHJ1bldpdGhTY2VuZSB9IGZyb20gXCIuLi9zeXN0ZW0vcnVuXCI7XHJcblxyXG4vKipcclxuICogb3B0aW9ucyB7XHJcbiAqICAgICAgdGV4dHVyZXMgOiDmoLzlvI/op4FMb2FkUmVzb3VyY2UoKeWGhVxyXG4gKiAgICAgIHNjcmVlbiA6IHtcclxuICogICAgICAgICAgd2lkdGggOiA4MDAsXHJcbiAqICAgICAgICAgIGhlaWdodCA6IDgwMFxyXG4gKiAgICAgIH0sXHJcbiAqICAgICAgZnBzIDogNjAsXHJcbiAqICAgICAgZGVidWcgOiBmYWxzZSxcclxuICogICAgICBjYW1lcmEgOiB7XHJcbiAqICAgICAgICAgIHggOiAwLFxyXG4gKiAgICAgICAgICB5IDogMFxyXG4gKiAgICAgIH0sXHJcbiAqICAgICAgdGlsZW1hcCA6IOagvOW8j+WPguiAg3RpbGVtYXDkuIDoioJcclxuICogICAgICBrZXlIYW5kbGVyIDogZnVuY3Rpb24odHlwZSwga2V5Q29kZSkgICB0eXBlPTEgPSBkb3duLCB0eXBlPTIgPSB1cFxyXG4gKiAgICAgIGNvbGxpZGUgOiB7XHJcbiAqICAgICAgICAgIHVzZUJveCA6IGZhbHNlLFxyXG4gKiAgICAgICAgICB1c2VHcm91cCA6IGZhbHNlLFxyXG4gKiAgICAgICAgICBwYWlycyA6IFtcclxuICogICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgICB0ZWFtMSA6IDEsXHJcbiAqICAgICAgICAgICAgICAgICAgdGVhbTIgOiAyXHJcbiAqICAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgIF0sXHJcbiAqICAgICAgICAgIGhhbmRsZXIgOiBmdW5jdGlvbihkdCwgY29sbGlkZXIxLCBjb2xsaWRlcjIpXHJcbiAqICAgICAgfVxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBTdGFydChvcHRpb25zID0gbnVsbCwgc2NlbmUgPSBudWxsKXtcclxuICAgIExvYWRSZXNvdXJjZShvcHRpb25zLnRleHR1cmVzLCBudWxsLCAoKSA9PiB7XHJcbiAgICAgICAgaW5pdEdhbWUob3B0aW9ucyk7XHJcbiAgICAgICAgcnVuV2l0aFNjZW5lKHNjZW5lKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTdG9wKCl7XHJcbiAgICBHZXRTY2VuZSgpLm9uRW5kKCk7XHJcbiAgICBHZXRTeXN0ZW1zKCkuZm9yRWFjaChzeXN0ZW0gPT4ge1xyXG4gICAgICAgIHN5c3RlbS5vbkVuZCgpO1xyXG4gICAgfSk7XHJcbiAgICBlbmdpbmUuU3RvcCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTdGFydFRlc3Qob3B0aW9ucywgc2NlbmUgPSBudWxsKXtcclxuICAgIGluaXRHYW1lKG9wdGlvbnMpO1xyXG4gICAgcnVuV2l0aFNjZW5lKHNjZW5lKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDliqDovb3otYTmupDvvIzliJvlu7rnsr7ngbXluKdcclxuICogdGV4dHVyZXMgOiBbXHJcbiAqICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgIGltZyA6IFwicmVzL2EucG5nXCIsXHJcbiAqICAgICAgICAgICAgICBmcmFtZXMgOiBbXHJcbiAqICAgICAgICAgICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogXCJ3YWxrMVwiXHJcbiAqICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmVBcmVhIDoge1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgeCA6IDAsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB5IDogMCxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoIDogMCxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA6IDBcclxuICogICAgICAgICAgICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgICAgICAgICAgIH1cclxuICogICAgICAgICAgICAgIF1cclxuICogICAgICAgICAgfVxyXG4gKiAgICAgIF0sXHJcbiAqL1xyXG5mdW5jdGlvbiBMb2FkUmVzb3VyY2UodGV4dHVyZXNEYXRhID0gbnVsbCwgT25sb2FkQ2FsbGJhY2sgPSBudWxsLCBPbkNvbXBsZXRlQ2FsbGJhY2sgPSBudWxsKXtcclxuICAgIC8v5Yqg6L295Zu+5YOP5bm25Yib5bu65pi+56S65binXHJcbiAgICBpZighdGV4dHVyZXNEYXRhIHx8IHRleHR1cmVzRGF0YS5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IF9jb3VudCA9IDA7XHJcbiAgICB0ZXh0dXJlc0RhdGEuZm9yRWFjaCh0ID0+e1xyXG4gICAgICAgIGxvYWRJbWcodC5pbWcsIGJpdG1hcERhdGEgPT4ge1xyXG4gICAgICAgICAgICB0LmZyYW1lcy5mb3JFYWNoKGZyYW1lRGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVTcHJpdGVGcmFtZVdpdGhEYXRhKGZyYW1lRGF0YS5uYW1lLCBiaXRtYXBEYXRhLCBmcmFtZURhdGEudGV4dHVyZUFyZWEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX2NvdW50Kys7XHJcbiAgICAgICAgICAgIGlmKE9ubG9hZENhbGxiYWNrKXtcclxuICAgICAgICAgICAgICAgIE9ubG9hZENhbGxiYWNrKF9jb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGV4dHVyZXNEYXRhLmxlbmd0aCA9PSBfY291bnQgJiYgT25Db21wbGV0ZUNhbGxiYWNrKXtcclxuICAgICAgICAgICAgICAgIE9uQ29tcGxldGVDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IHtTdGFydCwgU3RvcCwgU3RhcnRUZXN0LCBMb2FkUmVzb3VyY2V9Il0sInNvdXJjZVJvb3QiOiIifQ==