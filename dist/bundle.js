!function(t){var n={};function e(r){if(n[r])return n[r].exports;var l=n[r]={i:r,l:!1,exports:{}};return t[r].call(l.exports,l,l.exports,e),l.l=!0,l.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var l in t)e.d(r,l,function(n){return t[n]}.bind(null,l));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t){t.exports={screen:{width:800,height:800},fps:60,camera:{x:0,y:0},stage:{width:1800,height:1800},tilemap:{data:[1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1],columns:6,gridWidth:10,gridHeight:10}}},function(t,n,e){"use strict";e.r(n);var r=e(0);class l{constructor(){this.id=u()}}var i=1;function u(){return i++}class o{constructor(t=0){this.entityId=t,this.id=t}}class s{constructor(t=0){this.priority=t,this.id=u()}onStart(){}onUpdate(t=0){}onEnd(){}}const c=2;function a(t=null,n=0){t.onUpdate(n)}function d(t=null){t.state=c,t.onEnd()}class f{constructor(t=null,n=null,e=null){this.data=t,this.prep=n,this.next=e}}class h{constructor(){this.head=new f,this.tail=new f,this.head.next=this.tail,this.tail.prep=this.head,this._map=new Map,this._size=0,this._delList=[],this._curr=this.head,this._lock=!1}}function p(){return new h}function g(t=null,n=0,e=!1){if(!t)return void console.error("link is null.");let r=t._map.get(n);return r?r.data:(e&&console.error("can't find keyId: ",n),null)}function x(t=null,n=null){return y(t,n,t.tail)}function y(t=null,n=null,e=null){if(!t||!n||!n.id)return console.error("error param: ",t,n,n.id),null;if(t._map.get(n.id))return console.error("error id:%d is exist",n.id),null;let r=e.prep,l=new f(n,r,e);return r.next=l,e.prep=l,t._map.set(n.id,l),t._size++,l}function w(t=null,n=0){let e=t._map.get(n);if(!e)return;t._map.delete(n);let r=e.prep,l=e.next;r.next=l,l.prep=r,t._size--}function m(t=null,n=null){if(!t||!n)return;t._lock=!0;let e=t.head.next;for(;e!=t.tail&&!n(e.data);)e=e.next;for(;t._delList.length>0;)w(t,t._delList.pop());t._lock=!1}var v=p();class _ extends s{onUpdate(t=0){m(v,n=>{a(n,t),n.isEnd()&&d(n)})}}var k=null;p();var H=p();class b{constructor(t=0,n=0){this.x=t,this.y=n}}function I(t=0,n=0){return new b(t,n)}function U(t=null,n=null){return I(t.x-n.x,t.y-n.y)}class S{constructor(t=0,n=0){this.x=t,this.y=n,this.distance=t*t+n*n}}function E(t=0,n=0){return new S(t,n)}class j extends o{constructor(t=0,n=0,e=0){super(t),this.pos=I(n,e),this.vec=E()}}var L=p();function M(t=0){let n=g(L,t);return n||function(t=0){let n=new j(t);return x(L,n),n}(t)}function O(){return L}function W(t=0,n=0,e=0){let r=M(t).pos;return r.x=n,r.y=e,r}class R{constructor(t=null,n=0,e=0,r=null){this.offset=t,this.width=n,this.height=e,this.center=r}}function C(t=0,n=0,e=0,r=0){let l=E(t,n);return new R(l,e,r,I())}function D(t=null,n=0,e=0){t.center.x=n+t.offset.x,t.center.y=e+t.offset.y}function P(t=null){return I(t.center.x-G(t),t.center.y-T(t))}function G(t=null){return.5*t.width}function T(t=null){return.5*t.height}class z extends l{constructor(){super(),this.pos=null,this.rect=null}}function A(t=0,n=0,e=0,r=0){let l=new z;return l.pos=W(l.id,t,n),l.rect=C(0,0,e,r),D(l.rect,t,n),l}function F(t=null,n=null){return IsRectsCross(t.rect,n)}var B={ctx:null,canvas:null,fps:0,tick:0};function q(){return B}var J=q();Math.PI;function K(t,n=0,e=0,r=0,l=0,i=0,u=0,o=0,s=0){J.ctx.drawImage(t,n,e,r,l,i,u,o,s)}function N(t=0,n=0,e=0,r=0){J.ctx.strokeRect(t,n,e,r)}class Q extends s{onUpdate(t=0){m(H,t=>{let n=function(t=0){return M(t).pos}(t.entityId);D(t.displayArea,n.x,n.y),function(t=null){let n=It(),e=t.displayArea;if(!F(n,e))return;let r=U(P(e),P(n.rect)),l=t.spriteFrame.textureArea;K(t.spriteFrame.bitmapData,l.x,l.y,l.width,l.height,r.x,r.y,GetRectWidth(e),GetRectHeight(e))}(t)})}}var V=null;class X extends s{onUpdate(t=0){m(GetRectList(),t=>{!function(t=null){let n=It();if(!F(n,t))return;let e=U(P(t),P(n.rect));N(e.x,e.y,GetRectWidth(t),GetRectHeight(t))}(t.rect)})}}var Y=null;class Z extends s{onUpdate(t=0){m(O(),t=>{let n=t.vec,e=t.pos;e.x+=n.x,e.y+=n.y,n.x=0,n.y=0})}}var $=null;var tt,nt=q();var et=!1;var rt=null,lt=(new Date).getTime();var it=new Map;$||($=new Z);var ut=null,ot=null;function st(t=!1){x(ut=p(),(k||(k=new _),k)),x(ot=p(),(V||(V=new Q),V)),t&&x(ot,(Y||(Y=new X),Y))}var ct,at=16,dt=41,ft=0;function ht(t){m(ut,t=>{t.onStart()}),m(ot,t=>{t.onStart()}),t.onStart(),function(t=null){et=!1,tt=t,setInterval(()=>{rt=(new Date).getTime(),et||tt(rt-lt),lt=(new Date).getTime()},nt.tick)}(n=>{(ct+=n)>=at&&(ct-=at,t.onUpdate(n),m(ut,t=>{t.onUpdate(n)})),(ft+=n)>=dt&&(ft-=dt,m(ot,t=>{t.onUpdate(n)}))})}new Map;class pt{constructor(t=0,n=0,e=null){this.rowIndex=t,this.colIndex=n,this.data=e}}class gt{constructor(t=0,n=0,e=0,r=0,l=null){this.rows=t,this.columns=n,this.gridWidth=e,this.gridHeight=r,this.grids=l}}function xt(t=null){return t.gridWidth}function yt(t=null){return t.gridHeight}function wt(t=null){return t.columns*t.gridWidth}function mt(t=null){return t.rows*t.gridHeight}class vt{constructor(t=null,n=0,e=0){this.gridmap=t,this.pos=I(n,e)}}function _t(t=0,n=0,e=0,r=0,l=0,i=0){let u=function(t=0,n=0,e=0,r=0){let l=[];for(let e=0;e<t;e++)for(let t=0;t<n;t++){let n=new pt(e,t);l.push(n)}return new gt(t,n,e,r,l)}(t,n,e,r);return new vt(u,l,i)}function kt(t=null){return I(t.pos.x-.5*wt(t.gridmap),t.pos.y-.5*mt(t.gridmap))}function Ht(t=null){!function(t=0,n=0,e=10){let r=document.getElementById("canvas");r.width=t,r.height=n,B.canvas=r,B.ctx=r.getContext("2d"),B.ctx.strokeStyle="#0000ff",B.fps=e,B.tick=1e3/e}(t.screen.width,t.screen.height,t.fps),t.keyDownHandler&&t.keyUpHanler&&function(t=null,n=null){window.addEventListener("keydown",n=>{let e=n.keyCode;it.get(e)||(it.set(e,1),t(n.keyCode))}),window.addEventListener("keyup",t=>{let e=t.keyCode;it.delete(e),n(t.keyCode)})}(t.keyDownHandler,t.keyUpHanler),t.mousedownHandler&&t.mouseupHandler&&function(t=null,n=null){nt.canvas.addEventListener("mousedown",n=>{t(n.x,n.y)}),nt.canvas.addEventListener("mouseup",t=>{n(t.x,t.y)})}(t.mousedownHandler,t.mouseupHandler),function(t=null,n=null){let e=t.width?t.width:n.width,r=t.height?t.height:n.height;bt=A(t.x,t.y,e,r)}(t.camera,t.screen),st(t.debug),t.tilemap&&function(t=null){(function(t=null,n=null){if(!t||t.columns<=0||!t.data||0==t.data.length||t.gridWidth<=0||t.gridHeight<=0)return null;let e=t.columns,r=parseInt(t.data.length/e);if(r*e!=t.data.length)return console.log("error param: len(grids):",t.data.length," columns:",e),null;let l=_t(r,e,t.gridWidth,t.gridHeight,t.x,t.y);return n&&function(t=null,n=null){t.grids.forEach(t=>{n(t)})}(l.gridmap,r=>{let i=t.data[r.rowIndex*e+r.colIndex];n(i,l,r)}),l})(t,t.initHandler)}(t.tilemap),t.collide}var bt=null;function It(){return bt}var Ut=Object.assign(r,{debug:!1});Ut.tilemap.initHandler=function(t=0,n=null,e=null){let r=function(t=null,n=null){let e=kt(t);return I(e.x+xt(t.gridmap)*(n.colIndex+.5),e.y+yt(t.gridmap)*(n.rowIndex+.5))}(n,e);console.log(r.x,r.y),function(t=0,n=0,e=0,r=0){N(t,n,e,r)}(r.x,r.y,xt(n.gridmap),yt(n.gridmap))};class St{onStart(){}onUpdate(t=0){}}console.log(Ut),function(t,n=null){Ht(t),ht(n)}(Ut,new St)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3ZpZXcvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9jb21wb25lbnQvcG9zL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9wb3MvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L2NhbWVyYS91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZW5naW5lL2g1L21vZGVsLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9lbmdpbmUvaDUvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivc3lzdGVtL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2RpcmVjdG9yL3N5c3RlbS9tb3ZlLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9lbmdpbmUvaDUvcHJvY2Vzc29yLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivc3lzdGVtL3J1bi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2ZyYW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZ3JpZG1hcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC90aWxlL3RpbGVtYXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci93b3JsZC9yZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci93b3JsZC9hZGFwdGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvZ2FtZS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkVudGl0eSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJpZCIsIk5ld0VudGl0eUlkIiwiQ29tcG9uZW50IiwiZW50aXR5SWQiLCJTeXN0ZW0iLCJwcmlvcml0eSIsImR0IiwiQUNUSU9OX1NUQVRFX0VORCIsImFjdGlvblVwZGF0ZSIsImFjdGlvbiIsIm9uVXBkYXRlIiwiYWN0aW9uRW5kIiwic3RhdGUiLCJvbkVuZCIsIkxpbmtOb2RlIiwiZGF0YSIsInByZXAiLCJuZXh0IiwiTGluayIsImhlYWQiLCJ0YWlsIiwiX21hcCIsIk1hcCIsIl9zaXplIiwiX2RlbExpc3QiLCJfY3VyciIsIl9sb2NrIiwiTmV3TGluayIsIkdldExpbmtEYXRhIiwibGluayIsImtleUlkIiwicmVxdWlyZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJub2RlIiwiUHVzaFRvTGluayIsImFkZFRvTGluayIsInNldCIsInJlbW92ZSIsImRlbGV0ZSIsIkxpbmtJdGVyYXRvciIsImNhbGxiYWNrIiwibGVuZ3RoIiwicG9wIiwiYWN0aW9uTGlzdCIsImFjdGlvbl9BY3Rpb25TeXN0ZW0iLCJpc0VuZCIsInN5cyIsImRpc3BsYXlMaXN0IiwiUG9zIiwieCIsInkiLCJOZXdQb3MiLCJUb0xvY2F0ZVBvcyIsInRhcmdldFBvcyIsInJlZmVyUG9zIiwiVmVjIiwiZGlzdGFuY2UiLCJwb2ludF9OZXdWZWMiLCJjb21wb25lbnRfUG9zQ29tcG9uZW50Iiwic3VwZXIiLCJwb3MiLCJ2ZWMiLCJwb3NDb21zIiwiR2V0UG9zQ29tcG9uZW50IiwiY29tIiwiY3JlYXRlUG9zQ29tcG9uZW50IiwiR2V0UG9zQ29tcG9uZW50TGlzdCIsIlNldFBvcyIsIlJlY3RhbmdsZSIsIm9mZnNldCIsIndpZHRoIiwiaGVpZ2h0IiwiY2VudGVyIiwiTmV3UmVjdCIsInhPZmZzZXQiLCJ5T2Zmc2V0IiwiVXBkYXRlUmVjdFBvc0J5VW5pdCIsInJlY3QiLCJ1bml0UG9zWCIsInVuaXRQb3NZIiwiR2V0UmVjdFN0YXJ0UG9zIiwiR2V0UmVjdEhhbGZXaWR0aCIsIkdldFJlY3RIYWxmSGVpZ2h0IiwidXRpbHNfQ2FtZXJhIiwiTmV3Q2FtZXJhIiwiY2FtZXJhIiwiSXNJbkNhbWVyYSIsIklzUmVjdHNDcm9zcyIsIl9lbmdpbmUiLCJjdHgiLCJjYW52YXMiLCJmcHMiLCJ0aWNrIiwiZ2V0RW5naW5lIiwicmVuZGVyX2VuZ2luZSIsIk1hdGgiLCJQSSIsImRyYXdJbWFnZSIsImltZ0RhdGEiLCJzeCIsInN5Iiwic3dpZHRoIiwic2hlaWdodCIsImRyYXdSZWN0Iiwic3Ryb2tlUmVjdCIsInJlbmRlcl9SZW5kZXJVcGRhdGVTeXN0ZW0iLCJkaXNwbGF5VHVwbGUiLCJHZXRQb3MiLCJkaXNwbGF5QXJlYSIsIkdldENhbWVyYSIsInNjcmVlblBvcyIsInRleHR1cmVBcmVhIiwic3ByaXRlRnJhbWUiLCJiaXRtYXBEYXRhIiwiR2V0UmVjdFdpZHRoIiwiR2V0UmVjdEhlaWdodCIsImRyYXdGcmFtZUluQ2FtZXJhIiwicmVuZGVyU3lzIiwicmVuZGVyX0RyYXdSZWN0U3lzdGVtIiwiR2V0UmVjdExpc3QiLCJjb2xsaWRlciIsImRyYXdSZWN0SW5DYW1lcmEiLCJkZWJ1Z1N5cyIsIm1vdmVfUG9zVXBkYXRlU3lzdGVtIiwibW92ZUNvbSIsIm1vdmVfc3lzIiwiX2NhbGxiYWNrIiwicHJvY2Vzc29yX2VuZ2luZSIsIl9pc0VuZCIsInByb2Nlc3Nvcl9zdGFydCIsImxhc3QiLCJEYXRlIiwiZ2V0VGltZSIsIl9rZXlEb3duTWFwIiwibG9naWNTeXN0ZW1zIiwicmVuZGVyU3lzdGVtcyIsImluaXRTeXN0ZW1zIiwiZGVidWciLCJfdDEiLCJsb2dpY1RpY2siLCJyZW5kZXJUaWNrIiwiX3QyIiwicnVuV2l0aFNjZW5lIiwic2NlbmUiLCJzeXN0ZW0iLCJvblN0YXJ0Iiwib25VcGRhdGVDYWxsYmFjayIsInNldEludGVydmFsIiwicnVuVGljayIsIkdyaWQiLCJyb3dJbmRleCIsImNvbEluZGV4IiwiR3JpZE1hcCIsInJvd3MiLCJjb2x1bW5zIiwiZ3JpZFdpZHRoIiwiZ3JpZEhlaWdodCIsImdyaWRzIiwiR2V0R3JpZFdpZHRoIiwiZ3JpZG1hcCIsIkdldEdyaWRIZWlnaHQiLCJHZXRHcmlkTWFwV2lkdGgiLCJHZXRHcmlkTWFwSGVpZ2h0IiwidGlsZW1hcF9UaWxlTWFwIiwiTmV3VGlsZU1hcCIsImdyaWQiLCJwdXNoIiwiTmV3R3JpZE1hcCIsIkdldFRpbGVtYXBTdGFydCIsInRpbGVtYXAiLCJpbml0R2FtZSIsIm9wdGlvbnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsInN0cm9rZVN0eWxlIiwiaW5pdENhbnZhcyIsInNjcmVlbiIsImtleURvd25IYW5kbGVyIiwia2V5VXBIYW5sZXIiLCJrZXlEb3duQ2FsbGJhY2siLCJrZXlVcENhbGxiYWNrIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjb2RlIiwia2V5Q29kZSIsIm9uS2V5Q2FsbGJhY2siLCJtb3VzZWRvd25IYW5kbGVyIiwibW91c2V1cEhhbmRsZXIiLCJtb3VzZWRvd25DYWxsYmFjayIsIm1vdXNldXBDYWxsYmFjayIsImV2ZW50Iiwib25Nb3VzZUNhbGxiYWNrIiwiY2FtZXJhRGF0YSIsInNjcmVlbkRhdGEiLCJyZXNfY2FtZXJhIiwiaW5pdENhbWVyYSIsInRpbGVtYXBEYXRhIiwiaW5pdEhhbmRsZXIiLCJwYXJzZUludCIsImxvZyIsImZvckVhY2giLCJJdGVyYXRvckdyaWRtYXAiLCJ2YWwiLCJjcmVhdGVUaWxlTWFwV2l0aERhdGEiLCJpbml0VGlsZSIsImNvbGxpZGUiLCJtYWluX29wdGlvbnMiLCJhc3NpZ24iLCJzdGFydCIsIkdldEdyaWRDZW50ZXIiLCJEcmF3UmVjdCIsIk15U2NlbmUiLCJTdGFydFRlc3QiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFG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QUFXLEVBQUFWLEdDR0EsU0FBQUQsRUFBQSxFQUFBQyxFQUFBLEVBQUFvQixFQUFBLEVBQUFDLEVBQUEsR0FDSWdDLEVBQVF0RCxFQUFBQyxFQUFBb0IsRUFBQUMsR0RIUjZJLENBQVF4SixFQUFBWCxFQUFBVyxFQUFBVixFQUFlNEcsR0FBWVcsRUFBQVYsU0FBbUJDLEdBQWFTLEVBQUFWLFdBR3ZFLE1BQUFzRCxHQUNBeE4sV0FHQUEsU0FBQVEsRUFBQSxLQU1BMEIsUUFBQTBLLElBQWdCTyxJRVVoQixTQUFBckMsRUFBQTVCLEVBQUEsTUFDSTJCLEdBQVFDLEdBQ1I3QixHQUFZQyxHRlhadUUsQ0FBVU4sR0FBTyxJQUFBSyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCIvKipcclxuICogMjAxOS4xMC4xMFxyXG4gKiBcdOazqOaEj++8jGxpbmstaW50ZXJmYWNl77yM6ZyA6KaB5pyJaWQsIHByaW9yaXR55Lik5Liq5bGe5oCnXHJcbiAqL1xyXG5cclxuXHJcbi8qKlxyXG4qICAgVGhlIEJhc2UgU3RydWN0XHJcbipcdOWwveeuoeaIkeS7rOWPqumcgOimgU5ld0VudGl0eUlkKCnvvIzkvYbmmK/miYDmnInpnIDopoFpZOeahOexu+mDveimgee7p+aJv+atpOexu1xyXG4qL1xyXG5jbGFzcyBFbnRpdHkge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5pZCA9IE5ld0VudGl0eUlkKCk7XHJcblx0fVxyXG59XHJcblxyXG52YXIgaWQgPSAxO1xyXG5mdW5jdGlvbiBOZXdFbnRpdHlJZCgpe1xyXG5cdHJldHVybiBpZCsrO1xyXG59XHJcblxyXG4vKipcclxuKlx0VGhlIGJhc2UgQ29tcG9uZW50XHJcbipcdOavj+S4qmVudGl0eeWvueavj+enjee7hOS7tuWPquiDveaMgeacieS4gOS4qlxyXG4qL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG5cdGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCkge1xyXG5cdFx0dGhpcy5lbnRpdHlJZCA9IGVudGl0eUlkO1xyXG5cdFx0dGhpcy5pZCA9IGVudGl0eUlkO1x0XHRcdC8v57uZbGlua+S9v+eUqFxyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWfuuehgOWFg+S7tlxyXG4gKiBUT0RPIOaaguaXtuayoeS7gOS5iOeUqFxyXG4gKi9cclxuY2xhc3MgVHVwbGUge1xyXG5cdGNvbnN0cnVjdG9yKHByaW9yaXR5ID0gMCl7XHJcblx0XHR0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHQvL+e7mWxpbmvkvb/nlKhcclxuXHRcdHRoaXMuaWQgPSBOZXdFbnRpdHlJZCgpO1x0Ly/nu5lsaW5r5L2/55SoXHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuKlx0VGhlIGJhc2UgU3lzdGVtXHJcbiovXHJcbmNsYXNzIFN5c3RlbSB7XHJcblx0Y29uc3RydWN0b3IocHJpb3JpdHkgPSAwKXtcclxuXHRcdHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcdC8v57uZbGlua+S9v+eUqFxyXG5cdFx0dGhpcy5pZCA9IE5ld0VudGl0eUlkKCk7XHJcblx0fVxyXG4gICAgb25TdGFydCgpe31cclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7fVxyXG4gICAgb25FbmQoKXt9XHJcbn1cclxuXHJcbmV4cG9ydCB7RW50aXR5LCBDb21wb25lbnQsIFR1cGxlLCBTeXN0ZW19IiwiaW1wb3J0IHsgVHVwbGUgfSBmcm9tIFwiLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCJcclxuXHJcbmNvbnN0IEFDVElPTl9TVEFURV9SVU5OSU5HID0gMTtcclxuY29uc3QgQUNUSU9OX1NUQVRFX0VORCA9IDI7XHJcblxyXG4vKipcclxuKiAgIGFjdGlvbuaooeWdl+eahOiuvuiuoeeQhuW/teaYr++8mlxyXG4qICAgICAgIOe7meetluWIkuS6uuWRmOaTjeS9nOeahOWKqOaAgemFjee9ru+8jOeUsWpzb27pqbHliqjvvIhkYXRhLWRyaXZlbu+8ie+8jOWGjeeUseiEmuacrOezu+e7n+eUn+aIkOS4uumdmeaAgeS7o+eggVxyXG4qICAg55uu5YmN5YWI55So56a75pWj6YWN572u5Luj5pu/XHJcblxyXG4qICAg55Sf5ZG95ZGo5pyf566h55CGXHJcbiAgICAgICAgb25TdGFydCAtPiDliJ3lp4vljJbvvIznlLF1dGlscy5SdW5BY3Rpb27op6blj5FcclxuICAgICAgICBvblVwZGF0ZSAtPiDnlLFzeXN0ZW3kuLvmtYHnqIvosIPnlKjvvIzlj6rmiafooYzkuLvpgLvovpHvvIzkuI3pnIDopoHliKTmlq3nu4jmraLmnaHku7ZcclxuICAgICAgICBpc0VuZDog55Sxc3lzdGVt5Zyo5omn6KGMb25VcGRhdGXlkI7orr/pl67vvIzov5Tlm55ib29s77yM5Yaz5a6a5piv5ZCm6L6+5Yiw57uI5q2i5p2h5Lu25LqG77yM6L+U5ZuedHJ1ZeWImeihqOekuuWPr+S7pee7iOatouatpGFjdGlvblxyXG4gICAgICAgIG9uRW5kOiDlnKhzeXN0ZW3or7fmsYJpc0VuZD10cnVl5ZCO6LCD55So77yM55So5LqO5pS25bC+77yM5aaC6LWE5rqQ5Zue5pS2XHJcbiAgICAgICAgb25TdG9wOiDnlLF1dGlscy5TdG9wQWN0aW9u6Kem5Y+R77yM5by65Yi25Lit5pat77yM5LiN6LWwaXNFbmTmtYHnqIvvvIzpu5jorqTosIPnlKhvbkVuZO+8jOWboOatpOagueaNruaDheWGteWPr+iDvemcgOimgemineWkluWkhOeQhlxyXG4qL1xyXG5jbGFzcyBBY3Rpb24gZXh0ZW5kcyBUdXBsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDAsIHByaW9yaXR5ID0gMCl7XHJcbiAgICAgICAgc3VwZXIocHJpb3JpdHkpO1xyXG4gICAgICAgIHRoaXMuZW50aXR5SWQgPSBlbnRpdHlJZDsgICAvL+aJgOWxnuiAhVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBBQ1RJT05fU1RBVEVfRU5EO1xyXG4gICAgfVxyXG4gICAgLy8gb25TdGFydCgpe31cclxuICAgIC8vIG9uVXBkYXRlKGR0ID0gMCl7fVxyXG4gICAgLy8gb25FbmQoKXt9XHJcbiAgICBpc0VuZCgpeyAgICByZXR1cm4gZmFsc2U7ICAgIH1cclxuICAgIG9uU3RvcCgpeyAgIHRoaXMub25FbmQoKTsgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBhY3Rpb25TdGFydChhY3Rpb24gPSBudWxsKXtcclxuICAgIGFjdGlvbi5zdGF0ZSA9IEFDVElPTl9TVEFURV9SVU5OSU5HO1xyXG4gICAgYWN0aW9uLm9uU3RhcnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aW9uVXBkYXRlKGFjdGlvbiA9IG51bGwsIGR0ID0gMCl7XHJcbiAgICBhY3Rpb24ub25VcGRhdGUoZHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3Rpb25FbmQoYWN0aW9uID0gbnVsbCl7XHJcbiAgICBhY3Rpb24uc3RhdGUgPSBBQ1RJT05fU1RBVEVfRU5EO1xyXG4gICAgYWN0aW9uLm9uRW5kKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGlvblN0b3AoYWN0aW9uID0gbnVsbCl7XHJcbiAgICBhY3Rpb24uc3RhdGUgPSBBQ1RJT05fU1RBVEVfRU5EO1xyXG4gICAgYWN0aW9uLm9uU3RvcCgpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaXNTdGFydChhY3Rpb24gPSBudWxsKXtcclxuICAgIHJldHVybiBhY3Rpb24uc3RhdGUgPT0gQUNUSU9OX1NUQVRFX1JVTk5JTkc7XHJcbn1cclxuZnVuY3Rpb24gaXNTdG9wKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGFjdGlvbi5zdGF0ZSA9PSBBQ1RJT05fU1RBVEVfRU5EO1xyXG59XHJcblxyXG5leHBvcnQge0FjdGlvbiwgYWN0aW9uU3RhcnQsIGFjdGlvblVwZGF0ZSwgYWN0aW9uRW5kLCBhY3Rpb25TdG9wLCBpc1N0YXJ0LCBpc1N0b3B9IiwiY2xhc3MgTGlua05vZGUge1xyXG5cdGNvbnN0cnVjdG9yKGRhdGEgPSBudWxsLCBwcmVwID0gbnVsbCwgbmV4dCA9IG51bGwpIHtcclxuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XHJcblx0XHR0aGlzLnByZXAgPSBwcmVwO1xyXG4gICAgICAgIHRoaXMubmV4dCA9IG5leHQ7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBMaW5rIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuaGVhZCA9IG5ldyBMaW5rTm9kZSgpO1x0XHQvL2VtcHR5IGRhdGEgbm9kZVxyXG5cdFx0dGhpcy50YWlsID0gbmV3IExpbmtOb2RlKCk7XHJcblx0XHR0aGlzLmhlYWQubmV4dCA9IHRoaXMudGFpbDtcclxuXHRcdHRoaXMudGFpbC5wcmVwID0gdGhpcy5oZWFkO1xyXG5cdFx0dGhpcy5fbWFwID0gbmV3IE1hcCgpO1xyXG5cdFx0dGhpcy5fc2l6ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZGVsTGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2N1cnIgPSB0aGlzLmhlYWQ7XHJcbiAgICAgICAgdGhpcy5fbG9jayA9IGZhbHNlO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3TGluaygpe1xyXG4gICAgcmV0dXJuIG5ldyBMaW5rKCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog6I635Y+WXHJcbiAqL1xyXG5mdW5jdGlvbiBHZXRMaW5rRGF0YShsaW5rID0gbnVsbCwga2V5SWQgPSAwLCByZXF1aXJlZCA9IGZhbHNlKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImxpbmsgaXMgbnVsbC5cIik7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsuX21hcC5nZXQoa2V5SWQpO1xyXG4gICAgaWYobm9kZSl7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YTtcclxuICAgIH1cclxuICAgIGlmKHJlcXVpcmVkKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiY2FuJ3QgZmluZCBrZXlJZDogXCIsIGtleUlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRMaW5rU2l6ZShsaW5rID0gbnVsbCl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHJldHVybiBsaW5rLl9zaXplO1xyXG59XHJcblxyXG4vKipcclxuICog5re75Yqg5Yiw5pyr5bC+XHJcbiAqL1xyXG5mdW5jdGlvbiBQdXNoVG9MaW5rKGxpbmsgPSBudWxsLCBkYXRhID0gbnVsbCkge1xyXG4gICAgcmV0dXJuIGFkZFRvTGluayhsaW5rLCBkYXRhLCBsaW5rLnRhaWwpO1xyXG59XHJcblxyXG4vKipcclxuICog5o+S5YWl5Yiw5YiX6KGo5LitXHJcbiAqIGRhdGEucHJpb3JpdHnpobrluo/lj7fvvIznlLHlpKfliLDlsI/mjpLluo/vvIzpu5jorqTkuLowXHJcbiAqL1xyXG5mdW5jdGlvbiBJbnNlcnRUb0xpbmsobGluayA9IG51bGwsIGRhdGEgPSBudWxsKXtcclxuICAgIGxldCBwcmlvcml0eSA9IGRhdGEgJiYgZGF0YS5wcmlvcml0eSA/IGRhdGEucHJpb3JpdHkgOiAwO1xyXG4gICAgbGV0IG5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuXHR3aGlsZShub2RlICE9IGxpbmsudGFpbCl7XHJcbiAgICAgICAgaWYocHJpb3JpdHkgPiBub2RlLmRhdGEucHJpb3JpdHkpe1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblx0XHRub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFkZFRvTGluayhsaW5rLCBkYXRhLCBub2RlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9MaW5rKGxpbmsgPSBudWxsLCBkYXRhID0gbnVsbCwgbmV4dCA9IG51bGwpe1xyXG4gICAgaWYoIWxpbmsgfHwgIWRhdGEgfHwgIWRhdGEuaWQpe1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiZXJyb3IgcGFyYW06IFwiLCBsaW5rLCBkYXRhLCBkYXRhLmlkKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8v5LiN6IO96YeN5aSN5re75YqgXHJcbiAgICBpZihsaW5rLl9tYXAuZ2V0KGRhdGEuaWQpKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiZXJyb3IgaWQ6JWQgaXMgZXhpc3RcIiwgZGF0YS5pZCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvL+aWsOiKgueCuei/nuaOpVxyXG4gICAgbGV0IHByZXAgPSBuZXh0LnByZXA7XHJcbiAgICBsZXQgbm9kZSA9IG5ldyBMaW5rTm9kZShkYXRhLCBwcmVwLCBuZXh0KTtcclxuICAgIHByZXAubmV4dCA9IG5vZGU7XHJcbiAgICBuZXh0LnByZXAgPSBub2RlO1xyXG5cclxuICAgIGxpbmsuX21hcC5zZXQoZGF0YS5pZCwgbm9kZSk7XHJcbiAgICBsaW5rLl9zaXplKys7XHJcbiAgICByZXR1cm4gbm9kZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWIoOmZpFxyXG4gKi9cclxuZnVuY3Rpb24gUmVtb3ZlQnlLZXlJZChsaW5rID0gbnVsbCwga2V5SWQgPSAwKXtcclxuICAgIGlmKCFsaW5rIHx8IGtleUlkPT0wKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvciBwYXJhbTogXCIsIGxpbmssIGtleUlkKTtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGlmKGxpbmsuX2xvY2spe1xyXG4gICAgICAgIGxpbmsuX2RlbExpc3QucHVzaChrZXlJZCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlKGxpbmssIGtleUlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlKGxpbmsgPSBudWxsLCBrZXlJZCA9IDApe1xyXG4gICAgbGV0IG5vZGUgPSBsaW5rLl9tYXAuZ2V0KGtleUlkKTtcclxuICAgIGlmKCFub2RlKXtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsaW5rLl9tYXAuZGVsZXRlKGtleUlkKTtcclxuICAgIGxldCBwID0gbm9kZS5wcmVwO1xyXG4gICAgbGV0IG4gPSBub2RlLm5leHQ7XHJcbiAgICBwLm5leHQgPSBuO1xyXG4gICAgbi5wcmVwID0gcDtcclxuICAgIGxpbmsuX3NpemUtLTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOi9ruivoiwgY2FsbGJhY2sgPSBmdW5jdGlvbig8PyBleHRlbmRzIGVudGl0eT4pe31cclxuICovXHJcbmZ1bmN0aW9uIExpbmtJdGVyYXRvcihsaW5rID0gbnVsbCwgY2FsbGJhY2sgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rIHx8ICFjYWxsYmFjaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxpbmsuX2xvY2sgPSB0cnVlO1xyXG4gICAgbGV0IG5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuXHR3aGlsZShub2RlICE9IGxpbmsudGFpbCl7XHJcblx0XHRpZihjYWxsYmFjayhub2RlLmRhdGEpKXtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cdFx0bm9kZSA9IG5vZGUubmV4dDtcclxuICAgIH1cclxuICAgIHdoaWxlKGxpbmsuX2RlbExpc3QubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgcmVtb3ZlKGxpbmssIGxpbmsuX2RlbExpc3QucG9wKCkpO1xyXG4gICAgfVxyXG4gICAgbGluay5fbG9jayA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRGaXJzdChsaW5rID0gbnVsbCl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBub2RlID0gbGluay5oZWFkLm5leHQ7XHJcbiAgICBpZihub2RlKXtcclxuICAgICAgICByZXR1cm4gbm9kZS5kYXRhXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0TGFzdChsaW5rID0gbnVsbCl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBub2RlID0gbGluay50YWlsLnByZXA7XHJcbiAgICBpZihub2RlKXtcclxuICAgICAgICByZXR1cm4gbm9kZS5kYXRhXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWwhuWIl+ihqOS4reeahOWFg+e0oOS4pOS4pOWvueavlO+8jGNhbGxiYWNrID0gZnVuY3Rpb24oPD8gZXh0ZW5kcyBlbnRpdHkgb3IgY29tcG9uZW50PiBmcm9udCwgbmV4dCl7fVxyXG4gKi9cclxuZnVuY3Rpb24gTGlua0NvbXBhcmUobGluayA9IG51bGwsIGNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICBpZighbGluayB8fCAhY2FsbGJhY2spIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsaW5rLl9sb2NrID0gdHJ1ZTtcclxuICAgIGxldCBvdXROb2RlID0gbGluay5oZWFkLm5leHQ7XHJcbiAgICB3aGlsZShvdXROb2RlICE9IGxpbmsudGFpbCl7XHJcbiAgICAgICAgbGV0IGluTm9kZSA9IG91dE5vZGUubmV4dDtcclxuICAgICAgICB3aGlsZShpbk5vZGUgIT0gbGluay50YWlsKXtcclxuICAgICAgICAgICAgY2FsbGJhY2sob3V0Tm9kZS5kYXRhLCBpbk5vZGUuZGF0YSk7XHJcbiAgICAgICAgICAgIGluTm9kZSA9IGluTm9kZS5uZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBvdXROb2RlID0gb3V0Tm9kZS5uZXh0O1xyXG4gICAgfVxyXG4gICAgbGluay5fbG9jayA9IGZhbHNlO1xyXG4gICAgbGluay5fZGVsTGlzdC5mb3JFYWNoKGtleUlkID0+IHtcclxuICAgICAgICBSZW1vdmVCeUtleUlkKGxpbmssIGtleUlkKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQge0xpbmssIExpbmtOb2RlLCBOZXdMaW5rLCBHZXRGaXJzdCwgR2V0TGFzdCwgR2V0TGlua0RhdGEsIEdldExpbmtTaXplLCBQdXNoVG9MaW5rLCBJbnNlcnRUb0xpbmssIFJlbW92ZUJ5S2V5SWQsIExpbmtJdGVyYXRvciwgTGlua0NvbXBhcmV9IiwiaW1wb3J0IHsgaXNTdG9wLCBpc1N0YXJ0LCBhY3Rpb25TdGFydCwgYWN0aW9uU3RvcCB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIFJlbW92ZUJ5S2V5SWQsIE5ld0xpbmsgfSBmcm9tICcuLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rJztcclxuXHJcblxyXG52YXIgYWN0aW9uTGlzdCA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gR2V0UnVubmlnQWN0aW9uTGlzdCgpe1xyXG4gICAgcmV0dXJuIGFjdGlvbkxpc3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDov5DooYxhY3Rpb27vvIzlubbliqDlhaXliLBhY3Rpb27ns7vnu59saW5r5Lit77yM5LiA6Iis5L6b5aSW6YOo6LCD55SoIFxyXG4gKi9cclxuZnVuY3Rpb24gUnVuQWN0aW9uKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgaWYoaXNTdG9wKGFjdGlvbikpe1xyXG4gICAgICAgIGFjdGlvblN0YXJ0KGFjdGlvbik7XHJcbiAgICAgICAgUHVzaFRvTGluayhhY3Rpb25MaXN0LCBhY3Rpb24sIGFjdGlvbi5pZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDnq4vljbPnu4jmraJhY3Rpb27lubbnp7vlh7phY3Rpb27ns7vnu59saW5r77yM5LiA6Iis5L6b5aSW6YOo6LCD55SoXHJcbiAqL1xyXG5mdW5jdGlvbiBTdG9wQWN0aW9uKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgaWYoaXNTdGFydChhY3Rpb24pKXtcclxuICAgICAgICBhY3Rpb25TdG9wKGFjdGlvbik7XHJcbiAgICAgICAgUmVtb3ZlQnlLZXlJZChhY3Rpb25MaXN0LCBhY3Rpb24uaWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0dldFJ1bm5pZ0FjdGlvbkxpc3QsIFJ1bkFjdGlvbiwgU3RvcEFjdGlvbn0iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IEdldFJ1bm5pZ0FjdGlvbkxpc3QgfSBmcm9tIFwiLi4vLi4vYWN0aW9uL3V0aWxzXCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IGFjdGlvblVwZGF0ZSwgYWN0aW9uRW5kIH0gZnJvbSBcIi4uLy4uL2FjdGlvbi9iYXNlXCI7XHJcblxyXG4vKipcclxuICog5Yqo5L2c57O757ufXHJcbiAqL1xyXG5jbGFzcyBBY3Rpb25TeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xyXG4gICAgb25VcGRhdGUoZHQgPSAwKSB7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldFJ1bm5pZ0FjdGlvbkxpc3QoKSwgYWN0aW9uID0+IHtcclxuICAgICAgICAgICAgYWN0aW9uVXBkYXRlKGFjdGlvbiwgZHQpO1xyXG4gICAgICAgICAgICBpZihhY3Rpb24uaXNFbmQoKSl7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25FbmQoYWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgc3lzID0gbnVsbDtcclxuZnVuY3Rpb24gR2V0QWN0aW9uU3lzdGVtKCl7XHJcbiAgICBpZighc3lzKXtcclxuICAgICAgICBzeXMgPSBuZXcgQWN0aW9uU3lzdGVtKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3lzO1xyXG59XHJcblxyXG5leHBvcnR7R2V0QWN0aW9uU3lzdGVtfSIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuaW1wb3J0IHsgUHVzaFRvTGluaywgR2V0TGlua0RhdGEsIFJlbW92ZUJ5S2V5SWQsIE5ld0xpbmsgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDmmL7npLrnu4Tku7bvvIzljIXlkKvkuIDkupvnn6npmLXmlbDmja5cclxuICovXHJcbmNsYXNzIFJlbmRlckNvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XHJcblx0Y29uc3RydWN0b3IoZW50aXR5SWQgPSAwLCBhbmdsZSA9IDAsIHNjYWxlID0gMSkge1xyXG4gICAgICAgIHN1cGVyKGVudGl0eUlkKTtcclxuICAgICAgICB0aGlzLmFuZ2xlID0gYW5nbGU7XHJcbiAgICAgICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xyXG5cdH1cclxufVxyXG5cclxudmFyIHJlbmRlckNvbXMgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVJlbmRlckNvbXBvbmVudChlbnRpdHlJZCA9IDAsIHZpZXdEYXRhID0gbnVsbCkge1xyXG4gICAgdmlld0RhdGEgPSB2aWV3RGF0YSA/IHZpZXdEYXRhIDoge307XHJcbiAgICBsZXQgY29tID0gbmV3IFJlbmRlckNvbXBvbmVudChlbnRpdHlJZCwgdmlld0RhdGEuYW5nbGUsIHZpZXdEYXRhLnNjYWxlKTtcclxuICAgIFB1c2hUb0xpbmsocmVuZGVyQ29tcywgY29tKTtcclxuICAgIHJldHVybiBjb207XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFJlbmRlckNvbXBvbmVudChlbnRpdHlJZCA9IDAsIHZpZXdEYXRhID0gbnVsbCkge1xyXG4gICAgbGV0IGNvbSA9IEdldExpbmtEYXRhKHJlbmRlckNvbXMsIGVudGl0eUlkKTtcclxuICAgIHJldHVybiBjb20gPyBjb20gOiBjcmVhdGVSZW5kZXJDb21wb25lbnQoZW50aXR5SWQsIHZpZXdEYXRhKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDmmL7npLrlhYPku7ZcclxuICog55uu5YmN5L2/55SodHVwbGXvvIzlj6/ku6XlhbzlrrnkuIDkuKp1bml05ZCM5pe25oyC5aSa5Liqc3ByaXRlRnJhbWXnmoTpnIDmsYJcclxuICog5aaC5p6c6ZyA6KaB6ZmQ5Yi25LiA5LiqdW5pdOS7heacieS4gOS4qnNwcml0ZUZyYW1l77yM5bCx5L2/55SoY29tcG9uZW50XHJcbiAqL1xyXG5jbGFzcyBEaXNwbGF5VHVwbGUgZXh0ZW5kcyBUdXBsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDAsIHNwcml0ZUZyYW1lID0gbnVsbCwgZGlzcGxheUFyZWEgPSBudWxsKXtcclxuICAgICAgICBzdXBlcihlbnRpdHlJZCk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVGcmFtZSA9IHNwcml0ZUZyYW1lO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheUFyZWEgPSBkaXNwbGF5QXJlYTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOeUu+W4g+S4iueahOaYvuekuumYn+WIl1xyXG4gKi9cclxudmFyIGRpc3BsYXlMaXN0ID0gTmV3TGluaygpO1xyXG5mdW5jdGlvbiBHZXREaXNwbGF5TGlzdCgpe1xyXG4gICAgcmV0dXJuIGRpc3BsYXlMaXN0O1xyXG59XHJcblxyXG4vKipcclxuICog5Yqg5YWl5riy5p+T6Zif5YiXXHJcbiAqIEBwYXJhbSB7Kn0gZGlzcGxheUFyZWEgUmVjdOexu+Wei1xyXG4gKi9cclxuZnVuY3Rpb24gQWRkRGlzcGxheShlbnRpdHlJZCA9IDAsIHNwcml0ZUZyYW1lID0gbnVsbCwgZGlzcGxheUFyZWEgPSBudWxsKSB7XHJcbiAgICBsZXQgdCA9IG5ldyBEaXNwbGF5VHVwbGUoZW50aXR5SWQsIHNwcml0ZUZyYW1lLCBkaXNwbGF5QXJlYSk7XHJcbiAgICBQdXNoVG9MaW5rKGRpc3BsYXlMaXN0LCB0KTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZW1vdmVEaXNwbGF5KGRpc3BsYXlJZCA9IDApIHtcclxuICAgIFJlbW92ZUJ5S2V5SWQoZGlzcGxheUxpc3QsIGRpc3BsYXlJZCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7R2V0UmVuZGVyQ29tcG9uZW50LCBHZXREaXNwbGF5TGlzdCwgQWRkRGlzcGxheSwgUmVtb3ZlRGlzcGxheX0iLCIvKipcclxuICog5Z+656GAMkTlnZDmoIdcclxuICovXHJcbmNsYXNzIFBvcyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDApe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3UG9zKHggPSAwLCB5ID0gMCl7XHJcbiAgICByZXR1cm4gbmV3IFBvcyh4LCB5KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiuoeeul+ebuOWvueWdkOagh1xyXG4gKiDku6V0YXJnZXRQb3PkuLrlh4bvvIzorqHnrpdyZWZlclBvc+S6jnRhcmdldFBvc+eahOebuOWvueWdkOagh1xyXG4gKiDkuL7kvovvvJpcclxuICogICAgICDmkYTlg4/mnLrkvY3kuo4oNTAsIDUwKeWkhO+8jHJlZmVyUG9zXHJcbiAqICAgICAg5Y2V5L2NQeS9jeS6jigxMjAsIDMwKeWkhO+8jHRhcmdldFBvc1xyXG4gKiAgICAgIOmCo+S5iO+8jOWNleS9jUHlnKjmkYTlg4/mnLrnmoQoMTIwLTUwLCAzMC01MCnlpIRcclxuICovXHJcbmZ1bmN0aW9uIFRvTG9jYXRlUG9zKHRhcmdldFBvcyA9IG51bGwsIHJlZmVyUG9zID0gbnVsbCl7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHRhcmdldFBvcy54IC0gcmVmZXJQb3MueCxcclxuICAgICAgICB0YXJnZXRQb3MueSAtIHJlZmVyUG9zLnkpO1xyXG59XHJcblxyXG4vLyBmdW5jdGlvbiBUb0xvY2F0ZVgodGFyZ2V0WCA9IDAsIHJlZmVyWCA9IDApe1xyXG4vLyAgICAgcmV0dXJuIHRhcmdldFggLSByZWZlclg7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIFRvTG9jYXRlWSh0YXJnZXRZID0gMCwgcmVmZXJZID0gMCl7XHJcbi8vICAgICByZXR1cm4gdGFyZ2V0WSAtIHJlZmVyWTtcclxuLy8gfVxyXG5cclxuXHJcbi8qKlxyXG4gKiDln7rnoYDlkJHph49cclxuICogZGlzdGFuY2U6IOi3neemu+ezu+aVsO+8jOazqOaEj+S4jeaYr+WunumZhei3neemu++8jOWPqueUqOS6juavlOi+g+i3neemu+Wkp+Wwj1xyXG4gKi9cclxuY2xhc3MgVmVjIHtcclxuICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSB4ICogeCArIHkgKiB5O1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdWZWMoeCA9IDAsIHkgPSAwKXtcclxuICAgIHJldHVybiBuZXcgVmVjKHgsIHkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdWZWNXaXRoUG9zKHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICByZXR1cm4gbmV3IE5ld1ZlYyh4MiAtIHgxLCB5MiAtIHkxKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOi3neemu+ezu+aVsFxyXG4gKiDms6jmhI/vvIzlubbpnZ7lrp7pmYXot53nprvlgLzvvIzlm6DkuLrlvIDmoLnlj7forqHnrpfmtojogJflpKdcclxuICog6Iul5Y+q55So5LqO5a+55q+U5aSn5bCP77yM5q2k57O75pWw5Y2z5Y+vXHJcbiAqL1xyXG5mdW5jdGlvbiBHZXREaXN0YW5jZSh2ZWMgPSBudWxsKXtcclxuICAgIHJldHVybiB2ZWMuZGlzdGFuY2U7XHJcbn1cclxuXHJcbmV4cG9ydCB7TmV3UG9zLCBUb0xvY2F0ZVBvcyxcclxuICAgIE5ld1ZlYywgTmV3VmVjV2l0aFBvcywgR2V0RGlzdGFuY2V9IiwiaW1wb3J0IHsgTmV3UG9zLCBOZXdWZWMgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnRcIjtcclxuaW1wb3J0IHsgUHVzaFRvTGluaywgR2V0TGlua0RhdGEsIE5ld0xpbmssIFJlbW92ZUJ5S2V5SWQgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcblxyXG4vKipcclxuICog5L2N572u57uE5Lu2XHJcbiAqL1xyXG5jbGFzcyBQb3NDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXR5SWQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgICAgIHN1cGVyKGVudGl0eUlkKTtcclxuICAgICAgICB0aGlzLnBvcyA9IE5ld1Bvcyh4LCB5KTtcclxuICAgICAgICB0aGlzLnZlYyA9IE5ld1ZlYygpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgcG9zQ29tcyA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gY3JlYXRlUG9zQ29tcG9uZW50KGVudGl0eUlkID0gMCkge1xyXG4gICAgbGV0IGNvbSA9IG5ldyBQb3NDb21wb25lbnQoZW50aXR5SWQpO1xyXG4gICAgUHVzaFRvTGluayhwb3NDb21zLCBjb20pO1xyXG4gICAgcmV0dXJuIGNvbTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UG9zQ29tcG9uZW50KGVudGl0eUlkID0gMCkge1xyXG4gICAgbGV0IGNvbSA9IEdldExpbmtEYXRhKHBvc0NvbXMsIGVudGl0eUlkKTtcclxuICAgIHJldHVybiBjb20gPyBjb20gOiBjcmVhdGVQb3NDb21wb25lbnQoZW50aXR5SWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRQb3NDb21wb25lbnRMaXN0KCl7XHJcbiAgICByZXR1cm4gcG9zQ29tcztcclxufVxyXG5cclxuZnVuY3Rpb24gUmVtb3ZlUG9zQ29tcG9uZW50KGVudGl0eUlkID0gMCl7XHJcbiAgICBSZW1vdmVCeUtleUlkKHBvc0NvbXMsIGVudGl0eUlkKTtcclxufVxyXG5cclxuZXhwb3J0eyBHZXRQb3NDb21wb25lbnQsIEdldFBvc0NvbXBvbmVudExpc3QsIFJlbW92ZVBvc0NvbXBvbmVudH0iLCJpbXBvcnQgeyBHZXRQb3NDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudCc7XHJcblxyXG5mdW5jdGlvbiBTZXRQb3MoZW50aXR5SWQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IHBvcyA9IEdldFBvc0NvbXBvbmVudChlbnRpdHlJZCkucG9zO1xyXG4gICAgcG9zLnggPSB4O1xyXG4gICAgcG9zLnkgPSB5O1xyXG4gICAgcmV0dXJuIHBvcztcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UG9zKGVudGl0eUlkID0gMCl7XHJcbiAgICByZXR1cm4gR2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKS5wb3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNldFZlYyhlbnRpdHlJZCA9IDAsIHggPSAwLCB5ID0gMCl7XHJcbiAgICBsZXQgdmVjID0gR2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKS52ZWM7XHJcbiAgICB2ZWMueCA9IHg7XHJcbiAgICB2ZWMueSA9IHk7XHJcbiAgICByZXR1cm4gdmVjO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRWZWMoZW50aXR5SWQgPSAwKXtcclxuICAgIHJldHVybiBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnZlYztcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIE1vdmUoZW50aXR5SWQgPSAwLCBkeCA9IDAsIGR5ID0gMCl7XHJcbiAgICBsZXQgcG9zID0gR2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKS5wb3M7XHJcbiAgICBwb3MueCArPSBkeDtcclxuICAgIHBvcy55ICs9IGR5O1xyXG59XHJcblxyXG5leHBvcnQge1NldFBvcywgR2V0UG9zLCBHZXRWZWMsIFNldFZlY30iLCJpbXBvcnQgeyBOZXdQb3MsIE5ld1ZlYyB9IGZyb20gXCIuL3BvaW50XCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIDJE5Z+656GA55+p5b2i77yM55Sx5Y+C6ICD5Z2Q5qCH77yM5YGP56e76YeP77yM5a696auY57uE5oiQXHJcbiAqIOS9jee9ruaYr+agueaNruebuOWvueWdkOagh+eul+WHuuadpVxyXG4gKiB4T2Zmc2V0LCB5T2Zmc2V0IDog55u45a+55Z2Q5qCH5YGP56e76YePXHJcbiAqIHdpZHRoLCBoZWlnaHQgOiDlrr3pq5hcclxuICogY2VudGVyIDog5a6e6ZmF5L2N572u77yI55+p5b2i5Lit5b+D77yJ77yM5YaF6YOo5L2/55So77yMY2VudGVyID0gdW5pdC5wb3MgKyByZWN0Lm9mZnNldFxyXG4gKi9cclxuY2xhc3MgUmVjdGFuZ2xlIHtcclxuICAgIGNvbnN0cnVjdG9yKG9mZnNldCA9IG51bGwsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCwgY2VudGVyID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOefqeW9oum7mOiupOWxheS4reS6jm93bmVyXHJcbiAqIOatpOaWueazleS4gOiIrOeUsWNvbGxpZGVy6LCD55SoXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdSZWN0KHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCBvZmZzZXQgPSBOZXdWZWMoeE9mZnNldCwgeU9mZnNldCk7XHJcbiAgICByZXR1cm4gbmV3IFJlY3RhbmdsZShvZmZzZXQsIHdpZHRoLCBoZWlnaHQsIE5ld1BvcygpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOabtOaWsOW9k+WJjeefqeW9ouWxnuaAp++8iOS9jee9ruOAgeWBj+enu+mHj+OAgeWkp+Wwj+etie+8ie+8jOWQjumdouaJgOaciea2ieWPiuefqeW9ouiuoeeul+eahOWHveaVsO+8jOmDveW/hemhu+W7uueri+WcqOW3suabtOaWsOS6hue7neWvueWdkOagh+eahOefqeW9oueahOWfuuehgOS5i+S4ilxyXG4gKiB4LCB55piv57ud5a+55Z2Q5qCHXHJcbiAqL1xyXG5mdW5jdGlvbiBVcGRhdGVSZWN0U2l6ZShyZWN0ID0gbnVsbCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIHJlY3Qud2lkdGggPSB3aWR0aDtcclxuICAgIHJlY3QuaGVpZ2h0ID0gaGVpZ2h0O1xyXG59XHJcbmZ1bmN0aW9uIFVwZGF0ZVJlY3RPZmZzZXQocmVjdCA9IG51bGwsIHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCl7XHJcbiAgICByZWN0Lm9mZnNldC54ID0geE9mZnNldDtcclxuICAgIHJlY3Qub2Zmc2V0LnkgPSB5T2Zmc2V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBVcGRhdGVSZWN0Q2VudGVyUG9zKHJlY3QgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgcmVjdC5jZW50ZXIueCA9IHg7XHJcbiAgICByZWN0LmNlbnRlci55ID0geTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOagueaNruaJgOWxnuWNleS9jeeahOS9jee9ruabtOaWsOefqeW9ouS9jee9ru+8iOS4gOiIrOWcuuaZr+iwg+eUqO+8iVxyXG4gKi9cclxuZnVuY3Rpb24gVXBkYXRlUmVjdFBvc0J5VW5pdChyZWN0ID0gbnVsbCwgdW5pdFBvc1ggPSAwLCB1bml0UG9zWSA9IDApe1xyXG4gICAgcmVjdC5jZW50ZXIueCA9IHVuaXRQb3NYICsgcmVjdC5vZmZzZXQueDtcclxuICAgIHJlY3QuY2VudGVyLnkgPSB1bml0UG9zWSArIHJlY3Qub2Zmc2V0Lnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlj43lkJHkv67lpI11bml05L2N572u77yIZml4SW5SZWN06LCD55So77yJXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhVbml0UG9zKHJlY3QgPSBudWxsLCB1bml0UG9zID0gbnVsbCl7XHJcbiAgICB1bml0UG9zLnggPSByZWN0LmNlbnRlci54IC0gcmVjdC5vZmZzZXQueDtcclxuICAgIHVuaXRQb3MueSA9IHJlY3QuY2VudGVyLnkgLSByZWN0Lm9mZnNldC55O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOefqeW9ouWQhOS4queCueS9jee9ruWSjOWPguaVsO+8jOiusOS9j+imgeWcqHVwZGF0ZeWQjuWGjeiwg+eUqO+8jOS7peWFjeaVsOaNruacieivr1xyXG4gKi9cclxuZnVuY3Rpb24gR2V0UmVjdE9mZnNldFZlYyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5vZmZzZXQ7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdENlbnRlclBvcyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5jZW50ZXI7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdFN0YXJ0UG9zKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueCAtIEdldFJlY3RIYWxmV2lkdGgocmVjdCksXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueSAtIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3QpXHJcbiAgICApO1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RFbmRQb3MocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICByZWN0LmNlbnRlci54ICsgR2V0UmVjdEhhbGZXaWR0aChyZWN0KSxcclxuICAgICAgICByZWN0LmNlbnRlci55ICsgR2V0UmVjdEhhbGZIZWlnaHQocmVjdClcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFJlY3RXaWR0aChyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC53aWR0aDtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0SGVpZ2h0KHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LmhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0SGFsZldpZHRoKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LndpZHRoICogMC41O1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LmhlaWdodCAqIDAuNTtcclxufVxyXG5cclxuXHJcbi8v5rGC6Z2i56evXHJcbmZ1bmN0aW9uIEdldEFyZWEocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3Qud2lkdGggKiByZWN0LmhlaWdodDtcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBOZXdSZWN0LCBVcGRhdGVSZWN0U2l6ZSwgVXBkYXRlUmVjdE9mZnNldCwgVXBkYXRlUmVjdENlbnRlclBvcywgVXBkYXRlUmVjdFBvc0J5VW5pdCwgRml4VW5pdFBvcyxcclxuICAgIEdldFJlY3RPZmZzZXRWZWMsIEdldFJlY3RDZW50ZXJQb3MsIEdldFJlY3RTdGFydFBvcywgR2V0UmVjdEVuZFBvcyxcclxuICAgIEdldFJlY3RXaWR0aCwgR2V0UmVjdEhhbGZXaWR0aCwgR2V0UmVjdEhlaWdodCwgR2V0UmVjdEhhbGZIZWlnaHQsXHJcbiAgICBHZXRBcmVhXHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RDZW50ZXJYKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiByZWN0LmNlbnRlci54O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RYMShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclgocmVjdCkgLSByZWN0LndpZHRoICogMC41O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RYMihyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclgocmVjdCkgKyByZWN0LndpZHRoICogMC41O1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0T2Zmc2V0WShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gcmVjdC5vZmZzZXQueTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gR2V0UmVjdENlbnRlclkocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIHJlY3QuY2VudGVyLnk7XHJcbi8vIH1cclxuLy8gZnVuY3Rpb24gR2V0UmVjdFkxKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiBHZXRSZWN0Q2VudGVyWShyZWN0KSAtIHJlY3QuaGVpZ2h0ICogMC41O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RZMihyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclkocmVjdCkgKyByZWN0LmhlaWdodCAqIDAuNTtcclxuLy8gfSIsImltcG9ydCB7IFNldFBvcyB9IGZyb20gXCIuLi9wb3MvdXRpbHNcIjtcclxuaW1wb3J0IHsgTmV3UmVjdCwgVXBkYXRlUmVjdFBvc0J5VW5pdCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IFRvTG9jYXRlUG9zIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50XCI7XHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuXHJcblxyXG4vKipcclxuICog5Luj56CB6YeP5bCR77yM5pqC5pe26L+Z5qC35pS+XHJcbiAqL1xyXG5jbGFzcyBDYW1lcmEgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMucG9zID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlY3QgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdDYW1lcmEoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgbGV0IGNhbWVyYSA9IG5ldyBDYW1lcmEoKTtcclxuICAgIGNhbWVyYS5wb3MgPSBTZXRQb3MoY2FtZXJhLmlkLCB4LCB5KTtcclxuICAgIGNhbWVyYS5yZWN0ID0gTmV3UmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIFVwZGF0ZVJlY3RQb3NCeVVuaXQoY2FtZXJhLnJlY3QsIHgsIHkpO1xyXG4gICAgcmV0dXJuIGNhbWVyYTtcclxufVxyXG5cclxuLy/nm67moIfnn6nlvaLmmK/lkKblnKjplZzlpLTlhoVcclxuZnVuY3Rpb24gSXNJbkNhbWVyYShjYW1lcmEgPSBudWxsLCByZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gSXNSZWN0c0Nyb3NzKGNhbWVyYS5yZWN0LCByZWN0KTtcclxufVxyXG5cclxuLy/ovazkuLrplZzlpLTlnZDmoIdcclxuZnVuY3Rpb24gVG9DYW1lcmFQb3MoY2FtZXJhID0gbnVsbCwgdGFyZ2V0UG9zID0gbnVsbCl7XHJcbiAgICByZXR1cm4gVG9Mb2NhdGVQb3ModGFyZ2V0UG9zLCBjYW1lcmEucG9zKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOmVnOWktOenu+WKqFxyXG4gKi9cclxuZnVuY3Rpb24gQ2FtZXJhTW92ZShjYW1lcmEgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgU2V0UG9zKGNhbWVyYS5pZCwgeCwgeSk7XHJcbiAgICBVcGRhdGVSZWN0UG9zQnlVbml0KGNhbWVyYS5yZWN0LCB4LCB5KTtcclxufVxyXG5cclxuZXhwb3J0e05ld0NhbWVyYSwgSXNJbkNhbWVyYSwgVG9DYW1lcmFQb3MsIENhbWVyYU1vdmV9IiwiXHJcbi8qKlxyXG4gKiDmtY/op4jlmajnmoRrZXktY29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEtFWV9SSUdIVCA9IDM5O1xyXG5leHBvcnQgY29uc3QgS0VZX0xFRlQgPSAzNztcclxuZXhwb3J0IGNvbnN0IEtFWV9VUCA9IDM4O1xyXG5leHBvcnQgY29uc3QgS0VZX0RPV04gPSA0MDtcclxuXHJcbmV4cG9ydCBjb25zdCBLRVlfU1BBQ0UgPSAzMjtcclxuXHJcbmV4cG9ydCBjb25zdCBLRVlfVyA9IDg3O1xyXG5leHBvcnQgY29uc3QgS0VZX0EgPSA2NTtcclxuZXhwb3J0IGNvbnN0IEtFWV9TID0gODM7XHJcbmV4cG9ydCBjb25zdCBLRVlfRCA9IDY4O1xyXG5cclxuLyoqXHJcbiAqICBlbmdpbmUgPSB3ZWItYnJvd3NlciwgY2FudmFzXHJcbiAqL1xyXG52YXIgX2VuZ2luZSA9IHtcclxuXHRjdHggOiBudWxsLFxyXG4gICAgY2FudmFzIDogbnVsbCxcclxuICAgIGZwcyA6IDAsXHJcbiAgICB0aWNrIDogMFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0RW5naW5lKCl7XHJcbiAgICByZXR1cm4gX2VuZ2luZTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdENhbnZhcyh3aWR0aCA9IDAsIGhlaWdodCA9IDAsIGZwcyA9IDEwKXtcclxuICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcclxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIF9lbmdpbmUuY2FudmFzID0gY2FudmFzO1xyXG4gICAgX2VuZ2luZS5jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgX2VuZ2luZS5jdHguc3Ryb2tlU3R5bGU9XCIjMDAwMGZmXCI7ICAgICAgICAgIC8v55S755+p5b2i5qGG55So55qEXHJcbiAgICBfZW5naW5lLmZwcyA9IGZwcztcclxuICAgIF9lbmdpbmUudGljayA9IDEwMDAgLyBmcHM7XHJcbn1cclxuXHJcbmV4cG9ydHtnZXRFbmdpbmUsIGluaXRDYW52YXN9IiwiaW1wb3J0IHsgZ2V0RW5naW5lIH0gZnJvbSBcIi4vbW9kZWxcIjtcclxuXHJcbnZhciBfZW5naW5lID0gZ2V0RW5naW5lKCk7XHJcblxyXG5mdW5jdGlvbiBjbGVhcigpIHtcclxuICAgIGxldCBjID0gX2VuZ2luZS5jYW52YXM7XHJcbiAgICBfZW5naW5lLmN0eC5jbGVhclJlY3QoMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEcmF3KGltZ0RhdGEsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKSB7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcblx0Y3R4LmRyYXdJbWFnZShpbWdEYXRhLCB4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuY29uc3QgUmFkaXVzID0gTWF0aC5QSS8xODA7XHJcbmZ1bmN0aW9uIERyYXdJbWFnZVdpdGhBbmdsZShhbmdsZSA9IDAsIGltZ0RhdGEsIHN4ID0gMCwgc3kgPSAwLCBzd2lkdGggPSAwLCBzaGVpZ2h0ID0gMCwgeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApIHtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuICAgIGN0eC5zYXZlKCk7XHJcbiAgICBjdHgudHJhbnNsYXRlKHggKyB3aWR0aC8yLCB5ICsgaGVpZ2h0LzIpO1xyXG4gICAgY3R4LnJvdGF0ZShhbmdsZSAqIFJhZGl1cyk7XHJcbiAgICBEcmF3SW1hZ2UoaW1nRGF0YSwgc3gsIHN5LCBzd2lkdGgsIHNoZWlnaHQsIC13aWR0aC8yLCAtaGVpZ2h0LzIsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgY3R4LnJlc3RvcmUoKTtcclxuXHJcbiAgICAvLyBjdHgudHJhbnNsYXRlKDEwMCwgMTAwKTtcclxuXHQvLyBjdHgucm90YXRlKDkwICogTWF0aC5QSS8xODApO1x0Ly/ku6XkuIrpnaLnmoTlgY/np7vngrnkuLrlh4bvvIzov5vooYzml4vovaxcclxuXHQvLyBjdHguZHJhd0ltYWdlKGksIDE4NywgMCwgMTg2LCAxMzAsIC0wLCAtMCwgMTAwLCAxMDApO1xyXG59XHJcblxyXG4vL+WPguiAg++8mmNvbnRleHQuZHJhd0ltYWdlKGltZyxzeCxzeSxzd2lkdGgsc2hlaWdodCx4LHksd2lkdGgsaGVpZ2h0KTtcclxuZnVuY3Rpb24gZHJhd0ltYWdlKGltZ0RhdGEsIHN4ID0gMCwgc3kgPSAwLCBzd2lkdGggPSAwLCBzaGVpZ2h0ID0gMCwgeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApIHtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuXHRjdHguZHJhd0ltYWdlKGltZ0RhdGEsIHN4LCBzeSwgc3dpZHRoLCBzaGVpZ2h0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1JlY3QoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG4gICAgY3R4LnN0cm9rZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdMaW5lKHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgubW92ZVRvKHgxLCB5MSk7XHJcbiAgICBjdHgubGluZVRvKHgyLCB5Mik7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdDaXJjbGUoeCA9IDAsIHkgPSAwLCByYWRpdXMgPSAwKXtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5hcmMoeCwgeSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbn1cclxuXHJcbmV4cG9ydHtjbGVhciwgZHJhd0ltYWdlLCBkcmF3UmVjdCwgZHJhd0xpbmUsIGRyYXdDaXJjbGV9IiwiaW1wb3J0IHsgR2V0RGlzcGxheUxpc3QgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3ZpZXcvY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IEdldFBvcyB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvcG9zL3V0aWxzXCI7XHJcbmltcG9ydCB7IFVwZGF0ZVJlY3RQb3NCeVVuaXQsIEdldFJlY3RTdGFydFBvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IEdldENhbWVyYSB9IGZyb20gXCIuLi93b3JsZC9yZXNcIjtcclxuaW1wb3J0IHsgSXNJbkNhbWVyYSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvY2FtZXJhL3V0aWxzXCI7XHJcbmltcG9ydCB7IFRvTG9jYXRlUG9zIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50XCI7XHJcbmltcG9ydCB7IGRyYXdJbWFnZSwgZHJhd1JlY3QgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9lbmdpbmUvaDUvcmVuZGVyXCI7XHJcbmltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuXHJcbi8qKlxyXG4gKiDmuLLmn5Pns7vnu5/vvIzpgLvovpHmraXpqqTvvJpcclxuICogMS4gICDmuIXpmaTnlLvluINcclxuICogMi4gICDph43lrprkvY3mkYTlg4/mnLpcclxuICogMy4gICDorqHnrpfljZXkvY3mmL7npLrnn6nlvaLmmK/lkKblnKjmkYTlg4/mnLrnn6nlvaLlhoVcclxuICogNC4gICDovazmjaLkuLrnlLvluIPlnZDmoIdcclxuICogNS4gICDnlLvlh7rlm77lg49cclxuICovXHJcbmNsYXNzIFJlbmRlclVwZGF0ZVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIC8vY2FudmFzQ2xlYXIoKTtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0RGlzcGxheUxpc3QoKSwgZGlzcGxheVR1cGxlID0+IHtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IEdldFBvcyhkaXNwbGF5VHVwbGUuZW50aXR5SWQpO1xyXG4gICAgICAgICAgICBVcGRhdGVSZWN0UG9zQnlVbml0KGRpc3BsYXlUdXBsZS5kaXNwbGF5QXJlYSwgcG9zLngsIHBvcy55KTtcclxuICAgICAgICAgICAgZHJhd0ZyYW1lSW5DYW1lcmEoZGlzcGxheVR1cGxlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHJlbmRlclN5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldFJlbmRlclVwZGF0ZVN5c3RlbSgpe1xyXG4gICAgaWYoIXJlbmRlclN5cyl7XHJcbiAgICAgICAgcmVuZGVyU3lzID0gbmV3IFJlbmRlclVwZGF0ZVN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlbmRlclN5cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDlsIbmiYDmnInnn6nlvaLnlLvlh7rmnaVcclxuICovXHJcbmNsYXNzIERyYXdSZWN0U3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgLy9EcmF3UmVjdChHZXRDYW1lcmEoKSwgdGhpcy5fY2FtZXJhLnJlY3QpO1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRSZWN0TGlzdCgpLCBjb2xsaWRlciA9PiB7XHJcbiAgICAgICAgICAgIGRyYXdSZWN0SW5DYW1lcmEoY29sbGlkZXIucmVjdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBkZWJ1Z1N5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldERyYXdSZWN0U3lzdGVtKCl7XHJcbiAgICBpZighZGVidWdTeXMpe1xyXG4gICAgICAgIGRlYnVnU3lzID0gbmV3IERyYXdSZWN0U3lzdGVtKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVidWdTeXM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5riy5p+T5Yiw55S75biD77yM5Y+q5riy5p+T5Zyo6ZWc5aS05YaF55qEXHJcbiAqL1xyXG5mdW5jdGlvbiBkcmF3RnJhbWVJbkNhbWVyYShkaXNwbGF5VHVwbGUgPSBudWxsKXtcclxuICAgIGxldCBjYW1lcmEgPSBHZXRDYW1lcmEoKTtcclxuICAgIGxldCBkaXNwbGF5QXJlYSA9IGRpc3BsYXlUdXBsZS5kaXNwbGF5QXJlYTtcclxuICAgIGlmKCFJc0luQ2FtZXJhKGNhbWVyYSwgZGlzcGxheUFyZWEpKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvL+i9rOS4uueUu+W4g+WdkOagh1xyXG4gICAgbGV0IHNjcmVlblBvcyA9IFRvTG9jYXRlUG9zKFxyXG4gICAgICAgIEdldFJlY3RTdGFydFBvcyhkaXNwbGF5QXJlYSksXHJcbiAgICAgICAgR2V0UmVjdFN0YXJ0UG9zKGNhbWVyYS5yZWN0KSk7XHJcblxyXG4gICAgbGV0IHRleHR1cmVBcmVhID0gZGlzcGxheVR1cGxlLnNwcml0ZUZyYW1lLnRleHR1cmVBcmVhO1xyXG4gICAgZHJhd0ltYWdlKGRpc3BsYXlUdXBsZS5zcHJpdGVGcmFtZS5iaXRtYXBEYXRhLFxyXG4gICAgICAgIHRleHR1cmVBcmVhLngsIHRleHR1cmVBcmVhLnksIHRleHR1cmVBcmVhLndpZHRoLCB0ZXh0dXJlQXJlYS5oZWlnaHQsXHJcbiAgICAgICAgc2NyZWVuUG9zLngsIHNjcmVlblBvcy55LCBHZXRSZWN0V2lkdGgoZGlzcGxheUFyZWEpLCBHZXRSZWN0SGVpZ2h0KGRpc3BsYXlBcmVhKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdSZWN0SW5DYW1lcmEoZGlzcGxheUFyZWEgPSBudWxsKXtcclxuICAgIGxldCBjYW1lcmEgPSBHZXRDYW1lcmEoKTtcclxuICAgIGlmKCFJc0luQ2FtZXJhKGNhbWVyYSwgZGlzcGxheUFyZWEpKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvL+i9rOS4uueUu+W4g+WdkOagh1xyXG4gICAgbGV0IHNjcmVlblBvcyA9IFRvTG9jYXRlUG9zKFxyXG4gICAgICAgIEdldFJlY3RTdGFydFBvcyhkaXNwbGF5QXJlYSksIFxyXG4gICAgICAgIEdldFJlY3RTdGFydFBvcyhjYW1lcmEucmVjdCkpO1xyXG4gICAgZHJhd1JlY3QoXHJcbiAgICAgICAgc2NyZWVuUG9zLngsIHNjcmVlblBvcy55LFxyXG4gICAgICAgIEdldFJlY3RXaWR0aChkaXNwbGF5QXJlYSksIEdldFJlY3RIZWlnaHQoZGlzcGxheUFyZWEpKTtcclxufVxyXG5cclxuZXhwb3J0IHtHZXRSZW5kZXJVcGRhdGVTeXN0ZW0sIEdldERyYXdSZWN0U3lzdGVtfSIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuaW1wb3J0IHsgTGlua0l0ZXJhdG9yIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuaW1wb3J0IHsgR2V0UG9zQ29tcG9uZW50TGlzdCB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvcG9zL2NvbXBvbmVudFwiO1xyXG5cclxuLyoqXHJcbiAqIDIwMTkuMDkuMjlcclxuICogICAgICDnu4/ov4fogIPomZHvvIznm67liY3lj6rlgZrnroDljZXniYjmnKzvvIzkuI3opoHmg7PlvpflpKrplb/ov5xcclxuICogICAgICDmiYDku6XlhYjkuI3nlKjns7vnu5/nu5/kuIDmm7TmlrDkvY3nva7vvIznm7TmjqXlnKhhY3Rpb27kuK1zZXRwb3PlsLHlpb1cclxuICovXHJcbmNsYXNzIFBvc1VwZGF0ZVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRQb3NDb21wb25lbnRMaXN0KCksIG1vdmVDb20gPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmVjID0gbW92ZUNvbS52ZWM7XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSBtb3ZlQ29tLnBvcztcclxuICAgICAgICAgICAgcG9zLnggKz0gdmVjLng7XHJcbiAgICAgICAgICAgIHBvcy55ICs9IHZlYy55O1xyXG4gICAgICAgICAgICB2ZWMueCA9IDA7XHJcbiAgICAgICAgICAgIHZlYy55ID0gMDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHN5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldFBvc1VwZGF0ZVN5c3RlbSgpe1xyXG4gICAgaWYoIXN5cyl7XHJcbiAgICAgICAgc3lzID0gbmV3IFBvc1VwZGF0ZVN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN5cztcclxufVxyXG5cclxuLyoqXHJcbiAqIOaaguaXtuaUvuedgO+8jOS7peWQjuWPr+iDveimgeaUvuWcqHN5c3RlbUxpc3RbMF3vvIzku6Xkvr/mr4/luKfliJ3lp4vljJbkuLTml7bmlbDmja5cclxuICovXHJcbmNsYXNzIENsZWFyU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldFBvc0NvbXBvbmVudExpc3QoKSwgbW92ZUNvbSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2ZWMgPSBtb3ZlQ29tLnZlYztcclxuICAgICAgICAgICAgdmVjLnggPSAwO1xyXG4gICAgICAgICAgICB2ZWMueSA9IDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydHtHZXRQb3NVcGRhdGVTeXN0ZW19IiwiaW1wb3J0IHsgZ2V0RW5naW5lIH0gZnJvbSBcIi4vbW9kZWxcIjtcclxuXHJcbnZhciBfZW5naW5lID0gZ2V0RW5naW5lKCk7XHJcblxyXG5mdW5jdGlvbiBsb2FkSW1nKGltZ1NyYywgb25Mb2FkQ2FsbGJhY2spe1xyXG4gICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgaW1nLnNyYyA9IGltZ1NyYztcclxuICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgb25Mb2FkQ2FsbGJhY2soaW1nKTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIF9jYWxsYmFjaztcclxudmFyIF9mcmFtZU5vID0gMDtcclxudmFyIF9kdCA9IDA7XHJcbnZhciBfbGFzdCA9IDA7XHJcbnZhciBfaXNFbmQgPSBmYWxzZTtcclxuZnVuY3Rpb24gdGljayh0aW1lc3RhbXApIHtcclxuICAgIF9kdCA9IHRpbWVzdGFtcCAtIF9sYXN0O1xyXG4gICAgX2xhc3QgPSB0aW1lc3RhbXA7XHJcbiAgICBfY2FsbGJhY2soX2R0KTtcclxuICAgIGlmKCFfaXNFbmQpe1xyXG4gICAgICAgIF9mcmFtZU5vID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gUnVuMjIyMihvblVwZGF0ZUNhbGxiYWNrID0gbnVsbCkge1xyXG4gICAgX2lzRW5kID0gZmFsc2U7XHJcbiAgICBfY2FsbGJhY2sgPSBvblVwZGF0ZUNhbGxiYWNrO1xyXG4gICAgX2ZyYW1lTm8gPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xyXG59XHJcblxyXG4vKipcclxuICogZGVidWdcclxuICovXHJcbnZhciBzdGFydCA9IG51bGw7XHJcbnZhciBsYXN0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbmZ1bmN0aW9uIHJ1blRpY2sob25VcGRhdGVDYWxsYmFjayA9IG51bGwpIHtcclxuICAgIF9pc0VuZCA9IGZhbHNlO1xyXG4gICAgX2NhbGxiYWNrID0gb25VcGRhdGVDYWxsYmFjaztcclxuICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIGlmKCFfaXNFbmQpe1xyXG4gICAgICAgICAgICBfY2FsbGJhY2soc3RhcnQgLSBsYXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFzdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgfSwgX2VuZ2luZS50aWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcCgpe1xyXG4gICAgX2lzRW5kID0gdHJ1ZTtcclxufVxyXG5cclxuXHJcbi8v5Zug5Li65oyJ5L2P6ZSu55qE6K+d77yM5Lya5LiN5pat6Kem5Y+Rb25LZXlkb3du77yM5omA5Lul5YGa5LiqbWFw5Yik5patXHJcbnZhciBfa2V5RG93bk1hcCA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gb25LZXlDYWxsYmFjayhrZXlEb3duQ2FsbGJhY2sgPSBudWxsLCBrZXlVcENhbGxiYWNrID0gbnVsbCl7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZSA9PiB7XHJcbiAgICAgICAgbGV0IGNvZGUgPSBlLmtleUNvZGU7XHJcbiAgICAgICAgaWYoX2tleURvd25NYXAuZ2V0KGNvZGUpKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfa2V5RG93bk1hcC5zZXQoY29kZSwgMSk7XHJcbiAgICAgICAga2V5RG93bkNhbGxiYWNrKGUua2V5Q29kZSk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZSA9PiB7XHJcbiAgICAgICAgbGV0IGNvZGUgPSBlLmtleUNvZGU7XHJcbiAgICAgICAgX2tleURvd25NYXAuZGVsZXRlKGNvZGUpO1xyXG4gICAgICAgIGtleVVwQ2FsbGJhY2soZS5rZXlDb2RlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbk1vdXNlQ2FsbGJhY2sobW91c2Vkb3duQ2FsbGJhY2sgPSBudWxsLCBtb3VzZXVwQ2FsbGJhY2sgPSBudWxsKXtcclxuICAgIF9lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgIG1vdXNlZG93bkNhbGxiYWNrKGV2ZW50LngsIGV2ZW50LnkpO1xyXG4gICAgfSk7XHJcbiAgICBfZW5naW5lLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgbW91c2V1cENhbGxiYWNrKGV2ZW50LngsIGV2ZW50LnkpO1xyXG4gICAgfSk7XHJcbiAgICAvL19lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixkb01vdXNlTW92ZSxmYWxzZSk7XHJcbiAgICAvL19lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLGRvTW91c2VPdXQsZmFsc2UpO1xyXG59XHJcblxyXG5leHBvcnR7XHJcbiAgICBsb2FkSW1nLCBydW5UaWNrLCBzdG9wLCBvbktleUNhbGxiYWNrLCBvbk1vdXNlQ2FsbGJhY2tcclxufSIsImltcG9ydCB7IEdldEFjdGlvblN5c3RlbSB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBHZXRSZW5kZXJVcGRhdGVTeXN0ZW0sIEdldERyYXdSZWN0U3lzdGVtIH0gZnJvbSBcIi4vcmVuZGVyXCI7XHJcbmltcG9ydCB7IEdldFBvc1VwZGF0ZVN5c3RlbSB9IGZyb20gXCIuL21vdmVcIjtcclxuaW1wb3J0IHsgcnVuVGljayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9wcm9jZXNzb3JcIjtcclxuaW1wb3J0IHsgUHVzaFRvTGluaywgTmV3TGluaywgTGlua0l0ZXJhdG9yLCBJbnNlcnRUb0xpbmsgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5cclxuLyoqXHJcbiAqIOS4u+ezu+e7n+WIl+ihqFxyXG4gKi9cclxudmFyIHBvc1N5cyA9IEdldFBvc1VwZGF0ZVN5c3RlbSgpO1xyXG52YXIgbG9naWNTeXN0ZW1zID0gbnVsbDtcclxudmFyIHJlbmRlclN5c3RlbXMgPSBudWxsO1xyXG5mdW5jdGlvbiBpbml0U3lzdGVtcyhkZWJ1ZyA9IGZhbHNlKXtcclxuICAgIGxvZ2ljU3lzdGVtcyA9IE5ld0xpbmsoKTtcclxuICAgIFB1c2hUb0xpbmsobG9naWNTeXN0ZW1zLCBHZXRBY3Rpb25TeXN0ZW0oKSk7XHJcbiAgICByZW5kZXJTeXN0ZW1zID0gTmV3TGluaygpO1xyXG4gICAgUHVzaFRvTGluayhyZW5kZXJTeXN0ZW1zLCBHZXRSZW5kZXJVcGRhdGVTeXN0ZW0oKSk7XHJcblxyXG4gICAgLy/liJ3lp4vpu5jorqTns7vnu59cclxuICAgIGlmKGRlYnVnKXtcclxuICAgICAgICBQdXNoVG9MaW5rKHJlbmRlclN5c3RlbXMsIEdldERyYXdSZWN0U3lzdGVtKCkpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgbG9naWNUaWNrID0gMTY7ICAgICAvLzYwZnBzXHJcbnZhciByZW5kZXJUaWNrID0gNDE7ICAgIC8vMjRmcHNcclxudmFyIF90MSwgX3QyID0gMDtcclxuZnVuY3Rpb24gcnVuV2l0aFNjZW5lKHNjZW5lKXtcclxuICAgIExpbmtJdGVyYXRvcihsb2dpY1N5c3RlbXMsIHN5c3RlbSA9PiB7XHJcbiAgICAgICAgc3lzdGVtLm9uU3RhcnQoKTtcclxuICAgIH0pO1xyXG4gICAgTGlua0l0ZXJhdG9yKHJlbmRlclN5c3RlbXMsIHN5c3RlbSA9PiB7XHJcbiAgICAgICAgc3lzdGVtLm9uU3RhcnQoKTtcclxuICAgIH0pO1xyXG4gICAgc2NlbmUub25TdGFydCgpO1xyXG5cclxuICAgIC8vbWFpbiBsb29wXHJcbiAgICBydW5UaWNrKChkdCk9PntcclxuICAgICAgICBfdDEgKz0gZHQ7XHJcbiAgICAgICAgaWYoX3QxID49IGxvZ2ljVGljayl7XHJcbiAgICAgICAgICAgIF90MSAtPSBsb2dpY1RpY2s7XHJcbiAgICAgICAgICAgIHNjZW5lLm9uVXBkYXRlKGR0KTtcclxuICAgICAgICAgICAgTGlua0l0ZXJhdG9yKGxvZ2ljU3lzdGVtcywgc3lzdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHN5c3RlbS5vblVwZGF0ZShkdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3QyICs9IGR0O1xyXG4gICAgICAgIGlmKF90MiA+PSByZW5kZXJUaWNrKXtcclxuICAgICAgICAgICAgX3QyIC09IHJlbmRlclRpY2s7XHJcbiAgICAgICAgICAgIExpbmtJdGVyYXRvcihyZW5kZXJTeXN0ZW1zLCBzeXN0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtLm9uVXBkYXRlKGR0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEFkZFN5c3RlbShzeXN0ZW0gPSBudWxsKXtcclxuICAgIGlmKCFzeXN0ZW0pe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIEluc2VydFRvTGluayhsb2dpY1N5c3RlbXMsIHN5c3RlbSk7XHJcbn1cclxuXHJcbmV4cG9ydHtpbml0U3lzdGVtcywgcnVuV2l0aFNjZW5lLCBBZGRTeXN0ZW19IiwiXHJcbi8qKlxyXG4gKiDorrDlvZViaXRtYXBEYXRh55qE5Ymq6KOB5Yy65Z+fXHJcbiAqL1xyXG5jbGFzcyBUZXh0dXJlQXJlYSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOS4gOW8oOWbvuS4reeahOS4gOS4quWMuuWfn++8jOe6ueeQhuW4p+aIlueyvueBteW4p++8jOWNleS+i++8jOWSjOW8leaTjuacieWFs1xyXG4gKiDnsr7ngbXluKfnlKjkuo7moIflh7rkuIDlvKDnurnnkIblm77nmoTmjIflrprlj5bmnZDljLrln5/vvIzku6Xlj4rnm7jlr7nnmoTmmL7npLrkvY3nva5cclxuICovXHJcbmNsYXNzIFNwcml0ZUZyYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUgPSBcIlwiLCBiaXRtYXBEYXRhID0gbnVsbCwgdGV4dHVyZUFyZWEgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmJpdG1hcERhdGEgPSBiaXRtYXBEYXRhO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZUFyZWEgPSB0ZXh0dXJlQXJlYTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDmib7kuI3liLDluKfml7bnmoTpu5jorqTnqbrluKfvvIzlj6/ku6XmmK/kuIDlvKDnuqLlj4nlm77niYfvvIxcclxuICogVE9ETyDlvJXlhaXpu5jorqTotYTmupDmnLrliLZcclxuICovXHJcbnZhciBfc3ByaXRlRnJhbWVNYXAgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIGdldFNwcml0ZUZyYW1lQnlOYW1lKG5hbWUgPSBcIlwiKXtcclxuICAgIGxldCBmID0gX3Nwcml0ZUZyYW1lTWFwLmdldChuYW1lKTtcclxuICAgIHJldHVybiBmID8gZiA6IF9zcHJpdGVGcmFtZU1hcC5nZXQoXCJkZWZhbHV0XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTcHJpdGVGcmFtZShuYW1lID0gXCJcIiwgYml0bWFwRGF0YSA9IG51bGwsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGlmKF9zcHJpdGVGcmFtZU1hcC5nZXQobmFtZSkpe1xyXG4gICAgICAgIC8vZXhpc3RzXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgZiA9IG5ldyBTcHJpdGVGcmFtZShuYW1lLCBiaXRtYXBEYXRhLCBuZXcgVGV4dHVyZUFyZWEoeCwgeSwgd2lkdGgsIGhlaWdodCkpO1xyXG4gICAgX3Nwcml0ZUZyYW1lTWFwLnNldChuYW1lLCBmKTtcclxuICAgIHJldHVybiBmO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRTcHJpdGVGcmFtZVdpZHRoKHNwcml0ZUZyYW1lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gc3ByaXRlRnJhbWUudGV4dHVyZUFyZWEud2lkdGg7XHJcbn1cclxuZnVuY3Rpb24gR2V0U3ByaXRlRnJhbWVIZWlnaHQoc3ByaXRlRnJhbWUgPSBudWxsKXtcclxuICAgIHJldHVybiBzcHJpdGVGcmFtZS50ZXh0dXJlQXJlYS5oZWlnaHQ7XHJcbn1cclxuXHJcbmV4cG9ydHtnZXRTcHJpdGVGcmFtZUJ5TmFtZSwgY3JlYXRlU3ByaXRlRnJhbWUsIEdldFNwcml0ZUZyYW1lV2lkdGgsIEdldFNwcml0ZUZyYW1lSGVpZ2h0fSIsIlxyXG4gLyoqXHJcbiAgKiBncmlkbWFw55qE572R5qC85Y2V5YWDXHJcbiAgKi9cclxuY2xhc3MgR3JpZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3dJbmRleCA9IDAsIGNvbEluZGV4ID0gMCwgZGF0YSA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMucm93SW5kZXggPSByb3dJbmRleDtcclxuICAgICAgICB0aGlzLmNvbEluZGV4ID0gY29sSW5kZXg7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsgICAgICAgLy/lrZjlgqjnmoTlr7nosaFcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOe9keagvOihqFxyXG4gKiByb3dzID0g6KGM5pWwXHJcbiAqIGNvbHVtbnMgPSDliJfmlbBcclxuICogZ3JpZFdpZHRoLCBncmlkSGVpZ2h0ID0g5q+P5Liq572R5qC855qE5a696auY6IyD5Zu077yM5bu66K6uMToxXHJcbiAqIFxyXG4gKi9cclxuY2xhc3MgR3JpZE1hcCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwLCBncmlkcyA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucztcclxuICAgICAgICB0aGlzLmdyaWRXaWR0aCA9IGdyaWRXaWR0aDtcclxuICAgICAgICB0aGlzLmdyaWRIZWlnaHQgPSBncmlkSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZ3JpZHMgPSBncmlkcztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3R3JpZE1hcChyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwKXtcclxuICAgIGxldCBncmlkcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3M7IHJvd0luZGV4KyspIHtcclxuICAgICAgICBmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgY29sdW1uczsgY29sSW5kZXgrKykge1xyXG4gICAgICAgICAgICBsZXQgZ3JpZCA9IG5ldyBHcmlkKHJvd0luZGV4LCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgIGdyaWRzLnB1c2goZ3JpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBHcmlkTWFwKHJvd3MsIGNvbHVtbnMsIGdyaWRXaWR0aCwgZ3JpZEhlaWdodCwgZ3JpZHMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRHcmlkV2lkdGgoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuZ3JpZFdpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldEdyaWRIZWlnaHQoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuZ3JpZEhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBHZXRHcmlkTWFwV2lkdGgoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuY29sdW1ucyAqIGdyaWRtYXAuZ3JpZFdpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldEdyaWRNYXBIZWlnaHQoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAucm93cyAqIGdyaWRtYXAuZ3JpZEhlaWdodDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOagueaNruS9jee9ruWumuS9jWdyaWRcclxuICogeCwgeeaYr2dyaWRtYXDlt6bkuIrop5LlvIDlp4vnrpdcclxuICovXHJcbmZ1bmN0aW9uIEdldEdyaWQoZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICBpZighY2hlY2tJbihncmlkbWFwLCB4LCB5KSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgY29sdW1uID0gcGFyc2VJbnQoeCAvIGdyaWRtYXAuZ3JpZFdpZHRoKTtcclxuICAgIGxldCByb3cgPSBwYXJzZUludCh5IC8gZ3JpZG1hcC5ncmlkSGVpZ2h0KTtcclxuICAgIHJldHVybiBncmlkbWFwLmdyaWRzW3JvdyAqIGdyaWRtYXAuY29sdW1ucyArIGNvbHVtbl07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSW4oZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICByZXR1cm4geCA+IDAgJiYgeCA8IEdldEdyaWRNYXBXaWR0aChncmlkbWFwKSAmJiB5ID4gMCAmJiB5IDwgR2V0R3JpZE1hcEhlaWdodChncmlkbWFwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gSXRlcmF0b3JHcmlkbWFwKGdyaWRtYXAgPSBudWxsLCBjYWxsYmFjayA9IG51bGwpe1xyXG4gICAgZ3JpZG1hcC5ncmlkcy5mb3JFYWNoKGdyaWQgPT4ge1xyXG4gICAgICAgIGNhbGxiYWNrKGdyaWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEdyaWREYXRhKGdyaWRtYXAgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IGdyaWQgPSBHZXRHcmlkKGdyaWRtYXAsIHgsIHkpO1xyXG4gICAgcmV0dXJuIGdyaWQgPyBncmlkLmRhdGEgOiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gICAgTmV3R3JpZE1hcCwgR2V0R3JpZFdpZHRoLCBHZXRHcmlkSGVpZ2h0LCBHZXRHcmlkTWFwV2lkdGgsIEdldEdyaWRNYXBIZWlnaHQsIEdldEdyaWQsIEl0ZXJhdG9yR3JpZG1hcCwgR2V0R3JpZERhdGFcclxufSIsImltcG9ydCB7IE5ld1BvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBHZXRHcmlkTWFwV2lkdGgsIEdldEdyaWRNYXBIZWlnaHQsIE5ld0dyaWRNYXAsIEdldEdyaWRXaWR0aCwgR2V0R3JpZEhlaWdodCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9ncmlkbWFwXCI7XHJcblxyXG4vKipcclxuICogMmTnk7fnoJblnLDlm77vvIznlLFHcmlkTWFw5omp5bGVXHJcbiAqIHNhbXBsZTpcclxuICogW1xyXG5cdDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsXHJcblx0MSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgXHJcblx0MSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgXHJcbl1cclxuICovXHJcbmNsYXNzIFRpbGVNYXAge1xyXG4gICAgY29uc3RydWN0b3IoZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgdGhpcy5ncmlkbWFwID0gZ3JpZG1hcDtcclxuICAgICAgICB0aGlzLnBvcyA9IE5ld1Bvcyh4LCB5KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3VGlsZU1hcChyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IGdyaWRtYXAgPSBOZXdHcmlkTWFwKHJvd3MsIGNvbHVtbnMsIGdyaWRXaWR0aCwgZ3JpZEhlaWdodCk7XHJcbiAgICByZXR1cm4gbmV3IFRpbGVNYXAoZ3JpZG1hcCwgeCwgeSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFRpbGVtYXBTdGFydCh0aWxlbWFwID0gbnVsbCl7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHRpbGVtYXAucG9zLnggLSBHZXRHcmlkTWFwV2lkdGgodGlsZW1hcC5ncmlkbWFwKSAqIDAuNSxcclxuICAgICAgICB0aWxlbWFwLnBvcy55IC0gR2V0R3JpZE1hcEhlaWdodCh0aWxlbWFwLmdyaWRtYXApICogMC41XHJcbiAgICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRUaWxlbWFwRW5kKHRpbGVtYXAgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgdGlsZW1hcC5wb3MueCArIEdldEdyaWRNYXBXaWR0aCh0aWxlbWFwLmdyaWRtYXApICogMC41LFxyXG4gICAgICAgIHRpbGVtYXAucG9zLnkgKyBHZXRHcmlkTWFwSGVpZ2h0KHRpbGVtYXAuZ3JpZG1hcCkgKiAwLjVcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFRpbGVtYXBDZW50ZXIodGlsZW1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1Bvcyh0aWxlbWFwLnBvcy54LCB0aWxlbWFwLnBvcy55KTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0R3JpZFN0YXJ0KHRpbGVtYXAgPSBudWxsLCBncmlkID0gbnVsbCl7XHJcbiAgICBsZXQgc3RhcnQgPSBHZXRUaWxlbWFwU3RhcnQodGlsZW1hcCk7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHN0YXJ0LnggKyBHZXRHcmlkV2lkdGgodGlsZW1hcC5ncmlkbWFwKSAqIGdyaWQuY29sSW5kZXgsXHJcbiAgICAgICAgc3RhcnQueSArIEdldEdyaWRIZWlnaHQodGlsZW1hcC5ncmlkbWFwKSAqIGdyaWQucm93SW5kZXhcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEdyaWRFbmQodGlsZW1hcCA9IG51bGwsIGdyaWQgPSBudWxsKXtcclxuICAgIGxldCBzdGFydCA9IEdldFRpbGVtYXBTdGFydCh0aWxlbWFwKTtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgc3RhcnQueCArIEdldEdyaWRXaWR0aCh0aWxlbWFwLmdyaWRtYXApICogKGdyaWQuY29sSW5kZXggKyAxKSxcclxuICAgICAgICBzdGFydC55ICsgR2V0R3JpZEhlaWdodCh0aWxlbWFwLmdyaWRtYXApICogKGdyaWQucm93SW5kZXggKyAxKVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0R3JpZENlbnRlcih0aWxlbWFwID0gbnVsbCwgZ3JpZCA9IG51bGwpe1xyXG4gICAgbGV0IHN0YXJ0ID0gR2V0VGlsZW1hcFN0YXJ0KHRpbGVtYXApO1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICBzdGFydC54ICsgR2V0R3JpZFdpZHRoKHRpbGVtYXAuZ3JpZG1hcCkgKiAoZ3JpZC5jb2xJbmRleCArIDAuNSksXHJcbiAgICAgICAgc3RhcnQueSArIEdldEdyaWRIZWlnaHQodGlsZW1hcC5ncmlkbWFwKSAqIChncmlkLnJvd0luZGV4ICsgMC41KVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIE5ld1RpbGVNYXAsIEdldFRpbGVtYXBTdGFydCwgR2V0VGlsZW1hcEVuZCwgR2V0VGlsZW1hcENlbnRlciwgXHJcbiAgICBHZXRHcmlkV2l0aFBvcywgR2V0R3JpZFN0YXJ0LCBHZXRHcmlkRW5kLCBHZXRHcmlkQ2VudGVyXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmib7lh7rkuI5yZWN055u45Lqk55qE5omA5pyJZ3JpZFxyXG4gKiBUT0RPIOacquWumu+8jOWPr+iDveS4jemcgOimgei/meenjeWBmuazlVxyXG4gKi9cclxuZnVuY3Rpb24gR2V0R3JpZHNCeVJlY3QodGlsZU1hcCA9IG51bGwsIHJlY3QgPSBudWxsKXtcclxuICAgIC8v5piv5ZCm5ZyodGlsZW1hcOS4rVxyXG4gICAgaWYoIUlzUmVjdENyb3NzKHRpbGVNYXAucmVjdCwgcmVjdCkpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGdyaWRzID0gW107XHJcbiAgICBsZXQgcG9zU3RhcnQgPSByZWN0LnBvc1N0YXJ0O1xyXG4gICAgbGV0IGNvbHVtblN0YXJ0ID0gcGFyc2VJbnQocG9zU3RhcnQueCAvIHRpbGVNYXAuZ3JpZFdpZHRoKTtcclxuICAgIGxldCByb3dTdGFydCA9IHBhcnNlSW50KHBvc1N0YXJ0LnkgLyB0aWxlTWFwLmdyaWRIZWlnaHQpO1xyXG4gICAgY29sdW1uU3RhcnQgPSBjb2x1bW5TdGFydCA8IDAgPyAwIDogY29sdW1uU3RhcnQ7XHJcbiAgICByb3dTdGFydCA9IHJvd1N0YXJ0IDwgMCA/IDAgOiByb3dTdGFydDtcclxuXHJcbiAgICBsZXQgcG9zRW5kID0gcmVjdC5wb3NFbmQ7XHJcbiAgICBsZXQgY29sdW1uRW5kID0gcGFyc2VJbnQocG9zRW5kLnggLyB0aWxlTWFwLmdyaWRXaWR0aCk7XHJcbiAgICBsZXQgcm93RW5kID0gcGFyc2VJbnQocG9zRW5kLnkgLyB0aWxlTWFwLmdyaWRIZWlnaHQpO1xyXG4gICAgY29sdW1uRW5kID0gY29sdW1uRW5kID4gdGlsZU1hcC5jb2x1bW5zIC0gMSA/IHRpbGVNYXAuY29sdW1ucyAtIDEgOiBjb2x1bW5FbmQ7XHJcbiAgICByb3dFbmQgPSByb3dFbmQgPiB0aWxlTWFwLnJvd3MgLSAxID8gdGlsZU1hcC5yb3dzIC0gMSA6IHJvd0VuZDtcclxuXHJcbiAgICBmb3IobGV0IHJvdz1yb3dTdGFydDsgcm93PD1yb3dFbmQ7IHJvdysrKXtcclxuICAgICAgICBmb3IobGV0IGNvbHVtbj1jb2x1bW5TdGFydDsgY29sdW1uPD1jb2x1bW5FbmQ7IGNvbHVtbisrKXtcclxuICAgICAgICAgICAgZ3JpZHMucHVzaCh0aWxlTWFwLmdyaWRzW3Jvd11bY29sdW1uXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdyaWRzO1xyXG59IiwiaW1wb3J0IHsgaW5pdFN5c3RlbXMgfSBmcm9tIFwiLi4vc3lzdGVtL3J1blwiO1xyXG5pbXBvcnQgeyBpbml0Q2FudmFzIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZW5naW5lL2g1L21vZGVsXCI7XHJcbmltcG9ydCB7IG9uS2V5Q2FsbGJhY2ssIG9uTW91c2VDYWxsYmFjayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9wcm9jZXNzb3JcIjtcclxuaW1wb3J0IHsgTmV3Q2FtZXJhIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgY3JlYXRlVGlsZU1hcFdpdGhEYXRhIH0gZnJvbSBcIi4vYWRhcHRlclwiO1xyXG5cclxuLyoqXHJcbiAqIOmAmui/h+WPguaVsOmFjee9ruWIneWni+WMluezu+e7n+i1hOa6kFxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdEdhbWUob3B0aW9ucyA9IG51bGwpIHtcclxuXHJcbiAgICAvL+W8leaTjuWIneWni+WMllxyXG4gICAgaW5pdENhbnZhcyhvcHRpb25zLnNjcmVlbi53aWR0aCwgb3B0aW9ucy5zY3JlZW4uaGVpZ2h0LCBvcHRpb25zLmZwcyk7XHJcblxyXG4gICAgLy/ms6jlhozmjInplK7lm57osINcclxuICAgIGlmKG9wdGlvbnMua2V5RG93bkhhbmRsZXIgJiYgb3B0aW9ucy5rZXlVcEhhbmxlcil7XHJcbiAgICAgICAgb25LZXlDYWxsYmFjayhvcHRpb25zLmtleURvd25IYW5kbGVyLCBvcHRpb25zLmtleVVwSGFubGVyKTtcclxuICAgIH1cclxuICAgIGlmKG9wdGlvbnMubW91c2Vkb3duSGFuZGxlciAmJiBvcHRpb25zLm1vdXNldXBIYW5kbGVyKXtcclxuICAgICAgICBvbk1vdXNlQ2FsbGJhY2sob3B0aW9ucy5tb3VzZWRvd25IYW5kbGVyLCBvcHRpb25zLm1vdXNldXBIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdENhbWVyYShvcHRpb25zLmNhbWVyYSwgb3B0aW9ucy5zY3JlZW4pO1xyXG4gICAgaW5pdFN5c3RlbXMob3B0aW9ucy5kZWJ1Zyk7XHJcblxyXG4gICAgLy/nk7fnoJblnLDlm77vvIzoiJ7lj7BcclxuICAgIGlmKG9wdGlvbnMudGlsZW1hcCl7XHJcbiAgICAgICAgaW5pdFRpbGUob3B0aW9ucy50aWxlbWFwKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+W8gOWQr+eisOaSnuezu+e7n1xyXG4gICAgaWYob3B0aW9ucy5jb2xsaWRlKXtcclxuICAgICAgICAvL09wZW5Db2xsaWRlcihvcHRpb25zLmNvbGxpZGUpO1xyXG5cclxuICAgICAgICAvLyBpZihvcHRpb25zLnVzZVRpbGVDb21iaW5lKXtcclxuICAgICAgICAvLyAgICAgbGV0IHJlc3VsdE5vZGVzID0gQ3JlYXRlQ29tYmluZU5vZGVzKHRpbGVtYXAsIGNvbGxpZGUuYm94SGFuZGxlcik7XHJcbiAgICAgICAgLy8gICAgIHJlc3VsdE5vZGVzLmZvckVhY2gocmVzdWx0ID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbGxpZGUubG9hZENhbGxiYWNrKHJlc3VsdC52YWx1ZSwgcmVzdWx0LnJlY3QpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmkYTlg4/mnLrvvIzlhajlsYDljZXkvotcclxuICovXHJcbnZhciBjYW1lcmEgPSBudWxsO1xyXG5mdW5jdGlvbiBpbml0Q2FtZXJhKGNhbWVyYURhdGEgPSBudWxsLCBzY3JlZW5EYXRhID0gbnVsbCl7XHJcbiAgICBsZXQgd2lkdGggPSBjYW1lcmFEYXRhLndpZHRoID8gY2FtZXJhRGF0YS53aWR0aCA6IHNjcmVlbkRhdGEud2lkdGg7XHJcbiAgICBsZXQgaGVpZ2h0ID0gY2FtZXJhRGF0YS5oZWlnaHQgPyBjYW1lcmFEYXRhLmhlaWdodCA6IHNjcmVlbkRhdGEuaGVpZ2h0O1xyXG4gICAgY2FtZXJhID0gTmV3Q2FtZXJhKGNhbWVyYURhdGEueCwgY2FtZXJhRGF0YS55LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5mdW5jdGlvbiBHZXRDYW1lcmEoKXtcclxuICAgIHJldHVybiBjYW1lcmE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55O356CW5Zyw5Zu+77yM6Iie5Y+w77yM5YWo5bGA5Y2V5L6LXHJcbiAqL1xyXG52YXIgdGlsZW1hcCA9IG51bGw7XHJcbmZ1bmN0aW9uIGluaXRUaWxlKHRpbGVtYXBEYXRhID0gbnVsbCl7XHJcbiAgICB0aWxlbWFwID0gY3JlYXRlVGlsZU1hcFdpdGhEYXRhKHRpbGVtYXBEYXRhLCB0aWxlbWFwRGF0YS5pbml0SGFuZGxlcik7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VGlsZW1hcCgpe1xyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcbmV4cG9ydHtpbml0R2FtZSwgaW5pdENhbWVyYSwgR2V0Q2FtZXJhLCBpbml0VGlsZSwgZ2V0VGlsZW1hcH0iLCJpbXBvcnQgeyBjcmVhdGVTcHJpdGVGcmFtZSwgZ2V0U3ByaXRlRnJhbWVCeU5hbWUgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZnJhbWVcIjtcclxuaW1wb3J0IHsgTmV3Q2FtZXJhIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgQ3JlYXRlQW5pbWF0ZUZyYW1lLCBDcmVhdGVBbmltYXRlQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2FjdGlvbi9hbmltYXRlXCI7XHJcbmltcG9ydCB7IE5ld1RpbGVNYXAgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3RpbGUvdGlsZW1hcFwiO1xyXG5pbXBvcnQgeyBJdGVyYXRvckdyaWRtYXAgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZ3JpZG1hcFwiO1xyXG5cclxuLyoqXHJcbiAqIOWIm+W7uueyvueBteW4p1xyXG4gKiB0ZXh0dXJlQXJlYURhdGEgPSB7XHJcbiAqICB4IDogMCxcclxuICogIHkgOiAwLFxyXG4gKiAgd2lkdGggOiAwLFxyXG4gKiAgaGVpZ2h0IDogMFxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTcHJpdGVGcmFtZVdpdGhEYXRhKG5hbWUgPSBcIlwiLCBiaXRtYXBEYXRhID0gbnVsbCwgdGV4dHVyZUFyZWFEYXRhID0gbnVsbCl7XHJcbiAgICBpZihuYW1lPT1cIlwiIHx8ICFiaXRtYXBEYXRhIHx8ICF0ZXh0dXJlQXJlYURhdGEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHdpZHRoID0gdGV4dHVyZUFyZWFEYXRhWyd3aWR0aCddO1xyXG4gICAgbGV0IGhlaWdodCA9IHRleHR1cmVBcmVhRGF0YVsnaGVpZ2h0J107XHJcbiAgICBpZighd2lkdGggfHwgIWhlaWdodCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlU3ByaXRlRnJhbWUobmFtZSwgYml0bWFwRGF0YSwgdGV4dHVyZUFyZWFEYXRhWyd4J10sIHRleHR1cmVBcmVhRGF0YVsneSddLCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHNjcmVlbk9wdGlvbnMgPSB7XHJcbiAqICAgICAgeCA6IDAsIHkgOiAwLCB3aWR0aCA6IDAsIGhlaWdodCA6IDBcclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ2FtZXJhV2l0aERhdGEoc2NyZWVuT3B0aW9ucyA9IG51bGwpe1xyXG4gICAgaWYoIXNjcmVlbk9wdGlvbnMpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHdpZHRoID0gc2NyZWVuT3B0aW9uc1snd2lkdGgnXTtcclxuICAgIGxldCBoZWlnaHQgPSBzY3JlZW5PcHRpb25zWydoZWlnaHQnXTtcclxuICAgIGlmKCF3aWR0aCB8fCAhaGVpZ2h0KXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBOZXdDYW1lcmEoXHJcbiAgICAgICAgc2NyZWVuT3B0aW9uc1sneCddLCBzY3JlZW5PcHRpb25zWyd5J10sXHJcbiAgICAgICAgd2lkdGgsIGhlaWdodFxyXG4gICAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHRpbGVtYXDku6Xlj4pncmlk55qEcmVjdCwgcG9z5YWz57O7XHJcbiAqIHRpbGVtYXDnmoTnm7jlr7nlnZDmoIfmmK8oMCwgMCnvvIzljbPlt6bkuIrop5JcclxuICogZ3JpZOeahOWdkOagh+aYr2dyaWTnn6nlvaLkuK3pl7RcclxuICog5L6L5aaC77yadGlsZW1hcC5wb3MueCA9IDIwLCBncmlkV2lkdGggPSA1MCwgY29sdW1uID0gNTtcclxuICog6YKj5LmIZ3JpZFswXeeahHBvcy54PSAyMCArIDAqNTAgKyA1MC8yID0gNDUsIHBvc1N0YXJ0LnggPSA0NSAtIDUwLzIgPSAyMFxyXG4gKiDlkIznkIZncmlkWzRd55qEcG9zLng9IDIwICsgNCo1MCArIDUwLzIgPSAyNDUsIHBvc1N0YXJ0LnggPSAyNDUgLSA1MC8yID0gMjIwXHJcbiAqIFxyXG4gKiBvcHRpb25zOntcclxuICogICAgICBkYXRhIDogWyAgICAgICAgICAgICAgICDkuIDnu7TmlbDnu4RcclxuICogICAgICAgICAgMSwgMSwgMSwgMCwgMCwgMSxcclxuICogICAgICAgICAgMiwgMSwgMCwgMCwgMSwgMixcclxuICogICAgICAgICAgMiwgMiwgMSwgMSwgMSwgMVxyXG4gKiAgICAgICAgICBdXHJcbiAqICAgICAgY29sdW1ucyA6IDYgICAgIOWIl+aVsFxyXG4gKiAgICAgIGdyaWRXaWR0aCA6IDMyXHJcbiAqICAgICAgZ3JpZEhlaWdodCA6IDMyICAgICDmr4/kuKrmoLzlrZDnmoTlrr3pq5hcclxuICogICAgICB4IDogMFxyXG4gKiAgICAgIHkgOiAwICAgICAgICAgICDliJ3lp4vkvY3nva7vvIzpu5jorqTkuLpzdGFnZeS4reW/g++8jOWNsygwLCAwKVxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVUaWxlTWFwV2l0aERhdGEob3B0aW9ucyA9IG51bGwsIGluaXRIYW5kbGVyID0gbnVsbCl7XHJcbiAgICBpZighb3B0aW9ucyB8fCBvcHRpb25zLmNvbHVtbnMgPD0gMCB8fCAhb3B0aW9ucy5kYXRhIHx8IG9wdGlvbnMuZGF0YS5sZW5ndGggPT0gMCB8fCBvcHRpb25zLmdyaWRXaWR0aCA8PSAwIHx8IG9wdGlvbnMuZ3JpZEhlaWdodCA8PSAwKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8v5Lii5byD5bCP5pWw6YOo5YiGLOS/neeVmeaVtOaVsOmDqOWIhu+8jOmqjOivgXRpbGVtYXDmlbDmja7lrozmlbTmgKdcclxuICAgIGxldCBjb2x1bW5zID0gb3B0aW9ucy5jb2x1bW5zO1xyXG4gICAgbGV0IHJvd3MgPSBwYXJzZUludChvcHRpb25zLmRhdGEubGVuZ3RoIC8gY29sdW1ucyk7XHJcbiAgICBpZihyb3dzICogY29sdW1ucyAhPSBvcHRpb25zLmRhdGEubGVuZ3RoKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIHBhcmFtOiBsZW4oZ3JpZHMpOlwiLCBvcHRpb25zLmRhdGEubGVuZ3RoLCBcIiBjb2x1bW5zOlwiLCBjb2x1bW5zKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGlsZW1hcCA9IE5ld1RpbGVNYXAocm93cywgY29sdW1ucywgb3B0aW9ucy5ncmlkV2lkdGgsIG9wdGlvbnMuZ3JpZEhlaWdodCwgb3B0aW9ucy54LCBvcHRpb25zLnksIGluaXRIYW5kbGVyKTtcclxuICAgIGlmKGluaXRIYW5kbGVyKXtcclxuICAgICAgICBJdGVyYXRvckdyaWRtYXAodGlsZW1hcC5ncmlkbWFwLCBncmlkID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbCA9IG9wdGlvbnMuZGF0YVtncmlkLnJvd0luZGV4ICogY29sdW1ucyArIGdyaWQuY29sSW5kZXhdO1xyXG4gICAgICAgICAgICBpbml0SGFuZGxlcih2YWwsIHRpbGVtYXAsIGdyaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5Yib5bu65bqP5YiX5bin5Yqo55S7XHJcbiAqIGFuaW1hdGVEYXRhID0ge1xyXG4gKiAgdHlwZSA6IDAsXHJcbiAqICBmcmFtZXMgOiBbXHJcbiAqICAgICAge1xyXG4gKiAgICAgICAgICBkdXJhdGlvbiA6IDAsXHJcbiAqICAgICAgICAgIHhPZmZzZXQgOiAwLFxyXG4gKiAgICAgICAgICB5T2Zmc2V0IDogMFxyXG4gKiAgICAgIH1cclxuICogIF1cclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZVdpdGhEYXRhKGFuaW1hdGVEYXRhID0gbnVsbCl7XHJcbiAgICBpZighYW5pbWF0ZURhdGEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsZXQgZnJhbWVzRGF0YSA9IGFuaW1hdGVEYXRhWydmcmFtZXMnXTtcclxuICAgIGlmKCFmcmFtZXNEYXRhIHx8IGZyYW1lc0RhdGEubGVuZ3RoID09IDApe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhbmltYXRlRnJhbWVzID0gW107XHJcbiAgICBmcmFtZXNEYXRhLmZvckVhY2goZnJhbWVEYXRhID0+IHtcclxuICAgICAgICBhbmltYXRlRnJhbWVzLnB1c2goXHJcbiAgICAgICAgICAgIENyZWF0ZUFuaW1hdGVGcmFtZShnZXRTcHJpdGVGcmFtZUJ5TmFtZShzcHJpdGVGcmFtZU5hbWUpLFxyXG4gICAgICAgICAgICAgICAgZnJhbWVEYXRhWydkdXJhdGlvbiddLCBmcmFtZURhdGFbJ3hPZmZzZXQnXSwgZnJhbWVEYXRhWyd5T2Zmc2V0J10pKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENyZWF0ZUFuaW1hdGVBY3Rpb24oYW5pbWF0ZURhdGFbJ3R5cGUnXSwgZW50aXR5SWQsIGFuaW1hdGVGcmFtZXMpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0e0xvYWRSZXNvdXJjZSwgY3JlYXRlU3ByaXRlRnJhbWVXaXRoRGF0YSwgY3JlYXRlQ2FtZXJhV2l0aERhdGEsIGNyZWF0ZVRpbGVNYXBXaXRoRGF0YSwgY3JlYXRlQW5pbWF0ZVdpdGhEYXRhfSIsImltcG9ydCBkYXRhIGZyb20gJy4vZGF0YSc7XHJcbmltcG9ydCB7IFN0YXJ0VGVzdCB9IGZyb20gJy4vZnJhbWV3b3JrL2RpcmVjdG9yL3V0aWxzL2dhbWUnO1xyXG5pbXBvcnQgeyBOZXdQb3MgfSBmcm9tICcuL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludCc7XHJcbmltcG9ydCB7IE5ld0xpbmVXaXRoUG9zIH0gZnJvbSAnLi9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvbGluZSc7XHJcbmltcG9ydCB7IEludGVyU2VjdGlvblBvcyB9IGZyb20gJy4vZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3V0aWxzJztcclxuaW1wb3J0IHsgRHJhd0NpcmNsZSwgRHJhd0xpbmUsIERyYXdSZWN0IH0gZnJvbSAnLi9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvcmVuZGVyJztcclxuaW1wb3J0IHsgR2V0R3JpZENlbnRlciB9IGZyb20gJy4vZnJhbWV3b3JrL2NvbXBvbmVudC90aWxlL3RpbGVtYXAnO1xyXG5pbXBvcnQgeyBHZXRHcmlkV2lkdGgsIEdldEdyaWRIZWlnaHQgfSBmcm9tICcuL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9ncmlkbWFwJztcclxuXHJcbi8qKlxyXG4gKiAgMjAxOS4xMC4wOVxyXG4gKiAgICAgIHZz5b+954S25LiN5o+Q56S6aW1wb3J05LqG77yM5oyJ54Wn572R5LiK55qE5pa55rOV77yM5Yqg5LqG5LiqanNjb25maWcuanNvbuWwseWPr+S7peS6hlxyXG4gKi9cclxuXHJcbi8v6LCo6K6w5pWw5o2u6amx5YqoXHJcbnZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihkYXRhLCB7XHJcbiAgICBkZWJ1ZyA6IGZhbHNlXHJcbn0pO1xyXG5vcHRpb25zLnRpbGVtYXAuaW5pdEhhbmRsZXIgPSBpbml0SGFuZGxlcjtcclxuXHJcbmZ1bmN0aW9uIGluaXRIYW5kbGVyKHZhbCA9IDAsIHRpbGVtYXAgPSBudWxsLCBncmlkID0gbnVsbCl7XHJcbiAgICBsZXQgcG9zID0gR2V0R3JpZENlbnRlcih0aWxlbWFwLCBncmlkKTtcclxuICAgIGNvbnNvbGUubG9nKHBvcy54LCBwb3MueSk7XHJcbiAgICBEcmF3UmVjdChwb3MueCwgcG9zLnksIEdldEdyaWRXaWR0aCh0aWxlbWFwLmdyaWRtYXApLCBHZXRHcmlkSGVpZ2h0KHRpbGVtYXAuZ3JpZG1hcCkpO1xyXG59XHJcblxyXG5jbGFzcyBNeVNjZW5lIHtcclxuICAgIG9uU3RhcnQoKXtcclxuXHJcbiAgICB9XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG4oZnVuY3Rpb24gKCl7XHJcbiAgICBjb25zb2xlLmxvZyhvcHRpb25zKTtcclxuICAgIFN0YXJ0VGVzdChvcHRpb25zLCBuZXcgTXlTY2VuZSgpKTtcclxufSkoKSIsImltcG9ydCB7IGRyYXdJbWFnZSwgZHJhd1JlY3QsIGRyYXdMaW5lLCBkcmF3Q2lyY2xlIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZW5naW5lL2g1L3JlbmRlclwiO1xyXG5pbXBvcnQgeyBnZXRTcHJpdGVGcmFtZUJ5TmFtZSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9mcmFtZVwiO1xyXG5cclxuIC8qKlxyXG4gICog6I635Y+W57K+54G15binXHJcbiAgKiBUT0RPIOWPr+iDveS8muaUueaIkGlk5b2i5byPXHJcbiAgKi9cclxuIGZ1bmN0aW9uIEdldFNwcml0ZUZyYW1lKG5hbWUgPSBcIlwiKXtcclxuICAgIGlmKG5hbWUgPT0gXCJcIil7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ2V0U3ByaXRlRnJhbWVCeU5hbWUobmFtZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUT0RPIOWPr+iDveS8muaUueaIkHNwcml0ZUZyYW1lSWTlj4LmlbBcclxuICog5Lul5LiL55qEeCwgeSDpg73mmK/lsY/luZXlnZDmoIdcclxuICovXHJcbmZ1bmN0aW9uIERyYXdGcmFtZShzcHJpdGVGcmFtZSA9IG51bGwsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCB0ZXh0dXJlQXJlYSA9IHNwcml0ZUZyYW1lLnRleHR1cmVBcmVhO1xyXG4gICAgZHJhd0ltYWdlKHNwcml0ZUZyYW1lLmJpdG1hcERhdGEsXHJcbiAgICAgICAgdGV4dHVyZUFyZWEueCwgdGV4dHVyZUFyZWEueSwgdGV4dHVyZUFyZWEud2lkdGgsIHRleHR1cmVBcmVhLmhlaWdodCxcclxuICAgICAgICB4LCB5ICwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERyYXdSZWN0KHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGRyYXdSZWN0KHgsIHkgLCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gRHJhd0xpbmUoeDEgPSAwLCB5MSA9IDAsIHgyID0gMCwgeTIgPSAwKXtcclxuICAgIGRyYXdMaW5lKHgxLCB5MSwgeDIsIHkyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gRHJhd0NpcmNsZSh4ID0gMCwgeSA9IDAsIHJhZGl1cyA9IDApe1xyXG4gICAgZHJhd0NpcmNsZSh4LCB5LCByYWRpdXMpO1xyXG59XHJcblxyXG5leHBvcnR7R2V0U3ByaXRlRnJhbWUsIERyYXdGcmFtZSwgRHJhd1JlY3QsIERyYXdMaW5lLCBEcmF3Q2lyY2xlfSIsImltcG9ydCB7IGluaXRHYW1lIH0gZnJvbSBcIi4uL3dvcmxkL3Jlc1wiO1xyXG5pbXBvcnQgeyBydW5XaXRoU2NlbmUgfSBmcm9tIFwiLi4vc3lzdGVtL3J1blwiO1xyXG5cclxuLyoqXHJcbiAqIG9wdGlvbnMge1xyXG4gKiAgICAgIHRleHR1cmVzIDog5qC85byP6KeBTG9hZFJlc291cmNlKCnlhoVcclxuICogICAgICBzY3JlZW4gOiB7XHJcbiAqICAgICAgICAgIHdpZHRoIDogODAwLFxyXG4gKiAgICAgICAgICBoZWlnaHQgOiA4MDBcclxuICogICAgICB9LFxyXG4gKiAgICAgIGZwcyA6IDYwLFxyXG4gKiAgICAgIGRlYnVnIDogZmFsc2UsXHJcbiAqICAgICAgY2FtZXJhIDoge1xyXG4gKiAgICAgICAgICB4IDogMCxcclxuICogICAgICAgICAgeSA6IDBcclxuICogICAgICB9LFxyXG4gKiAgICAgIHRpbGVtYXAgOiDmoLzlvI/lj4LogIN0aWxlbWFw5LiA6IqCXHJcbiAqICAgICAga2V5SGFuZGxlciA6IGZ1bmN0aW9uKHR5cGUsIGtleUNvZGUpICAgdHlwZT0xID0gZG93biwgdHlwZT0yID0gdXBcclxuICogICAgICBjb2xsaWRlIDoge1xyXG4gKiAgICAgICAgICB1c2VCb3ggOiBmYWxzZSxcclxuICogICAgICAgICAgdXNlR3JvdXAgOiBmYWxzZSxcclxuICogICAgICAgICAgcGFpcnMgOiBbXHJcbiAqICAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICAgdGVhbTEgOiAxLFxyXG4gKiAgICAgICAgICAgICAgICAgIHRlYW0yIDogMlxyXG4gKiAgICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgICBdLFxyXG4gKiAgICAgICAgICBoYW5kbGVyIDogZnVuY3Rpb24oZHQsIGNvbGxpZGVyMSwgY29sbGlkZXIyKVxyXG4gKiAgICAgIH1cclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gU3RhcnQob3B0aW9ucyA9IG51bGwsIHNjZW5lID0gbnVsbCl7XHJcbiAgICBMb2FkUmVzb3VyY2Uob3B0aW9ucy50ZXh0dXJlcywgbnVsbCwgKCkgPT4ge1xyXG4gICAgICAgIGluaXRHYW1lKG9wdGlvbnMpO1xyXG4gICAgICAgIHJ1bldpdGhTY2VuZShzY2VuZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gU3RvcCgpe1xyXG4gICAgR2V0U2NlbmUoKS5vbkVuZCgpO1xyXG4gICAgR2V0U3lzdGVtcygpLmZvckVhY2goc3lzdGVtID0+IHtcclxuICAgICAgICBzeXN0ZW0ub25FbmQoKTtcclxuICAgIH0pO1xyXG4gICAgZW5naW5lLlN0b3AoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gU3RhcnRUZXN0KG9wdGlvbnMsIHNjZW5lID0gbnVsbCl7XHJcbiAgICBpbml0R2FtZShvcHRpb25zKTtcclxuICAgIHJ1bldpdGhTY2VuZShzY2VuZSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5Yqg6L296LWE5rqQ77yM5Yib5bu657K+54G15binXHJcbiAqIHRleHR1cmVzIDogW1xyXG4gKiAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICBpbWcgOiBcInJlcy9hLnBuZ1wiLFxyXG4gKiAgICAgICAgICAgICAgZnJhbWVzIDogW1xyXG4gKiAgICAgICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IFwid2FsazFcIlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlQXJlYSA6IHtcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHggOiAwLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgeSA6IDAsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA6IDAsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgOiAwXHJcbiAqICAgICAgICAgICAgICAgICAgICAgIH1cclxuICogICAgICAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgICAgICBdXHJcbiAqICAgICAgICAgIH1cclxuICogICAgICBdLFxyXG4gKi9cclxuZnVuY3Rpb24gTG9hZFJlc291cmNlKHRleHR1cmVzRGF0YSA9IG51bGwsIE9ubG9hZENhbGxiYWNrID0gbnVsbCwgT25Db21wbGV0ZUNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICAvL+WKoOi9veWbvuWDj+W5tuWIm+W7uuaYvuekuuW4p1xyXG4gICAgaWYoIXRleHR1cmVzRGF0YSB8fCB0ZXh0dXJlc0RhdGEubGVuZ3RoID09IDApe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBfY291bnQgPSAwO1xyXG4gICAgdGV4dHVyZXNEYXRhLmZvckVhY2godCA9PntcclxuICAgICAgICBsb2FkSW1nKHQuaW1nLCBiaXRtYXBEYXRhID0+IHtcclxuICAgICAgICAgICAgdC5mcmFtZXMuZm9yRWFjaChmcmFtZURhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlU3ByaXRlRnJhbWVXaXRoRGF0YShmcmFtZURhdGEubmFtZSwgYml0bWFwRGF0YSwgZnJhbWVEYXRhLnRleHR1cmVBcmVhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF9jb3VudCsrO1xyXG4gICAgICAgICAgICBpZihPbmxvYWRDYWxsYmFjayl7XHJcbiAgICAgICAgICAgICAgICBPbmxvYWRDYWxsYmFjayhfY291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRleHR1cmVzRGF0YS5sZW5ndGggPT0gX2NvdW50ICYmIE9uQ29tcGxldGVDYWxsYmFjayl7XHJcbiAgICAgICAgICAgICAgICBPbkNvbXBsZXRlQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7U3RhcnQsIFN0b3AsIFN0YXJ0VGVzdCwgTG9hZFJlc291cmNlfSJdLCJzb3VyY2VSb290IjoiIn0=