!function(n){var t={};function e(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var u in n)e.d(r,u,function(t){return n[t]}.bind(null,u));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)}([function(n){n.exports={screen:{width:800,height:800},fps:60,camera:{x:400,y:400},stage:{width:1800,height:1800}}},function(n,t,e){"use strict";e.r(t);var r=e(0);class u{constructor(n=0){this.entityId=n,this.id=n}}class l{onStart(){}onUpdate(n=0){}onEnd(){}}const i=2;class o{constructor(n=null,t=null,e=null){this.data=n,this.prep=t,this.next=e,this.id=0}}function c(n=null,t=0,e=!1){if(!n)return void console.error("link is null.");let r=n._map.get(t);return r?r.data:(e&&console.error("can't find keyId: ",t),null)}function s(n=null,t=null){if(!n||!t)return void console.error("error param: ",n,t,t.id);if(n._map.get(t.id))return void console.error("error keyId:%d is exist",t.id);let e=n.tail.prep,r=n.tail,u=new o(t,e,r);u.id=t.id,e.next=u,r.prep=u,n._map.set(t.id,u),n._size++}function a(n=null,t=0){n&&0!=t?n._curr.id!=t?function(n=null,t=0){let e=n._map.get(t);if(!e)return;n._map.delete(t);let r=e.prep,u=e.next;r.next=u,u.prep=r,n._size--}(n,t):n._delList.push(t):console.error("error param: ",n,t)}function f(n=null,t=null){if(n&&t){for(n._curr=n.head.next;n._curr!=n.tail&&!t(n._curr.data);)n._curr=node.next;for(;n._delList.length>0;)a(n,n._delList.pop())}}var d=new Link;class p extends l{onUpdate(n=0){f(d,t=>{!function(n=null,t=0){n.onUpdate(t)}(t,n),t.isEnd()&&function(n=null){n.state=i,n.onEnd()}(t)})}}var h=null;new Link;var x=new Link;class y{constructor(n=0,t=0){this.x=n,this.y=t}}function g(n=0,t=0){return new y(n,t)}function w(n=null,t=null){return g(n.x-t.x,n.y-t.y)}class v{constructor(n=0,t=0){this.x=n,this.y=t,this.distance=n*n+t*t}}function m(n=0,t=0){return new v(n,t)}class _ extends u{constructor(n=0,t=0,e=0){super(n),this.pos=g(t,e),this.vec=m()}}var b=new Link;function k(n=0){let t=c(b,n);return t||function(n=0){let t=new _(n);return s(b,t),t}(n)}function L(){return b}function M(){return L()}function P(n=null,t=0,e=0){n.center.x=t+n.offset.x,n.center.y=e+n.offset.y}function j(n=null){return g(n.center.x-I(n),n.center.y-O(n))}function I(n=null){return.5*n.width}function O(n=null){return.5*n.height}function S(n=null,t=null){return IsRectsCross(n.rect,t)}class U extends l{onUpdate(n=0){f(x,n=>{let t=function(n=0){return k(n).pos}(n.entityId);P(n.displayArea,t.x,t.y),function(n=null){let t=z(),e=n.displayArea;if(!S(t,e))return;let r=w(j(e),j(t.rect));DrawFrame(n.spriteFrame,r.x,r.y,GetRectWidth(e),GetRectHeight(e))}(n)})}}var E=null;class D extends l{onUpdate(n=0){f(M(),n=>{let t=n.vec,e=n.pos;e.x+=t.x,e.y+=t.y,t.x=0,t.y=0})}}var H=null;getEngine();(new Date).getTime();new Map;H||(H=new D),h||(h=new p),E||(E=new U);var R={ctx:null,canvas:null,fps:0,tick:0};var T=null;function z(){return T}class A{constructor(n=0,t=0,e=0){this.a=n,this.b=t,this.c=e}}class F{constructor(n=null,t=null){this.start=n,this.vec=t,this.end=g(n.x+t.x,n.y+t.y),this.formula=null}}function G(n=0,t=0,e=0,r=0){return C(n,t,function(n=0,t=0,e=0,r=0){return new m(e-n,r-t)}(n,t,e,r))}function C(n=0,t=0,e=null){if(0==function(n=null){return n.distance}(e))return null;let r=new F(g(n,t),e),u=function(n=null){let t=n.end.y,e=n.start.y,r=n.end.x,u=n.start.x;return new A(t-e,u-r,r*e-u*t)}(r);return r.formula=u,r}function W(n=null,t=null){return function(n=null,t=null){let e=n.a,r=n.b,u=n.c,l=t.a,i=t.b,o=t.c,c=e*i-l*r;return 0==c?null:g((o*r-u*i)/c,(u*l-o*e)/c)}(n.formula,t.formula)}var q=R;Math.PI;new Map;function B(n=0,t=0,e=0){!function(n=0,t=0,e=0){let r=q.ctx;r.beginPath(),r.arc(n,t,e,0,2*Math.PI),r.stroke()}(n,t,e)}var J,K,N,Q={debug:!1,fps:r.fps,screen:{width:r.screen.width,height:r.screen.height},stage:{width:r.stage.width,height:r.stage.height},camera:{x:r.camera.x,y:r.camera.y},mousedownHandler:function(n=0,t=0){J=g(n,t)},mouseupHandler:function(n=0,t=0){if(!J)return;K?N=G(J.x,J.y,n,t):K=G(J.x,J.y,n,t);if(DrawLine(J.x,J.y,n,t),K&&N){let n=W(K,N);console.log(n),B(n.x,n.y,10)}J=null}};class V{onStart(){}onUpdate(n=0){}}console.log(Q),(void 0)(Q,new V)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3ZpZXcvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9jb21wb25lbnQvcG9zL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9wb3MvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L2NhbWVyYS91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2RpcmVjdG9yL3N5c3RlbS9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vbW92ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZW5naW5lL2g1L3Byb2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZW5naW5lL2g1L21vZGVsLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivd29ybGQvcmVzLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvZm9ybXVsYS9hYmMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9saW5lLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2VuZ2luZS9oNS9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9mcmFtZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2RpcmVjdG9yL3V0aWxzL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkNvbXBvbmVudCIsIltvYmplY3QgT2JqZWN0XSIsImVudGl0eUlkIiwidGhpcyIsImlkIiwiU3lzdGVtIiwiZHQiLCJBQ1RJT05fU1RBVEVfRU5EIiwiTGlua05vZGUiLCJkYXRhIiwicHJlcCIsIm5leHQiLCJHZXRMaW5rRGF0YSIsImxpbmsiLCJrZXlJZCIsInJlcXVpcmVkIiwiY29uc29sZSIsImVycm9yIiwibm9kZSIsIl9tYXAiLCJQdXNoVG9MaW5rIiwidGFpbCIsInNldCIsIl9zaXplIiwiUmVtb3ZlQnlLZXlJZCIsIl9jdXJyIiwiZGVsZXRlIiwicmVtb3ZlIiwiX2RlbExpc3QiLCJwdXNoIiwiTGlua0l0ZXJhdG9yIiwiY2FsbGJhY2siLCJoZWFkIiwibGVuZ3RoIiwicG9wIiwiYWN0aW9uTGlzdCIsIkxpbmsiLCJhY3Rpb25fQWN0aW9uU3lzdGVtIiwiYWN0aW9uIiwib25VcGRhdGUiLCJhY3Rpb25VcGRhdGUiLCJpc0VuZCIsInN0YXRlIiwib25FbmQiLCJhY3Rpb25FbmQiLCJzeXMiLCJkaXNwbGF5TGlzdCIsIlBvcyIsIngiLCJ5IiwiTmV3UG9zIiwicG9pbnRfVG9Mb2NhdGVQb3MiLCJ0YXJnZXRQb3MiLCJyZWZlclBvcyIsIlZlYyIsImRpc3RhbmNlIiwicG9pbnRfTmV3VmVjIiwiY29tcG9uZW50X1Bvc0NvbXBvbmVudCIsInN1cGVyIiwicG9zIiwidmVjIiwicG9zQ29tcyIsImdldFBvc0NvbXBvbmVudCIsImNvbSIsImNyZWF0ZVBvc0NvbXBvbmVudCIsImdldFBvc0NvbXBvbmVudExpc3QiLCJHZXRQb3NDb21wb25lbnRMaXN0IiwiVXBkYXRlUmVjdFBvc0J5VW5pdCIsInJlY3QiLCJ1bml0UG9zWCIsInVuaXRQb3NZIiwiY2VudGVyIiwib2Zmc2V0IiwiR2V0UmVjdFN0YXJ0UG9zIiwiR2V0UmVjdEhhbGZXaWR0aCIsIkdldFJlY3RIYWxmSGVpZ2h0Iiwid2lkdGgiLCJoZWlnaHQiLCJJc0luQ2FtZXJhIiwiY2FtZXJhIiwiSXNSZWN0c0Nyb3NzIiwicmVuZGVyX1JlbmRlclVwZGF0ZVN5c3RlbSIsImRpc3BsYXlUdXBsZSIsIkdldFBvcyIsImRpc3BsYXlBcmVhIiwiR2V0Q2FtZXJhIiwic2NyZWVuUG9zIiwiRHJhd0ZyYW1lIiwic3ByaXRlRnJhbWUiLCJHZXRSZWN0V2lkdGgiLCJHZXRSZWN0SGVpZ2h0IiwiZHJhd0ZyYW1lSW5DYW1lcmEiLCJyZW5kZXJTeXMiLCJtb3ZlX1Bvc1VwZGF0ZVN5c3RlbSIsIm1vdmVDb20iLCJtb3ZlX3N5cyIsImdldEVuZ2luZSIsIkRhdGUiLCJnZXRUaW1lIiwiTWFwIiwibW9kZWxfZW5naW5lIiwiY3R4IiwiY2FudmFzIiwiZnBzIiwidGljayIsInJlc19jYW1lcmEiLCJGb3JtdWxhQyIsImEiLCJiIiwibGluZV9MaW5lIiwic3RhcnQiLCJlbmQiLCJmb3JtdWxhIiwiTmV3TGluZVdpdGhQb3MiLCJ4MSIsInkxIiwieDIiLCJ5MiIsIm5ld0xpbmUiLCJOZXdWZWNXaXRoUG9zIiwiR2V0RGlzdGFuY2UiLCJsaW5lIiwibmV3Rm9ybXVsYUMiLCJJbnRlclNlY3Rpb25Qb3MiLCJsaW5lMSIsImxpbmUyIiwiZm9ybXVsYTEiLCJmb3JtdWxhMiIsImExIiwiYjEiLCJjMSIsImEyIiwiYjIiLCJjMiIsImludGVyU2VjdGlvblBvcyIsInJlbmRlcl9lbmdpbmUiLCJNYXRoIiwiUEkiLCJEcmF3Q2lyY2xlIiwicmFkaXVzIiwiYmVnaW5QYXRoIiwiYXJjIiwic3Ryb2tlIiwiZHJhd0NpcmNsZSIsIm1haW5fc3RhcnRQb3MiLCJtYWluX2xpbmUxIiwibWFpbl9saW5lMiIsIm1haW5fb3B0aW9ucyIsImRlYnVnIiwic2NyZWVuIiwic3RhZ2UiLCJtb3VzZWRvd25IYW5kbGVyIiwibW91c2V1cEhhbmRsZXIiLCJEcmF3TGluZSIsImxvZyIsIk15U2NlbmUiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXpCLEVBQUE2QixFQUFBLFNBQUExQixHQUNBLElBQUFTLEVBQUFULEtBQUFxQixXQUNBLFdBQTJCLE9BQUFyQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REL0IsRUFBQWtDLEVBQUEsR0FJQWxDLElBQUFtQyxFQUFBLHNLQzlEQSxNQUFBQyxFQUNBQyxZQUFBQyxFQUFBLEdBQ0FDLEtBQUFELFdBQ0FDLEtBQUFDLEdBQUFGLEdBaUJBLE1BQUFHLEVBQ0FKLFdBQ0FBLFNBQUFLLEVBQUEsSUFDQUwsVUN6Q0EsTUFDQU0sRUFBQSxFQ0hBLE1BQUFDLEVBQ0FQLFlBQUFRLEVBQUEsS0FBQUMsRUFBQSxLQUFBQyxFQUFBLE1BQ0FSLEtBQUFNLE9BQ0FOLEtBQUFPLE9BQ0FQLEtBQUFRLE9BQ0FSLEtBQUFDLEdBQUEsR0F5QkEsU0FBQVEsRUFBQUMsRUFBQSxLQUFBQyxFQUFBLEVBQUFDLEdBQUEsR0FDQSxJQUFBRixFQUVBLFlBREFHLFFBQUFDLE1BQUEsaUJBR0EsSUFBQUMsRUFBQUwsRUFBQU0sS0FBQXRDLElBQUFpQyxHQUNBLE9BQUFJLEVBQ0FBLEVBQUFULE1BRUFNLEdBQ0FDLFFBQUFDLE1BQUEscUJBQUFILEdBRUEsTUFlQSxTQUFBTSxFQUFBUCxFQUFBLEtBQUFKLEVBQUEsTUFDQSxJQUFBSSxJQUFBSixFQUdBLFlBREFPLFFBQUFDLE1BQUEsZ0JBQUFKLEVBQUFKLElBQUFMLElBSUEsR0FBQVMsRUFBQU0sS0FBQXRDLElBQUE0QixFQUFBTCxJQUVBLFlBREFZLFFBQUFDLE1BQUEsMEJBQUFSLEVBQUFMLElBR0EsSUFBQU4sRUFBQWUsRUFBQVEsS0FBQVgsS0FDQWpCLEVBQUFvQixFQUFBUSxLQUNBSCxFQUFBLElBQUFWLEVBQUFDLEVBQUFYLEVBQUFMLEdBQ0F5QixFQUFBZCxHQUFBSyxFQUFBTCxHQUNBTixFQUFBYSxLQUFBTyxFQUNBekIsRUFBQWlCLEtBQUFRLEVBQ0FMLEVBQUFNLEtBQUFHLElBQUFiLEVBQUFMLEdBQUFjLEdBQ0FMLEVBQUFVLFFBT0EsU0FBQUMsRUFBQVgsRUFBQSxLQUFBQyxFQUFBLEdBQ0FELEdBQUEsR0FBQUMsRUFLQUQsRUFBQVksTUFBQXJCLElBQUFVLEVBT0EsU0FBQUQsRUFBQSxLQUFBQyxFQUFBLEdBQ0EsSUFBQUksRUFBQUwsRUFBQU0sS0FBQXRDLElBQUFpQyxHQUNBLElBQUFJLEVBRUEsT0FFQUwsRUFBQU0sS0FBQU8sT0FBQVosR0FDQSxJQUFBaEIsRUFBQW9CLEVBQUFSLEtBQ0FqQixFQUFBeUIsRUFBQVAsS0FDQWIsRUFBQWEsS0FBQWxCLEVBQ0FBLEVBQUFpQixLQUFBWixFQUNBZSxFQUFBVSxRQWRBSSxDQUFBZCxFQUFBQyxHQUhBRCxFQUFBZSxTQUFBQyxLQUFBZixHQUpBRSxRQUFBQyxNQUFBLGdCQUFBSixFQUFBQyxHQTJCQSxTQUFBZ0IsRUFBQWpCLEVBQUEsS0FBQWtCLEVBQUEsTUFDQSxHQUFBbEIsR0FBQWtCLEVBQUEsQ0FLQSxJQURBbEIsRUFBQVksTUFBQVosRUFBQW1CLEtBQUFyQixLQUNBRSxFQUFBWSxPQUFBWixFQUFBUSxPQUNBVSxFQUFBbEIsRUFBQVksTUFBQWhCLE9BR0FJLEVBQUFZLE1BQUFQLEtBQUFQLEtBRUEsS0FBQUUsRUFBQWUsU0FBQUssT0FBQSxHQUNBVCxFQUFBWCxJQUFBZSxTQUFBTSxRQ3pIQSxJQUFBQyxFQUFBLElBQUFDLEtDSUEsTUFBTUMsVUFBcUJoQyxFQUMzQkosU0FBQUssRUFBQSxHQUNRd0IsRURKUkssRUNJd0NHLEtIMEJ4QyxTQUFBQSxFQUFBLEtBQUFoQyxFQUFBLEdBQ0FnQyxFQUFBQyxTQUFBakMsR0cxQllrQyxDQUFZRixFQUFBaEMsR0FDeEJnQyxFQUFBRyxTSDRCQSxTQUFBSCxFQUFBLE1BQ0FBLEVBQUFJLE1BQUFuQyxFQUNBK0IsRUFBQUssUUc3QmdCQyxDQUFTTixNQU16QixJQUFBTyxFQUFBLEtDSkEsSUFBQVQsS0E4QkEsSUFBQVUsRUFBQSxJQUFBVixLQzFDQSxNQUFBVyxFQUNBOUMsWUFBQStDLEVBQUEsRUFBQUMsRUFBQSxHQUNBOUMsS0FBQTZDLElBQ0E3QyxLQUFBOEMsS0FJQSxTQUFBQyxFQUFBRixFQUFBLEVBQUFDLEVBQUEsR0FDQSxXQUFBRixFQUFBQyxFQUFBQyxHQVdBLFNBQVNFLEVBQVdDLEVBQUEsS0FBQUMsRUFBQSxNQUNwQixPQUFBSCxFQUNBRSxFQUFBSixFQUFBSyxFQUFBTCxFQUNBSSxFQUFBSCxFQUFBSSxFQUFBSixHQWdCQSxNQUFBSyxFQUNBckQsWUFBQStDLEVBQUEsRUFBQUMsRUFBQSxHQUNBOUMsS0FBQTZDLElBQ0E3QyxLQUFBOEMsSUFDQTlDLEtBQUFvRCxTQUFBUCxJQUFBQyxLQUlBLFNBQVNPLEVBQU1SLEVBQUEsRUFBQUMsRUFBQSxHQUNmLFdBQUFLLEVBQUFOLEVBQUFDLEdDM0NBLE1BQU1RLFVBQXFCekQsRUFDM0JDLFlBQUFDLEVBQUEsRUFBQThDLEVBQUEsRUFBQUMsRUFBQSxHQUNBUyxNQUFBeEQsR0FDQUMsS0FBQXdELElBQW1CVCxFQUFNRixFQUFBQyxHQUN6QjlDLEtBQUF5RCxJQUFtQkosS0FJbkIsSUFBQUssRUFBQSxJQUFBekIsS0FPQSxTQUFBMEIsRUFBQTVELEVBQUEsR0FDQSxJQUFBNkQsRUFBY25ELEVBQVdpRCxFQUFBM0QsR0FDekIsT0FBQTZELEdBUkEsU0FBQTdELEVBQUEsR0FDQSxJQUFBNkQsRUFBQSxJQUFrQk4sRUFBWXZELEdBRTlCLE9BRElrQixFQUFVeUMsRUFBQUUsR0FDZEEsRUFLQUMsQ0FBQTlELEdBR0EsU0FBQStELElBQ0EsT0FBQUosRUNBQSxTQUFBSyxJQUNBLE9BQVdELElDb0JYLFNBQUFFLEVBQUFDLEVBQUEsS0FBQUMsRUFBQSxFQUFBQyxFQUFBLEdBQ0FGLEVBQUFHLE9BQUF2QixFQUFBcUIsRUFBQUQsRUFBQUksT0FBQXhCLEVBQ0FvQixFQUFBRyxPQUFBdEIsRUFBQXFCLEVBQUFGLEVBQUFJLE9BQUF2QixFQXFCQSxTQUFBd0IsRUFBQUwsRUFBQSxNQUNBLE9BQVdsQixFQUNYa0IsRUFBQUcsT0FBQXZCLEVBQUEwQixFQUFBTixHQUNBQSxFQUFBRyxPQUFBdEIsRUFBQTBCLEVBQUFQLElBZ0JBLFNBQUFNLEVBQUFOLEVBQUEsTUFDQSxTQUFBQSxFQUFBUSxNQUVBLFNBQUFELEVBQUFQLEVBQUEsTUFDQSxTQUFBQSxFQUFBUyxPQ3RFQSxTQUFBQyxFQUFBQyxFQUFBLEtBQUFYLEVBQUEsTUFDQSxPQUFBWSxhQUFBRCxFQUFBWCxRQ1RBLE1BQU1hLFVBQTJCNUUsRUFDakNKLFNBQUFLLEVBQUEsR0FFUXdCLEVOMkJSZ0IsRU0zQm1Db0MsSUFDbkMsSUFBQXZCLEVIWEEsU0FBQXpELEVBQUEsR0FDQSxPQUFXNEQsRUFBZTVELEdBQUF5RCxJR1VKd0IsQ0FBTUQsRUFBQWhGLFVBQ2hCaUUsRUFBbUJlLEVBQUFFLFlBQUF6QixFQUFBWCxFQUFBVyxFQUFBVixHQXVDL0IsU0FBQWlDLEVBQUEsTUFDQSxJQUFBSCxFQUFpQk0sSUFDakJELEVBQUFGLEVBQUFFLFlBQ0EsSUFBUU4sRUFBVUMsRUFBQUssR0FDbEIsT0FHQSxJQUFBRSxFQUFvQm5DLEVBQ1pzQixFQUFlVyxHQUNmWCxFQUFlTSxFQUFBWCxPQUN2Qm1CLFVBQUFMLEVBQUFNLFlBQ0FGLEVBQUF0QyxFQUFBc0MsRUFBQXJDLEVBQ0F3QyxhQUFBTCxHQUFBTSxjQUFBTixJQWxEQU8sQ0FBQVQsTUFLQSxJQUFBVSxFQUFBLEtDbkJBLE1BQU1DLFVBQXdCeEYsRUFDOUJKLFNBQUFLLEVBQUEsR0FDUXdCLEVBQWFvQyxJQUFtQjRCLElBQ3hDLElBQUFsQyxFQUFBa0MsRUFBQWxDLElBQ0FELEVBQUFtQyxFQUFBbkMsSUFDQUEsRUFBQVgsR0FBQVksRUFBQVosRUFDQVcsRUFBQVYsR0FBQVcsRUFBQVgsRUFDQVcsRUFBQVosRUFBQSxFQUNBWSxFQUFBWCxFQUFBLEtBS0EsSUFBSThDLEVBQUcsS0NyQlBDLGFBa0NBLElBQUFDLE1BQUFDLFVBbUJBLElBQUFDLElEOUJRSixJQUNBQSxFQUFHLElBQU9GLEdSSmxCaEQsSUFDQUEsRUFBQSxJQUFrQlIsR09RbEJ1RCxJQUNBQSxFQUFBLElBQXdCWCxHR1p4QixJQUFJbUIsRUFBTyxDQUNYQyxJQUFBLEtBQ0FDLE9BQUEsS0FDQUMsSUFBQSxFQUNBQyxLQUFBLEdDdUJBLElBQUlDLEVBQU0sS0FNVixTQUFBcEIsSUFDQSxPQUFXb0IsRUMzQ1gsTUFBQUMsRUFDQXpHLFlBQUEwRyxFQUFBLEVBQUFDLEVBQUEsRUFBQXZJLEVBQUEsR0FDQThCLEtBQUF3RyxJQUNBeEcsS0FBQXlHLElBQ0F6RyxLQUFBOUIsS0NOQSxNQUFNd0ksRUFDTjVHLFlBQUE2RyxFQUFBLEtBQUFsRCxFQUFBLE1BQ0F6RCxLQUFBMkcsUUFDQTNHLEtBQUF5RCxNQUNBekQsS0FBQTRHLElBQW1CN0QsRUFBTTRELEVBQUE5RCxFQUFBWSxFQUFBWixFQUFBOEQsRUFBQTdELEVBQUFXLEVBQUFYLEdBQ3pCOUMsS0FBQTZHLFFBQUEsTUFTQSxTQUFBQyxFQUFBQyxFQUFBLEVBQUFDLEVBQUEsRUFBQUMsRUFBQSxFQUFBQyxFQUFBLEdBRUEsT0FBQUMsRUFBQUosRUFBQUMsRVg2QkEsU0FBQUQsRUFBQSxFQUFBQyxFQUFBLEVBQUFDLEVBQUEsRUFBQUMsRUFBQSxHQUNBLFdBQWU3RCxFQUFNNEQsRUFBQUYsRUFBQUcsRUFBQUYsR1cvQlBJLENBQWFMLEVBQUFDLEVBQUFDLEVBQUFDLElBSTNCLFNBQUFDLEVBQUF0RSxFQUFBLEVBQUFDLEVBQUEsRUFBQVcsRUFBQSxNQUNBLEdBQWtCLEdYa0NsQixTQUFBQSxFQUFBLE1BQ0EsT0FBQUEsRUFBQUwsU1duQ09pRSxDQUFXNUQsR0FDbEIsWUFFQSxJQUFBNkQsRUFBQSxJQUFtQlosRUFBSzNELEVBQU1GLEVBQUFDLEdBQUFXLEdBQzlCb0QsRURkQSxTQUFBUyxFQUFBLE1BQ0EsSUFBQUosRUFBQUksRUFBQVYsSUFBQTlELEVBQ0FrRSxFQUFBTSxFQUFBWCxNQUFBN0QsRUFDQW1FLEVBQUFLLEVBQUFWLElBQUEvRCxFQUNBa0UsRUFBQU8sRUFBQVgsTUFBQTlELEVBS0EsV0FBQTBELEVBSEFXLEVBQUFGLEVBQ0FELEVBQUFFLEVBQ0FBLEVBQUFELEVBQUFELEVBQUFHLEdDTWtCSyxDQUFXRCxHQUU3QixPQURBQSxFQUFBVCxVQUNBUyxFQ3pCQSxTQUFBRSxFQUFBQyxFQUFBLEtBQUFDLEVBQUEsTUFDQSxPRndCQSxTQUFBQyxFQUFBLEtBQUFDLEVBQUEsTUFDQSxJQUFBQyxFQUFBRixFQUFBbkIsRUFDQXNCLEVBQUFILEVBQUFsQixFQUNBc0IsRUFBQUosRUFBQXpKLEVBQ0E4SixFQUFBSixFQUFBcEIsRUFDQXlCLEVBQUFMLEVBQUFuQixFQUNBeUIsRUFBQU4sRUFBQTFKLEVBRUFELEVBQUE0SixFQUFBSSxFQUFBRCxFQUFBRixFQUNBLFVBQUE3SixFQUVBLEtBSVc4RSxHQUZYbUYsRUFBQUosRUFBQUMsRUFBQUUsR0FBQWhLLEdBQ0E4SixFQUFBQyxFQUFBRSxFQUFBTCxHQUFBNUosR0V0Q1drSyxDQUFlVixFQUFBWixRQUFBYSxFQUFBYixTQ1IxQixJQUFJdUIsRUx5Qk9uQyxFS2JYb0MsS0FBQUMsR0NnQkEsSUFBQXRDLElDR0EsU0FBQXVDLEVBQUExRixFQUFBLEVBQUFDLEVBQUEsRUFBQTBGLEVBQUEsSUZjQSxTQUFBM0YsRUFBQSxFQUFBQyxFQUFBLEVBQUEwRixFQUFBLEdBQ0EsSUFBQXRDLEVBQWNrQyxFQUFPbEMsSUFDckJBLEVBQUF1QyxZQUNBdkMsRUFBQXdDLElBQUE3RixFQUFBQyxFQUFBMEYsRUFBQSxJQUFBSCxLQUFBQyxJQUNBcEMsRUFBQXlDLFNFakJJQyxDQUFVL0YsRUFBQUMsRUFBQTBGLEdDckJkLElBbUJJSyxFQUNBQyxFQUNBQyxFQXJCQUMsRUFBTyxDQUNYQyxPQUFBLEVBQ0E3QyxJQUFVOUYsRUFBSThGLElBQ2Q4QyxPQUFBLENBQ0F6RSxNQUFnQm5FLEVBQUk0SSxPQUFBekUsTUFDcEJDLE9BQWlCcEUsRUFBSTRJLE9BQUF4RSxRQUVyQnlFLE1BQUEsQ0FDQTFFLE1BQWdCbkUsRUFBSTZJLE1BQUExRSxNQUNwQkMsT0FBaUJwRSxFQUFJNkksTUFBQXpFLFFBRXJCRSxPQUFBLENBQ0EvQixFQUFZdkMsRUFBSXNFLE9BQUEvQixFQUNoQkMsRUFBWXhDLEVBQUlzRSxPQUFBOUIsR0FFaEJzRyxpQkFRQSxTQUFBdkcsRUFBQSxFQUFBQyxFQUFBLEdBQ0krRixFQUFXOUYsRUFBTUYsRUFBQUMsSUFSckJ1RyxlQVVBLFNBQUF4RyxFQUFBLEVBQUFDLEVBQUEsR0FDQSxJQUFRK0YsRUFDUixPQUVRQyxFQUdBQyxFQUFRakMsRUFBZStCLEVBQVFoRyxFQUFJZ0csRUFBUS9GLEVBQUFELEVBQUFDLEdBRjNDZ0csRUFBUWhDLEVBQWUrQixFQUFRaEcsRUFBSWdHLEVBQVEvRixFQUFBRCxFQUFBQyxHQUtuRCxHQURBd0csU0FBYVQsRUFBUWhHLEVBQUlnRyxFQUFRL0YsRUFBQUQsRUFBQUMsR0FDMUJnRyxHQUFTQyxFQUFLLENBQ3JCLElBQUF2RixFQUFrQmdFLEVBQWdCc0IsRUFBT0MsR0FDekNsSSxRQUFBMEksSUFBQS9GLEdBQ1ErRSxFQUFVL0UsRUFBQVgsRUFBQVcsRUFBQVYsRUFBQSxJQUVkK0YsRUFBUSxPQUdaLE1BQUFXLEVBQ0ExSixXQUdBQSxTQUFBSyxFQUFBLEtBTUFVLFFBQUEwSSxJQUFnQlAsU0FDWlMsR0FBY1QsRUFBTyxJQUFBUSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJcclxuLyoqXHJcbiogICBUaGUgQmFzZSBTdHJ1Y3RcclxuKlx05bC9566h5oiR5Lus5Y+q6ZyA6KaBTmV3RW50aXR5SWQoKe+8jOS9huaYr+aJgOaciemcgOimgWlk55qE57G76YO96KaB57un5om/5q2k57G7XHJcbiovXHJcbmNsYXNzIEVudGl0eSB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmlkID0gTmV3RW50aXR5SWQoKTtcclxuXHR9XHJcbn1cclxuXHJcbnZhciBpZCA9IDE7XHJcbmZ1bmN0aW9uIE5ld0VudGl0eUlkKCl7XHJcblx0cmV0dXJuIGlkKys7XHJcbn1cclxuXHJcbi8qKlxyXG4qXHRUaGUgYmFzZSBDb21wb25lbnRcclxuKlx05q+P5LiqZW50aXR55a+55q+P56eN57uE5Lu25Y+q6IO95oyB5pyJ5LiA5LiqXHJcbiovXHJcbmNsYXNzIENvbXBvbmVudCB7XHJcblx0Y29uc3RydWN0b3IoZW50aXR5SWQgPSAwKSB7XHJcblx0XHR0aGlzLmVudGl0eUlkID0gZW50aXR5SWQ7XHJcblx0XHR0aGlzLmlkID0gZW50aXR5SWQ7XHRcdFx0Ly/nu5lsaW5r5L2/55SoXHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICog5Z+656GA5YWD5Lu2XHJcbiAqL1xyXG5jbGFzcyBUdXBsZSB7XHJcblx0Y29uc3RydWN0b3IocHJpb3JpdHkgPSAwKXtcclxuXHRcdHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcdC8v57uZbGlua+S9v+eUqFxyXG5cdFx0dGhpcy5pZCA9IE5ld0VudGl0eUlkKCk7XHQvL+e7mWxpbmvkvb/nlKhcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4qXHRUaGUgYmFzZSBTeXN0ZW1cclxuKi9cclxuY2xhc3MgU3lzdGVtIHtcclxuICAgIG9uU3RhcnQoKXt9XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe31cclxuICAgIG9uRW5kKCl7fVxyXG59XHJcblxyXG5leHBvcnQge0VudGl0eSwgQ29tcG9uZW50LCBUdXBsZSwgU3lzdGVtfSIsImltcG9ydCB7IFR1cGxlIH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiXHJcblxyXG5jb25zdCBBQ1RJT05fU1RBVEVfUlVOTklORyA9IDE7XHJcbmNvbnN0IEFDVElPTl9TVEFURV9FTkQgPSAyO1xyXG5cclxuLyoqXHJcbiogICBhY3Rpb27mqKHlnZfnmoTorr7orqHnkIblv7XmmK/vvJpcclxuKiAgICAgICDnu5nnrZbliJLkurrlkZjmk43kvZznmoTliqjmgIHphY3nva7vvIznlLFqc29u6amx5Yqo77yIZGF0YS1kcml2ZW7vvInvvIzlho3nlLHohJrmnKzns7vnu5/nlJ/miJDkuLrpnZnmgIHku6PnoIFcclxuKiAgIOebruWJjeWFiOeUqOemu+aVo+mFjee9ruS7o+abv1xyXG5cclxuKiAgIOeUn+WRveWRqOacn+euoeeQhlxyXG4gICAgICAgIG9uU3RhcnQgLT4g5Yid5aeL5YyW77yM55SxdXRpbHMuUnVuQWN0aW9u6Kem5Y+RXHJcbiAgICAgICAgb25VcGRhdGUgLT4g55Sxc3lzdGVt5Li75rWB56iL6LCD55So77yM5Y+q5omn6KGM5Li76YC76L6R77yM5LiN6ZyA6KaB5Yik5pat57uI5q2i5p2h5Lu2XHJcbiAgICAgICAgaXNFbmQ6IOeUsXN5c3RlbeWcqOaJp+ihjG9uVXBkYXRl5ZCO6K6/6Zeu77yM6L+U5ZueYm9vbO+8jOWGs+WumuaYr+WQpui+vuWIsOe7iOatouadoeS7tuS6hu+8jOi/lOWbnnRydWXliJnooajnpLrlj6/ku6Xnu4jmraLmraRhY3Rpb25cclxuICAgICAgICBvbkVuZDog5Zyoc3lzdGVt6K+35rGCaXNFbmQ9dHJ1ZeWQjuiwg+eUqO+8jOeUqOS6juaUtuWwvu+8jOWmgui1hOa6kOWbnuaUtlxyXG4gICAgICAgIG9uU3RvcDog55SxdXRpbHMuU3RvcEFjdGlvbuinpuWPke+8jOW8uuWItuS4reaWre+8jOS4jei1sGlzRW5k5rWB56iL77yM6buY6K6k6LCD55Sob25FbmTvvIzlm6DmraTmoLnmja7mg4XlhrXlj6/og73pnIDopoHpop3lpJblpITnkIZcclxuKi9cclxuY2xhc3MgQWN0aW9uIGV4dGVuZHMgVHVwbGUge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXR5SWQgPSAwLCBwcmlvcml0eSA9IDApe1xyXG4gICAgICAgIHN1cGVyKHByaW9yaXR5KTtcclxuICAgICAgICB0aGlzLmVudGl0eUlkID0gZW50aXR5SWQ7ICAgLy/miYDlsZ7ogIVcclxuICAgICAgICB0aGlzLnN0YXRlID0gQUNUSU9OX1NUQVRFX0VORDtcclxuICAgIH1cclxuICAgIG9uU3RhcnQoKXt9XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe31cclxuICAgIGlzRW5kKCl7ICAgIHJldHVybiBmYWxzZTsgICAgfVxyXG4gICAgb25FbmQoKXt9XHJcbiAgICBvblN0b3AoKXsgICB0aGlzLm9uRW5kKCk7ICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYWN0aW9uU3RhcnQoYWN0aW9uID0gbnVsbCl7XHJcbiAgICBhY3Rpb24uc3RhdGUgPSBBQ1RJT05fU1RBVEVfUlVOTklORztcclxuICAgIGFjdGlvbi5vblN0YXJ0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGlvblVwZGF0ZShhY3Rpb24gPSBudWxsLCBkdCA9IDApe1xyXG4gICAgYWN0aW9uLm9uVXBkYXRlKGR0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aW9uRW5kKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgYWN0aW9uLnN0YXRlID0gQUNUSU9OX1NUQVRFX0VORDtcclxuICAgIGFjdGlvbi5vbkVuZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3Rpb25TdG9wKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgYWN0aW9uLnN0YXRlID0gQUNUSU9OX1NUQVRFX0VORDtcclxuICAgIGFjdGlvbi5vblN0b3AoKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzU3RhcnQoYWN0aW9uID0gbnVsbCl7XHJcbiAgICByZXR1cm4gYWN0aW9uLnN0YXRlID09IEFDVElPTl9TVEFURV9SVU5OSU5HO1xyXG59XHJcbmZ1bmN0aW9uIGlzU3RvcChhY3Rpb24gPSBudWxsKXtcclxuICAgIHJldHVybiBhY3Rpb24uc3RhdGUgPT0gQUNUSU9OX1NUQVRFX0VORDtcclxufVxyXG5cclxuZXhwb3J0IHtBY3Rpb24sIGFjdGlvblN0YXJ0LCBhY3Rpb25VcGRhdGUsIGFjdGlvbkVuZCwgYWN0aW9uU3RvcCwgaXNTdGFydCwgaXNTdG9wfSIsImNsYXNzIExpbmtOb2RlIHtcclxuXHRjb25zdHJ1Y3RvcihkYXRhID0gbnVsbCwgcHJlcCA9IG51bGwsIG5leHQgPSBudWxsKSB7XHJcblx0XHR0aGlzLmRhdGEgPSBkYXRhO1xyXG5cdFx0dGhpcy5wcmVwID0gcHJlcDtcclxuICAgICAgICB0aGlzLm5leHQgPSBuZXh0O1xyXG4gICAgICAgIHRoaXMuaWQgPSAwO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgTGluayB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmhlYWQgPSBuZXcgTGlua05vZGUoKTtcdFx0Ly9lbXB0eSBkYXRhIG5vZGVcclxuXHRcdHRoaXMudGFpbCA9IG5ldyBMaW5rTm9kZSgpO1xyXG5cdFx0dGhpcy5oZWFkLm5leHQgPSB0aGlzLnRhaWw7XHJcblx0XHR0aGlzLnRhaWwucHJlcCA9IHRoaXMuaGVhZDtcclxuXHRcdHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcclxuXHRcdHRoaXMuX3NpemUgPSAwO1xyXG4gICAgICAgIHRoaXMuX2RlbExpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLl9jdXJyID0gdGhpcy5oZWFkO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3TGluaygpe1xyXG4gICAgcmV0dXJuIG5ldyBMaW5rKCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog6I635Y+WXHJcbiAqL1xyXG5mdW5jdGlvbiBHZXRMaW5rRGF0YShsaW5rID0gbnVsbCwga2V5SWQgPSAwLCByZXF1aXJlZCA9IGZhbHNlKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImxpbmsgaXMgbnVsbC5cIik7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsuX21hcC5nZXQoa2V5SWQpO1xyXG4gICAgaWYobm9kZSl7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YTtcclxuICAgIH1cclxuICAgIGlmKHJlcXVpcmVkKXtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiY2FuJ3QgZmluZCBrZXlJZDogXCIsIGtleUlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRMaW5rU2l6ZShsaW5rID0gbnVsbCl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHJldHVybiBsaW5rLl9zaXplO1xyXG59XHJcblxyXG4vKipcclxuICog5re75YqgXHJcbiAqIGRhdGHlv4XpobvmmK9lbnRpdHnmiJZjb21wb25lbnRcclxuICovXHJcbmZ1bmN0aW9uIFB1c2hUb0xpbmsobGluayA9IG51bGwsIGRhdGEgPSBudWxsKSB7XHJcbiAgICBpZighbGluayB8fCAhZGF0YSl7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvciBwYXJhbTogXCIsIGxpbmssIGRhdGEsIGRhdGEuaWQpO1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgLy/kuI3og73ph43lpI3mt7vliqBcclxuICAgIGlmKGxpbmsuX21hcC5nZXQoZGF0YS5pZCkpe1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvciBrZXlJZDolZCBpcyBleGlzdFwiLCBkYXRhLmlkKTtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBwID0gbGluay50YWlsLnByZXA7XHJcbiAgICBsZXQgbiA9IGxpbmsudGFpbDtcclxuICAgIGxldCBub2RlID0gbmV3IExpbmtOb2RlKGRhdGEsIHAsIG4pO1xyXG4gICAgbm9kZS5pZCA9IGRhdGEuaWQ7XHJcbiAgICBwLm5leHQgPSBub2RlO1xyXG4gICAgbi5wcmVwID0gbm9kZTtcclxuICAgIGxpbmsuX21hcC5zZXQoZGF0YS5pZCwgbm9kZSk7XHJcbiAgICBsaW5rLl9zaXplKys7XHJcbiAgICByZXR1cm47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliKDpmaRcclxuICovXHJcbmZ1bmN0aW9uIFJlbW92ZUJ5S2V5SWQobGluayA9IG51bGwsIGtleUlkID0gMCl7XHJcbiAgICBpZighbGluayB8fCBrZXlJZD09MCkge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiZXJyb3IgcGFyYW06IFwiLCBsaW5rLCBrZXlJZCk7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBpZihsaW5rLl9jdXJyLmlkID09IGtleUlkKXtcclxuICAgICAgICBsaW5rLl9kZWxMaXN0LnB1c2goa2V5SWQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlbW92ZShsaW5rLCBrZXlJZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZShsaW5rID0gbnVsbCwga2V5SWQgPSAwKXtcclxuICAgIGxldCBub2RlID0gbGluay5fbWFwLmdldChrZXlJZCk7XHJcbiAgICBpZighbm9kZSl7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGluay5fbWFwLmRlbGV0ZShrZXlJZCk7XHJcbiAgICBsZXQgcCA9IG5vZGUucHJlcDtcclxuICAgIGxldCBuID0gbm9kZS5uZXh0O1xyXG4gICAgcC5uZXh0ID0gbjtcclxuICAgIG4ucHJlcCA9IHA7XHJcbiAgICBsaW5rLl9zaXplLS07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDova7or6IsIGNhbGxiYWNrID0gZnVuY3Rpb24oPD8gZXh0ZW5kcyBlbnRpdHk+KXt9XHJcbiAqL1xyXG5mdW5jdGlvbiBMaW5rSXRlcmF0b3IobGluayA9IG51bGwsIGNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICBpZighbGluayB8fCAhY2FsbGJhY2spIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsaW5rLl9jdXJyID0gbGluay5oZWFkLm5leHQ7XHJcblx0d2hpbGUobGluay5fY3VyciAhPSBsaW5rLnRhaWwpe1xyXG5cdFx0aWYoY2FsbGJhY2sobGluay5fY3Vyci5kYXRhKSl7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHRcdGxpbmsuX2N1cnIgPSBub2RlLm5leHQ7XHJcbiAgICB9XHJcbiAgICB3aGlsZShsaW5rLl9kZWxMaXN0Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgIFJlbW92ZUJ5S2V5SWQobGluaywgbGluay5fZGVsTGlzdC5wb3AoKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEZpcnN0KGxpbmsgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuICAgIGlmKG5vZGUpe1xyXG4gICAgICAgIHJldHVybiBub2RlLmRhdGFcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRMYXN0KGxpbmsgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG5vZGUgPSBsaW5rLnRhaWwucHJlcDtcclxuICAgIGlmKG5vZGUpe1xyXG4gICAgICAgIHJldHVybiBub2RlLmRhdGFcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICog5bCG5YiX6KGo5Lit55qE5YWD57Sg5Lik5Lik5a+55q+U77yMY2FsbGJhY2sgPSBmdW5jdGlvbig8PyBleHRlbmRzIGVudGl0eSBvciBjb21wb25lbnQ+IGZyb250LCBuZXh0KXt9XHJcbiAqL1xyXG5mdW5jdGlvbiBMaW5rQ29tcGFyZShsaW5rID0gbnVsbCwgY2FsbGJhY2sgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rIHx8ICFjYWxsYmFjaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxpbmsuX2xvY2sgPSB0cnVlO1xyXG4gICAgbGV0IG91dE5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuICAgIHdoaWxlKG91dE5vZGUgIT0gbGluay50YWlsKXtcclxuICAgICAgICBsZXQgaW5Ob2RlID0gb3V0Tm9kZS5uZXh0O1xyXG4gICAgICAgIHdoaWxlKGluTm9kZSAhPSBsaW5rLnRhaWwpe1xyXG4gICAgICAgICAgICBjYWxsYmFjayhvdXROb2RlLmRhdGEsIGluTm9kZS5kYXRhKTtcclxuICAgICAgICAgICAgaW5Ob2RlID0gaW5Ob2RlLm5leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG91dE5vZGUgPSBvdXROb2RlLm5leHQ7XHJcbiAgICB9XHJcbiAgICBsaW5rLl9sb2NrID0gZmFsc2U7XHJcbiAgICBsaW5rLl9kZWxMaXN0LmZvckVhY2goa2V5SWQgPT4ge1xyXG4gICAgICAgIFJlbW92ZUJ5S2V5SWQobGluaywga2V5SWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7TGluaywgTGlua05vZGUsIE5ld0xpbmssIEdldEZpcnN0LCBHZXRMYXN0LCBHZXRMaW5rRGF0YSwgR2V0TGlua1NpemUsIFB1c2hUb0xpbmssIFJlbW92ZUJ5S2V5SWQsIExpbmtJdGVyYXRvciwgTGlua0NvbXBhcmV9IiwiaW1wb3J0IHsgaXNTdG9wLCBpc1N0YXJ0LCBhY3Rpb25TdGFydCwgYWN0aW9uU3RvcCB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIFJlbW92ZUJ5S2V5SWQgfSBmcm9tICcuLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rJztcclxuXHJcblxyXG52YXIgYWN0aW9uTGlzdCA9IG5ldyBMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldFJ1bm5pZ0FjdGlvbkxpc3QoKXtcclxuICAgIHJldHVybiBhY3Rpb25MaXN0O1xyXG59XHJcblxyXG4vKipcclxuICog6L+Q6KGMYWN0aW9u77yM5bm25Yqg5YWl5YiwYWN0aW9u57O757ufbGlua+S4re+8jOS4gOiIrOS+m+WklumDqOiwg+eUqCBcclxuICovXHJcbmZ1bmN0aW9uIFJ1bkFjdGlvbihhY3Rpb24gPSBudWxsKXtcclxuICAgIGlmKGlzU3RvcChhY3Rpb24pKXtcclxuICAgICAgICBhY3Rpb25TdGFydChhY3Rpb24pO1xyXG4gICAgICAgIFB1c2hUb0xpbmsoYWN0aW9uTGlzdCwgYWN0aW9uLCBhY3Rpb24uaWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog56uL5Y2z57uI5q2iYWN0aW9u5bm256e75Ye6YWN0aW9u57O757ufbGlua++8jOS4gOiIrOS+m+WklumDqOiwg+eUqFxyXG4gKi9cclxuZnVuY3Rpb24gU3RvcEFjdGlvbihhY3Rpb24gPSBudWxsKXtcclxuICAgIGlmKGlzU3RhcnQoYWN0aW9uKSl7XHJcbiAgICAgICAgYWN0aW9uU3RvcChhY3Rpb24pO1xyXG4gICAgICAgIFJlbW92ZUJ5S2V5SWQoYWN0aW9uTGlzdCwgYWN0aW9uLmlkKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtHZXRSdW5uaWdBY3Rpb25MaXN0LCBSdW5BY3Rpb24sIFN0b3BBY3Rpb259IiwiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiO1xyXG5pbXBvcnQgeyBHZXRSdW5uaWdBY3Rpb25MaXN0IH0gZnJvbSBcIi4uLy4uL2FjdGlvbi91dGlsc1wiO1xyXG5pbXBvcnQgeyBMaW5rSXRlcmF0b3IgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5pbXBvcnQgeyBhY3Rpb25VcGRhdGUsIGFjdGlvbkVuZCB9IGZyb20gXCIuLi8uLi9hY3Rpb24vYmFzZVwiO1xyXG5cclxuLyoqXHJcbiAqIOWKqOS9nOezu+e7n1xyXG4gKi9cclxuY2xhc3MgQWN0aW9uU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCkge1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRSdW5uaWdBY3Rpb25MaXN0KCksIGFjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGFjdGlvblVwZGF0ZShhY3Rpb24sIGR0KTtcclxuICAgICAgICAgICAgaWYoYWN0aW9uLmlzRW5kKCkpe1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uRW5kKGFjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHN5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldEFjdGlvblN5c3RlbSgpe1xyXG4gICAgaWYoIXN5cyl7XHJcbiAgICAgICAgc3lzID0gbmV3IEFjdGlvblN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN5cztcclxufVxyXG5cclxuZXhwb3J0e0dldEFjdGlvblN5c3RlbX0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIEdldExpbmtEYXRhLCBSZW1vdmVCeUtleUlkIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuXHJcblxyXG4vKipcclxuICog5pi+56S657uE5Lu277yM5YyF5ZCr5LiA5Lqb55+p6Zi15pWw5o2uXHJcbiAqL1xyXG5jbGFzcyBSZW5kZXJDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cdGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgYW5nbGUgPSAwLCBzY2FsZSA9IDEpIHtcclxuICAgICAgICBzdXBlcihlbnRpdHlJZCk7XHJcbiAgICAgICAgdGhpcy5hbmdsZSA9IGFuZ2xlO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcclxuXHR9XHJcbn1cclxuXHJcbnZhciByZW5kZXJDb21zID0gbmV3IExpbmsoKTtcclxuZnVuY3Rpb24gY3JlYXRlUmVuZGVyQ29tcG9uZW50KGVudGl0eUlkID0gMCwgdmlld0RhdGEgPSBudWxsKSB7XHJcbiAgICB2aWV3RGF0YSA9IHZpZXdEYXRhID8gdmlld0RhdGEgOiB7fTtcclxuICAgIGxldCBjb20gPSBuZXcgUmVuZGVyQ29tcG9uZW50KGVudGl0eUlkLCB2aWV3RGF0YS5hbmdsZSwgdmlld0RhdGEuc2NhbGUpO1xyXG4gICAgUHVzaFRvTGluayhyZW5kZXJDb21zLCBjb20pO1xyXG4gICAgcmV0dXJuIGNvbTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVuZGVyQ29tcG9uZW50KGVudGl0eUlkID0gMCwgdmlld0RhdGEgPSBudWxsKSB7XHJcbiAgICBsZXQgY29tID0gR2V0TGlua0RhdGEocmVuZGVyQ29tcywgZW50aXR5SWQpO1xyXG4gICAgcmV0dXJuIGNvbSA/IGNvbSA6IGNyZWF0ZVJlbmRlckNvbXBvbmVudChlbnRpdHlJZCwgdmlld0RhdGEpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOaYvuekuuWFg+S7tlxyXG4gKiDnm67liY3kvb/nlKh0dXBsZe+8jOWPr+S7peWFvOWuueS4gOS4qnVuaXTlkIzml7bmjILlpJrkuKpzcHJpdGVGcmFtZeeahOmcgOaxglxyXG4gKiDlpoLmnpzpnIDopoHpmZDliLbkuIDkuKp1bml05LuF5pyJ5LiA5Liqc3ByaXRlRnJhbWXvvIzlsLHkvb/nlKhjb21wb25lbnRcclxuICovXHJcbmNsYXNzIERpc3BsYXlUdXBsZSBleHRlbmRzIFR1cGxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgc3ByaXRlRnJhbWUgPSBudWxsLCBkaXNwbGF5QXJlYSA9IG51bGwpe1xyXG4gICAgICAgIHN1cGVyKGVudGl0eUlkKTtcclxuICAgICAgICB0aGlzLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5QXJlYSA9IGRpc3BsYXlBcmVhO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog55S75biD5LiK55qE5pi+56S66Zif5YiXXHJcbiAqL1xyXG52YXIgZGlzcGxheUxpc3QgPSBuZXcgTGluaygpO1xyXG5mdW5jdGlvbiBHZXREaXNwbGF5TGlzdCgpe1xyXG4gICAgcmV0dXJuIGRpc3BsYXlMaXN0O1xyXG59XHJcblxyXG4vKipcclxuICog5Yqg5YWl5riy5p+T6Zif5YiXXHJcbiAqIEBwYXJhbSB7Kn0gZGlzcGxheUFyZWEgUmVjdOexu+Wei1xyXG4gKi9cclxuZnVuY3Rpb24gQWRkRGlzcGxheShlbnRpdHlJZCA9IDAsIHNwcml0ZUZyYW1lID0gbnVsbCwgZGlzcGxheUFyZWEgPSBudWxsKSB7XHJcbiAgICBsZXQgdCA9IG5ldyBEaXNwbGF5VHVwbGUoZW50aXR5SWQsIHNwcml0ZUZyYW1lLCBkaXNwbGF5QXJlYSk7XHJcbiAgICBQdXNoVG9MaW5rKGRpc3BsYXlMaXN0LCB0KTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZW1vdmVEaXNwbGF5KGRpc3BsYXlJZCA9IDApIHtcclxuICAgIFJlbW92ZUJ5S2V5SWQoZGlzcGxheUxpc3QsIGRpc3BsYXlJZCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7R2V0UmVuZGVyQ29tcG9uZW50LCBHZXREaXNwbGF5TGlzdCwgQWRkRGlzcGxheSwgUmVtb3ZlRGlzcGxheX0iLCIvKipcclxuICog5Z+656GAMkTlnZDmoIdcclxuICovXHJcbmNsYXNzIFBvcyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDApe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3UG9zKHggPSAwLCB5ID0gMCl7XHJcbiAgICByZXR1cm4gbmV3IFBvcyh4LCB5KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOiuoeeul+ebuOWvueWdkOagh1xyXG4gKiDku6V0YXJnZXRQb3PkuLrlh4bvvIzorqHnrpdyZWZlclBvc+S6jnRhcmdldFBvc+eahOebuOWvueWdkOagh1xyXG4gKiDkuL7kvovvvJpcclxuICogICAgICDmkYTlg4/mnLrkvY3kuo4oNTAsIDUwKeWkhO+8jHJlZmVyUG9zXHJcbiAqICAgICAg5Y2V5L2NQeS9jeS6jigxMjAsIDMwKeWkhO+8jHRhcmdldFBvc1xyXG4gKiAgICAgIOmCo+S5iO+8jOWNleS9jUHlnKjmkYTlg4/mnLrnmoQoMTIwLTUwLCAzMC01MCnlpIRcclxuICovXHJcbmZ1bmN0aW9uIFRvTG9jYXRlUG9zKHRhcmdldFBvcyA9IG51bGwsIHJlZmVyUG9zID0gbnVsbCl7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHRhcmdldFBvcy54IC0gcmVmZXJQb3MueCxcclxuICAgICAgICB0YXJnZXRQb3MueSAtIHJlZmVyUG9zLnkpO1xyXG59XHJcblxyXG4vLyBmdW5jdGlvbiBUb0xvY2F0ZVgodGFyZ2V0WCA9IDAsIHJlZmVyWCA9IDApe1xyXG4vLyAgICAgcmV0dXJuIHRhcmdldFggLSByZWZlclg7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIFRvTG9jYXRlWSh0YXJnZXRZID0gMCwgcmVmZXJZID0gMCl7XHJcbi8vICAgICByZXR1cm4gdGFyZ2V0WSAtIHJlZmVyWTtcclxuLy8gfVxyXG5cclxuXHJcbi8qKlxyXG4gKiDln7rnoYDlkJHph49cclxuICogZGlzdGFuY2U6IOi3neemu+ezu+aVsO+8jOazqOaEj+S4jeaYr+WunumZhei3neemu++8jOWPqueUqOS6juavlOi+g+i3neemu+Wkp+Wwj1xyXG4gKi9cclxuY2xhc3MgVmVjIHtcclxuICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSB4ICogeCArIHkgKiB5O1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdWZWMoeCA9IDAsIHkgPSAwKXtcclxuICAgIHJldHVybiBuZXcgVmVjKHgsIHkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdWZWNXaXRoUG9zKHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICByZXR1cm4gbmV3IE5ld1ZlYyh4MiAtIHgxLCB5MiAtIHkxKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOi3neemu+ezu+aVsFxyXG4gKiDms6jmhI/vvIzlubbpnZ7lrp7pmYXot53nprvlgLzvvIzlm6DkuLrlvIDmoLnlj7forqHnrpfmtojogJflpKdcclxuICog6Iul5Y+q55So5LqO5a+55q+U5aSn5bCP77yM5q2k57O75pWw5Y2z5Y+vXHJcbiAqL1xyXG5mdW5jdGlvbiBHZXREaXN0YW5jZSh2ZWMgPSBudWxsKXtcclxuICAgIHJldHVybiB2ZWMuZGlzdGFuY2U7XHJcbn1cclxuXHJcbmV4cG9ydCB7TmV3UG9zLCBUb0xvY2F0ZVBvcyxcclxuICAgIE5ld1ZlYywgTmV3VmVjV2l0aFBvcywgR2V0RGlzdGFuY2V9IiwiaW1wb3J0IHsgTmV3UG9zLCBOZXdWZWMgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnRcIjtcclxuaW1wb3J0IHsgUHVzaFRvTGluaywgR2V0TGlua0RhdGEgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcblxyXG4vKipcclxuICog5L2N572u57uE5Lu2XHJcbiAqL1xyXG5jbGFzcyBQb3NDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXR5SWQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgICAgIHN1cGVyKGVudGl0eUlkKTtcclxuICAgICAgICB0aGlzLnBvcyA9IE5ld1Bvcyh4LCB5KTtcclxuICAgICAgICB0aGlzLnZlYyA9IE5ld1ZlYygpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgcG9zQ29tcyA9IG5ldyBMaW5rKCk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVBvc0NvbXBvbmVudChlbnRpdHlJZCA9IDApIHtcclxuICAgIGxldCBjb20gPSBuZXcgUG9zQ29tcG9uZW50KGVudGl0eUlkKTtcclxuICAgIFB1c2hUb0xpbmsocG9zQ29tcywgY29tKTtcclxuICAgIHJldHVybiBjb207XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCA9IDApIHtcclxuICAgIGxldCBjb20gPSBHZXRMaW5rRGF0YShwb3NDb21zLCBlbnRpdHlJZCk7XHJcbiAgICByZXR1cm4gY29tID8gY29tIDogY3JlYXRlUG9zQ29tcG9uZW50KGVudGl0eUlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UG9zQ29tcG9uZW50TGlzdCgpe1xyXG4gICAgcmV0dXJuIHBvc0NvbXM7XHJcbn1cclxuXHJcbmV4cG9ydHsgZ2V0UG9zQ29tcG9uZW50LCBnZXRQb3NDb21wb25lbnRMaXN0fSIsImltcG9ydCB7IGdldFBvc0NvbXBvbmVudCwgZ2V0UG9zQ29tcG9uZW50TGlzdCB9IGZyb20gJy4vY29tcG9uZW50JztcclxuaW1wb3J0IHsgUmVtb3ZlQnlLZXlJZCB9IGZyb20gJy4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsnO1xyXG5cclxuZnVuY3Rpb24gU2V0UG9zKGVudGl0eUlkID0gMCwgeCA9IDAsIHkgPSAwKXtcclxuICAgIGxldCBwb3MgPSBnZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnBvcztcclxuICAgIHBvcy54ID0geDtcclxuICAgIHBvcy55ID0geTtcclxuICAgIHJldHVybiBwb3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFBvcyhlbnRpdHlJZCA9IDApe1xyXG4gICAgcmV0dXJuIGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCkucG9zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTZXRWZWMoZW50aXR5SWQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IHZlYyA9IGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCkudmVjO1xyXG4gICAgdmVjLnggPSB4O1xyXG4gICAgdmVjLnkgPSB5O1xyXG4gICAgcmV0dXJuIHZlYztcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0VmVjKGVudGl0eUlkID0gMCl7XHJcbiAgICByZXR1cm4gZ2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKS52ZWM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFBvc0NvbXBvbmVudChlbnRpdHlJZCA9IDApe1xyXG4gICAgcmV0dXJuIGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCk7XHJcbn1cclxuZnVuY3Rpb24gR2V0UG9zQ29tcG9uZW50TGlzdCgpe1xyXG4gICAgcmV0dXJuIGdldFBvc0NvbXBvbmVudExpc3QoKTtcclxufVxyXG5mdW5jdGlvbiBSZW1vdmVQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKXtcclxuICAgIFJlbW92ZUJ5S2V5SWQoZ2V0UG9zQ29tcG9uZW50TGlzdCgpLCBlbnRpdHlJZCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7U2V0UG9zLCBHZXRQb3MsIEdldFZlYywgU2V0VmVjLCBHZXRQb3NDb21wb25lbnQsIEdldFBvc0NvbXBvbmVudExpc3QsIFJlbW92ZVBvc0NvbXBvbmVudH0iLCJpbXBvcnQgeyBOZXdQb3MsIE5ld1ZlYyB9IGZyb20gXCIuL3BvaW50XCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIDJE5Z+656GA55+p5b2i77yM55Sx5Y+C6ICD5Z2Q5qCH77yM5YGP56e76YeP77yM5a696auY57uE5oiQXHJcbiAqIOS9jee9ruaYr+agueaNruebuOWvueWdkOagh+eul+WHuuadpVxyXG4gKiB4T2Zmc2V0LCB5T2Zmc2V0IDog55u45a+55Z2Q5qCH5YGP56e76YePXHJcbiAqIHdpZHRoLCBoZWlnaHQgOiDlrr3pq5hcclxuICogY2VudGVyIDog5a6e6ZmF5L2N572u77yI55+p5b2i5Lit5b+D77yJ77yM5YaF6YOo5L2/55So77yMY2VudGVyID0gdW5pdC5wb3MgKyByZWN0Lm9mZnNldFxyXG4gKi9cclxuY2xhc3MgUmVjdGFuZ2xlIHtcclxuICAgIGNvbnN0cnVjdG9yKG9mZnNldCA9IG51bGwsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCwgY2VudGVyID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOefqeW9oum7mOiupOWxheS4reS6jm93bmVyXHJcbiAqIOatpOaWueazleS4gOiIrOeUsWNvbGxpZGVy6LCD55SoXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdSZWN0KHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCBvZmZzZXQgPSBOZXdWZWMoeE9mZnNldCwgeU9mZnNldCk7XHJcbiAgICByZXR1cm4gbmV3IFJlY3RhbmdsZShvZmZzZXQsIHdpZHRoLCBoZWlnaHQsIE5ld1BvcygpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOabtOaWsOW9k+WJjeefqeW9ouWxnuaAp++8iOS9jee9ruOAgeWBj+enu+mHj+OAgeWkp+Wwj+etie+8ie+8jOWQjumdouaJgOaciea2ieWPiuefqeW9ouiuoeeul+eahOWHveaVsO+8jOmDveW/hemhu+W7uueri+WcqOW3suabtOaWsOS6hue7neWvueWdkOagh+eahOefqeW9oueahOWfuuehgOS5i+S4ilxyXG4gKiB4LCB55piv57ud5a+55Z2Q5qCHXHJcbiAqL1xyXG5mdW5jdGlvbiBVcGRhdGVSZWN0U2l6ZShyZWN0ID0gbnVsbCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIHJlY3Qud2lkdGggPSB3aWR0aDtcclxuICAgIHJlY3QuaGVpZ2h0ID0gaGVpZ2h0O1xyXG59XHJcbmZ1bmN0aW9uIFVwZGF0ZVJlY3RPZmZzZXQocmVjdCA9IG51bGwsIHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCl7XHJcbiAgICByZWN0Lm9mZnNldC54ID0geE9mZnNldDtcclxuICAgIHJlY3Qub2Zmc2V0LnkgPSB5T2Zmc2V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBVcGRhdGVSZWN0Q2VudGVyUG9zKHJlY3QgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgcmVjdC5jZW50ZXIueCA9IHg7XHJcbiAgICByZWN0LmNlbnRlci55ID0geTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOagueaNruaJgOWxnuWNleS9jeeahOS9jee9ruabtOaWsOefqeW9ouS9jee9ru+8iOS4gOiIrOWcuuaZr+iwg+eUqO+8iVxyXG4gKi9cclxuZnVuY3Rpb24gVXBkYXRlUmVjdFBvc0J5VW5pdChyZWN0ID0gbnVsbCwgdW5pdFBvc1ggPSAwLCB1bml0UG9zWSA9IDApe1xyXG4gICAgcmVjdC5jZW50ZXIueCA9IHVuaXRQb3NYICsgcmVjdC5vZmZzZXQueDtcclxuICAgIHJlY3QuY2VudGVyLnkgPSB1bml0UG9zWSArIHJlY3Qub2Zmc2V0Lnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlj43lkJHkv67lpI11bml05L2N572u77yIZml4SW5SZWN06LCD55So77yJXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhVbml0UG9zKHJlY3QgPSBudWxsLCB1bml0UG9zID0gbnVsbCl7XHJcbiAgICB1bml0UG9zLnggPSByZWN0LmNlbnRlci54IC0gcmVjdC5vZmZzZXQueDtcclxuICAgIHVuaXRQb3MueSA9IHJlY3QuY2VudGVyLnkgLSByZWN0Lm9mZnNldC55O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOefqeW9ouWQhOS4queCueS9jee9ruWSjOWPguaVsO+8jOiusOS9j+imgeWcqHVwZGF0ZeWQjuWGjeiwg+eUqO+8jOS7peWFjeaVsOaNruacieivr1xyXG4gKi9cclxuZnVuY3Rpb24gR2V0UmVjdE9mZnNldFZlYyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5vZmZzZXQ7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdENlbnRlclBvcyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5jZW50ZXI7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdFN0YXJ0UG9zKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueCAtIEdldFJlY3RIYWxmV2lkdGgocmVjdCksXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueSAtIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3QpXHJcbiAgICApO1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RFbmRQb3MocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICByZWN0LmNlbnRlci54ICsgR2V0UmVjdEhhbGZXaWR0aChyZWN0KSxcclxuICAgICAgICByZWN0LmNlbnRlci55ICsgR2V0UmVjdEhhbGZIZWlnaHQocmVjdClcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFJlY3RXaWR0aChyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC53aWR0aDtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0SGVpZ2h0KHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LmhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0SGFsZldpZHRoKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LndpZHRoICogMC41O1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LmhlaWdodCAqIDAuNTtcclxufVxyXG5cclxuXHJcbi8v5rGC6Z2i56evXHJcbmZ1bmN0aW9uIEdldEFyZWEocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3Qud2lkdGggKiByZWN0LmhlaWdodDtcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBOZXdSZWN0LCBVcGRhdGVSZWN0U2l6ZSwgVXBkYXRlUmVjdE9mZnNldCwgVXBkYXRlUmVjdENlbnRlclBvcywgVXBkYXRlUmVjdFBvc0J5VW5pdCwgRml4VW5pdFBvcyxcclxuICAgIEdldFJlY3RPZmZzZXRWZWMsIEdldFJlY3RDZW50ZXJQb3MsIEdldFJlY3RTdGFydFBvcywgR2V0UmVjdEVuZFBvcyxcclxuICAgIEdldFJlY3RXaWR0aCwgR2V0UmVjdEhhbGZXaWR0aCwgR2V0UmVjdEhlaWdodCwgR2V0UmVjdEhhbGZIZWlnaHQsXHJcbiAgICBHZXRBcmVhXHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RDZW50ZXJYKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiByZWN0LmNlbnRlci54O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RYMShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclgocmVjdCkgLSByZWN0LndpZHRoICogMC41O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RYMihyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclgocmVjdCkgKyByZWN0LndpZHRoICogMC41O1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0T2Zmc2V0WShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gcmVjdC5vZmZzZXQueTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gR2V0UmVjdENlbnRlclkocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIHJlY3QuY2VudGVyLnk7XHJcbi8vIH1cclxuLy8gZnVuY3Rpb24gR2V0UmVjdFkxKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiBHZXRSZWN0Q2VudGVyWShyZWN0KSAtIHJlY3QuaGVpZ2h0ICogMC41O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RZMihyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclkocmVjdCkgKyByZWN0LmhlaWdodCAqIDAuNTtcclxuLy8gfSIsImltcG9ydCB7IFNldFBvcyB9IGZyb20gXCIuLi9wb3MvdXRpbHNcIjtcclxuaW1wb3J0IHsgTmV3UmVjdCwgVXBkYXRlUmVjdFBvc0J5VW5pdCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IFRvTG9jYXRlUG9zIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50XCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOS7o+eggemHj+Wwke+8jOaaguaXtui/meagt+aUvlxyXG4gKi9cclxuY2xhc3MgQ2FtZXJhIGV4dGVuZHMgRW50aXR5IHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnBvcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWN0ID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3Q2FtZXJhKHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCBjYW1lcmEgPSBuZXcgQ2FtZXJhKCk7XHJcbiAgICBjYW1lcmEucG9zID0gU2V0UG9zKGNhbWVyYS5pZCwgeCwgeSk7XHJcbiAgICBjYW1lcmEucmVjdCA9IE5ld1JlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICBVcGRhdGVSZWN0UG9zQnlVbml0KGNhbWVyYS5yZWN0LCB4LCB5KTtcclxuICAgIHJldHVybiBjYW1lcmE7XHJcbn1cclxuXHJcbi8v55uu5qCH55+p5b2i5piv5ZCm5Zyo6ZWc5aS05YaFXHJcbmZ1bmN0aW9uIElzSW5DYW1lcmEoY2FtZXJhID0gbnVsbCwgcmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIElzUmVjdHNDcm9zcyhjYW1lcmEucmVjdCwgcmVjdCk7XHJcbn1cclxuXHJcbi8v6L2s5Li66ZWc5aS05Z2Q5qCHXHJcbmZ1bmN0aW9uIFRvQ2FtZXJhUG9zKGNhbWVyYSA9IG51bGwsIHRhcmdldFBvcyA9IG51bGwpe1xyXG4gICAgcmV0dXJuIFRvTG9jYXRlUG9zKHRhcmdldFBvcywgY2FtZXJhLnBvcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDplZzlpLTnp7vliqhcclxuICovXHJcbmZ1bmN0aW9uIENhbWVyYU1vdmUoY2FtZXJhID0gbnVsbCwgeCA9IDAsIHkgPSAwKXtcclxuICAgIFNldFBvcyhjYW1lcmEuaWQsIHgsIHkpO1xyXG4gICAgVXBkYXRlUmVjdFBvc0J5VW5pdChjYW1lcmEucmVjdCwgeCwgeSk7XHJcbn1cclxuXHJcbmV4cG9ydHtOZXdDYW1lcmEsIElzSW5DYW1lcmEsIFRvQ2FtZXJhUG9zLCBDYW1lcmFNb3ZlfSIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuaW1wb3J0IHsgR2V0RGlzcGxheUxpc3QgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3ZpZXcvY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IEdldFBvcyB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvcG9zL3V0aWxzXCI7XHJcbmltcG9ydCB7IFVwZGF0ZVJlY3RQb3NCeVVuaXQsIEdldFJlY3RTdGFydFBvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IEdldENhbWVyYSB9IGZyb20gXCIuLi93b3JsZC9yZXNcIjtcclxuaW1wb3J0IHsgSXNJbkNhbWVyYSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvY2FtZXJhL3V0aWxzXCI7XHJcbmltcG9ydCB7IFRvTG9jYXRlUG9zIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50XCI7XHJcblxyXG4vKipcclxuICog5riy5p+T57O757uf77yM6YC76L6R5q2l6aqk77yaXHJcbiAqIDEuICAg5riF6Zmk55S75biDXHJcbiAqIDIuICAg6YeN5a6a5L2N5pGE5YOP5py6XHJcbiAqIDMuICAg6K6h566X5Y2V5L2N5pi+56S655+p5b2i5piv5ZCm5Zyo5pGE5YOP5py655+p5b2i5YaFXHJcbiAqIDQuICAg6L2s5o2i5Li655S75biD5Z2Q5qCHXHJcbiAqIDUuICAg55S75Ye65Zu+5YOPXHJcbiAqL1xyXG5jbGFzcyBSZW5kZXJVcGRhdGVTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xyXG4gICAgb25VcGRhdGUoZHQgPSAwKXtcclxuICAgICAgICAvL2NhbnZhc0NsZWFyKCk7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldERpc3BsYXlMaXN0KCksIGRpc3BsYXlUdXBsZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSBHZXRQb3MoZGlzcGxheVR1cGxlLmVudGl0eUlkKTtcclxuICAgICAgICAgICAgVXBkYXRlUmVjdFBvc0J5VW5pdChkaXNwbGF5VHVwbGUuZGlzcGxheUFyZWEsIHBvcy54LCBwb3MueSk7XHJcbiAgICAgICAgICAgIGRyYXdGcmFtZUluQ2FtZXJhKGRpc3BsYXlUdXBsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciByZW5kZXJTeXMgPSBudWxsO1xyXG5mdW5jdGlvbiBHZXRSZW5kZXJVcGRhdGVTeXN0ZW0oKXtcclxuICAgIGlmKCFyZW5kZXJTeXMpe1xyXG4gICAgICAgIHJlbmRlclN5cyA9IG5ldyBSZW5kZXJVcGRhdGVTeXN0ZW0oKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZW5kZXJTeXM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5bCG5omA5pyJ55+p5b2i55S75Ye65p2lXHJcbiAqL1xyXG5jbGFzcyBEcmF3UmVjdFN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIC8vRHJhd1JlY3QoR2V0Q2FtZXJhKCksIHRoaXMuX2NhbWVyYS5yZWN0KTtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0UmVjdExpc3QoKSwgY29sbGlkZXIgPT4ge1xyXG4gICAgICAgICAgICBkcmF3UmVjdEluQ2FtZXJhKGNvbGxpZGVyLnJlY3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgZGVidWdTeXMgPSBudWxsO1xyXG5mdW5jdGlvbiBHZXREcmF3UmVjdFN5c3RlbSgpe1xyXG4gICAgaWYoIWRlYnVnU3lzKXtcclxuICAgICAgICBkZWJ1Z1N5cyA9IG5ldyBEcmF3UmVjdFN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlYnVnU3lzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOa4suafk+WIsOeUu+W4g++8jOWPqua4suafk+WcqOmVnOWktOWGheeahFxyXG4gKi9cclxuZnVuY3Rpb24gZHJhd0ZyYW1lSW5DYW1lcmEoZGlzcGxheVR1cGxlID0gbnVsbCl7XHJcbiAgICBsZXQgY2FtZXJhID0gR2V0Q2FtZXJhKCk7XHJcbiAgICBsZXQgZGlzcGxheUFyZWEgPSBkaXNwbGF5VHVwbGUuZGlzcGxheUFyZWE7XHJcbiAgICBpZighSXNJbkNhbWVyYShjYW1lcmEsIGRpc3BsYXlBcmVhKSl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy/ovazkuLrnlLvluIPlnZDmoIdcclxuICAgIGxldCBzY3JlZW5Qb3MgPSBUb0xvY2F0ZVBvcyhcclxuICAgICAgICBHZXRSZWN0U3RhcnRQb3MoZGlzcGxheUFyZWEpLFxyXG4gICAgICAgIEdldFJlY3RTdGFydFBvcyhjYW1lcmEucmVjdCkpO1xyXG4gICAgRHJhd0ZyYW1lKGRpc3BsYXlUdXBsZS5zcHJpdGVGcmFtZSxcclxuICAgICAgICBzY3JlZW5Qb3MueCwgc2NyZWVuUG9zLnksXHJcbiAgICAgICAgR2V0UmVjdFdpZHRoKGRpc3BsYXlBcmVhKSwgR2V0UmVjdEhlaWdodChkaXNwbGF5QXJlYSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UmVjdEluQ2FtZXJhKGRpc3BsYXlBcmVhID0gbnVsbCl7XHJcbiAgICBsZXQgY2FtZXJhID0gR2V0Q2FtZXJhKCk7XHJcbiAgICBpZighSXNJbkNhbWVyYShjYW1lcmEsIGRpc3BsYXlBcmVhKSl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy/ovazkuLrnlLvluIPlnZDmoIdcclxuICAgIGxldCBzY3JlZW5Qb3MgPSBUb0xvY2F0ZVBvcyhcclxuICAgICAgICBHZXRSZWN0U3RhcnRQb3MoZGlzcGxheUFyZWEpLCBcclxuICAgICAgICBHZXRSZWN0U3RhcnRQb3MoY2FtZXJhLnJlY3QpKTtcclxuICAgIERyYXdSZWN0KFxyXG4gICAgICAgIHNjcmVlblBvcy54LCBzY3JlZW5Qb3MueSxcclxuICAgICAgICBHZXRSZWN0V2lkdGgoZGlzcGxheUFyZWEpLCBHZXRSZWN0SGVpZ2h0KGRpc3BsYXlBcmVhKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7R2V0UmVuZGVyVXBkYXRlU3lzdGVtLCBHZXREcmF3UmVjdFN5c3RlbX0iLCJpbXBvcnQgeyBTeXN0ZW0gfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IEdldFBvc0NvbXBvbmVudExpc3QgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3Bvcy91dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIDIwMTkuMDkuMjlcclxuICogICAgICDnu4/ov4fogIPomZHvvIznm67liY3lj6rlgZrnroDljZXniYjmnKzvvIzkuI3opoHmg7PlvpflpKrplb/ov5xcclxuICogICAgICDmiYDku6XlhYjkuI3nlKjns7vnu5/nu5/kuIDmm7TmlrDkvY3nva7vvIznm7TmjqXlnKhhY3Rpb27kuK1zZXRwb3PlsLHlpb1cclxuICovXHJcbmNsYXNzIFBvc1VwZGF0ZVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRQb3NDb21wb25lbnRMaXN0KCksIG1vdmVDb20gPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmVjID0gbW92ZUNvbS52ZWM7XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSBtb3ZlQ29tLnBvcztcclxuICAgICAgICAgICAgcG9zLnggKz0gdmVjLng7XHJcbiAgICAgICAgICAgIHBvcy55ICs9IHZlYy55O1xyXG4gICAgICAgICAgICB2ZWMueCA9IDA7XHJcbiAgICAgICAgICAgIHZlYy55ID0gMDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHN5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldFBvc1VwZGF0ZVN5c3RlbSgpe1xyXG4gICAgaWYoIXN5cyl7XHJcbiAgICAgICAgc3lzID0gbmV3IFBvc1VwZGF0ZVN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN5cztcclxufVxyXG5cclxuLyoqXHJcbiAqIOaaguaXtuaUvuedgO+8jOS7peWQjuWPr+iDveimgeaUvuWcqHN5c3RlbUxpc3RbMF3vvIzku6Xkvr/mr4/luKfliJ3lp4vljJbkuLTml7bmlbDmja5cclxuICovXHJcbmNsYXNzIENsZWFyU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldFBvc0NvbXBvbmVudExpc3QoKSwgbW92ZUNvbSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2ZWMgPSBtb3ZlQ29tLnZlYztcclxuICAgICAgICAgICAgdmVjLnggPSAwO1xyXG4gICAgICAgICAgICB2ZWMueSA9IDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydHtHZXRQb3NVcGRhdGVTeXN0ZW19IiwiXHJcbnZhciBfZW5naW5lID0gZ2V0RW5naW5lKCk7XHJcblxyXG5mdW5jdGlvbiBsb2FkSW1nKGltZ1NyYywgb25Mb2FkQ2FsbGJhY2spe1xyXG4gICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgaW1nLnNyYyA9IGltZ1NyYztcclxuICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgb25Mb2FkQ2FsbGJhY2soaW1nKTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIF9jYWxsYmFjaztcclxudmFyIF9mcmFtZU5vID0gMDtcclxudmFyIF9kdCA9IDA7XHJcbnZhciBfbGFzdCA9IDA7XHJcbnZhciBfaXNFbmQgPSBmYWxzZTtcclxuZnVuY3Rpb24gdGljayh0aW1lc3RhbXApIHtcclxuICAgIF9kdCA9IHRpbWVzdGFtcCAtIF9sYXN0O1xyXG4gICAgX2xhc3QgPSB0aW1lc3RhbXA7XHJcbiAgICBfY2FsbGJhY2soX2R0KTtcclxuICAgIGlmKCFfaXNFbmQpe1xyXG4gICAgICAgIF9mcmFtZU5vID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gUnVuMjIyMihvblVwZGF0ZUNhbGxiYWNrID0gbnVsbCkge1xyXG4gICAgX2lzRW5kID0gZmFsc2U7XHJcbiAgICBfY2FsbGJhY2sgPSBvblVwZGF0ZUNhbGxiYWNrO1xyXG4gICAgX2ZyYW1lTm8gPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xyXG59XHJcblxyXG4vKipcclxuICogZGVidWdcclxuICovXHJcbnZhciBzdGFydCA9IG51bGw7XHJcbnZhciBsYXN0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbmZ1bmN0aW9uIHJ1blRpY2sob25VcGRhdGVDYWxsYmFjayA9IG51bGwpIHtcclxuICAgIF9pc0VuZCA9IGZhbHNlO1xyXG4gICAgX2NhbGxiYWNrID0gb25VcGRhdGVDYWxsYmFjaztcclxuICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIGlmKCFfaXNFbmQpe1xyXG4gICAgICAgICAgICBfY2FsbGJhY2soc3RhcnQgLSBsYXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFzdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgfSwgX2VuZ2luZS50aWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RvcCgpe1xyXG4gICAgX2lzRW5kID0gdHJ1ZTtcclxufVxyXG5cclxuXHJcbi8v5Zug5Li65oyJ5L2P6ZSu55qE6K+d77yM5Lya5LiN5pat6Kem5Y+Rb25LZXlkb3du77yM5omA5Lul5YGa5LiqbWFw5Yik5patXHJcbnZhciBfa2V5RG93bk1hcCA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gb25LZXlDYWxsYmFjayhrZXlEb3duQ2FsbGJhY2sgPSBudWxsLCBrZXlVcENhbGxiYWNrID0gbnVsbCl7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZSA9PiB7XHJcbiAgICAgICAgbGV0IGNvZGUgPSBlLmtleUNvZGU7XHJcbiAgICAgICAgaWYoX2tleURvd25NYXAuZ2V0KGNvZGUpKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfa2V5RG93bk1hcC5zZXQoY29kZSwgMSk7XHJcbiAgICAgICAga2V5RG93bkNhbGxiYWNrKGUua2V5Q29kZSk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZSA9PiB7XHJcbiAgICAgICAgbGV0IGNvZGUgPSBlLmtleUNvZGU7XHJcbiAgICAgICAgX2tleURvd25NYXAuZGVsZXRlKGNvZGUpO1xyXG4gICAgICAgIGtleVVwQ2FsbGJhY2soZS5rZXlDb2RlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbk1vdXNlQ2FsbGJhY2sobW91c2Vkb3duQ2FsbGJhY2sgPSBudWxsLCBtb3VzZXVwQ2FsbGJhY2sgPSBudWxsKXtcclxuICAgIF9lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgIG1vdXNlZG93bkNhbGxiYWNrKGV2ZW50LngsIGV2ZW50LnkpO1xyXG4gICAgfSk7XHJcbiAgICBfZW5naW5lLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgbW91c2V1cENhbGxiYWNrKGV2ZW50LngsIGV2ZW50LnkpO1xyXG4gICAgfSk7XHJcbiAgICAvL19lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixkb01vdXNlTW92ZSxmYWxzZSk7XHJcbiAgICAvL19lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLGRvTW91c2VPdXQsZmFsc2UpO1xyXG59XHJcblxyXG5leHBvcnR7XHJcbiAgICBsb2FkSW1nLCBydW5UaWNrLCBzdG9wLCBvbktleUNhbGxiYWNrLCBvbk1vdXNlQ2FsbGJhY2tcclxufSIsIlxyXG4vKipcclxuICog5rWP6KeI5Zmo55qEa2V5LWNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBLRVlfUklHSFQgPSAzOTtcclxuZXhwb3J0IGNvbnN0IEtFWV9MRUZUID0gMzc7XHJcbmV4cG9ydCBjb25zdCBLRVlfVVAgPSAzODtcclxuZXhwb3J0IGNvbnN0IEtFWV9ET1dOID0gNDA7XHJcblxyXG5leHBvcnQgY29uc3QgS0VZX1NQQUNFID0gMzI7XHJcblxyXG5leHBvcnQgY29uc3QgS0VZX1cgPSA4NztcclxuZXhwb3J0IGNvbnN0IEtFWV9BID0gNjU7XHJcbmV4cG9ydCBjb25zdCBLRVlfUyA9IDgzO1xyXG5leHBvcnQgY29uc3QgS0VZX0QgPSA2ODtcclxuXHJcbi8qKlxyXG4gKiAgZW5naW5lID0gd2ViLWJyb3dzZXIsIGNhbnZhc1xyXG4gKi9cclxudmFyIF9lbmdpbmUgPSB7XHJcblx0Y3R4IDogbnVsbCxcclxuICAgIGNhbnZhcyA6IG51bGwsXHJcbiAgICBmcHMgOiAwLFxyXG4gICAgdGljayA6IDBcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldEVuZ2luZSgpe1xyXG4gICAgcmV0dXJuIF9lbmdpbmU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRDYW52YXMod2lkdGggPSAwLCBoZWlnaHQgPSAwLCBmcHMgPSAxMCl7XHJcbiAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBfZW5naW5lLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIF9lbmdpbmUuY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIF9lbmdpbmUuY3R4LnN0cm9rZVN0eWxlPVwiIzAwMDBmZlwiOyAgICAgICAgICAvL+eUu+efqeW9ouahhueUqOeahFxyXG4gICAgX2VuZ2luZS5mcHMgPSBmcHM7XHJcbiAgICBfZW5naW5lLnRpY2sgPSAxMDAwIC8gZnBzO1xyXG59XHJcblxyXG5leHBvcnR7Z2V0RW5naW5lLCBpbml0Q2FudmFzfSIsImltcG9ydCB7IGluaXRTeXN0ZW1zIH0gZnJvbSBcIi4uL3N5c3RlbS9ydW5cIjtcclxuaW1wb3J0IHsgaW5pdENhbnZhcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9tb2RlbFwiO1xyXG5pbXBvcnQgeyBvbktleUNhbGxiYWNrLCBvbk1vdXNlQ2FsbGJhY2sgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9lbmdpbmUvaDUvcHJvY2Vzc29yXCI7XHJcbmltcG9ydCB7IE5ld0NhbWVyYSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvY2FtZXJhL3V0aWxzXCI7XHJcbmltcG9ydCB7IENyZWF0ZVRpbGVNYXBXaXRoRGF0YSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvdGlsZS91dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIOmAmui/h+WPguaVsOmFjee9ruWIneWni+WMluezu+e7n+i1hOa6kFxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdEdhbWUob3B0aW9ucyA9IG51bGwpIHtcclxuXHJcbiAgICAvL+W8leaTjuWIneWni+WMllxyXG4gICAgaW5pdENhbnZhcyhvcHRpb25zLnNjcmVlbi53aWR0aCwgb3B0aW9ucy5zY3JlZW4uaGVpZ2h0LCBvcHRpb25zLmZwcyk7XHJcblxyXG4gICAgLy/ms6jlhozmjInplK7lm57osINcclxuICAgIGlmKG9wdGlvbnMua2V5RG93bkhhbmRsZXIgJiYgb3B0aW9ucy5rZXlVcEhhbmxlcil7XHJcbiAgICAgICAgb25LZXlDYWxsYmFjayhvcHRpb25zLmtleURvd25IYW5kbGVyLCBvcHRpb25zLmtleVVwSGFubGVyKTtcclxuICAgIH1cclxuICAgIGlmKG9wdGlvbnMubW91c2Vkb3duSGFuZGxlciAmJiBvcHRpb25zLm1vdXNldXBIYW5kbGVyKXtcclxuICAgICAgICBvbk1vdXNlQ2FsbGJhY2sob3B0aW9ucy5tb3VzZWRvd25IYW5kbGVyLCBvcHRpb25zLm1vdXNldXBIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdENhbWVyYShvcHRpb25zLmNhbWVyYSwgb3B0aW9ucy5zY3JlZW4pO1xyXG4gICAgaW5pdFN5c3RlbXMob3B0aW9ucy5kZWJ1Zyk7XHJcblxyXG4gICAgLy/nk7fnoJblnLDlm77vvIzoiJ7lj7BcclxuICAgIGlmKG9wdGlvbnMudGlsZW1hcCl7XHJcbiAgICAgICAgaW5pdFRpbGUob3B0aW9ucy50aWxlbWFwKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+W8gOWQr+eisOaSnuezu+e7n1xyXG4gICAgaWYob3B0aW9ucy5jb2xsaWRlKXtcclxuICAgICAgICAvL09wZW5Db2xsaWRlcihvcHRpb25zLmNvbGxpZGUpO1xyXG5cclxuICAgICAgICAvLyBpZihvcHRpb25zLnVzZVRpbGVDb21iaW5lKXtcclxuICAgICAgICAvLyAgICAgbGV0IHJlc3VsdE5vZGVzID0gQ3JlYXRlQ29tYmluZU5vZGVzKHRpbGVtYXAsIGNvbGxpZGUuYm94SGFuZGxlcik7XHJcbiAgICAgICAgLy8gICAgIHJlc3VsdE5vZGVzLmZvckVhY2gocmVzdWx0ID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbGxpZGUubG9hZENhbGxiYWNrKHJlc3VsdC52YWx1ZSwgcmVzdWx0LnJlY3QpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmkYTlg4/mnLrvvIzlhajlsYDljZXkvotcclxuICovXHJcbnZhciBjYW1lcmEgPSBudWxsO1xyXG5mdW5jdGlvbiBpbml0Q2FtZXJhKGNhbWVyYURhdGEgPSBudWxsLCBzY3JlZW5EYXRhID0gbnVsbCl7XHJcbiAgICBsZXQgd2lkdGggPSBjYW1lcmFEYXRhLndpZHRoID8gY2FtZXJhRGF0YS53aWR0aCA6IHNjcmVlbkRhdGEud2lkdGg7XHJcbiAgICBsZXQgaGVpZ2h0ID0gY2FtZXJhRGF0YS5oZWlnaHQgPyBjYW1lcmFEYXRhLmhlaWdodCA6IHNjcmVlbkRhdGEuaGVpZ2h0O1xyXG4gICAgY2FtZXJhID0gTmV3Q2FtZXJhKGNhbWVyYURhdGEueCwgY2FtZXJhRGF0YS55LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5mdW5jdGlvbiBHZXRDYW1lcmEoKXtcclxuICAgIHJldHVybiBjYW1lcmE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55O356CW5Zyw5Zu+77yM6Iie5Y+w77yM5YWo5bGA5Y2V5L6LXHJcbiAqL1xyXG52YXIgdGlsZW1hcCA9IG51bGw7XHJcbmZ1bmN0aW9uIGluaXRUaWxlKHRpbGVtYXBEYXRhID0gbnVsbCl7XHJcbiAgICB0aWxlbWFwID0gQ3JlYXRlVGlsZU1hcFdpdGhEYXRhKHRpbGVtYXBEYXRhLCB0aWxlbWFwRGF0YS5pbml0SGFuZGxlcik7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VGlsZW1hcCgpe1xyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcbmV4cG9ydHtpbml0R2FtZSwgaW5pdENhbWVyYSwgR2V0Q2FtZXJhLCBpbml0VGlsZSwgZ2V0VGlsZW1hcH0iLCJpbXBvcnQgeyBOZXdQb3MgfSBmcm9tIFwiLi4vcG9pbnRcIjtcclxuXHJcbi8qKlxyXG4gKiDlt7Lnn6Xnm7Tnur/kuIrnmoTkuKTngrlQMShYMSxZMSnlkoxQMihYMixZMinvvIxQMeWSjFAy5Lik54K55LiN6YeN5ZCI77yM5a+55LqOQVgrQlkrQz0w77yM5YiZ5pyJOlxyXG4gKiBBPVkyLVkxXHJcbiAqIEI9WDEtWDJcclxuICogQz1YMipZMS1YMSpZMlxyXG4gKiBcclxuICog5o6o5a+877yaaHR0cHM6Ly9iYWlrZS5iYWlkdS5jb20vaXRlbS8lRTclOUIlQjQlRTclQkElQkYlRTclOUElODQlRTQlQjglODAlRTglODglQUMlRTUlQkMlOEYlRTYlOTYlQjklRTclQTglOEJcclxuICovXHJcbmNsYXNzIEZvcm11bGFDIHtcclxuICAgIGNvbnN0cnVjdG9yKGEgPSAwLCBiID0gMCwgYyA9IDApe1xyXG4gICAgICAgIHRoaXMuYSA9IGE7XHJcbiAgICAgICAgdGhpcy5iID0gYjtcclxuICAgICAgICB0aGlzLmMgPSBjO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBuZXdGb3JtdWxhQyhsaW5lID0gbnVsbCl7XHJcbiAgICBsZXQgeTIgPSBsaW5lLmVuZC55O1xyXG4gICAgbGV0IHkxID0gbGluZS5zdGFydC55O1xyXG4gICAgbGV0IHgyID0gbGluZS5lbmQueDtcclxuICAgIGxldCB4MSA9IGxpbmUuc3RhcnQueDtcclxuICAgIFxyXG4gICAgbGV0IGEgPSB5MiAtIHkxO1xyXG4gICAgbGV0IGIgPSB4MSAtIHgyO1xyXG4gICAgbGV0IGMgPSB4MiAqIHkxIC0geDEgKiB5MjtcclxuICAgIHJldHVybiBuZXcgRm9ybXVsYUMoYSwgYiwgYyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmsYLkuKTnm7Tnur/kuqTngrlcclxuICog55So55u057q/5LiA6Iis5pa556iL5byPXHJcbiAqL1xyXG5mdW5jdGlvbiBpbnRlclNlY3Rpb25Qb3MoZm9ybXVsYTEgPSBudWxsLCBmb3JtdWxhMiA9IG51bGwpe1xyXG4gICAgbGV0IGExID0gZm9ybXVsYTEuYTtcclxuICAgIGxldCBiMSA9IGZvcm11bGExLmI7XHJcbiAgICBsZXQgYzEgPSBmb3JtdWxhMS5jO1xyXG4gICAgbGV0IGEyID0gZm9ybXVsYTIuYTtcclxuICAgIGxldCBiMiA9IGZvcm11bGEyLmI7XHJcbiAgICBsZXQgYzIgPSBmb3JtdWxhMi5jO1xyXG5cclxuICAgIGxldCBtID0gYTEgKiBiMiAtIGEyICogYjFcclxuICAgIGlmKG0gPT0gMCl7XHJcbiAgICAgICAgLy/ml6DkuqTngrlcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGxldCB4ID0gKGMyICogYjEgLSBjMSAqIGIyKSAvIG07XHJcbiAgICBsZXQgeSA9IChjMSAqIGEyIC0gYzIgKiBhMSkgLyBtO1xyXG4gICAgcmV0dXJuIE5ld1Bvcyh4LCB5KTtcclxufVxyXG5cclxuZXhwb3J0e25ld0Zvcm11bGFDLCBpbnRlclNlY3Rpb25Qb3N9IiwiaW1wb3J0IHsgTmV3UG9zLCBOZXdWZWNXaXRoUG9zLCBHZXREaXN0YW5jZSB9IGZyb20gXCIuL3BvaW50XCI7XHJcbmltcG9ydCB7IG5ld0Zvcm11bGFDIH0gZnJvbSBcIi4vZm9ybXVsYS9hYmNcIjtcclxuXHJcbi8qKlxyXG4gKiDln7rnoYDnur/mrrVcclxuICogc3RhcnQgPSBQb3MoeCwgeSlcclxuICogZW5kID0gUG9zKHgsIHkpXHJcbiAqL1xyXG5jbGFzcyBMaW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKHN0YXJ0ID0gbnVsbCwgdmVjID0gbnVsbCl7XHJcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgIHRoaXMudmVjID0gdmVjO1xyXG4gICAgICAgIHRoaXMuZW5kID0gTmV3UG9zKHN0YXJ0LnggKyB2ZWMueCwgc3RhcnQueSArIHZlYy55KTtcclxuICAgICAgICB0aGlzLmZvcm11bGEgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdMaW5lV2l0aFZlYyh4ID0gMCwgeSA9IDAsIHZ4ID0gMCwgdnkgPSAwKXtcclxuICAgIGxldCB2ZWMgPSBOZXdWZWModngsIHZ5KTtcclxuICAgIHJldHVybiBuZXdMaW5lKHgsIHksIHZlYyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld0xpbmVXaXRoUG9zKHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICBsZXQgdmVjID0gTmV3VmVjV2l0aFBvcyh4MSwgeTEsIHgyLCB5Mik7XHJcbiAgICByZXR1cm4gbmV3TGluZSh4MSwgeTEsIHZlYyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5ld0xpbmUoeCA9IDAsIHkgPSAwLCB2ZWMgPSBudWxsKXtcclxuICAgIGlmKEdldERpc3RhbmNlKHZlYykgPT0gMCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgbGluZSA9IG5ldyBMaW5lKE5ld1Bvcyh4LCB5KSwgdmVjKTtcclxuICAgIGxldCBmb3JtdWxhID0gbmV3Rm9ybXVsYUMobGluZSk7XHJcbiAgICBsaW5lLmZvcm11bGEgPSBmb3JtdWxhO1xyXG4gICAgcmV0dXJuIGxpbmU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rnoYDlsZ7mgKcgXHJcbiAqL1xyXG5mdW5jdGlvbiBHZXRTdGFydFBvcyhsaW5lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gbGluZS5zdGFydDtcclxufVxyXG5mdW5jdGlvbiBHZXRFbmRQb3MobGluZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGxpbmUuZW5kO1xyXG59XHJcbmZ1bmN0aW9uIEdldFZlYyhsaW5lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gbGluZS52ZWM7XHJcbn1cclxuXHJcbmV4cG9ydHsgTmV3TGluZVdpdGhWZWMsIE5ld0xpbmVXaXRoUG9zLCBcclxuICAgIEdldFN0YXJ0UG9zLCBHZXRFbmRQb3MsIEdldFZlY30iLCJpbXBvcnQgeyBOZXdQb3MgfSBmcm9tIFwiLi9wb2ludFwiO1xyXG5pbXBvcnQgeyBOZXdSZWN0LCBHZXRSZWN0U3RhcnRQb3MsIEdldFJlY3RFbmRQb3MsIEdldFJlY3RDZW50ZXJQb3MsIEdldFJlY3RIYWxmV2lkdGgsIEdldFJlY3RIYWxmSGVpZ2h0LCBGaXhVbml0UG9zLCBVcGRhdGVSZWN0Q2VudGVyUG9zIH0gZnJvbSBcIi4vcmVjdFwiO1xyXG5pbXBvcnQgeyBpbnRlclNlY3Rpb25Qb3MgfSBmcm9tIFwiLi9mb3JtdWxhL2FiY1wiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDmsYLkuKTnm7Tnur/kuqTngrlcclxuICog55So55u057q/5LiA6Iis5pa556iL5byPXHJcbiAqL1xyXG5mdW5jdGlvbiBJbnRlclNlY3Rpb25Qb3MobGluZTEgPSBudWxsLCBsaW5lMiA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGludGVyU2VjdGlvblBvcyhsaW5lMS5mb3JtdWxhLCBsaW5lMi5mb3JtdWxhKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOaYr+WQpuW5s+ihjOS6jngseei9tOeahOe6v1xyXG4gKi9cclxuZnVuY3Rpb24gSXNIb3Jpem9udGFsTGluZShsaW5lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gbGluZS52ZWMueSA9PSAwO1xyXG59XHJcbmZ1bmN0aW9uIElzVmVydGljYWxMaW5lKGxpbmUgPSBudWxsKXtcclxuICAgIHJldHVybiBsaW5lLnZlYy54ID09IDA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkuKTkuKrnn6nlvaLmmK/lkKbnm7jkuqTvvIzln7rnoYDnorDmkp7mo4DmtYvvvIjpnIDopoHlhYjmm7TmlrDlnZDmoIfvvIlcclxuICog5Y6f55CG77yaXHJcbiAqICDlt6Z477yM5Y+W5Lik6ICF5pyA5aSn5YC8XHJcbiAqICDlj7N477yM5Y+W5Lik6ICF5pyA5bCP5YC8XHJcbiAqICDlpoLmnpzlj7N45aSn5LqO5bemeO+8jOWImXjovbTnm7jkuqRcclxuICogWeWQjOeQhu+8mlxyXG4gKiAg5LiKee+8jOWPluS4pOiAheacgOWkp+WAvFxyXG4gKiAg5LiLee+8jOWPluS4pOiAheacgOWwj+WAvFxyXG4gKiAg5aaC5p6c5LiLeeWkp+S6juS4innvvIzliJl56L2055u45LqkXHJcbiAqICDnm67liY3vvIzljbPkvb/kuKTovrnph43lj6DvvIzkuZ/kuI3nrpfnm7jkuqTvvIzov5nmoLfog73pgb/lhY3lvojlpJrpl67pophcclxuICovXHJcbmZ1bmN0aW9uIE5ld0lubmVyUmVjdChyZWN0MSA9IG51bGwsIHJlY3QyID0gbnVsbCl7XHJcblxyXG4gICAgbGV0IHN0YXJ0MSA9IEdldFJlY3RTdGFydFBvcyhyZWN0MSk7XHJcbiAgICBsZXQgc3RhcnQyID0gR2V0UmVjdFN0YXJ0UG9zKHJlY3QyKTtcclxuICAgIGxldCBlbmQxID0gR2V0UmVjdEVuZFBvcyhyZWN0MSk7XHJcbiAgICBsZXQgZW5kMiA9IEdldFJlY3RFbmRQb3MocmVjdDIpO1xyXG5cclxuICAgIGxldCByMXgxID0gc3RhcnQxLng7XHJcbiAgICBsZXQgcjJ4MSA9IHN0YXJ0Mi54O1xyXG4gICAgbGV0IG1heFgxID0gcjF4MSA+IHIyeDEgPyByMXgxIDogcjJ4MTtcclxuXHJcbiAgICBsZXQgcjF4MiA9IGVuZDEueDtcclxuICAgIGxldCByMngyID0gZW5kMi54O1xyXG4gICAgbGV0IG1pblgyID0gcjF4MiA8IHIyeDIgPyByMXgyIDogcjJ4MjtcclxuICAgIGlmKG1pblgyID4gbWF4WDEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByMXkxID0gc3RhcnQxLnk7XHJcbiAgICBsZXQgcjJ5MSA9IHN0YXJ0Mi55O1xyXG4gICAgbGV0IG1heFkxID0gcjF5MSA+IHIyeTEgPyByMXkxIDogcjJ5MTtcclxuICAgIGxldCByMXkyID0gZW5kMS55O1xyXG4gICAgbGV0IHIyeTIgPSBlbmQyLnk7XHJcbiAgICBsZXQgbWluWTIgPSByMXkyIDwgcjJ5MiA/IHIxeTIgOiByMnkyO1xyXG4gICAgaWYobWluWTIgPiBtYXhZMSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5ld1JlY3QoMCwgMCwgbWluWDIgLSBtYXhYMSwgbWluWTIgLSBtYXhZMSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliKTmlq3mmK/lkKbnm7jkuqRcclxuICog5pqC5pe25L2/55SoTmV3SW5uZXJSZWN077yM5ZCO5pyf55yL5oOF5Ya15piv5ZCm6ZyA6KaB5omL5Yqo5Zue5pS26LWE5rqQIFxyXG4gKi9cclxuZnVuY3Rpb24gSXNSZWN0c0Nyb3NzKHJlY3QxID0gbnVsbCwgcmVjdDIgPSBudWxsKXtcclxuICAgIGxldCByZWN0ID0gTmV3SW5uZXJSZWN0KHJlY3QxLCByZWN0Mik7XHJcbiAgICByZXR1cm4gcmVjdCA/IHRydWUgOiBmYWxzZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBpbm5lci5yZWN05LiN5YeG6LaK5Ye6b3V0dGVyLnJlY3TvvIzkv67mraNwb3PkvY3nva5cclxuICogaW5uZXLlkoxvdXR0ZXLpg73mmK9yZWN0VHVwbGVcclxuICovXHJcbmZ1bmN0aW9uIEZpeEluUmVjdChvdXR0ZXIgPSBudWxsLCBpbm5lciA9IG51bGwsIGlubmVyVW5pdFBvcyA9IG51bGwpe1xyXG4gICAgbGV0IGlubmVyUG9zID0gR2V0UmVjdENlbnRlclBvcyhpbm5lcik7XHJcbiAgICBsZXQgaW5uZXJTdGFydFBvcyA9IEdldFJlY3RTdGFydFBvcyhpbm5lcik7XHJcbiAgICBsZXQgaW5uZXJFbmRQb3MgPSBHZXRSZWN0RW5kUG9zKGlubmVyKTtcclxuICAgIGxldCBvdXR0ZXJTdGFydFBvcyA9IEdldFJlY3RTdGFydFBvcyhvdXR0ZXIpO1xyXG4gICAgbGV0IG91dHRlckVuZFBvcyA9IEdldFJlY3RFbmRQb3Mob3V0dGVyKTtcclxuXHJcbiAgICBsZXQgeCA9IGlubmVyUG9zLng7XHJcbiAgICBpZihpbm5lclN0YXJ0UG9zLnggPCBvdXR0ZXJTdGFydFBvcy54KXtcclxuICAgICAgICB4ID0gb3V0dGVyU3RhcnRQb3MueCArIEdldFJlY3RIYWxmV2lkdGgoaW5uZXIpO1xyXG4gICAgfWVsc2UgaWYoaW5uZXJFbmRQb3MueCA+IG91dHRlckVuZFBvcy54KXtcclxuICAgICAgICB4ID0gb3V0dGVyRW5kUG9zLnggLSBHZXRSZWN0SGFsZldpZHRoKGlubmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgeSA9IGlubmVyUG9zLnk7XHJcbiAgICBpZihpbm5lclN0YXJ0UG9zLnkgPCBvdXR0ZXJTdGFydFBvcy55KXtcclxuICAgICAgICB5ID0gb3V0dGVyU3RhcnRQb3MueSArIEdldFJlY3RIYWxmSGVpZ2h0KGlubmVyKTtcclxuICAgIH1lbHNlIGlmKGlubmVyRW5kUG9zLnkgPiBvdXR0ZXJFbmRQb3MueSl7XHJcbiAgICAgICAgeSA9IG91dHRlclN0YXJ0UG9zLnkgLSBHZXRSZWN0SGFsZkhlaWdodChpbm5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoeCAhPSBpbm5lclBvcy54IHx8IHkgIT0gaW5uZXJQb3MueSl7XHJcbiAgICAgICAgVXBkYXRlUmVjdENlbnRlclBvcyhpbm5lciwgeCwgeSk7XHJcbiAgICAgICAgRml4VW5pdFBvcyhyZWN0LCBpbm5lclVuaXRQb3MpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOW9k+WJjeS9jee9ruaYr+WQpuWcqOefqeW9ouS4re+8iOWQjOagt+mcgOimgeWFiOabtOaWsHJlY3TkvY3nva7vvIlcclxuICog6L+Z6YeM5LiN5YyF5ZCr6Lip57q/77yM5Zug5q2k5LiN6IO955SoPj3lkow8PVxyXG4gKiDkuLrkuobpgb/lhY3nsbvkvLwgdGlsZeeahCByb3dJbmRleCA9IHgvZ3JpZFdpZHRo5a+86Ie05pWw57uE6LaK55WM6Zeu6aKYXHJcbiAqL1xyXG5mdW5jdGlvbiBJc1Bvc0luUmVjdCh4ID0gMCwgeSA9IDAsIHJlY3QgPSBudWxsKXtcclxuICAgIGxldCBzdGFydFBvcyA9IEdldFJlY3RTdGFydFBvcyhyZWN0KTtcclxuICAgIGxldCBlbmRQb3MgPSBHZXRSZWN0RW5kUG9zKHJlY3QpO1xyXG4gICAgcmV0dXJuIHggPiBzdGFydFBvcy54ICYmIHggPCBlbmRQb3MueFxyXG4gICAgICAgICYmIHkgPiBzdGFydFBvcy55ICYmIHkgPCBlbmRQb3MueTtcclxufVxyXG5cclxuZXhwb3J0IHtJbnRlclNlY3Rpb25Qb3MsIFxyXG4gICAgSXNIb3Jpem9udGFsTGluZSwgSXNWZXJ0aWNhbExpbmUsXHJcbiAgICBJc1JlY3RzQ3Jvc3MsIEZpeEluUmVjdCwgSXNQb3NJblJlY3R9XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tIOS7peS4i+W+heWumlxyXG5cclxuLyoqXHJcbiAqIOagueaNrue6v+auteS9nOefqeW9olxyXG4gKi9cclxuZnVuY3Rpb24gTmV3T3V0dGVyUmVjdCh4MSA9IDAsIHkxID0gMCwgeDIgPSAwLCB5MiA9IDApe1xyXG4gICAgbGV0IHdpZHRoID0geDIgLSB4MTtcclxuICAgIGxldCBoZWlnaHQgPSB5MiAtIHkxO1xyXG4gICAgaWYod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgY2VudGVyWCA9IHgxICsgKHgyIC0geDEpICogMC41O1xyXG4gICAgbGV0IGNlbnRlclkgPSB5MSArICh5MiAtIHkxKSAqIDAuNTtcclxuICAgIGxldCByZWN0ID0gTmV3UmVjdERlZmF1bHQod2lkdGgsIGhlaWdodCk7XHJcbiAgICBVcGRhdGVSZWN0UG9zKHJlY3QsIGNlbnRlclgsIGNlbnRlclkpO1xyXG4gICAgcmV0dXJuIHJlY3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkuKTkuKrnn6nlvaLpl7TnmoTlpJbmjqXnn6nlvaJcclxuICovXHJcbmZ1bmN0aW9uIE5ld091dHRlclJlY3RCeVJlY3RzKHJlY3QxID0gbnVsbCwgcmVjdDIgPSBudWxsKXtcclxuICAgIGxldCByMXgxID0gR2V0UmVjdFgxKHJlY3QxKTtcclxuICAgIGxldCByMngxID0gR2V0UmVjdFgxKHJlY3QyKTtcclxuICAgIGxldCB4MSA9IHIxeDEgPCByMngxID8gcjF4MSA6IHIyeDE7XHJcbiAgICBsZXQgcjF4MiA9IEdldFJlY3RYMihyZWN0MSk7XHJcbiAgICBsZXQgcjJ4MiA9IEdldFJlY3RYMihyZWN0Mik7XHJcbiAgICBsZXQgeDIgPSByMXgyID4gcjJ4MiA/IHIxeDIgOiByMngyO1xyXG5cclxuICAgIGxldCByMXkxID0gR2V0UmVjdFkxKHJlY3QxKTtcclxuICAgIGxldCByMnkxID0gR2V0UmVjdFkxKHJlY3QyKTtcclxuICAgIGxldCB5MSA9IHIxeTEgPCByMnkxID8gcjF5MSA6IHIyeTE7XHJcbiAgICBsZXQgcjF5MiA9IEdldFJlY3RZMihyZWN0MSk7XHJcbiAgICBsZXQgcjJ5MiA9IEdldFJlY3RZMihyZWN0Mik7XHJcbiAgICBsZXQgeTIgPSByMXkyID4gcjJ5MiA/IHIxeTIgOiByMnkyO1xyXG5cclxuICAgIHJldHVybiBOZXdPdXR0ZXJSZWN0KHgxLCB5MSwgeDIsIHkyKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDnn6nlvaLmjpLmlqXvvIx0YXJnZXRSZWN05Lya6KKrYmxvY2tSZWN05by55Ye65Y67XHJcbiAqIFRPRE/vvIzku6XlkI7lrozlloTms6jph4pcclxuICovXHJcbmZ1bmN0aW9uIEZpeEV4Y2x1ZGVSZWN0KGJsb2NrUmVjdCA9IG51bGwsIHRhcmdldFJlY3QgPSBudWxsKXtcclxuICAgIGxldCBwb3MxID0gYmxvY2tSZWN0LnBvcztcclxuICAgIGxldCBwb3MyID0gdGFyZ2V0UmVjdC5wb3M7XHJcbiAgICAvL+iuoeeul+WFs+ezu++8jOS4iuS4i+W3puWPs1xyXG4gICAgbGV0IHZ4ID0gcG9zMS54IC0gcG9zMi54O1xyXG4gICAgbGV0IHZ5ID0gcG9zMS55IC0gcG9zMi55O1xyXG4gICAgbGV0IHggPSB2eCA8IDAgPyB2eCotMSA6IHZ4O1xyXG4gICAgbGV0IHkgPSB2eSA8IDAgPyB2eSotMSA6IHZ5O1xyXG4gICAgaWYoeCA+IHkpe1xyXG4gICAgICAgIC8v5bem5Y+zXHJcbiAgICAgICAgaWYodnggPiAwKXtcclxuICAgICAgICAgICAgLy9yZWN0MuWcqOW3plxyXG4gICAgICAgICAgICBwb3MyLnggPSBibG9ja1JlY3QucG9zU3RhcnQueCAtIHRhcmdldFJlY3Qud2lkdGggLSB0YXJnZXRSZWN0LnhPZmZzZXQ7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vcmVjdDLlnKjlj7NcclxuICAgICAgICAgICAgcG9zMi54ID0gYmxvY2tSZWN0LnBvc0VuZC54IC0gdGFyZ2V0UmVjdC54T2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1lbHNle1xyXG4gICAgICAgIC8v5LiK5LiLXHJcbiAgICAgICAgaWYodnkgPiAwKXtcclxuICAgICAgICAgICAgLy9yZWN0MuWcqOS4ilxyXG4gICAgICAgICAgICBwb3MyLnkgPSBibG9ja1JlY3QucG9zU3RhcnQueSAtIHRhcmdldFJlY3QuaGVpZ2h0IC0gdGFyZ2V0UmVjdC55T2Zmc2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAvL3JlY3Qy5Zyo5LiLXHJcbiAgICAgICAgICAgIHBvczIueSA9IGJsb2NrUmVjdC5wb3NFbmQueSAtIHRhcmdldFJlY3QueU9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBVcGRhdGVSZWN0KHRhcmdldFJlY3QpO1xyXG59XHJcblxyXG4vKipcclxuICogcmVjdDHmmK/lkKblrozlhajov4fkuoZyZWN0MlxyXG4gKi9cclxuZnVuY3Rpb24gSXNSZWN0c0Nyb3NzT3ZlcihyZWN0MSA9IG51bGwsIHJlY3QyID0gbnVsbCl7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBJc1JlY3RzQ3Jvc3NXaXRoVmVjKHJlY3QxID0gbnVsbCwgdnggPSAwLCB2eSA9IDAsIHJlY3QyID0gbnVsbCl7XHJcbiAgICBcclxufSIsImltcG9ydCB7IGdldEVuZ2luZSB9IGZyb20gXCIuL21vZGVsXCI7XHJcblxyXG52YXIgX2VuZ2luZSA9IGdldEVuZ2luZSgpO1xyXG5cclxuZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICBsZXQgYyA9IF9lbmdpbmUuY2FudmFzO1xyXG4gICAgX2VuZ2luZS5jdHguY2xlYXJSZWN0KDAsIDAsIGMud2lkdGgsIGMuaGVpZ2h0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gRHJhdyhpbWdEYXRhLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCkge1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG5cdGN0eC5kcmF3SW1hZ2UoaW1nRGF0YSwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmNvbnN0IFJhZGl1cyA9IE1hdGguUEkvMTgwO1xyXG5mdW5jdGlvbiBEcmF3SW1hZ2VXaXRoQW5nbGUoYW5nbGUgPSAwLCBpbWdEYXRhLCBzeCA9IDAsIHN5ID0gMCwgc3dpZHRoID0gMCwgc2hlaWdodCA9IDAsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKSB7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcbiAgICBjdHguc2F2ZSgpO1xyXG4gICAgY3R4LnRyYW5zbGF0ZSh4ICsgd2lkdGgvMiwgeSArIGhlaWdodC8yKTtcclxuICAgIGN0eC5yb3RhdGUoYW5nbGUgKiBSYWRpdXMpO1xyXG4gICAgRHJhd0ltYWdlKGltZ0RhdGEsIHN4LCBzeSwgc3dpZHRoLCBzaGVpZ2h0LCAtd2lkdGgvMiwgLWhlaWdodC8yLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgLy8gY3R4LnRyYW5zbGF0ZSgxMDAsIDEwMCk7XHJcblx0Ly8gY3R4LnJvdGF0ZSg5MCAqIE1hdGguUEkvMTgwKTtcdC8v5Lul5LiK6Z2i55qE5YGP56e754K55Li65YeG77yM6L+b6KGM5peL6L2sXHJcblx0Ly8gY3R4LmRyYXdJbWFnZShpLCAxODcsIDAsIDE4NiwgMTMwLCAtMCwgLTAsIDEwMCwgMTAwKTtcclxufVxyXG5cclxuLy/lj4LogIPvvJpjb250ZXh0LmRyYXdJbWFnZShpbWcsc3gsc3ksc3dpZHRoLHNoZWlnaHQseCx5LHdpZHRoLGhlaWdodCk7XHJcbmZ1bmN0aW9uIGRyYXdJbWFnZShpbWdEYXRhLCBzeCA9IDAsIHN5ID0gMCwgc3dpZHRoID0gMCwgc2hlaWdodCA9IDAsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKSB7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcblx0Y3R4LmRyYXdJbWFnZShpbWdEYXRhLCBzeCwgc3ksIHN3aWR0aCwgc2hlaWdodCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdSZWN0KHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuICAgIGN0eC5zdHJva2VSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZSh4MSA9IDAsIHkxID0gMCwgeDIgPSAwLCB5MiA9IDApe1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyh4MSwgeTEpO1xyXG4gICAgY3R4LmxpbmVUbyh4MiwgeTIpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3Q2lyY2xlKHggPSAwLCB5ID0gMCwgcmFkaXVzID0gMCl7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguYXJjKHgsIHksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG59XHJcblxyXG5leHBvcnR7Y2xlYXIsIGRyYXdJbWFnZSwgZHJhd1JlY3QsIGRyYXdMaW5lLCBkcmF3Q2lyY2xlfSIsIlxyXG4vKipcclxuICog6K6w5b2VYml0bWFwRGF0YeeahOWJquijgeWMuuWfn1xyXG4gKi9cclxuY2xhc3MgVGV4dHVyZUFyZWEge1xyXG4gICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDkuIDlvKDlm77kuK3nmoTkuIDkuKrljLrln5/vvIznurnnkIbluKfmiJbnsr7ngbXluKfvvIzljZXkvovvvIzlkozlvJXmk47mnInlhbNcclxuICog57K+54G15bin55So5LqO5qCH5Ye65LiA5byg57q555CG5Zu+55qE5oyH5a6a5Y+W5p2Q5Yy65Z+f77yM5Lul5Y+K55u45a+555qE5pi+56S65L2N572uXHJcbiAqL1xyXG5jbGFzcyBTcHJpdGVGcmFtZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lID0gXCJcIiwgYml0bWFwRGF0YSA9IG51bGwsIHRleHR1cmVBcmVhID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5iaXRtYXBEYXRhID0gYml0bWFwRGF0YTtcclxuICAgICAgICB0aGlzLnRleHR1cmVBcmVhID0gdGV4dHVyZUFyZWE7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5om+5LiN5Yiw5bin5pe255qE6buY6K6k56m65bin77yM5Y+v5Lul5piv5LiA5byg57qi5Y+J5Zu+54mH77yMXHJcbiAqIFRPRE8g5byV5YWl6buY6K6k6LWE5rqQ5py65Yi2XHJcbiAqL1xyXG52YXIgX3Nwcml0ZUZyYW1lTWFwID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBnZXRTcHJpdGVGcmFtZUJ5TmFtZShuYW1lID0gXCJcIil7XHJcbiAgICBsZXQgZiA9IF9zcHJpdGVGcmFtZU1hcC5nZXQobmFtZSk7XHJcbiAgICByZXR1cm4gZiA/IGYgOiBfc3ByaXRlRnJhbWVNYXAuZ2V0KFwiZGVmYWx1dFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3ByaXRlRnJhbWUobmFtZSA9IFwiXCIsIGJpdG1hcERhdGEgPSBudWxsLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBpZihfc3ByaXRlRnJhbWVNYXAuZ2V0KG5hbWUpKXtcclxuICAgICAgICAvL2V4aXN0c1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGYgPSBuZXcgU3ByaXRlRnJhbWUobmFtZSwgYml0bWFwRGF0YSwgbmV3IFRleHR1cmVBcmVhKHgsIHksIHdpZHRoLCBoZWlnaHQpKTtcclxuICAgIF9zcHJpdGVGcmFtZU1hcC5zZXQobmFtZSwgZik7XHJcbiAgICByZXR1cm4gZjtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0U3ByaXRlRnJhbWVXaWR0aChzcHJpdGVGcmFtZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHNwcml0ZUZyYW1lLnRleHR1cmVBcmVhLndpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldFNwcml0ZUZyYW1lSGVpZ2h0KHNwcml0ZUZyYW1lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gc3ByaXRlRnJhbWUudGV4dHVyZUFyZWEuaGVpZ2h0O1xyXG59XHJcblxyXG5leHBvcnR7Z2V0U3ByaXRlRnJhbWVCeU5hbWUsIGNyZWF0ZVNwcml0ZUZyYW1lLCBHZXRTcHJpdGVGcmFtZVdpZHRoLCBHZXRTcHJpdGVGcmFtZUhlaWdodH0iLCJpbXBvcnQgeyBkcmF3SW1hZ2UsIGRyYXdSZWN0LCBkcmF3TGluZSwgZHJhd0NpcmNsZSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9yZW5kZXJcIjtcclxuaW1wb3J0IHsgZ2V0U3ByaXRlRnJhbWVCeU5hbWUgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZnJhbWVcIjtcclxuXHJcbiAvKipcclxuICAqIOiOt+WPlueyvueBteW4p1xyXG4gICogVE9ETyDlj6/og73kvJrmlLnmiJBpZOW9ouW8j1xyXG4gICovXHJcbiBmdW5jdGlvbiBHZXRTcHJpdGVGcmFtZShuYW1lID0gXCJcIil7XHJcbiAgICBpZihuYW1lID09IFwiXCIpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdldFNwcml0ZUZyYW1lQnlOYW1lKG5hbWUpO1xyXG59XHJcblxyXG4vKipcclxuICogVE9ETyDlj6/og73kvJrmlLnmiJBzcHJpdGVGcmFtZUlk5Y+C5pWwXHJcbiAqIOS7peS4i+eahHgsIHkg6YO95piv5bGP5bmV5Z2Q5qCHXHJcbiAqL1xyXG5mdW5jdGlvbiBEcmF3RnJhbWUoc3ByaXRlRnJhbWUgPSBudWxsLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBsZXQgdGV4dHVyZUFyZWEgPSBzcHJpdGVGcmFtZS50ZXh0dXJlQXJlYTtcclxuICAgIGRyYXdJbWFnZShzcHJpdGVGcmFtZS5iaXRtYXBEYXRhLFxyXG4gICAgICAgIHRleHR1cmVBcmVhLngsIHRleHR1cmVBcmVhLnksIHRleHR1cmVBcmVhLndpZHRoLCB0ZXh0dXJlQXJlYS5oZWlnaHQsXHJcbiAgICAgICAgeCwgeSAsIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEcmF3UmVjdCh4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBkcmF3UmVjdCh4LCB5ICwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERyYXdMaW5lKHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICBkcmF3TGluZSh4MSwgeTEsIHgyLCB5Mik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERyYXdDaXJjbGUoeCA9IDAsIHkgPSAwLCByYWRpdXMgPSAwKXtcclxuICAgIGRyYXdDaXJjbGUoeCwgeSwgcmFkaXVzKTtcclxufVxyXG5cclxuZXhwb3J0e0dldFNwcml0ZUZyYW1lLCBEcmF3RnJhbWUsIERyYXdSZWN0LCBEcmF3TGluZSwgRHJhd0NpcmNsZX0iLCJpbXBvcnQgZGF0YSBmcm9tICcuL2RhdGEnO1xyXG5pbXBvcnQgeyBTdGFydEdhbWVUZXN0IH0gZnJvbSAnLi9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvZ2FtZSc7XHJcbmltcG9ydCB7IE5ld1BvcyB9IGZyb20gJy4vZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50JztcclxuaW1wb3J0IHsgTmV3TGluZVdpdGhQb3MgfSBmcm9tICcuL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9saW5lJztcclxuaW1wb3J0IHsgSW50ZXJTZWN0aW9uUG9zIH0gZnJvbSAnLi9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvdXRpbHMnO1xyXG5pbXBvcnQgeyBEcmF3Q2lyY2xlIH0gZnJvbSAnLi9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvcmVuZGVyJztcclxuXHJcbi8qKlxyXG4gKiAgMjAxOS4xMC4wOVxyXG4gKiAgICAgIHZz5b+954S25LiN5o+Q56S6aW1wb3J05LqG77yM5oyJ54Wn572R5LiK55qE5pa55rOV77yM5Yqg5LqG5LiqanNjb25maWcuanNvbuWwseWPr+S7peS6hlxyXG4gKi9cclxuXHJcbi8v6LCo6K6w5pWw5o2u6amx5YqoXHJcbnZhciBvcHRpb25zID0ge1xyXG4gICAgZGVidWcgOiBmYWxzZSxcclxuICAgIGZwcyA6IGRhdGEuZnBzLFxyXG4gICAgc2NyZWVuIDoge1xyXG4gICAgICAgIHdpZHRoIDogZGF0YS5zY3JlZW4ud2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0IDogZGF0YS5zY3JlZW4uaGVpZ2h0XHJcbiAgICB9LFxyXG4gICAgc3RhZ2UgOiB7XHJcbiAgICAgICAgd2lkdGggOiBkYXRhLnN0YWdlLndpZHRoLFxyXG4gICAgICAgIGhlaWdodCA6IGRhdGEuc3RhZ2UuaGVpZ2h0XHJcbiAgICB9LFxyXG4gICAgY2FtZXJhIDoge1xyXG4gICAgICAgIHggOiBkYXRhLmNhbWVyYS54LFxyXG4gICAgICAgIHkgOiBkYXRhLmNhbWVyYS55XHJcbiAgICB9LFxyXG4gICAgbW91c2Vkb3duSGFuZGxlciA6IG1vdXNlZG93bkhhbmRsZXIsXHJcbiAgICBtb3VzZXVwSGFuZGxlciA6IG1vdXNldXBIYW5kbGVyXHJcbn1cclxuXHJcbnZhciBzdGFydFBvcztcclxudmFyIGxpbmUxO1xyXG52YXIgbGluZTI7XHJcblxyXG5mdW5jdGlvbiBtb3VzZWRvd25IYW5kbGVyKHggPSAwLCB5ID0gMCl7XHJcbiAgICBzdGFydFBvcyA9IE5ld1Bvcyh4LCB5KTtcclxufVxyXG5mdW5jdGlvbiBtb3VzZXVwSGFuZGxlcih4ID0gMCwgeSA9IDApe1xyXG4gICAgaWYoIXN0YXJ0UG9zKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZighbGluZTEpe1xyXG4gICAgICAgIGxpbmUxID0gTmV3TGluZVdpdGhQb3Moc3RhcnRQb3MueCwgc3RhcnRQb3MueSwgeCwgeSk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBsaW5lMiA9IE5ld0xpbmVXaXRoUG9zKHN0YXJ0UG9zLngsIHN0YXJ0UG9zLnksIHgsIHkpO1xyXG4gICAgfVxyXG4gICAgRHJhd0xpbmUoc3RhcnRQb3MueCwgc3RhcnRQb3MueSwgeCwgeSk7XHJcbiAgICBpZihsaW5lMSAmJiBsaW5lMil7XHJcbiAgICAgICAgbGV0IHBvcyA9IEludGVyU2VjdGlvblBvcyhsaW5lMSwgbGluZTIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBvcyk7XHJcbiAgICAgICAgRHJhd0NpcmNsZShwb3MueCwgcG9zLnksIDEwKTtcclxuICAgIH1cclxuICAgIHN0YXJ0UG9zID0gbnVsbDtcclxufVxyXG5cclxuY2xhc3MgTXlTY2VuZSB7XHJcbiAgICBvblN0YXJ0KCl7XHJcblxyXG4gICAgfVxyXG4gICAgb25VcGRhdGUoZHQgPSAwKXtcclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuKGZ1bmN0aW9uICgpe1xyXG4gICAgY29uc29sZS5sb2cob3B0aW9ucyk7XHJcbiAgICBTdGFydEdhbWVUZXN0KG9wdGlvbnMsIG5ldyBNeVNjZW5lKCkpO1xyXG59KSgpIl0sInNvdXJjZVJvb3QiOiIifQ==