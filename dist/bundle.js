!function(n){var t={};function e(l){if(t[l])return t[l].exports;var r=t[l]={i:l,l:!1,exports:{}};return n[l].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=n,e.c=t,e.d=function(n,t,l){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:l})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var l=Object.create(null);if(e.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)e.d(l,r,function(t){return n[t]}.bind(null,r));return l},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)}([function(n){n.exports={screen:{width:400,height:400},fps:60,camera:{x:0,y:0},stage:{width:1800,height:1800},tilemap:{data:[1,1,1,1,1,1,1,1,1,1,1,2,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,1,0,0,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1],columns:10,gridWidth:40,gridHeight:40}}},function(n,t,e){"use strict";e.r(t);var l=e(0);class r{constructor(){this.id=u()}}var i=1;function u(){return i++}class o{constructor(n=0){this.entityId=n,this.id=n}}class c{constructor(n=0){this.priority=n,this.id=u()}onStart(){}onUpdate(n=0){}onEnd(){}}const s=2;function a(n=null,t=0){n.onUpdate(t)}function d(n=null){n.state=s,n.onEnd()}class f{constructor(n=null,t=null,e=null){this.data=n,this.prep=t,this.next=e}}class h{constructor(){this.head=new f,this.tail=new f,this.head.next=this.tail,this.tail.prep=this.head,this._map=new Map,this._size=0,this._delList=[],this._curr=this.head,this._lock=!1}}function p(){return new h}function g(n=null,t=0,e=!1){if(!n)return void console.error("link is null.");let l=n._map.get(t);return l?l.data:(e&&console.error("can't find keyId: ",t),null)}function x(n=null,t=null){return y(n,t,n.tail)}function y(n=null,t=null,e=null){if(!n||!t||!t.id)return console.error("error param: ",n,t,t.id),null;if(n._map.get(t.id))return console.error("error id:%d is exist",t.id),null;let l=e.prep,r=new f(t,l,e);return l.next=r,e.prep=r,n._map.set(t.id,r),n._size++,r}function w(n=null,t=0){let e=n._map.get(t);if(!e)return;n._map.delete(t);let l=e.prep,r=e.next;l.next=r,r.prep=l,n._size--}function m(n=null,t=null){if(!n||!t)return;n._lock=!0;let e=n.head.next;for(;e!=n.tail&&!t(e.data);)e=e.next;for(;n._delList.length>0;)w(n,n._delList.pop());n._lock=!1}var v=p();class _ extends c{onUpdate(n=0){m(v,t=>{a(t,n),t.isEnd()&&d(t)})}}var k=null;p();var H=p();class b{constructor(n=0,t=0){this.x=n,this.y=t}}function I(n=0,t=0){return new b(n,t)}class U{constructor(n=0,t=0){this.x=n,this.y=t,this.distance=n*n+t*t}}function S(n=0,t=0){return new U(n,t)}class E extends o{constructor(n=0,t=0,e=0){super(n),this.pos=I(t,e),this.vec=S()}}var j=p();function L(n=0){let t=g(j,n);return t||function(n=0){let t=new E(n);return x(j,t),t}(n)}function M(){return j}function O(n=0,t=0,e=0){let l=L(n).pos;return l.x=t,l.y=e,l}class C{constructor(n=null,t=0,e=0,l=null){this.offset=n,this.width=t,this.height=e,this.center=l}}function D(n=0,t=0,e=0,l=0){let r=S(n,t);return new C(r,e,l,I())}function P(n=null,t=0,e=0){n.center.x=t,n.center.y=e}function W(n=null,t=0,e=0){n.center.x=t+n.offset.x,n.center.y=e+n.offset.y}function T(n=null){return I(n.center.x-B(n),n.center.y-F(n))}function R(n=null){return I(n.center.x+B(n),n.center.y+F(n))}function z(n=null){return n.width}function A(n=null){return n.height}function B(n=null){return.5*n.width}function F(n=null){return.5*n.height}function X(n=null,t=null){return!!function(n=null,t=null){let e=T(n),l=T(t),r=R(n),i=R(t),u=e.x,o=l.x,c=u>o?u:o,s=r.x,a=i.x,d=s<a?s:a;if(d<c)return null;let f=e.y,h=l.y,p=f>h?f:h,g=r.y,x=i.y,y=g<x?g:x;return y<p?null:D(0,0,d-c,y-p)}(n,t)}class Y extends r{constructor(){super(),this.pos=null,this.rect=null}}function G(n=0,t=0,e=0,l=0){let r=new Y;return r.pos=O(r.id,n,t),r.rect=D(0,0,e,l),W(r.rect,n,t),r}function q(n=null,t=null){return X(n.rect,t)}function J(n=null,t=null){return function(n=null,t=null){return I(n.x-t.x,n.y-t.y)}(t,T(n.rect))}var K={ctx:null,canvas:null,fps:0,tick:0};function N(){return K}var Q=N();Math.PI;function V(n,t=0,e=0,l=0,r=0,i=0,u=0,o=0,c=0){Q.ctx.drawImage(n,t,e,l,r,i,u,o,c)}class Z extends c{onUpdate(n=0){m(H,n=>{let t=function(n=0){return L(n).pos}(n.entityId);W(n.displayArea,t.x,t.y),function(n=null){let t=Mn(),e=n.displayArea;if(!q(t,e))return;let l=J(t,T(e)),r=n.spriteFrame.textureArea;V(n.spriteFrame.bitmapData,r.x,r.y,r.width,r.height,l.x,l.y,z(e),A(e))}(n)})}}var $=null;class nn extends c{onUpdate(n=0){m(GetRectList(),n=>{en(n.rect)})}}var tn=null;function en(n=null){let t=Mn();if(!q(t,n))return;let e=J(t,T(n));!function(n=0,t=0,e=0,l=0){Q.ctx.strokeRect(n,t,e,l)}(e.x,e.y,z(n),A(n))}class ln extends c{onUpdate(n=0){m(M(),n=>{let t=n.vec,e=n.pos;e.x+=t.x,e.y+=t.y,t.x=0,t.y=0})}}var rn=null;var un,on=N();var cn=!1;var sn=null,an=(new Date).getTime();var dn=new Map;rn||(rn=new ln);var fn=null,hn=null;function pn(n=!1){x(fn=p(),(k||(k=new _),k)),x(hn=p(),($||($=new Z),$)),n&&x(hn,(tn||(tn=new nn),tn))}var gn,xn=16,yn=41,wn=0;function mn(n){m(fn,n=>{n.onStart()}),m(hn,n=>{n.onStart()}),n.onStart(),function(n=null){cn=!1,un=n,setInterval(()=>{sn=(new Date).getTime(),cn||un(sn-an),an=(new Date).getTime()},on.tick)}(t=>{(gn+=t)>=xn&&(gn-=xn,n.onUpdate(t),m(fn,n=>{n.onUpdate(t)})),(wn+=t)>=yn&&(wn-=yn,m(hn,n=>{n.onUpdate(t)}))})}new Map;class vn{constructor(n=0,t=0,e=null){this.rowIndex=n,this.colIndex=t,this.data=e}}class _n{constructor(n=0,t=0,e=0,l=0,r=null){this.rows=n,this.columns=t,this.gridWidth=e,this.gridHeight=l,this.grids=r}}function kn(n=null){return n.gridWidth}function Hn(n=null){return n.gridHeight}function bn(n=null){return n.columns*n.gridWidth}function In(n=null){return n.rows*n.gridHeight}class Un{constructor(n=null,t=0,e=0){this.gridmap=n,this.pos=I(t,e)}}function Sn(n=0,t=0,e=0,l=0,r=0,i=0){let u=function(n=0,t=0,e=0,l=0){let r=[];for(let e=0;e<n;e++)for(let n=0;n<t;n++){let t=new vn(e,n);r.push(t)}return new _n(n,t,e,l,r)}(n,t,e,l);return new Un(u,r,i)}function En(n=null){return I(n.pos.x-.5*bn(n.gridmap),n.pos.y-.5*In(n.gridmap))}function jn(n=null){!function(n=0,t=0,e=10){let l=document.getElementById("canvas");l.width=n,l.height=t,K.canvas=l,K.ctx=l.getContext("2d"),K.ctx.strokeStyle="#0000ff",K.fps=e,K.tick=1e3/e}(n.screen.width,n.screen.height,n.fps),n.keyDownHandler&&n.keyUpHanler&&function(n=null,t=null){window.addEventListener("keydown",t=>{let e=t.keyCode;dn.get(e)||(dn.set(e,1),n(t.keyCode))}),window.addEventListener("keyup",n=>{let e=n.keyCode;dn.delete(e),t(n.keyCode)})}(n.keyDownHandler,n.keyUpHanler),n.mousedownHandler&&n.mouseupHandler&&function(n=null,t=null){on.canvas.addEventListener("mousedown",t=>{let e=canvas.getBoundingClientRect(),l=t.clientX-e.left*(canvas.width/e.width),r=t.clientY-e.top*(canvas.height/e.height);n(l,r)}),on.canvas.addEventListener("mouseup",n=>{let e=canvas.getBoundingClientRect(),l=n.clientX-e.left*(canvas.width/e.width),r=n.clientY-e.top*(canvas.height/e.height);t(l,r)})}(n.mousedownHandler,n.mouseupHandler),function(n=null,t=null){let e=n.width?n.width:t.width,l=n.height?n.height:t.height;Ln=G(n.x,n.y,e,l)}(n.camera,n.screen),pn(n.debug),n.tilemap&&function(n=null){(function(n=null,t=null){if(!n||n.columns<=0||!n.data||0==n.data.length||n.gridWidth<=0||n.gridHeight<=0)return null;let e=n.columns,l=parseInt(n.data.length/e);if(l*e!=n.data.length)return console.log("error param: len(grids):",n.data.length," columns:",e),null;let r=Sn(l,e,n.gridWidth,n.gridHeight,n.x,n.y);return t&&function(n=null,t=null){n.grids.forEach(n=>{t(n)})}(r.gridmap,l=>{let i=n.data[l.rowIndex*e+l.colIndex];t(i,r,l)}),r})(n,n.initHandler)}(n.tilemap),n.collide}var Ln=null;function Mn(){return Ln}function On(n=0,t=0,e=0,l=0){let r=D(0,0,e,l);P(r,n,t),en(r)}var Cn=Object.assign(l,{debug:!1,mousedownHandler:function(n=0,t=0){console.log(n,t);let e=function(n=null,t=0,e=0){let l=T(n.rect);return I(l.x+t,l.y+e)}(Mn(),n,t);console.log(e.x,e.y),On(e.x,e.y,5,5)},mouseupHandler:function(){}});Cn.tilemap.initHandler=function(n=0,t=null,e=null){let l=function(n=null,t=null){let e=En(n);return I(e.x+kn(n.gridmap)*(t.colIndex+.5),e.y+Hn(n.gridmap)*(t.rowIndex+.5))}(t,e);console.log(l.x,l.y),On(l.x,l.y,kn(t.gridmap),Hn(t.gridmap)),On(l.x,l.y,2,2)};class Dn{onStart(){}onUpdate(n=0){}}console.log(Cn),function(n,t=null){jn(n),mn(t)}(Cn,new Dn)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3ZpZXcvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9jb21wb25lbnQvcG9zL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9wb3MvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9jb21wb25lbnQvY2FtZXJhL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9lbmdpbmUvaDUvbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2VuZ2luZS9oNS9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivc3lzdGVtL21vdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2VuZ2luZS9oNS9wcm9jZXNzb3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vcnVuLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZnJhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9ncmlkbWFwLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3RpbGUvdGlsZW1hcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2RpcmVjdG9yL3dvcmxkL3Jlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2RpcmVjdG9yL3dvcmxkL2FkYXB0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci91dGlscy9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci91dGlscy9nYW1lLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRW50aXR5IiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsImlkIiwiTmV3RW50aXR5SWQiLCJDb21wb25lbnQiLCJlbnRpdHlJZCIsIlN5c3RlbSIsInByaW9yaXR5IiwiZHQiLCJBQ1RJT05fU1RBVEVfRU5EIiwiYWN0aW9uVXBkYXRlIiwiYWN0aW9uIiwib25VcGRhdGUiLCJhY3Rpb25FbmQiLCJzdGF0ZSIsIm9uRW5kIiwiTGlua05vZGUiLCJkYXRhIiwicHJlcCIsIm5leHQiLCJMaW5rIiwiaGVhZCIsInRhaWwiLCJfbWFwIiwiTWFwIiwiX3NpemUiLCJfZGVsTGlzdCIsIl9jdXJyIiwiX2xvY2siLCJOZXdMaW5rIiwiR2V0TGlua0RhdGEiLCJsaW5rIiwia2V5SWQiLCJyZXF1aXJlZCIsImNvbnNvbGUiLCJlcnJvciIsIm5vZGUiLCJQdXNoVG9MaW5rIiwiYWRkVG9MaW5rIiwic2V0IiwicmVtb3ZlIiwiZGVsZXRlIiwiTGlua0l0ZXJhdG9yIiwiY2FsbGJhY2siLCJsZW5ndGgiLCJwb3AiLCJhY3Rpb25MaXN0IiwiYWN0aW9uX0FjdGlvblN5c3RlbSIsImlzRW5kIiwic3lzIiwiZGlzcGxheUxpc3QiLCJQb3MiLCJ4IiwieSIsIk5ld1BvcyIsIlZlYyIsImRpc3RhbmNlIiwiTmV3VmVjIiwiY29tcG9uZW50X1Bvc0NvbXBvbmVudCIsInN1cGVyIiwicG9zIiwidmVjIiwicG9zQ29tcyIsIkdldFBvc0NvbXBvbmVudCIsImNvbSIsImNyZWF0ZVBvc0NvbXBvbmVudCIsIkdldFBvc0NvbXBvbmVudExpc3QiLCJTZXRQb3MiLCJSZWN0YW5nbGUiLCJvZmZzZXQiLCJ3aWR0aCIsImhlaWdodCIsImNlbnRlciIsIk5ld1JlY3QiLCJ4T2Zmc2V0IiwieU9mZnNldCIsIlVwZGF0ZVJlY3RDZW50ZXJQb3MiLCJyZWN0IiwiVXBkYXRlUmVjdFBvc0J5VW5pdCIsInVuaXRQb3NYIiwidW5pdFBvc1kiLCJHZXRSZWN0U3RhcnRQb3MiLCJHZXRSZWN0SGFsZldpZHRoIiwiR2V0UmVjdEhhbGZIZWlnaHQiLCJHZXRSZWN0RW5kUG9zIiwiR2V0UmVjdFdpZHRoIiwiR2V0UmVjdEhlaWdodCIsIklzUmVjdHNDcm9zcyIsInJlY3QxIiwicmVjdDIiLCJzdGFydDEiLCJzdGFydDIiLCJlbmQxIiwiZW5kMiIsInIxeDEiLCJyMngxIiwibWF4WDEiLCJyMXgyIiwicjJ4MiIsIm1pblgyIiwicjF5MSIsInIyeTEiLCJtYXhZMSIsInIxeTIiLCJyMnkyIiwibWluWTIiLCJOZXdJbm5lclJlY3QiLCJ1dGlsc19DYW1lcmEiLCJOZXdDYW1lcmEiLCJjYW1lcmEiLCJJc0luQ2FtZXJhIiwiVG9TY3JlZW5Qb3MiLCJ0YXJnZXRQb3MiLCJyZWZlclBvcyIsIlRvTG9jYXRlUG9zIiwiX2VuZ2luZSIsImN0eCIsImNhbnZhcyIsImZwcyIsInRpY2siLCJnZXRFbmdpbmUiLCJyZW5kZXJfZW5naW5lIiwiTWF0aCIsIlBJIiwiZHJhd0ltYWdlIiwiaW1nRGF0YSIsInN4Iiwic3kiLCJzd2lkdGgiLCJzaGVpZ2h0IiwicmVuZGVyX1JlbmRlclVwZGF0ZVN5c3RlbSIsImRpc3BsYXlUdXBsZSIsIkdldFBvcyIsImRpc3BsYXlBcmVhIiwiR2V0Q2FtZXJhIiwic2NyZWVuUG9zIiwidGV4dHVyZUFyZWEiLCJzcHJpdGVGcmFtZSIsImJpdG1hcERhdGEiLCJkcmF3RnJhbWVJbkNhbWVyYSIsInJlbmRlclN5cyIsInJlbmRlcl9EcmF3UmVjdFN5c3RlbSIsIkdldFJlY3RMaXN0IiwiY29sbGlkZXIiLCJkcmF3UmVjdEluQ2FtZXJhIiwiZGVidWdTeXMiLCJzdHJva2VSZWN0IiwiZHJhd1JlY3QiLCJtb3ZlX1Bvc1VwZGF0ZVN5c3RlbSIsIm1vdmVDb20iLCJtb3ZlX3N5cyIsIl9jYWxsYmFjayIsInByb2Nlc3Nvcl9lbmdpbmUiLCJfaXNFbmQiLCJwcm9jZXNzb3Jfc3RhcnQiLCJsYXN0IiwiRGF0ZSIsImdldFRpbWUiLCJfa2V5RG93bk1hcCIsImxvZ2ljU3lzdGVtcyIsInJlbmRlclN5c3RlbXMiLCJpbml0U3lzdGVtcyIsImRlYnVnIiwiX3QxIiwibG9naWNUaWNrIiwicmVuZGVyVGljayIsIl90MiIsInJ1bldpdGhTY2VuZSIsInNjZW5lIiwic3lzdGVtIiwib25TdGFydCIsIm9uVXBkYXRlQ2FsbGJhY2siLCJzZXRJbnRlcnZhbCIsInJ1blRpY2siLCJHcmlkIiwicm93SW5kZXgiLCJjb2xJbmRleCIsIkdyaWRNYXAiLCJyb3dzIiwiY29sdW1ucyIsImdyaWRXaWR0aCIsImdyaWRIZWlnaHQiLCJncmlkcyIsIkdldEdyaWRXaWR0aCIsImdyaWRtYXAiLCJHZXRHcmlkSGVpZ2h0IiwiR2V0R3JpZE1hcFdpZHRoIiwiR2V0R3JpZE1hcEhlaWdodCIsInRpbGVtYXBfVGlsZU1hcCIsIk5ld1RpbGVNYXAiLCJncmlkIiwicHVzaCIsIk5ld0dyaWRNYXAiLCJHZXRUaWxlbWFwU3RhcnQiLCJ0aWxlbWFwIiwiaW5pdEdhbWUiLCJvcHRpb25zIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJzdHJva2VTdHlsZSIsImluaXRDYW52YXMiLCJzY3JlZW4iLCJrZXlEb3duSGFuZGxlciIsImtleVVwSGFubGVyIiwia2V5RG93bkNhbGxiYWNrIiwia2V5VXBDYWxsYmFjayIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29kZSIsImtleUNvZGUiLCJvbktleUNhbGxiYWNrIiwibW91c2Vkb3duSGFuZGxlciIsIm1vdXNldXBIYW5kbGVyIiwibW91c2Vkb3duQ2FsbGJhY2siLCJtb3VzZXVwQ2FsbGJhY2siLCJldmVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNsaWVudFgiLCJsZWZ0IiwiY2xpZW50WSIsInRvcCIsIm9uTW91c2VDYWxsYmFjayIsImNhbWVyYURhdGEiLCJzY3JlZW5EYXRhIiwicmVzX2NhbWVyYSIsImluaXRDYW1lcmEiLCJ0aWxlbWFwRGF0YSIsImluaXRIYW5kbGVyIiwicGFyc2VJbnQiLCJsb2ciLCJmb3JFYWNoIiwiSXRlcmF0b3JHcmlkbWFwIiwidmFsIiwiY3JlYXRlVGlsZU1hcFdpdGhEYXRhIiwiaW5pdFRpbGUiLCJjb2xsaWRlIiwiRHJhd1JlY3QiLCJtYWluX29wdGlvbnMiLCJhc3NpZ24iLCJzY3JlZW5YIiwic2NyZWVuWSIsInN0YXJ0IiwiVG9Xb3JsZFBvcyIsIkdldEdyaWRDZW50ZXIiLCJNeVNjZW5lIiwiU3RhcnRUZXN0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFB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a0JtSSxHQUFZVyxFQUFBVixVQUFBTSxFQUFBZCxTQUFBLElBQzlCbUUsRUFBQTlMLEVBQWtCb0ksR0FBYVMsRUFBQVYsVUFBQU0sRUFBQWYsU0FBQSxLSTNDakJzRSxDQUFhbkQsRUFBQUosR0FDM0I1SixRQUFBcU0sSUFBQTNLLEVBQUFSLEVBQUFRLEVBQUFQLEdBQ0l5TCxHQUFRbEwsRUFBQVIsRUFBQVEsRUFBQVAsRUFBZWtJLEdBQVlXLEVBQUFWLFNBQW1CQyxHQUFhUyxFQUFBVixVQUNuRXNELEdBQVFsTCxFQUFBUixFQUFBUSxFQUFBUCxFQUFBLE1BVVosTUFBQWlNLEdBQ0F0UCxXQUdBQSxTQUFBUSxFQUFBLEtBTUEwQixRQUFBcU0sSUFBZ0JRLElDQ2hCLFNBQUEzQyxFQUFBNUIsRUFBQSxNQUNJMkIsR0FBUUMsR0FDUjdCLEdBQVlDLEdERlorRSxDQUFVUixHQUFPLElBQUFPIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIi8qKlxyXG4gKiAyMDE5LjEwLjEwXHJcbiAqIFx05rOo5oSP77yMbGluay1pbnRlcmZhY2XvvIzpnIDopoHmnIlpZCwgcHJpb3JpdHnkuKTkuKrlsZ7mgKdcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiogICBUaGUgQmFzZSBTdHJ1Y3RcclxuKlx05bC9566h5oiR5Lus5Y+q6ZyA6KaBTmV3RW50aXR5SWQoKe+8jOS9huaYr+aJgOaciemcgOimgWlk55qE57G76YO96KaB57un5om/5q2k57G7XHJcbiovXHJcbmNsYXNzIEVudGl0eSB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmlkID0gTmV3RW50aXR5SWQoKTtcclxuXHR9XHJcbn1cclxuXHJcbnZhciBpZCA9IDE7XHJcbmZ1bmN0aW9uIE5ld0VudGl0eUlkKCl7XHJcblx0cmV0dXJuIGlkKys7XHJcbn1cclxuXHJcbi8qKlxyXG4qXHRUaGUgYmFzZSBDb21wb25lbnRcclxuKlx05q+P5LiqZW50aXR55a+55q+P56eN57uE5Lu25Y+q6IO95oyB5pyJ5LiA5LiqXHJcbiovXHJcbmNsYXNzIENvbXBvbmVudCB7XHJcblx0Y29uc3RydWN0b3IoZW50aXR5SWQgPSAwKSB7XHJcblx0XHR0aGlzLmVudGl0eUlkID0gZW50aXR5SWQ7XHJcblx0XHR0aGlzLmlkID0gZW50aXR5SWQ7XHRcdFx0Ly/nu5lsaW5r5L2/55SoXHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICog5Z+656GA5YWD5Lu2XHJcbiAqIFRPRE8g5pqC5pe25rKh5LuA5LmI55SoXHJcbiAqL1xyXG5jbGFzcyBUdXBsZSB7XHJcblx0Y29uc3RydWN0b3IocHJpb3JpdHkgPSAwKXtcclxuXHRcdHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcdC8v57uZbGlua+S9v+eUqFxyXG5cdFx0dGhpcy5pZCA9IE5ld0VudGl0eUlkKCk7XHQvL+e7mWxpbmvkvb/nlKhcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4qXHRUaGUgYmFzZSBTeXN0ZW1cclxuKi9cclxuY2xhc3MgU3lzdGVtIHtcclxuXHRjb25zdHJ1Y3Rvcihwcmlvcml0eSA9IDApe1xyXG5cdFx0dGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1x0Ly/nu5lsaW5r5L2/55SoXHJcblx0XHR0aGlzLmlkID0gTmV3RW50aXR5SWQoKTtcclxuXHR9XHJcbiAgICBvblN0YXJ0KCl7fVxyXG4gICAgb25VcGRhdGUoZHQgPSAwKXt9XHJcbiAgICBvbkVuZCgpe31cclxufVxyXG5cclxuZXhwb3J0IHtFbnRpdHksIENvbXBvbmVudCwgVHVwbGUsIFN5c3RlbX0iLCJpbXBvcnQgeyBUdXBsZSB9IGZyb20gXCIuLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIlxyXG5cclxuY29uc3QgQUNUSU9OX1NUQVRFX1JVTk5JTkcgPSAxO1xyXG5jb25zdCBBQ1RJT05fU1RBVEVfRU5EID0gMjtcclxuXHJcbi8qKlxyXG4qICAgYWN0aW9u5qih5Z2X55qE6K6+6K6h55CG5b+15piv77yaXHJcbiogICAgICAg57uZ562W5YiS5Lq65ZGY5pON5L2c55qE5Yqo5oCB6YWN572u77yM55SxanNvbumpseWKqO+8iGRhdGEtZHJpdmVu77yJ77yM5YaN55Sx6ISa5pys57O757uf55Sf5oiQ5Li66Z2Z5oCB5Luj56CBXHJcbiogICDnm67liY3lhYjnlKjnprvmlaPphY3nva7ku6Pmm79cclxuXHJcbiogICDnlJ/lkb3lkajmnJ/nrqHnkIZcclxuICAgICAgICBvblN0YXJ0IC0+IOWIneWni+WMlu+8jOeUsXV0aWxzLlJ1bkFjdGlvbuinpuWPkVxyXG4gICAgICAgIG9uVXBkYXRlIC0+IOeUsXN5c3RlbeS4u+a1geeoi+iwg+eUqO+8jOWPquaJp+ihjOS4u+mAu+i+ke+8jOS4jemcgOimgeWIpOaWree7iOatouadoeS7tlxyXG4gICAgICAgIGlzRW5kOiDnlLFzeXN0ZW3lnKjmiafooYxvblVwZGF0ZeWQjuiuv+mXru+8jOi/lOWbnmJvb2zvvIzlhrPlrprmmK/lkKbovr7liLDnu4jmraLmnaHku7bkuobvvIzov5Tlm550cnVl5YiZ6KGo56S65Y+v5Lul57uI5q2i5q2kYWN0aW9uXHJcbiAgICAgICAgb25FbmQ6IOWcqHN5c3Rlbeivt+axgmlzRW5kPXRydWXlkI7osIPnlKjvvIznlKjkuo7mlLblsL7vvIzlpoLotYTmupDlm57mlLZcclxuICAgICAgICBvblN0b3A6IOeUsXV0aWxzLlN0b3BBY3Rpb27op6blj5HvvIzlvLrliLbkuK3mlq3vvIzkuI3otbBpc0VuZOa1geeoi++8jOm7mOiupOiwg+eUqG9uRW5k77yM5Zug5q2k5qC55o2u5oOF5Ya15Y+v6IO96ZyA6KaB6aKd5aSW5aSE55CGXHJcbiovXHJcbmNsYXNzIEFjdGlvbiBleHRlbmRzIFR1cGxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgcHJpb3JpdHkgPSAwKXtcclxuICAgICAgICBzdXBlcihwcmlvcml0eSk7XHJcbiAgICAgICAgdGhpcy5lbnRpdHlJZCA9IGVudGl0eUlkOyAgIC8v5omA5bGe6ICFXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEFDVElPTl9TVEFURV9FTkQ7XHJcbiAgICB9XHJcbiAgICAvLyBvblN0YXJ0KCl7fVxyXG4gICAgLy8gb25VcGRhdGUoZHQgPSAwKXt9XHJcbiAgICAvLyBvbkVuZCgpe31cclxuICAgIGlzRW5kKCl7ICAgIHJldHVybiBmYWxzZTsgICAgfVxyXG4gICAgb25TdG9wKCl7ICAgdGhpcy5vbkVuZCgpOyAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFjdGlvblN0YXJ0KGFjdGlvbiA9IG51bGwpe1xyXG4gICAgYWN0aW9uLnN0YXRlID0gQUNUSU9OX1NUQVRFX1JVTk5JTkc7XHJcbiAgICBhY3Rpb24ub25TdGFydCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3Rpb25VcGRhdGUoYWN0aW9uID0gbnVsbCwgZHQgPSAwKXtcclxuICAgIGFjdGlvbi5vblVwZGF0ZShkdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGlvbkVuZChhY3Rpb24gPSBudWxsKXtcclxuICAgIGFjdGlvbi5zdGF0ZSA9IEFDVElPTl9TVEFURV9FTkQ7XHJcbiAgICBhY3Rpb24ub25FbmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aW9uU3RvcChhY3Rpb24gPSBudWxsKXtcclxuICAgIGFjdGlvbi5zdGF0ZSA9IEFDVElPTl9TVEFURV9FTkQ7XHJcbiAgICBhY3Rpb24ub25TdG9wKCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBpc1N0YXJ0KGFjdGlvbiA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGFjdGlvbi5zdGF0ZSA9PSBBQ1RJT05fU1RBVEVfUlVOTklORztcclxufVxyXG5mdW5jdGlvbiBpc1N0b3AoYWN0aW9uID0gbnVsbCl7XHJcbiAgICByZXR1cm4gYWN0aW9uLnN0YXRlID09IEFDVElPTl9TVEFURV9FTkQ7XHJcbn1cclxuXHJcbmV4cG9ydCB7QWN0aW9uLCBhY3Rpb25TdGFydCwgYWN0aW9uVXBkYXRlLCBhY3Rpb25FbmQsIGFjdGlvblN0b3AsIGlzU3RhcnQsIGlzU3RvcH0iLCJjbGFzcyBMaW5rTm9kZSB7XHJcblx0Y29uc3RydWN0b3IoZGF0YSA9IG51bGwsIHByZXAgPSBudWxsLCBuZXh0ID0gbnVsbCkge1xyXG5cdFx0dGhpcy5kYXRhID0gZGF0YTtcclxuXHRcdHRoaXMucHJlcCA9IHByZXA7XHJcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV4dDtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIExpbmsge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5oZWFkID0gbmV3IExpbmtOb2RlKCk7XHRcdC8vZW1wdHkgZGF0YSBub2RlXHJcblx0XHR0aGlzLnRhaWwgPSBuZXcgTGlua05vZGUoKTtcclxuXHRcdHRoaXMuaGVhZC5uZXh0ID0gdGhpcy50YWlsO1xyXG5cdFx0dGhpcy50YWlsLnByZXAgPSB0aGlzLmhlYWQ7XHJcblx0XHR0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XHJcblx0XHR0aGlzLl9zaXplID0gMDtcclxuICAgICAgICB0aGlzLl9kZWxMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5fY3VyciA9IHRoaXMuaGVhZDtcclxuICAgICAgICB0aGlzLl9sb2NrID0gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdMaW5rKCl7XHJcbiAgICByZXR1cm4gbmV3IExpbmsoKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDojrflj5ZcclxuICovXHJcbmZ1bmN0aW9uIEdldExpbmtEYXRhKGxpbmsgPSBudWxsLCBrZXlJZCA9IDAsIHJlcXVpcmVkID0gZmFsc2Upe1xyXG4gICAgaWYoIWxpbmspIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwibGluayBpcyBudWxsLlwiKTtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBub2RlID0gbGluay5fbWFwLmdldChrZXlJZCk7XHJcbiAgICBpZihub2RlKXtcclxuICAgICAgICByZXR1cm4gbm9kZS5kYXRhO1xyXG4gICAgfVxyXG4gICAgaWYocmVxdWlyZWQpe1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjYW4ndCBmaW5kIGtleUlkOiBcIiwga2V5SWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldExpbmtTaXplKGxpbmsgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxpbmsuX3NpemU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmt7vliqDliLDmnKvlsL5cclxuICovXHJcbmZ1bmN0aW9uIFB1c2hUb0xpbmsobGluayA9IG51bGwsIGRhdGEgPSBudWxsKSB7XHJcbiAgICByZXR1cm4gYWRkVG9MaW5rKGxpbmssIGRhdGEsIGxpbmsudGFpbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmj5LlhaXliLDliJfooajkuK1cclxuICogZGF0YS5wcmlvcml0eemhuuW6j+WPt++8jOeUseWkp+WIsOWwj+aOkuW6j++8jOm7mOiupOS4ujBcclxuICovXHJcbmZ1bmN0aW9uIEluc2VydFRvTGluayhsaW5rID0gbnVsbCwgZGF0YSA9IG51bGwpe1xyXG4gICAgbGV0IHByaW9yaXR5ID0gZGF0YSAmJiBkYXRhLnByaW9yaXR5ID8gZGF0YS5wcmlvcml0eSA6IDA7XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsuaGVhZC5uZXh0O1xyXG5cdHdoaWxlKG5vZGUgIT0gbGluay50YWlsKXtcclxuICAgICAgICBpZihwcmlvcml0eSA+IG5vZGUuZGF0YS5wcmlvcml0eSl7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHRcdG5vZGUgPSBub2RlLm5leHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWRkVG9MaW5rKGxpbmssIGRhdGEsIG5vZGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRUb0xpbmsobGluayA9IG51bGwsIGRhdGEgPSBudWxsLCBuZXh0ID0gbnVsbCl7XHJcbiAgICBpZighbGluayB8fCAhZGF0YSB8fCAhZGF0YS5pZCl7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvciBwYXJhbTogXCIsIGxpbmssIGRhdGEsIGRhdGEuaWQpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy/kuI3og73ph43lpI3mt7vliqBcclxuICAgIGlmKGxpbmsuX21hcC5nZXQoZGF0YS5pZCkpe1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvciBpZDolZCBpcyBleGlzdFwiLCBkYXRhLmlkKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8v5paw6IqC54K56L+e5o6lXHJcbiAgICBsZXQgcHJlcCA9IG5leHQucHJlcDtcclxuICAgIGxldCBub2RlID0gbmV3IExpbmtOb2RlKGRhdGEsIHByZXAsIG5leHQpO1xyXG4gICAgcHJlcC5uZXh0ID0gbm9kZTtcclxuICAgIG5leHQucHJlcCA9IG5vZGU7XHJcblxyXG4gICAgbGluay5fbWFwLnNldChkYXRhLmlkLCBub2RlKTtcclxuICAgIGxpbmsuX3NpemUrKztcclxuICAgIHJldHVybiBub2RlO1xyXG59XHJcblxyXG4vKipcclxuICog5Yig6ZmkXHJcbiAqL1xyXG5mdW5jdGlvbiBSZW1vdmVCeUtleUlkKGxpbmsgPSBudWxsLCBrZXlJZCA9IDApe1xyXG4gICAgaWYoIWxpbmsgfHwga2V5SWQ9PTApIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImVycm9yIHBhcmFtOiBcIiwgbGluaywga2V5SWQpO1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYobGluay5fbG9jayl7XHJcbiAgICAgICAgbGluay5fZGVsTGlzdC5wdXNoKGtleUlkKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZW1vdmUobGluaywga2V5SWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmUobGluayA9IG51bGwsIGtleUlkID0gMCl7XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsuX21hcC5nZXQoa2V5SWQpO1xyXG4gICAgaWYoIW5vZGUpe1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxpbmsuX21hcC5kZWxldGUoa2V5SWQpO1xyXG4gICAgbGV0IHAgPSBub2RlLnByZXA7XHJcbiAgICBsZXQgbiA9IG5vZGUubmV4dDtcclxuICAgIHAubmV4dCA9IG47XHJcbiAgICBuLnByZXAgPSBwO1xyXG4gICAgbGluay5fc2l6ZS0tO1xyXG59XHJcblxyXG4vKipcclxuICog6L2u6K+iLCBjYWxsYmFjayA9IGZ1bmN0aW9uKDw/IGV4dGVuZHMgZW50aXR5Pil7fVxyXG4gKi9cclxuZnVuY3Rpb24gTGlua0l0ZXJhdG9yKGxpbmsgPSBudWxsLCBjYWxsYmFjayA9IG51bGwpe1xyXG4gICAgaWYoIWxpbmsgfHwgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGluay5fbG9jayA9IHRydWU7XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsuaGVhZC5uZXh0O1xyXG5cdHdoaWxlKG5vZGUgIT0gbGluay50YWlsKXtcclxuXHRcdGlmKGNhbGxiYWNrKG5vZGUuZGF0YSkpe1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblx0XHRub2RlID0gbm9kZS5uZXh0O1xyXG4gICAgfVxyXG4gICAgd2hpbGUobGluay5fZGVsTGlzdC5sZW5ndGggPiAwKXtcclxuICAgICAgICByZW1vdmUobGluaywgbGluay5fZGVsTGlzdC5wb3AoKSk7XHJcbiAgICB9XHJcbiAgICBsaW5rLl9sb2NrID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEZpcnN0KGxpbmsgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuICAgIGlmKG5vZGUpe1xyXG4gICAgICAgIHJldHVybiBub2RlLmRhdGFcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRMYXN0KGxpbmsgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG5vZGUgPSBsaW5rLnRhaWwucHJlcDtcclxuICAgIGlmKG5vZGUpe1xyXG4gICAgICAgIHJldHVybiBub2RlLmRhdGFcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICog5bCG5YiX6KGo5Lit55qE5YWD57Sg5Lik5Lik5a+55q+U77yMY2FsbGJhY2sgPSBmdW5jdGlvbig8PyBleHRlbmRzIGVudGl0eSBvciBjb21wb25lbnQ+IGZyb250LCBuZXh0KXt9XHJcbiAqL1xyXG5mdW5jdGlvbiBMaW5rQ29tcGFyZShsaW5rID0gbnVsbCwgY2FsbGJhY2sgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rIHx8ICFjYWxsYmFjaykge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxpbmsuX2xvY2sgPSB0cnVlO1xyXG4gICAgbGV0IG91dE5vZGUgPSBsaW5rLmhlYWQubmV4dDtcclxuICAgIHdoaWxlKG91dE5vZGUgIT0gbGluay50YWlsKXtcclxuICAgICAgICBsZXQgaW5Ob2RlID0gb3V0Tm9kZS5uZXh0O1xyXG4gICAgICAgIHdoaWxlKGluTm9kZSAhPSBsaW5rLnRhaWwpe1xyXG4gICAgICAgICAgICBjYWxsYmFjayhvdXROb2RlLmRhdGEsIGluTm9kZS5kYXRhKTtcclxuICAgICAgICAgICAgaW5Ob2RlID0gaW5Ob2RlLm5leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG91dE5vZGUgPSBvdXROb2RlLm5leHQ7XHJcbiAgICB9XHJcbiAgICBsaW5rLl9sb2NrID0gZmFsc2U7XHJcbiAgICBsaW5rLl9kZWxMaXN0LmZvckVhY2goa2V5SWQgPT4ge1xyXG4gICAgICAgIFJlbW92ZUJ5S2V5SWQobGluaywga2V5SWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7TGluaywgTGlua05vZGUsIE5ld0xpbmssIEdldEZpcnN0LCBHZXRMYXN0LCBHZXRMaW5rRGF0YSwgR2V0TGlua1NpemUsIFB1c2hUb0xpbmssIEluc2VydFRvTGluaywgUmVtb3ZlQnlLZXlJZCwgTGlua0l0ZXJhdG9yLCBMaW5rQ29tcGFyZX0iLCJpbXBvcnQgeyBpc1N0b3AsIGlzU3RhcnQsIGFjdGlvblN0YXJ0LCBhY3Rpb25TdG9wIH0gZnJvbSAnLi9iYXNlJztcclxuaW1wb3J0IHsgUHVzaFRvTGluaywgUmVtb3ZlQnlLZXlJZCwgTmV3TGluayB9IGZyb20gJy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsnO1xyXG5cclxuXHJcbnZhciBhY3Rpb25MaXN0ID0gTmV3TGluaygpO1xyXG5mdW5jdGlvbiBHZXRSdW5uaWdBY3Rpb25MaXN0KCl7XHJcbiAgICByZXR1cm4gYWN0aW9uTGlzdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOi/kOihjGFjdGlvbu+8jOW5tuWKoOWFpeWIsGFjdGlvbuezu+e7n2xpbmvkuK3vvIzkuIDoiKzkvpvlpJbpg6josIPnlKggXHJcbiAqL1xyXG5mdW5jdGlvbiBSdW5BY3Rpb24oYWN0aW9uID0gbnVsbCl7XHJcbiAgICBpZihpc1N0b3AoYWN0aW9uKSl7XHJcbiAgICAgICAgYWN0aW9uU3RhcnQoYWN0aW9uKTtcclxuICAgICAgICBQdXNoVG9MaW5rKGFjdGlvbkxpc3QsIGFjdGlvbiwgYWN0aW9uLmlkKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOeri+WNs+e7iOatomFjdGlvbuW5tuenu+WHumFjdGlvbuezu+e7n2xpbmvvvIzkuIDoiKzkvpvlpJbpg6josIPnlKhcclxuICovXHJcbmZ1bmN0aW9uIFN0b3BBY3Rpb24oYWN0aW9uID0gbnVsbCl7XHJcbiAgICBpZihpc1N0YXJ0KGFjdGlvbikpe1xyXG4gICAgICAgIGFjdGlvblN0b3AoYWN0aW9uKTtcclxuICAgICAgICBSZW1vdmVCeUtleUlkKGFjdGlvbkxpc3QsIGFjdGlvbi5pZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7R2V0UnVubmlnQWN0aW9uTGlzdCwgUnVuQWN0aW9uLCBTdG9wQWN0aW9ufSIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuaW1wb3J0IHsgR2V0UnVubmlnQWN0aW9uTGlzdCB9IGZyb20gXCIuLi8uLi9hY3Rpb24vdXRpbHNcIjtcclxuaW1wb3J0IHsgTGlua0l0ZXJhdG9yIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuaW1wb3J0IHsgYWN0aW9uVXBkYXRlLCBhY3Rpb25FbmQgfSBmcm9tIFwiLi4vLi4vYWN0aW9uL2Jhc2VcIjtcclxuXHJcbi8qKlxyXG4gKiDliqjkvZzns7vnu59cclxuICovXHJcbmNsYXNzIEFjdGlvblN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApIHtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0UnVubmlnQWN0aW9uTGlzdCgpLCBhY3Rpb24gPT4ge1xyXG4gICAgICAgICAgICBhY3Rpb25VcGRhdGUoYWN0aW9uLCBkdCk7XHJcbiAgICAgICAgICAgIGlmKGFjdGlvbi5pc0VuZCgpKXtcclxuICAgICAgICAgICAgICAgIGFjdGlvbkVuZChhY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBzeXMgPSBudWxsO1xyXG5mdW5jdGlvbiBHZXRBY3Rpb25TeXN0ZW0oKXtcclxuICAgIGlmKCFzeXMpe1xyXG4gICAgICAgIHN5cyA9IG5ldyBBY3Rpb25TeXN0ZW0oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzeXM7XHJcbn1cclxuXHJcbmV4cG9ydHtHZXRBY3Rpb25TeXN0ZW19IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiO1xyXG5pbXBvcnQgeyBQdXNoVG9MaW5rLCBHZXRMaW5rRGF0YSwgUmVtb3ZlQnlLZXlJZCwgTmV3TGluayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIOaYvuekuue7hOS7tu+8jOWMheWQq+S4gOS6m+efqemYteaVsOaNrlxyXG4gKi9cclxuY2xhc3MgUmVuZGVyQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHRjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDAsIGFuZ2xlID0gMCwgc2NhbGUgPSAxKSB7XHJcbiAgICAgICAgc3VwZXIoZW50aXR5SWQpO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSBhbmdsZTtcclxuICAgICAgICB0aGlzLnNjYWxlID0gc2NhbGU7XHJcblx0fVxyXG59XHJcblxyXG52YXIgcmVuZGVyQ29tcyA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gY3JlYXRlUmVuZGVyQ29tcG9uZW50KGVudGl0eUlkID0gMCwgdmlld0RhdGEgPSBudWxsKSB7XHJcbiAgICB2aWV3RGF0YSA9IHZpZXdEYXRhID8gdmlld0RhdGEgOiB7fTtcclxuICAgIGxldCBjb20gPSBuZXcgUmVuZGVyQ29tcG9uZW50KGVudGl0eUlkLCB2aWV3RGF0YS5hbmdsZSwgdmlld0RhdGEuc2NhbGUpO1xyXG4gICAgUHVzaFRvTGluayhyZW5kZXJDb21zLCBjb20pO1xyXG4gICAgcmV0dXJuIGNvbTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVuZGVyQ29tcG9uZW50KGVudGl0eUlkID0gMCwgdmlld0RhdGEgPSBudWxsKSB7XHJcbiAgICBsZXQgY29tID0gR2V0TGlua0RhdGEocmVuZGVyQ29tcywgZW50aXR5SWQpO1xyXG4gICAgcmV0dXJuIGNvbSA/IGNvbSA6IGNyZWF0ZVJlbmRlckNvbXBvbmVudChlbnRpdHlJZCwgdmlld0RhdGEpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOaYvuekuuWFg+S7tlxyXG4gKiDnm67liY3kvb/nlKh0dXBsZe+8jOWPr+S7peWFvOWuueS4gOS4qnVuaXTlkIzml7bmjILlpJrkuKpzcHJpdGVGcmFtZeeahOmcgOaxglxyXG4gKiDlpoLmnpzpnIDopoHpmZDliLbkuIDkuKp1bml05LuF5pyJ5LiA5Liqc3ByaXRlRnJhbWXvvIzlsLHkvb/nlKhjb21wb25lbnRcclxuICovXHJcbmNsYXNzIERpc3BsYXlUdXBsZSBleHRlbmRzIFR1cGxlIHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgc3ByaXRlRnJhbWUgPSBudWxsLCBkaXNwbGF5QXJlYSA9IG51bGwpe1xyXG4gICAgICAgIHN1cGVyKGVudGl0eUlkKTtcclxuICAgICAgICB0aGlzLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5QXJlYSA9IGRpc3BsYXlBcmVhO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog55S75biD5LiK55qE5pi+56S66Zif5YiXXHJcbiAqL1xyXG52YXIgZGlzcGxheUxpc3QgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldERpc3BsYXlMaXN0KCl7XHJcbiAgICByZXR1cm4gZGlzcGxheUxpc3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliqDlhaXmuLLmn5PpmJ/liJdcclxuICogQHBhcmFtIHsqfSBkaXNwbGF5QXJlYSBSZWN057G75Z6LXHJcbiAqL1xyXG5mdW5jdGlvbiBBZGREaXNwbGF5KGVudGl0eUlkID0gMCwgc3ByaXRlRnJhbWUgPSBudWxsLCBkaXNwbGF5QXJlYSA9IG51bGwpIHtcclxuICAgIGxldCB0ID0gbmV3IERpc3BsYXlUdXBsZShlbnRpdHlJZCwgc3ByaXRlRnJhbWUsIGRpc3BsYXlBcmVhKTtcclxuICAgIFB1c2hUb0xpbmsoZGlzcGxheUxpc3QsIHQpO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFJlbW92ZURpc3BsYXkoZGlzcGxheUlkID0gMCkge1xyXG4gICAgUmVtb3ZlQnlLZXlJZChkaXNwbGF5TGlzdCwgZGlzcGxheUlkKTtcclxufVxyXG5cclxuZXhwb3J0IHtHZXRSZW5kZXJDb21wb25lbnQsIEdldERpc3BsYXlMaXN0LCBBZGREaXNwbGF5LCBSZW1vdmVEaXNwbGF5fSIsIi8qKlxyXG4gKiDln7rnoYAyROWdkOagh1xyXG4gKi9cclxuY2xhc3MgUG9zIHtcclxuICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdQb3MoeCA9IDAsIHkgPSAwKXtcclxuICAgIHJldHVybiBuZXcgUG9zKHgsIHkpO1xyXG59XHJcblxyXG4vKipcclxuICog6K6h566X55u45a+55Z2Q5qCHXHJcbiAqIOS7pXRhcmdldFBvc+S4uuWHhu+8jOiuoeeul3JlZmVyUG9z5LqOdGFyZ2V0UG9z55qE55u45a+55Z2Q5qCHXHJcbiAqIOS4vuS+i++8mlxyXG4gKiAgICAgIOaRhOWDj+acuuS9jeS6jig1MCwgNTAp5aSE77yMcmVmZXJQb3NcclxuICogICAgICDljZXkvY1B5L2N5LqOKDEyMCwgMzAp5aSE77yMdGFyZ2V0UG9zXHJcbiAqICAgICAg6YKj5LmI77yM5Y2V5L2NQeWcqOaRhOWDj+acuueahCgxMjAtNTAsIDMwLTUwKeWkhFxyXG4gKi9cclxuZnVuY3Rpb24gVG9Mb2NhdGVQb3ModGFyZ2V0UG9zID0gbnVsbCwgcmVmZXJQb3MgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgdGFyZ2V0UG9zLnggLSByZWZlclBvcy54LFxyXG4gICAgICAgIHRhcmdldFBvcy55IC0gcmVmZXJQb3MueSk7XHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIFRvTG9jYXRlWCh0YXJnZXRYID0gMCwgcmVmZXJYID0gMCl7XHJcbi8vICAgICByZXR1cm4gdGFyZ2V0WCAtIHJlZmVyWDtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gVG9Mb2NhdGVZKHRhcmdldFkgPSAwLCByZWZlclkgPSAwKXtcclxuLy8gICAgIHJldHVybiB0YXJnZXRZIC0gcmVmZXJZO1xyXG4vLyB9XHJcblxyXG5cclxuLyoqXHJcbiAqIOWfuuehgOWQkemHj1xyXG4gKiBkaXN0YW5jZTog6Led56a757O75pWw77yM5rOo5oSP5LiN5piv5a6e6ZmF6Led56a777yM5Y+q55So5LqO5q+U6L6D6Led56a75aSn5bCPXHJcbiAqL1xyXG5jbGFzcyBWZWMge1xyXG4gICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwKXtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IHggKiB4ICsgeSAqIHk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld1ZlYyh4ID0gMCwgeSA9IDApe1xyXG4gICAgcmV0dXJuIG5ldyBWZWMoeCwgeSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld1ZlY1dpdGhQb3MoeDEgPSAwLCB5MSA9IDAsIHgyID0gMCwgeTIgPSAwKXtcclxuICAgIHJldHVybiBuZXcgTmV3VmVjKHgyIC0geDEsIHkyIC0geTEpO1xyXG59XHJcblxyXG4vKipcclxuICog6Led56a757O75pWwXHJcbiAqIOazqOaEj++8jOW5tumdnuWunumZhei3neemu+WAvO+8jOWboOS4uuW8gOagueWPt+iuoeeul+a2iOiAl+Wkp1xyXG4gKiDoi6Xlj6rnlKjkuo7lr7nmr5TlpKflsI/vvIzmraTns7vmlbDljbPlj69cclxuICovXHJcbmZ1bmN0aW9uIEdldERpc3RhbmNlKHZlYyA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHZlYy5kaXN0YW5jZTtcclxufVxyXG5cclxuZXhwb3J0IHtOZXdQb3MsIFRvTG9jYXRlUG9zLFxyXG4gICAgTmV3VmVjLCBOZXdWZWNXaXRoUG9zLCBHZXREaXN0YW5jZX0iLCJpbXBvcnQgeyBOZXdQb3MsIE5ld1ZlYyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBQdXNoVG9MaW5rLCBHZXRMaW5rRGF0YSwgTmV3TGluaywgUmVtb3ZlQnlLZXlJZCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuXHJcbi8qKlxyXG4gKiDkvY3nva7nu4Tku7ZcclxuICovXHJcbmNsYXNzIFBvc0NvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDAsIHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgc3VwZXIoZW50aXR5SWQpO1xyXG4gICAgICAgIHRoaXMucG9zID0gTmV3UG9zKHgsIHkpO1xyXG4gICAgICAgIHRoaXMudmVjID0gTmV3VmVjKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBwb3NDb21zID0gTmV3TGluaygpO1xyXG5mdW5jdGlvbiBjcmVhdGVQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKSB7XHJcbiAgICBsZXQgY29tID0gbmV3IFBvc0NvbXBvbmVudChlbnRpdHlJZCk7XHJcbiAgICBQdXNoVG9MaW5rKHBvc0NvbXMsIGNvbSk7XHJcbiAgICByZXR1cm4gY29tO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKSB7XHJcbiAgICBsZXQgY29tID0gR2V0TGlua0RhdGEocG9zQ29tcywgZW50aXR5SWQpO1xyXG4gICAgcmV0dXJuIGNvbSA/IGNvbSA6IGNyZWF0ZVBvc0NvbXBvbmVudChlbnRpdHlJZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFBvc0NvbXBvbmVudExpc3QoKXtcclxuICAgIHJldHVybiBwb3NDb21zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBSZW1vdmVQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKXtcclxuICAgIFJlbW92ZUJ5S2V5SWQocG9zQ29tcywgZW50aXR5SWQpO1xyXG59XHJcblxyXG5leHBvcnR7IEdldFBvc0NvbXBvbmVudCwgR2V0UG9zQ29tcG9uZW50TGlzdCwgUmVtb3ZlUG9zQ29tcG9uZW50fSIsImltcG9ydCB7IEdldFBvc0NvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50JztcclxuXHJcbmZ1bmN0aW9uIFNldFBvcyhlbnRpdHlJZCA9IDAsIHggPSAwLCB5ID0gMCl7XHJcbiAgICBsZXQgcG9zID0gR2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKS5wb3M7XHJcbiAgICBwb3MueCA9IHg7XHJcbiAgICBwb3MueSA9IHk7XHJcbiAgICByZXR1cm4gcG9zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRQb3MoZW50aXR5SWQgPSAwKXtcclxuICAgIHJldHVybiBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnBvcztcclxufVxyXG5cclxuZnVuY3Rpb24gU2V0VmVjKGVudGl0eUlkID0gMCwgeCA9IDAsIHkgPSAwKXtcclxuICAgIGxldCB2ZWMgPSBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnZlYztcclxuICAgIHZlYy54ID0geDtcclxuICAgIHZlYy55ID0geTtcclxuICAgIHJldHVybiB2ZWM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFZlYyhlbnRpdHlJZCA9IDApe1xyXG4gICAgcmV0dXJuIEdldFBvc0NvbXBvbmVudChlbnRpdHlJZCkudmVjO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gTW92ZShlbnRpdHlJZCA9IDAsIGR4ID0gMCwgZHkgPSAwKXtcclxuICAgIGxldCBwb3MgPSBHZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnBvcztcclxuICAgIHBvcy54ICs9IGR4O1xyXG4gICAgcG9zLnkgKz0gZHk7XHJcbn1cclxuXHJcbmV4cG9ydCB7U2V0UG9zLCBHZXRQb3MsIEdldFZlYywgU2V0VmVjfSIsImltcG9ydCB7IE5ld1BvcywgTmV3VmVjIH0gZnJvbSBcIi4vcG9pbnRcIjtcclxuXHJcblxyXG4vKipcclxuICogMkTln7rnoYDnn6nlvaLvvIznlLHlj4LogIPlnZDmoIfvvIzlgY/np7vph4/vvIzlrr3pq5jnu4TmiJBcclxuICog5L2N572u5piv5qC55o2u55u45a+55Z2Q5qCH566X5Ye65p2lXHJcbiAqIHhPZmZzZXQsIHlPZmZzZXQgOiDnm7jlr7nlnZDmoIflgY/np7vph49cclxuICogd2lkdGgsIGhlaWdodCA6IOWuvemrmFxyXG4gKiBjZW50ZXIgOiDlrp7pmYXkvY3nva7vvIjnn6nlvaLkuK3lv4PvvInvvIzlhoXpg6jkvb/nlKjvvIxjZW50ZXIgPSB1bml0LnBvcyArIHJlY3Qub2Zmc2V0XHJcbiAqL1xyXG5jbGFzcyBSZWN0YW5nbGUge1xyXG4gICAgY29uc3RydWN0b3Iob2Zmc2V0ID0gbnVsbCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwLCBjZW50ZXIgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog55+p5b2i6buY6K6k5bGF5Lit5LqOb3duZXJcclxuICog5q2k5pa55rOV5LiA6Iis55SxY29sbGlkZXLosIPnlKhcclxuICovXHJcbmZ1bmN0aW9uIE5ld1JlY3QoeE9mZnNldCA9IDAsIHlPZmZzZXQgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgbGV0IG9mZnNldCA9IE5ld1ZlYyh4T2Zmc2V0LCB5T2Zmc2V0KTtcclxuICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlKG9mZnNldCwgd2lkdGgsIGhlaWdodCwgTmV3UG9zKCkpO1xyXG59XHJcblxyXG4vKipcclxuICog5pu05paw5b2T5YmN55+p5b2i5bGe5oCn77yI5L2N572u44CB5YGP56e76YeP44CB5aSn5bCP562J77yJ77yM5ZCO6Z2i5omA5pyJ5raJ5Y+K55+p5b2i6K6h566X55qE5Ye95pWw77yM6YO95b+F6aG75bu656uL5Zyo5bey5pu05paw5LqG57ud5a+55Z2Q5qCH55qE55+p5b2i55qE5Z+656GA5LmL5LiKXHJcbiAqIHgsIHnmmK/nu53lr7nlnZDmoIdcclxuICovXHJcbmZ1bmN0aW9uIFVwZGF0ZVJlY3RTaXplKHJlY3QgPSBudWxsLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgcmVjdC53aWR0aCA9IHdpZHRoO1xyXG4gICAgcmVjdC5oZWlnaHQgPSBoZWlnaHQ7XHJcbn1cclxuZnVuY3Rpb24gVXBkYXRlUmVjdE9mZnNldChyZWN0ID0gbnVsbCwgeE9mZnNldCA9IDAsIHlPZmZzZXQgPSAwKXtcclxuICAgIHJlY3Qub2Zmc2V0LnggPSB4T2Zmc2V0O1xyXG4gICAgcmVjdC5vZmZzZXQueSA9IHlPZmZzZXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFVwZGF0ZVJlY3RDZW50ZXJQb3MocmVjdCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICByZWN0LmNlbnRlci54ID0geDtcclxuICAgIHJlY3QuY2VudGVyLnkgPSB5O1xyXG59XHJcblxyXG4vKipcclxuICog5qC55o2u5omA5bGe5Y2V5L2N55qE5L2N572u5pu05paw55+p5b2i5L2N572u77yI5LiA6Iis5Zy65pmv6LCD55So77yJXHJcbiAqL1xyXG5mdW5jdGlvbiBVcGRhdGVSZWN0UG9zQnlVbml0KHJlY3QgPSBudWxsLCB1bml0UG9zWCA9IDAsIHVuaXRQb3NZID0gMCl7XHJcbiAgICByZWN0LmNlbnRlci54ID0gdW5pdFBvc1ggKyByZWN0Lm9mZnNldC54O1xyXG4gICAgcmVjdC5jZW50ZXIueSA9IHVuaXRQb3NZICsgcmVjdC5vZmZzZXQueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWPjeWQkeS/ruWkjXVuaXTkvY3nva7vvIhmaXhJblJlY3TosIPnlKjvvIlcclxuICovXHJcbmZ1bmN0aW9uIEZpeFVuaXRQb3MocmVjdCA9IG51bGwsIHVuaXRQb3MgPSBudWxsKXtcclxuICAgIHVuaXRQb3MueCA9IHJlY3QuY2VudGVyLnggLSByZWN0Lm9mZnNldC54O1xyXG4gICAgdW5pdFBvcy55ID0gcmVjdC5jZW50ZXIueSAtIHJlY3Qub2Zmc2V0Lnk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55+p5b2i5ZCE5Liq54K55L2N572u5ZKM5Y+C5pWw77yM6K6w5L2P6KaB5ZyodXBkYXRl5ZCO5YaN6LCD55So77yM5Lul5YWN5pWw5o2u5pyJ6K+vXHJcbiAqL1xyXG5mdW5jdGlvbiBHZXRSZWN0T2Zmc2V0VmVjKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0Lm9mZnNldDtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0Q2VudGVyUG9zKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LmNlbnRlcjtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0U3RhcnRQb3MocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICByZWN0LmNlbnRlci54IC0gR2V0UmVjdEhhbGZXaWR0aChyZWN0KSxcclxuICAgICAgICByZWN0LmNlbnRlci55IC0gR2V0UmVjdEhhbGZIZWlnaHQocmVjdClcclxuICAgICk7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdEVuZFBvcyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHJlY3QuY2VudGVyLnggKyBHZXRSZWN0SGFsZldpZHRoKHJlY3QpLFxyXG4gICAgICAgIHJlY3QuY2VudGVyLnkgKyBHZXRSZWN0SGFsZkhlaWdodChyZWN0KVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0UmVjdFdpZHRoKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LndpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RIZWlnaHQocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3QuaGVpZ2h0O1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RIYWxmV2lkdGgocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3Qud2lkdGggKiAwLjU7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdEhhbGZIZWlnaHQocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3QuaGVpZ2h0ICogMC41O1xyXG59XHJcblxyXG5cclxuLy/msYLpnaLnp69cclxuZnVuY3Rpb24gR2V0QXJlYShyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC53aWR0aCAqIHJlY3QuaGVpZ2h0O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHtcclxuICAgIE5ld1JlY3QsIFVwZGF0ZVJlY3RTaXplLCBVcGRhdGVSZWN0T2Zmc2V0LCBVcGRhdGVSZWN0Q2VudGVyUG9zLCBVcGRhdGVSZWN0UG9zQnlVbml0LCBGaXhVbml0UG9zLFxyXG4gICAgR2V0UmVjdE9mZnNldFZlYywgR2V0UmVjdENlbnRlclBvcywgR2V0UmVjdFN0YXJ0UG9zLCBHZXRSZWN0RW5kUG9zLFxyXG4gICAgR2V0UmVjdFdpZHRoLCBHZXRSZWN0SGFsZldpZHRoLCBHZXRSZWN0SGVpZ2h0LCBHZXRSZWN0SGFsZkhlaWdodCxcclxuICAgIEdldEFyZWFcclxufVxyXG5cclxuLy8gZnVuY3Rpb24gR2V0UmVjdENlbnRlclgocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIHJlY3QuY2VudGVyLng7XHJcbi8vIH1cclxuLy8gZnVuY3Rpb24gR2V0UmVjdFgxKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiBHZXRSZWN0Q2VudGVyWChyZWN0KSAtIHJlY3Qud2lkdGggKiAwLjU7XHJcbi8vIH1cclxuLy8gZnVuY3Rpb24gR2V0UmVjdFgyKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiBHZXRSZWN0Q2VudGVyWChyZWN0KSArIHJlY3Qud2lkdGggKiAwLjU7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RPZmZzZXRZKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiByZWN0Lm9mZnNldC55O1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0Q2VudGVyWShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gcmVjdC5jZW50ZXIueTtcclxuLy8gfVxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0WTEocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIEdldFJlY3RDZW50ZXJZKHJlY3QpIC0gcmVjdC5oZWlnaHQgKiAwLjU7XHJcbi8vIH1cclxuLy8gZnVuY3Rpb24gR2V0UmVjdFkyKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiBHZXRSZWN0Q2VudGVyWShyZWN0KSArIHJlY3QuaGVpZ2h0ICogMC41O1xyXG4vLyB9IiwiaW1wb3J0IHsgTmV3UG9zIH0gZnJvbSBcIi4vcG9pbnRcIjtcclxuaW1wb3J0IHsgTmV3UmVjdCwgR2V0UmVjdFN0YXJ0UG9zLCBHZXRSZWN0RW5kUG9zLCBHZXRSZWN0Q2VudGVyUG9zLCBHZXRSZWN0SGFsZldpZHRoLCBHZXRSZWN0SGFsZkhlaWdodCwgRml4VW5pdFBvcywgVXBkYXRlUmVjdENlbnRlclBvcyB9IGZyb20gXCIuL3JlY3RcIjtcclxuaW1wb3J0IHsgaW50ZXJTZWN0aW9uUG9zIH0gZnJvbSBcIi4vZm9ybXVsYS9hYmNcIjtcclxuXHJcblxyXG4vKipcclxuICog5rGC5Lik55u057q/5Lqk54K5XHJcbiAqIOeUqOebtOe6v+S4gOiIrOaWueeoi+W8j1xyXG4gKi9cclxuZnVuY3Rpb24gSW50ZXJTZWN0aW9uUG9zKGxpbmUxID0gbnVsbCwgbGluZTIgPSBudWxsKXtcclxuICAgIHJldHVybiBpbnRlclNlY3Rpb25Qb3MobGluZTEuZm9ybXVsYSwgbGluZTIuZm9ybXVsYSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmmK/lkKblubPooYzkuo54LHnovbTnmoTnur9cclxuICovXHJcbmZ1bmN0aW9uIElzSG9yaXpvbnRhbExpbmUobGluZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGxpbmUudmVjLnkgPT0gMDtcclxufVxyXG5mdW5jdGlvbiBJc1ZlcnRpY2FsTGluZShsaW5lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gbGluZS52ZWMueCA9PSAwO1xyXG59XHJcblxyXG4vKipcclxuICog5Lik5Liq55+p5b2i5piv5ZCm55u45Lqk77yM5Z+656GA56Kw5pKe5qOA5rWL77yI6ZyA6KaB5YWI5pu05paw5Z2Q5qCH77yJXHJcbiAqIOWOn+eQhu+8mlxyXG4gKiAg5bemeO+8jOWPluS4pOiAheacgOWkp+WAvFxyXG4gKiAg5Y+zeO+8jOWPluS4pOiAheacgOWwj+WAvFxyXG4gKiAg5aaC5p6c5Y+zeOWkp+S6juW3pnjvvIzliJl46L2055u45LqkXHJcbiAqIFnlkIznkIbvvJpcclxuICogIOS4innvvIzlj5bkuKTogIXmnIDlpKflgLxcclxuICogIOS4i3nvvIzlj5bkuKTogIXmnIDlsI/lgLxcclxuICogIOWmguaenOS4i3nlpKfkuo7kuIp577yM5YiZeei9tOebuOS6pFxyXG4gKiAg55uu5YmN77yM5Y2z5L2/5Lik6L656YeN5Y+g77yM5Lmf5LiN566X55u45Lqk77yM6L+Z5qC36IO96YG/5YWN5b6I5aSa6Zeu6aKYXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdJbm5lclJlY3QocmVjdDEgPSBudWxsLCByZWN0MiA9IG51bGwpe1xyXG5cclxuICAgIGxldCBzdGFydDEgPSBHZXRSZWN0U3RhcnRQb3MocmVjdDEpO1xyXG4gICAgbGV0IHN0YXJ0MiA9IEdldFJlY3RTdGFydFBvcyhyZWN0Mik7XHJcbiAgICBsZXQgZW5kMSA9IEdldFJlY3RFbmRQb3MocmVjdDEpO1xyXG4gICAgbGV0IGVuZDIgPSBHZXRSZWN0RW5kUG9zKHJlY3QyKTtcclxuXHJcbiAgICBsZXQgcjF4MSA9IHN0YXJ0MS54O1xyXG4gICAgbGV0IHIyeDEgPSBzdGFydDIueDtcclxuICAgIGxldCBtYXhYMSA9IHIxeDEgPiByMngxID8gcjF4MSA6IHIyeDE7XHJcblxyXG4gICAgbGV0IHIxeDIgPSBlbmQxLng7XHJcbiAgICBsZXQgcjJ4MiA9IGVuZDIueDtcclxuICAgIGxldCBtaW5YMiA9IHIxeDIgPCByMngyID8gcjF4MiA6IHIyeDI7XHJcbiAgICBpZihtaW5YMiA8IG1heFgxKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcjF5MSA9IHN0YXJ0MS55O1xyXG4gICAgbGV0IHIyeTEgPSBzdGFydDIueTtcclxuICAgIGxldCBtYXhZMSA9IHIxeTEgPiByMnkxID8gcjF5MSA6IHIyeTE7XHJcbiAgICBsZXQgcjF5MiA9IGVuZDEueTtcclxuICAgIGxldCByMnkyID0gZW5kMi55O1xyXG4gICAgbGV0IG1pblkyID0gcjF5MiA8IHIyeTIgPyByMXkyIDogcjJ5MjtcclxuICAgIGlmKG1pblkyIDwgbWF4WTEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXdSZWN0KDAsIDAsIG1pblgyIC0gbWF4WDEsIG1pblkyIC0gbWF4WTEpO1xyXG59XHJcblxyXG4vKipcclxuICog5Yik5pat5piv5ZCm55u45LqkXHJcbiAqIOaaguaXtuS9v+eUqE5ld0lubmVyUmVjdO+8jOWQjuacn+eci+aDheWGteaYr+WQpumcgOimgeaJi+WKqOWbnuaUtui1hOa6kCBcclxuICovXHJcbmZ1bmN0aW9uIElzUmVjdHNDcm9zcyhyZWN0MSA9IG51bGwsIHJlY3QyID0gbnVsbCl7XHJcbiAgICBsZXQgcmVjdCA9IE5ld0lubmVyUmVjdChyZWN0MSwgcmVjdDIpO1xyXG4gICAgcmV0dXJuIHJlY3QgPyB0cnVlIDogZmFsc2U7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogaW5uZXIucmVjdOS4jeWHhui2iuWHum91dHRlci5yZWN077yM5L+u5q2jcG9z5L2N572uXHJcbiAqIGlubmVy5ZKMb3V0dGVy6YO95pivcmVjdFR1cGxlXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhJblJlY3Qob3V0dGVyID0gbnVsbCwgaW5uZXIgPSBudWxsLCBpbm5lclVuaXRQb3MgPSBudWxsKXtcclxuICAgIGxldCBpbm5lclBvcyA9IEdldFJlY3RDZW50ZXJQb3MoaW5uZXIpO1xyXG4gICAgbGV0IGlubmVyU3RhcnRQb3MgPSBHZXRSZWN0U3RhcnRQb3MoaW5uZXIpO1xyXG4gICAgbGV0IGlubmVyRW5kUG9zID0gR2V0UmVjdEVuZFBvcyhpbm5lcik7XHJcbiAgICBsZXQgb3V0dGVyU3RhcnRQb3MgPSBHZXRSZWN0U3RhcnRQb3Mob3V0dGVyKTtcclxuICAgIGxldCBvdXR0ZXJFbmRQb3MgPSBHZXRSZWN0RW5kUG9zKG91dHRlcik7XHJcblxyXG4gICAgbGV0IHggPSBpbm5lclBvcy54O1xyXG4gICAgaWYoaW5uZXJTdGFydFBvcy54IDwgb3V0dGVyU3RhcnRQb3MueCl7XHJcbiAgICAgICAgeCA9IG91dHRlclN0YXJ0UG9zLnggKyBHZXRSZWN0SGFsZldpZHRoKGlubmVyKTtcclxuICAgIH1lbHNlIGlmKGlubmVyRW5kUG9zLnggPiBvdXR0ZXJFbmRQb3MueCl7XHJcbiAgICAgICAgeCA9IG91dHRlckVuZFBvcy54IC0gR2V0UmVjdEhhbGZXaWR0aChpbm5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHkgPSBpbm5lclBvcy55O1xyXG4gICAgaWYoaW5uZXJTdGFydFBvcy55IDwgb3V0dGVyU3RhcnRQb3MueSl7XHJcbiAgICAgICAgeSA9IG91dHRlclN0YXJ0UG9zLnkgKyBHZXRSZWN0SGFsZkhlaWdodChpbm5lcik7XHJcbiAgICB9ZWxzZSBpZihpbm5lckVuZFBvcy55ID4gb3V0dGVyRW5kUG9zLnkpe1xyXG4gICAgICAgIHkgPSBvdXR0ZXJTdGFydFBvcy55IC0gR2V0UmVjdEhhbGZIZWlnaHQoaW5uZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHggIT0gaW5uZXJQb3MueCB8fCB5ICE9IGlubmVyUG9zLnkpe1xyXG4gICAgICAgIFVwZGF0ZVJlY3RDZW50ZXJQb3MoaW5uZXIsIHgsIHkpO1xyXG4gICAgICAgIEZpeFVuaXRQb3MocmVjdCwgaW5uZXJVbml0UG9zKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDlvZPliY3kvY3nva7mmK/lkKblnKjnn6nlvaLkuK3vvIjlkIzmoLfpnIDopoHlhYjmm7TmlrByZWN05L2N572u77yJXHJcbiAqIOi/memHjOS4jeWMheWQq+i4qee6v++8jOWboOatpOS4jeiDveeUqD495ZKMPD1cclxuICog5Li65LqG6YG/5YWN57G75Ly8IHRpbGXnmoQgcm93SW5kZXggPSB4L2dyaWRXaWR0aOWvvOiHtOaVsOe7hOi2iueVjOmXrumimFxyXG4gKi9cclxuZnVuY3Rpb24gSXNQb3NJblJlY3QoeCA9IDAsIHkgPSAwLCByZWN0ID0gbnVsbCl7XHJcbiAgICBsZXQgc3RhcnRQb3MgPSBHZXRSZWN0U3RhcnRQb3MocmVjdCk7XHJcbiAgICBsZXQgZW5kUG9zID0gR2V0UmVjdEVuZFBvcyhyZWN0KTtcclxuICAgIHJldHVybiB4ID4gc3RhcnRQb3MueCAmJiB4IDwgZW5kUG9zLnhcclxuICAgICAgICAmJiB5ID4gc3RhcnRQb3MueSAmJiB5IDwgZW5kUG9zLnk7XHJcbn1cclxuXHJcbmV4cG9ydCB7SW50ZXJTZWN0aW9uUG9zLCBcclxuICAgIElzSG9yaXpvbnRhbExpbmUsIElzVmVydGljYWxMaW5lLFxyXG4gICAgSXNSZWN0c0Nyb3NzLCBGaXhJblJlY3QsIElzUG9zSW5SZWN0fVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLSDku6XkuIvlvoXlrppcclxuXHJcbi8qKlxyXG4gKiDmoLnmja7nur/mrrXkvZznn6nlvaJcclxuICovXHJcbmZ1bmN0aW9uIE5ld091dHRlclJlY3QoeDEgPSAwLCB5MSA9IDAsIHgyID0gMCwgeTIgPSAwKXtcclxuICAgIGxldCB3aWR0aCA9IHgyIC0geDE7XHJcbiAgICBsZXQgaGVpZ2h0ID0geTIgLSB5MTtcclxuICAgIGlmKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDApe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGNlbnRlclggPSB4MSArICh4MiAtIHgxKSAqIDAuNTtcclxuICAgIGxldCBjZW50ZXJZID0geTEgKyAoeTIgLSB5MSkgKiAwLjU7XHJcbiAgICBsZXQgcmVjdCA9IE5ld1JlY3REZWZhdWx0KHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgVXBkYXRlUmVjdFBvcyhyZWN0LCBjZW50ZXJYLCBjZW50ZXJZKTtcclxuICAgIHJldHVybiByZWN0O1xyXG59XHJcblxyXG4vKipcclxuICog5Lik5Liq55+p5b2i6Ze055qE5aSW5o6l55+p5b2iXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdPdXR0ZXJSZWN0QnlSZWN0cyhyZWN0MSA9IG51bGwsIHJlY3QyID0gbnVsbCl7XHJcbiAgICBsZXQgcjF4MSA9IEdldFJlY3RYMShyZWN0MSk7XHJcbiAgICBsZXQgcjJ4MSA9IEdldFJlY3RYMShyZWN0Mik7XHJcbiAgICBsZXQgeDEgPSByMXgxIDwgcjJ4MSA/IHIxeDEgOiByMngxO1xyXG4gICAgbGV0IHIxeDIgPSBHZXRSZWN0WDIocmVjdDEpO1xyXG4gICAgbGV0IHIyeDIgPSBHZXRSZWN0WDIocmVjdDIpO1xyXG4gICAgbGV0IHgyID0gcjF4MiA+IHIyeDIgPyByMXgyIDogcjJ4MjtcclxuXHJcbiAgICBsZXQgcjF5MSA9IEdldFJlY3RZMShyZWN0MSk7XHJcbiAgICBsZXQgcjJ5MSA9IEdldFJlY3RZMShyZWN0Mik7XHJcbiAgICBsZXQgeTEgPSByMXkxIDwgcjJ5MSA/IHIxeTEgOiByMnkxO1xyXG4gICAgbGV0IHIxeTIgPSBHZXRSZWN0WTIocmVjdDEpO1xyXG4gICAgbGV0IHIyeTIgPSBHZXRSZWN0WTIocmVjdDIpO1xyXG4gICAgbGV0IHkyID0gcjF5MiA+IHIyeTIgPyByMXkyIDogcjJ5MjtcclxuXHJcbiAgICByZXR1cm4gTmV3T3V0dGVyUmVjdCh4MSwgeTEsIHgyLCB5Mik7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55+p5b2i5o6S5pal77yMdGFyZ2V0UmVjdOS8muiiq2Jsb2NrUmVjdOW8ueWHuuWOu1xyXG4gKiBUT0RP77yM5Lul5ZCO5a6M5ZaE5rOo6YeKXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhFeGNsdWRlUmVjdChibG9ja1JlY3QgPSBudWxsLCB0YXJnZXRSZWN0ID0gbnVsbCl7XHJcbiAgICBsZXQgcG9zMSA9IGJsb2NrUmVjdC5wb3M7XHJcbiAgICBsZXQgcG9zMiA9IHRhcmdldFJlY3QucG9zO1xyXG4gICAgLy/orqHnrpflhbPns7vvvIzkuIrkuIvlt6blj7NcclxuICAgIGxldCB2eCA9IHBvczEueCAtIHBvczIueDtcclxuICAgIGxldCB2eSA9IHBvczEueSAtIHBvczIueTtcclxuICAgIGxldCB4ID0gdnggPCAwID8gdngqLTEgOiB2eDtcclxuICAgIGxldCB5ID0gdnkgPCAwID8gdnkqLTEgOiB2eTtcclxuICAgIGlmKHggPiB5KXtcclxuICAgICAgICAvL+W3puWPs1xyXG4gICAgICAgIGlmKHZ4ID4gMCl7XHJcbiAgICAgICAgICAgIC8vcmVjdDLlnKjlt6ZcclxuICAgICAgICAgICAgcG9zMi54ID0gYmxvY2tSZWN0LnBvc1N0YXJ0LnggLSB0YXJnZXRSZWN0LndpZHRoIC0gdGFyZ2V0UmVjdC54T2Zmc2V0O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL3JlY3Qy5Zyo5Y+zXHJcbiAgICAgICAgICAgIHBvczIueCA9IGJsb2NrUmVjdC5wb3NFbmQueCAtIHRhcmdldFJlY3QueE9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICAvL+S4iuS4i1xyXG4gICAgICAgIGlmKHZ5ID4gMCl7XHJcbiAgICAgICAgICAgIC8vcmVjdDLlnKjkuIpcclxuICAgICAgICAgICAgcG9zMi55ID0gYmxvY2tSZWN0LnBvc1N0YXJ0LnkgLSB0YXJnZXRSZWN0LmhlaWdodCAtIHRhcmdldFJlY3QueU9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgLy9yZWN0MuWcqOS4i1xyXG4gICAgICAgICAgICBwb3MyLnkgPSBibG9ja1JlY3QucG9zRW5kLnkgLSB0YXJnZXRSZWN0LnlPZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgVXBkYXRlUmVjdCh0YXJnZXRSZWN0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHJlY3Qx5piv5ZCm5a6M5YWo6L+H5LqGcmVjdDJcclxuICovXHJcbmZ1bmN0aW9uIElzUmVjdHNDcm9zc092ZXIocmVjdDEgPSBudWxsLCByZWN0MiA9IG51bGwpe1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gSXNSZWN0c0Nyb3NzV2l0aFZlYyhyZWN0MSA9IG51bGwsIHZ4ID0gMCwgdnkgPSAwLCByZWN0MiA9IG51bGwpe1xyXG4gICAgXHJcbn0iLCJpbXBvcnQgeyBTZXRQb3MgfSBmcm9tIFwiLi4vcG9zL3V0aWxzXCI7XHJcbmltcG9ydCB7IE5ld1JlY3QsIFVwZGF0ZVJlY3RQb3NCeVVuaXQsIEdldFJlY3RTdGFydFBvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IFRvTG9jYXRlUG9zLCBOZXdQb3MgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnRcIjtcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiO1xyXG5pbXBvcnQgeyBJc1JlY3RzQ3Jvc3MgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvdXRpbHNcIjtcclxuXHJcblxyXG4vKipcclxuICog5Luj56CB6YeP5bCR77yM5pqC5pe26L+Z5qC35pS+XHJcbiAqL1xyXG5jbGFzcyBDYW1lcmEgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMucG9zID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlY3QgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdDYW1lcmEoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgbGV0IGNhbWVyYSA9IG5ldyBDYW1lcmEoKTtcclxuICAgIGNhbWVyYS5wb3MgPSBTZXRQb3MoY2FtZXJhLmlkLCB4LCB5KTtcclxuICAgIGNhbWVyYS5yZWN0ID0gTmV3UmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIFVwZGF0ZVJlY3RQb3NCeVVuaXQoY2FtZXJhLnJlY3QsIHgsIHkpO1xyXG4gICAgcmV0dXJuIGNhbWVyYTtcclxufVxyXG5cclxuLy/nm67moIfnn6nlvaLmmK/lkKblnKjplZzlpLTlhoVcclxuZnVuY3Rpb24gSXNJbkNhbWVyYShjYW1lcmEgPSBudWxsLCByZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gSXNSZWN0c0Nyb3NzKGNhbWVyYS5yZWN0LCByZWN0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOi9rOS4uumVnOWktOWdkOagh1xyXG4gKiB0YXJnZXRQb3PvvIzlpoLmnpzmmK9yZWN077yM6K+355Soc3RhcnRQb3NcclxuICovXHJcbmZ1bmN0aW9uIFRvU2NyZWVuUG9zKGNhbWVyYSA9IG51bGwsIHRhcmdldFBvcyA9IG51bGwpe1xyXG4gICAgcmV0dXJuIFRvTG9jYXRlUG9zKHRhcmdldFBvcywgR2V0UmVjdFN0YXJ0UG9zKGNhbWVyYS5yZWN0KSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDplZzlpLTlnZDmoIfovazkuLrlhajlsYDlnZDmoIdcclxuICovXHJcbmZ1bmN0aW9uIFRvV29ybGRQb3MoY2FtZXJhID0gbnVsbCwgc2NyZWVuWCA9IDAsIHNjcmVlblkgPSAwKXtcclxuICAgIGxldCBzdGFydCA9IEdldFJlY3RTdGFydFBvcyhjYW1lcmEucmVjdCk7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHN0YXJ0LnggKyBzY3JlZW5YLFxyXG4gICAgICAgIHN0YXJ0LnkgKyBzY3JlZW5ZXHJcbiAgICApO1xyXG59XHJcblxyXG4vKipcclxuICog6ZWc5aS056e75YqoXHJcbiAqL1xyXG5mdW5jdGlvbiBDYW1lcmFNb3ZlKGNhbWVyYSA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICBTZXRQb3MoY2FtZXJhLmlkLCB4LCB5KTtcclxuICAgIFVwZGF0ZVJlY3RQb3NCeVVuaXQoY2FtZXJhLnJlY3QsIHgsIHkpO1xyXG59XHJcblxyXG5leHBvcnR7TmV3Q2FtZXJhLCBJc0luQ2FtZXJhLCBUb1NjcmVlblBvcywgVG9Xb3JsZFBvc30iLCJcclxuLyoqXHJcbiAqIOa1j+iniOWZqOeahGtleS1jb2RlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgS0VZX1JJR0hUID0gMzk7XHJcbmV4cG9ydCBjb25zdCBLRVlfTEVGVCA9IDM3O1xyXG5leHBvcnQgY29uc3QgS0VZX1VQID0gMzg7XHJcbmV4cG9ydCBjb25zdCBLRVlfRE9XTiA9IDQwO1xyXG5cclxuZXhwb3J0IGNvbnN0IEtFWV9TUEFDRSA9IDMyO1xyXG5cclxuZXhwb3J0IGNvbnN0IEtFWV9XID0gODc7XHJcbmV4cG9ydCBjb25zdCBLRVlfQSA9IDY1O1xyXG5leHBvcnQgY29uc3QgS0VZX1MgPSA4MztcclxuZXhwb3J0IGNvbnN0IEtFWV9EID0gNjg7XHJcblxyXG4vKipcclxuICogIGVuZ2luZSA9IHdlYi1icm93c2VyLCBjYW52YXNcclxuICovXHJcbnZhciBfZW5naW5lID0ge1xyXG5cdGN0eCA6IG51bGwsXHJcbiAgICBjYW52YXMgOiBudWxsLFxyXG4gICAgZnBzIDogMCxcclxuICAgIHRpY2sgOiAwXHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRFbmdpbmUoKXtcclxuICAgIHJldHVybiBfZW5naW5lO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0Q2FudmFzKHdpZHRoID0gMCwgaGVpZ2h0ID0gMCwgZnBzID0gMTApe1xyXG4gICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xyXG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgX2VuZ2luZS5jYW52YXMgPSBjYW52YXM7XHJcbiAgICBfZW5naW5lLmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICBfZW5naW5lLmN0eC5zdHJva2VTdHlsZT1cIiMwMDAwZmZcIjsgICAgICAgICAgLy/nlLvnn6nlvaLmoYbnlKjnmoRcclxuICAgIF9lbmdpbmUuZnBzID0gZnBzO1xyXG4gICAgX2VuZ2luZS50aWNrID0gMTAwMCAvIGZwcztcclxufVxyXG5cclxuZXhwb3J0e2dldEVuZ2luZSwgaW5pdENhbnZhc30iLCJpbXBvcnQgeyBnZXRFbmdpbmUgfSBmcm9tIFwiLi9tb2RlbFwiO1xyXG5cclxudmFyIF9lbmdpbmUgPSBnZXRFbmdpbmUoKTtcclxuXHJcbmZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgbGV0IGMgPSBfZW5naW5lLmNhbnZhcztcclxuICAgIF9lbmdpbmUuY3R4LmNsZWFyUmVjdCgwLCAwLCBjLndpZHRoLCBjLmhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERyYXcoaW1nRGF0YSwgeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApIHtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuXHRjdHguZHJhd0ltYWdlKGltZ0RhdGEsIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG5jb25zdCBSYWRpdXMgPSBNYXRoLlBJLzE4MDtcclxuZnVuY3Rpb24gRHJhd0ltYWdlV2l0aEFuZ2xlKGFuZ2xlID0gMCwgaW1nRGF0YSwgc3ggPSAwLCBzeSA9IDAsIHN3aWR0aCA9IDAsIHNoZWlnaHQgPSAwLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCkge1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIGN0eC50cmFuc2xhdGUoeCArIHdpZHRoLzIsIHkgKyBoZWlnaHQvMik7XHJcbiAgICBjdHgucm90YXRlKGFuZ2xlICogUmFkaXVzKTtcclxuICAgIERyYXdJbWFnZShpbWdEYXRhLCBzeCwgc3ksIHN3aWR0aCwgc2hlaWdodCwgLXdpZHRoLzIsIC1oZWlnaHQvMiwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICAgIC8vIGN0eC50cmFuc2xhdGUoMTAwLCAxMDApO1xyXG5cdC8vIGN0eC5yb3RhdGUoOTAgKiBNYXRoLlBJLzE4MCk7XHQvL+S7peS4iumdoueahOWBj+enu+eCueS4uuWHhu+8jOi/m+ihjOaXi+i9rFxyXG5cdC8vIGN0eC5kcmF3SW1hZ2UoaSwgMTg3LCAwLCAxODYsIDEzMCwgLTAsIC0wLCAxMDAsIDEwMCk7XHJcbn1cclxuXHJcbi8v5Y+C6ICD77yaY29udGV4dC5kcmF3SW1hZ2UoaW1nLHN4LHN5LHN3aWR0aCxzaGVpZ2h0LHgseSx3aWR0aCxoZWlnaHQpO1xyXG5mdW5jdGlvbiBkcmF3SW1hZ2UoaW1nRGF0YSwgc3ggPSAwLCBzeSA9IDAsIHN3aWR0aCA9IDAsIHNoZWlnaHQgPSAwLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCkge1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG5cdGN0eC5kcmF3SW1hZ2UoaW1nRGF0YSwgc3gsIHN5LCBzd2lkdGgsIHNoZWlnaHQsIHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UmVjdCh4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcbiAgICBjdHguc3Ryb2tlUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0xpbmUoeDEgPSAwLCB5MSA9IDAsIHgyID0gMCwgeTIgPSAwKXtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5tb3ZlVG8oeDEsIHkxKTtcclxuICAgIGN0eC5saW5lVG8oeDIsIHkyKTtcclxuICAgIGN0eC5zdHJva2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0NpcmNsZSh4ID0gMCwgeSA9IDAsIHJhZGl1cyA9IDApe1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4LmFyYyh4LCB5LCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgIGN0eC5zdHJva2UoKTtcclxufVxyXG5cclxuZXhwb3J0e2NsZWFyLCBkcmF3SW1hZ2UsIGRyYXdSZWN0LCBkcmF3TGluZSwgZHJhd0NpcmNsZX0iLCJpbXBvcnQgeyBHZXREaXNwbGF5TGlzdCB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvdmlldy9jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgTGlua0l0ZXJhdG9yIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuaW1wb3J0IHsgR2V0UG9zIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9wb3MvdXRpbHNcIjtcclxuaW1wb3J0IHsgVXBkYXRlUmVjdFBvc0J5VW5pdCwgR2V0UmVjdFN0YXJ0UG9zLCBHZXRSZWN0V2lkdGgsIEdldFJlY3RIZWlnaHQgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9nZW9tZXRyaWMvcmVjdFwiO1xyXG5pbXBvcnQgeyBHZXRDYW1lcmEgfSBmcm9tIFwiLi4vd29ybGQvcmVzXCI7XHJcbmltcG9ydCB7IElzSW5DYW1lcmEsIFRvU2NyZWVuUG9zIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgZHJhd0ltYWdlLCBkcmF3UmVjdCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9yZW5kZXJcIjtcclxuaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiO1xyXG5cclxuLyoqXHJcbiAqIOa4suafk+ezu+e7n++8jOmAu+i+keatpemqpO+8mlxyXG4gKiAxLiAgIOa4hemZpOeUu+W4g1xyXG4gKiAyLiAgIOmHjeWumuS9jeaRhOWDj+aculxyXG4gKiAzLiAgIOiuoeeul+WNleS9jeaYvuekuuefqeW9ouaYr+WQpuWcqOaRhOWDj+acuuefqeW9ouWGhVxyXG4gKiA0LiAgIOi9rOaNouS4uueUu+W4g+WdkOagh1xyXG4gKiA1LiAgIOeUu+WHuuWbvuWDj1xyXG4gKi9cclxuY2xhc3MgUmVuZGVyVXBkYXRlU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgLy9jYW52YXNDbGVhcigpO1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXREaXNwbGF5TGlzdCgpLCBkaXNwbGF5VHVwbGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcG9zID0gR2V0UG9zKGRpc3BsYXlUdXBsZS5lbnRpdHlJZCk7XHJcbiAgICAgICAgICAgIFVwZGF0ZVJlY3RQb3NCeVVuaXQoZGlzcGxheVR1cGxlLmRpc3BsYXlBcmVhLCBwb3MueCwgcG9zLnkpO1xyXG4gICAgICAgICAgICBkcmF3RnJhbWVJbkNhbWVyYShkaXNwbGF5VHVwbGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgcmVuZGVyU3lzID0gbnVsbDtcclxuZnVuY3Rpb24gR2V0UmVuZGVyVXBkYXRlU3lzdGVtKCl7XHJcbiAgICBpZighcmVuZGVyU3lzKXtcclxuICAgICAgICByZW5kZXJTeXMgPSBuZXcgUmVuZGVyVXBkYXRlU3lzdGVtKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVuZGVyU3lzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOWwhuaJgOacieefqeW9oueUu+WHuuadpVxyXG4gKi9cclxuY2xhc3MgRHJhd1JlY3RTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xyXG4gICAgb25VcGRhdGUoZHQgPSAwKXtcclxuICAgICAgICAvL0RyYXdSZWN0KEdldENhbWVyYSgpLCB0aGlzLl9jYW1lcmEucmVjdCk7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldFJlY3RMaXN0KCksIGNvbGxpZGVyID0+IHtcclxuICAgICAgICAgICAgZHJhd1JlY3RJbkNhbWVyYShjb2xsaWRlci5yZWN0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIGRlYnVnU3lzID0gbnVsbDtcclxuZnVuY3Rpb24gR2V0RHJhd1JlY3RTeXN0ZW0oKXtcclxuICAgIGlmKCFkZWJ1Z1N5cyl7XHJcbiAgICAgICAgZGVidWdTeXMgPSBuZXcgRHJhd1JlY3RTeXN0ZW0oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWJ1Z1N5cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDmuLLmn5PliLDnlLvluIPvvIzlj6rmuLLmn5PlnKjplZzlpLTlhoXnmoRcclxuICovXHJcbmZ1bmN0aW9uIGRyYXdGcmFtZUluQ2FtZXJhKGRpc3BsYXlUdXBsZSA9IG51bGwpe1xyXG4gICAgbGV0IGNhbWVyYSA9IEdldENhbWVyYSgpO1xyXG4gICAgbGV0IGRpc3BsYXlBcmVhID0gZGlzcGxheVR1cGxlLmRpc3BsYXlBcmVhO1xyXG4gICAgaWYoIUlzSW5DYW1lcmEoY2FtZXJhLCBkaXNwbGF5QXJlYSkpe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8v6L2s5Li655S75biD5Z2Q5qCHXHJcbiAgICBsZXQgc2NyZWVuUG9zID0gVG9TY3JlZW5Qb3MoY2FtZXJhLCBHZXRSZWN0U3RhcnRQb3MoZGlzcGxheUFyZWEpKTtcclxuXHJcbiAgICBsZXQgdGV4dHVyZUFyZWEgPSBkaXNwbGF5VHVwbGUuc3ByaXRlRnJhbWUudGV4dHVyZUFyZWE7XHJcbiAgICBkcmF3SW1hZ2UoZGlzcGxheVR1cGxlLnNwcml0ZUZyYW1lLmJpdG1hcERhdGEsXHJcbiAgICAgICAgdGV4dHVyZUFyZWEueCwgdGV4dHVyZUFyZWEueSwgdGV4dHVyZUFyZWEud2lkdGgsIHRleHR1cmVBcmVhLmhlaWdodCxcclxuICAgICAgICBzY3JlZW5Qb3MueCwgc2NyZWVuUG9zLnksIEdldFJlY3RXaWR0aChkaXNwbGF5QXJlYSksIEdldFJlY3RIZWlnaHQoZGlzcGxheUFyZWEpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1JlY3RJbkNhbWVyYShkaXNwbGF5QXJlYSA9IG51bGwpe1xyXG4gICAgbGV0IGNhbWVyYSA9IEdldENhbWVyYSgpO1xyXG4gICAgaWYoIUlzSW5DYW1lcmEoY2FtZXJhLCBkaXNwbGF5QXJlYSkpe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8v6L2s5Li655S75biD5Z2Q5qCHXHJcbiAgICBsZXQgc2NyZWVuUG9zID0gVG9TY3JlZW5Qb3MoY2FtZXJhLCBHZXRSZWN0U3RhcnRQb3MoZGlzcGxheUFyZWEpKTtcclxuICAgIGRyYXdSZWN0KFxyXG4gICAgICAgIHNjcmVlblBvcy54LCBzY3JlZW5Qb3MueSxcclxuICAgICAgICBHZXRSZWN0V2lkdGgoZGlzcGxheUFyZWEpLCBHZXRSZWN0SGVpZ2h0KGRpc3BsYXlBcmVhKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7R2V0UmVuZGVyVXBkYXRlU3lzdGVtLCBHZXREcmF3UmVjdFN5c3RlbSwgZHJhd0ZyYW1lSW5DYW1lcmEsIGRyYXdSZWN0SW5DYW1lcmF9IiwiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiO1xyXG5pbXBvcnQgeyBMaW5rSXRlcmF0b3IgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5pbXBvcnQgeyBHZXRQb3NDb21wb25lbnRMaXN0IH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9wb3MvY29tcG9uZW50XCI7XHJcblxyXG4vKipcclxuICogMjAxOS4wOS4yOVxyXG4gKiAgICAgIOe7j+i/h+iAg+iZke+8jOebruWJjeWPquWBmueugOWNleeJiOacrO+8jOS4jeimgeaDs+W+l+WkqumVv+i/nFxyXG4gKiAgICAgIOaJgOS7peWFiOS4jeeUqOezu+e7n+e7n+S4gOabtOaWsOS9jee9ru+8jOebtOaOpeWcqGFjdGlvbuS4rXNldHBvc+WwseWlvVxyXG4gKi9cclxuY2xhc3MgUG9zVXBkYXRlU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldFBvc0NvbXBvbmVudExpc3QoKSwgbW92ZUNvbSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2ZWMgPSBtb3ZlQ29tLnZlYztcclxuICAgICAgICAgICAgbGV0IHBvcyA9IG1vdmVDb20ucG9zO1xyXG4gICAgICAgICAgICBwb3MueCArPSB2ZWMueDtcclxuICAgICAgICAgICAgcG9zLnkgKz0gdmVjLnk7XHJcbiAgICAgICAgICAgIHZlYy54ID0gMDtcclxuICAgICAgICAgICAgdmVjLnkgPSAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgc3lzID0gbnVsbDtcclxuZnVuY3Rpb24gR2V0UG9zVXBkYXRlU3lzdGVtKCl7XHJcbiAgICBpZighc3lzKXtcclxuICAgICAgICBzeXMgPSBuZXcgUG9zVXBkYXRlU3lzdGVtKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3lzO1xyXG59XHJcblxyXG4vKipcclxuICog5pqC5pe25pS+552A77yM5Lul5ZCO5Y+v6IO96KaB5pS+5Zyoc3lzdGVtTGlzdFswXe+8jOS7peS+v+avj+W4p+WIneWni+WMluS4tOaXtuaVsOaNrlxyXG4gKi9cclxuY2xhc3MgQ2xlYXJTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xyXG4gICAgb25VcGRhdGUoZHQgPSAwKXtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0UG9zQ29tcG9uZW50TGlzdCgpLCBtb3ZlQ29tID0+IHtcclxuICAgICAgICAgICAgbGV0IHZlYyA9IG1vdmVDb20udmVjO1xyXG4gICAgICAgICAgICB2ZWMueCA9IDA7XHJcbiAgICAgICAgICAgIHZlYy55ID0gMDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0e0dldFBvc1VwZGF0ZVN5c3RlbX0iLCJpbXBvcnQgeyBnZXRFbmdpbmUgfSBmcm9tIFwiLi9tb2RlbFwiO1xyXG5cclxudmFyIF9lbmdpbmUgPSBnZXRFbmdpbmUoKTtcclxuXHJcbmZ1bmN0aW9uIGxvYWRJbWcoaW1nU3JjLCBvbkxvYWRDYWxsYmFjayl7XHJcbiAgICBsZXQgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICBpbWcuc3JjID0gaW1nU3JjO1xyXG4gICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBvbkxvYWRDYWxsYmFjayhpbWcpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgX2NhbGxiYWNrO1xyXG52YXIgX2ZyYW1lTm8gPSAwO1xyXG52YXIgX2R0ID0gMDtcclxudmFyIF9sYXN0ID0gMDtcclxudmFyIF9pc0VuZCA9IGZhbHNlO1xyXG5mdW5jdGlvbiB0aWNrKHRpbWVzdGFtcCkge1xyXG4gICAgX2R0ID0gdGltZXN0YW1wIC0gX2xhc3Q7XHJcbiAgICBfbGFzdCA9IHRpbWVzdGFtcDtcclxuICAgIF9jYWxsYmFjayhfZHQpO1xyXG4gICAgaWYoIV9pc0VuZCl7XHJcbiAgICAgICAgX2ZyYW1lTm8gPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBSdW4yMjIyKG9uVXBkYXRlQ2FsbGJhY2sgPSBudWxsKSB7XHJcbiAgICBfaXNFbmQgPSBmYWxzZTtcclxuICAgIF9jYWxsYmFjayA9IG9uVXBkYXRlQ2FsbGJhY2s7XHJcbiAgICBfZnJhbWVObyA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBkZWJ1Z1xyXG4gKi9cclxudmFyIHN0YXJ0ID0gbnVsbDtcclxudmFyIGxhc3QgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuZnVuY3Rpb24gcnVuVGljayhvblVwZGF0ZUNhbGxiYWNrID0gbnVsbCkge1xyXG4gICAgX2lzRW5kID0gZmFsc2U7XHJcbiAgICBfY2FsbGJhY2sgPSBvblVwZGF0ZUNhbGxiYWNrO1xyXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgaWYoIV9pc0VuZCl7XHJcbiAgICAgICAgICAgIF9jYWxsYmFjayhzdGFydCAtIGxhc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXN0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICB9LCBfZW5naW5lLnRpY2spO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9wKCl7XHJcbiAgICBfaXNFbmQgPSB0cnVlO1xyXG59XHJcblxyXG5cclxuLy/lm6DkuLrmjInkvY/plK7nmoTor53vvIzkvJrkuI3mlq3op6blj5FvbktleWRvd27vvIzmiYDku6XlgZrkuKptYXDliKTmlq1cclxudmFyIF9rZXlEb3duTWFwID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBvbktleUNhbGxiYWNrKGtleURvd25DYWxsYmFjayA9IG51bGwsIGtleVVwQ2FsbGJhY2sgPSBudWxsKXtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlID0+IHtcclxuICAgICAgICBsZXQgY29kZSA9IGUua2V5Q29kZTtcclxuICAgICAgICBpZihfa2V5RG93bk1hcC5nZXQoY29kZSkpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9rZXlEb3duTWFwLnNldChjb2RlLCAxKTtcclxuICAgICAgICBrZXlEb3duQ2FsbGJhY2soZS5rZXlDb2RlKTtcclxuICAgIH0pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBlID0+IHtcclxuICAgICAgICBsZXQgY29kZSA9IGUua2V5Q29kZTtcclxuICAgICAgICBfa2V5RG93bk1hcC5kZWxldGUoY29kZSk7XHJcbiAgICAgICAga2V5VXBDYWxsYmFjayhlLmtleUNvZGUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBodHRwczovL2Jsb2cuY3Nkbi5uZXQvcXFfMTc2MTYxNjkvYXJ0aWNsZS9kZXRhaWxzLzcyODMzMDQ0XHJcbiAqL1xyXG5mdW5jdGlvbiBvbk1vdXNlQ2FsbGJhY2sobW91c2Vkb3duQ2FsbGJhY2sgPSBudWxsLCBtb3VzZXVwQ2FsbGJhY2sgPSBudWxsKXtcclxuICAgIF9lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgIGxldCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGxldCB4ID0gZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCAqIChjYW52YXMud2lkdGggLyByZWN0LndpZHRoKTtcclxuICAgICAgICBsZXQgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcCAqIChjYW52YXMuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpO1xyXG4gICAgICAgIG1vdXNlZG93bkNhbGxiYWNrKHgsIHkpO1xyXG4gICAgfSk7XHJcbiAgICBfZW5naW5lLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgbGV0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgbGV0IHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0ICogKGNhbnZhcy53aWR0aCAvIHJlY3Qud2lkdGgpO1xyXG4gICAgICAgIGxldCB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wICogKGNhbnZhcy5oZWlnaHQgLyByZWN0LmhlaWdodCk7XHJcbiAgICAgICAgbW91c2V1cENhbGxiYWNrKHgsIHkpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBfZW5naW5lLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnQgPT4ge1xyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKGV2ZW50LngsIGV2ZW50LnkpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvL19lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixkb01vdXNlTW92ZSxmYWxzZSk7XHJcbiAgICAvL19lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLGRvTW91c2VPdXQsZmFsc2UpO1xyXG59XHJcblxyXG5leHBvcnR7XHJcbiAgICBsb2FkSW1nLCBydW5UaWNrLCBzdG9wLCBvbktleUNhbGxiYWNrLCBvbk1vdXNlQ2FsbGJhY2tcclxufSIsImltcG9ydCB7IEdldEFjdGlvblN5c3RlbSB9IGZyb20gXCIuL2FjdGlvblwiO1xyXG5pbXBvcnQgeyBHZXRSZW5kZXJVcGRhdGVTeXN0ZW0sIEdldERyYXdSZWN0U3lzdGVtIH0gZnJvbSBcIi4vcmVuZGVyXCI7XHJcbmltcG9ydCB7IEdldFBvc1VwZGF0ZVN5c3RlbSB9IGZyb20gXCIuL21vdmVcIjtcclxuaW1wb3J0IHsgcnVuVGljayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9wcm9jZXNzb3JcIjtcclxuaW1wb3J0IHsgUHVzaFRvTGluaywgTmV3TGluaywgTGlua0l0ZXJhdG9yLCBJbnNlcnRUb0xpbmsgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5cclxuLyoqXHJcbiAqIOS4u+ezu+e7n+WIl+ihqFxyXG4gKi9cclxudmFyIHBvc1N5cyA9IEdldFBvc1VwZGF0ZVN5c3RlbSgpO1xyXG52YXIgbG9naWNTeXN0ZW1zID0gbnVsbDtcclxudmFyIHJlbmRlclN5c3RlbXMgPSBudWxsO1xyXG5mdW5jdGlvbiBpbml0U3lzdGVtcyhkZWJ1ZyA9IGZhbHNlKXtcclxuICAgIGxvZ2ljU3lzdGVtcyA9IE5ld0xpbmsoKTtcclxuICAgIFB1c2hUb0xpbmsobG9naWNTeXN0ZW1zLCBHZXRBY3Rpb25TeXN0ZW0oKSk7XHJcbiAgICByZW5kZXJTeXN0ZW1zID0gTmV3TGluaygpO1xyXG4gICAgUHVzaFRvTGluayhyZW5kZXJTeXN0ZW1zLCBHZXRSZW5kZXJVcGRhdGVTeXN0ZW0oKSk7XHJcblxyXG4gICAgLy/liJ3lp4vpu5jorqTns7vnu59cclxuICAgIGlmKGRlYnVnKXtcclxuICAgICAgICBQdXNoVG9MaW5rKHJlbmRlclN5c3RlbXMsIEdldERyYXdSZWN0U3lzdGVtKCkpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgbG9naWNUaWNrID0gMTY7ICAgICAvLzYwZnBzXHJcbnZhciByZW5kZXJUaWNrID0gNDE7ICAgIC8vMjRmcHNcclxudmFyIF90MSwgX3QyID0gMDtcclxuZnVuY3Rpb24gcnVuV2l0aFNjZW5lKHNjZW5lKXtcclxuICAgIExpbmtJdGVyYXRvcihsb2dpY1N5c3RlbXMsIHN5c3RlbSA9PiB7XHJcbiAgICAgICAgc3lzdGVtLm9uU3RhcnQoKTtcclxuICAgIH0pO1xyXG4gICAgTGlua0l0ZXJhdG9yKHJlbmRlclN5c3RlbXMsIHN5c3RlbSA9PiB7XHJcbiAgICAgICAgc3lzdGVtLm9uU3RhcnQoKTtcclxuICAgIH0pO1xyXG4gICAgc2NlbmUub25TdGFydCgpO1xyXG5cclxuICAgIC8vbWFpbiBsb29wXHJcbiAgICBydW5UaWNrKChkdCk9PntcclxuICAgICAgICBfdDEgKz0gZHQ7XHJcbiAgICAgICAgaWYoX3QxID49IGxvZ2ljVGljayl7XHJcbiAgICAgICAgICAgIF90MSAtPSBsb2dpY1RpY2s7XHJcbiAgICAgICAgICAgIHNjZW5lLm9uVXBkYXRlKGR0KTtcclxuICAgICAgICAgICAgTGlua0l0ZXJhdG9yKGxvZ2ljU3lzdGVtcywgc3lzdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHN5c3RlbS5vblVwZGF0ZShkdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3QyICs9IGR0O1xyXG4gICAgICAgIGlmKF90MiA+PSByZW5kZXJUaWNrKXtcclxuICAgICAgICAgICAgX3QyIC09IHJlbmRlclRpY2s7XHJcbiAgICAgICAgICAgIExpbmtJdGVyYXRvcihyZW5kZXJTeXN0ZW1zLCBzeXN0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtLm9uVXBkYXRlKGR0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEFkZFN5c3RlbShzeXN0ZW0gPSBudWxsKXtcclxuICAgIGlmKCFzeXN0ZW0pe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIEluc2VydFRvTGluayhsb2dpY1N5c3RlbXMsIHN5c3RlbSk7XHJcbn1cclxuXHJcbmV4cG9ydHtpbml0U3lzdGVtcywgcnVuV2l0aFNjZW5lLCBBZGRTeXN0ZW19IiwiXHJcbi8qKlxyXG4gKiDorrDlvZViaXRtYXBEYXRh55qE5Ymq6KOB5Yy65Z+fXHJcbiAqL1xyXG5jbGFzcyBUZXh0dXJlQXJlYSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOS4gOW8oOWbvuS4reeahOS4gOS4quWMuuWfn++8jOe6ueeQhuW4p+aIlueyvueBteW4p++8jOWNleS+i++8jOWSjOW8leaTjuacieWFs1xyXG4gKiDnsr7ngbXluKfnlKjkuo7moIflh7rkuIDlvKDnurnnkIblm77nmoTmjIflrprlj5bmnZDljLrln5/vvIzku6Xlj4rnm7jlr7nnmoTmmL7npLrkvY3nva5cclxuICovXHJcbmNsYXNzIFNwcml0ZUZyYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUgPSBcIlwiLCBiaXRtYXBEYXRhID0gbnVsbCwgdGV4dHVyZUFyZWEgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmJpdG1hcERhdGEgPSBiaXRtYXBEYXRhO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZUFyZWEgPSB0ZXh0dXJlQXJlYTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDmib7kuI3liLDluKfml7bnmoTpu5jorqTnqbrluKfvvIzlj6/ku6XmmK/kuIDlvKDnuqLlj4nlm77niYfvvIxcclxuICogVE9ETyDlvJXlhaXpu5jorqTotYTmupDmnLrliLZcclxuICovXHJcbnZhciBfc3ByaXRlRnJhbWVNYXAgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIGdldFNwcml0ZUZyYW1lQnlOYW1lKG5hbWUgPSBcIlwiKXtcclxuICAgIGxldCBmID0gX3Nwcml0ZUZyYW1lTWFwLmdldChuYW1lKTtcclxuICAgIHJldHVybiBmID8gZiA6IF9zcHJpdGVGcmFtZU1hcC5nZXQoXCJkZWZhbHV0XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTcHJpdGVGcmFtZShuYW1lID0gXCJcIiwgYml0bWFwRGF0YSA9IG51bGwsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGlmKF9zcHJpdGVGcmFtZU1hcC5nZXQobmFtZSkpe1xyXG4gICAgICAgIC8vZXhpc3RzXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgZiA9IG5ldyBTcHJpdGVGcmFtZShuYW1lLCBiaXRtYXBEYXRhLCBuZXcgVGV4dHVyZUFyZWEoeCwgeSwgd2lkdGgsIGhlaWdodCkpO1xyXG4gICAgX3Nwcml0ZUZyYW1lTWFwLnNldChuYW1lLCBmKTtcclxuICAgIHJldHVybiBmO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRTcHJpdGVGcmFtZVdpZHRoKHNwcml0ZUZyYW1lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gc3ByaXRlRnJhbWUudGV4dHVyZUFyZWEud2lkdGg7XHJcbn1cclxuZnVuY3Rpb24gR2V0U3ByaXRlRnJhbWVIZWlnaHQoc3ByaXRlRnJhbWUgPSBudWxsKXtcclxuICAgIHJldHVybiBzcHJpdGVGcmFtZS50ZXh0dXJlQXJlYS5oZWlnaHQ7XHJcbn1cclxuXHJcbmV4cG9ydHtnZXRTcHJpdGVGcmFtZUJ5TmFtZSwgY3JlYXRlU3ByaXRlRnJhbWUsIEdldFNwcml0ZUZyYW1lV2lkdGgsIEdldFNwcml0ZUZyYW1lSGVpZ2h0fSIsIlxyXG4gLyoqXHJcbiAgKiBncmlkbWFw55qE572R5qC85Y2V5YWDXHJcbiAgKi9cclxuY2xhc3MgR3JpZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3dJbmRleCA9IDAsIGNvbEluZGV4ID0gMCwgZGF0YSA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMucm93SW5kZXggPSByb3dJbmRleDtcclxuICAgICAgICB0aGlzLmNvbEluZGV4ID0gY29sSW5kZXg7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsgICAgICAgLy/lrZjlgqjnmoTlr7nosaFcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOe9keagvOihqFxyXG4gKiByb3dzID0g6KGM5pWwXHJcbiAqIGNvbHVtbnMgPSDliJfmlbBcclxuICogZ3JpZFdpZHRoLCBncmlkSGVpZ2h0ID0g5q+P5Liq572R5qC855qE5a696auY6IyD5Zu077yM5bu66K6uMToxXHJcbiAqIFxyXG4gKi9cclxuY2xhc3MgR3JpZE1hcCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwLCBncmlkcyA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucztcclxuICAgICAgICB0aGlzLmdyaWRXaWR0aCA9IGdyaWRXaWR0aDtcclxuICAgICAgICB0aGlzLmdyaWRIZWlnaHQgPSBncmlkSGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZ3JpZHMgPSBncmlkcztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3R3JpZE1hcChyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwKXtcclxuICAgIGxldCBncmlkcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3M7IHJvd0luZGV4KyspIHtcclxuICAgICAgICBmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgY29sdW1uczsgY29sSW5kZXgrKykge1xyXG4gICAgICAgICAgICBsZXQgZ3JpZCA9IG5ldyBHcmlkKHJvd0luZGV4LCBjb2xJbmRleCk7XHJcbiAgICAgICAgICAgIGdyaWRzLnB1c2goZ3JpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBHcmlkTWFwKHJvd3MsIGNvbHVtbnMsIGdyaWRXaWR0aCwgZ3JpZEhlaWdodCwgZ3JpZHMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRHcmlkV2lkdGgoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuZ3JpZFdpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldEdyaWRIZWlnaHQoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuZ3JpZEhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBHZXRHcmlkTWFwV2lkdGgoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAuY29sdW1ucyAqIGdyaWRtYXAuZ3JpZFdpZHRoO1xyXG59XHJcbmZ1bmN0aW9uIEdldEdyaWRNYXBIZWlnaHQoZ3JpZG1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGdyaWRtYXAucm93cyAqIGdyaWRtYXAuZ3JpZEhlaWdodDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOagueaNruS9jee9ruWumuS9jWdyaWRcclxuICogeCwgeeaYr2dyaWRtYXDlt6bkuIrop5LlvIDlp4vnrpdcclxuICovXHJcbmZ1bmN0aW9uIEdldEdyaWQoZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICBpZighY2hlY2tJbihncmlkbWFwLCB4LCB5KSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgY29sdW1uID0gcGFyc2VJbnQoeCAvIGdyaWRtYXAuZ3JpZFdpZHRoKTtcclxuICAgIGxldCByb3cgPSBwYXJzZUludCh5IC8gZ3JpZG1hcC5ncmlkSGVpZ2h0KTtcclxuICAgIHJldHVybiBncmlkbWFwLmdyaWRzW3JvdyAqIGdyaWRtYXAuY29sdW1ucyArIGNvbHVtbl07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSW4oZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICByZXR1cm4geCA+IDAgJiYgeCA8IEdldEdyaWRNYXBXaWR0aChncmlkbWFwKSAmJiB5ID4gMCAmJiB5IDwgR2V0R3JpZE1hcEhlaWdodChncmlkbWFwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gSXRlcmF0b3JHcmlkbWFwKGdyaWRtYXAgPSBudWxsLCBjYWxsYmFjayA9IG51bGwpe1xyXG4gICAgZ3JpZG1hcC5ncmlkcy5mb3JFYWNoKGdyaWQgPT4ge1xyXG4gICAgICAgIGNhbGxiYWNrKGdyaWQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEdyaWREYXRhKGdyaWRtYXAgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IGdyaWQgPSBHZXRHcmlkKGdyaWRtYXAsIHgsIHkpO1xyXG4gICAgcmV0dXJuIGdyaWQgPyBncmlkLmRhdGEgOiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gICAgTmV3R3JpZE1hcCwgR2V0R3JpZFdpZHRoLCBHZXRHcmlkSGVpZ2h0LCBHZXRHcmlkTWFwV2lkdGgsIEdldEdyaWRNYXBIZWlnaHQsIEdldEdyaWQsIEl0ZXJhdG9yR3JpZG1hcCwgR2V0R3JpZERhdGFcclxufSIsImltcG9ydCB7IE5ld1BvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9wb2ludFwiO1xyXG5pbXBvcnQgeyBHZXRHcmlkTWFwV2lkdGgsIEdldEdyaWRNYXBIZWlnaHQsIE5ld0dyaWRNYXAsIEdldEdyaWRXaWR0aCwgR2V0R3JpZEhlaWdodCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9ncmlkbWFwXCI7XHJcblxyXG4vKipcclxuICogMmTnk7fnoJblnLDlm77vvIznlLFHcmlkTWFw5omp5bGVXHJcbiAqIHNhbXBsZTpcclxuICogW1xyXG5cdDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIFxyXG5cdDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsXHJcblx0MSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgXHJcblx0MSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgXHJcbl1cclxuICovXHJcbmNsYXNzIFRpbGVNYXAge1xyXG4gICAgY29uc3RydWN0b3IoZ3JpZG1hcCA9IG51bGwsIHggPSAwLCB5ID0gMCl7XHJcbiAgICAgICAgdGhpcy5ncmlkbWFwID0gZ3JpZG1hcDtcclxuICAgICAgICB0aGlzLnBvcyA9IE5ld1Bvcyh4LCB5KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3VGlsZU1hcChyb3dzID0gMCwgY29sdW1ucyA9IDAsIGdyaWRXaWR0aCA9IDAsIGdyaWRIZWlnaHQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IGdyaWRtYXAgPSBOZXdHcmlkTWFwKHJvd3MsIGNvbHVtbnMsIGdyaWRXaWR0aCwgZ3JpZEhlaWdodCk7XHJcbiAgICByZXR1cm4gbmV3IFRpbGVNYXAoZ3JpZG1hcCwgeCwgeSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFRpbGVtYXBTdGFydCh0aWxlbWFwID0gbnVsbCl7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHRpbGVtYXAucG9zLnggLSBHZXRHcmlkTWFwV2lkdGgodGlsZW1hcC5ncmlkbWFwKSAqIDAuNSxcclxuICAgICAgICB0aWxlbWFwLnBvcy55IC0gR2V0R3JpZE1hcEhlaWdodCh0aWxlbWFwLmdyaWRtYXApICogMC41XHJcbiAgICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRUaWxlbWFwRW5kKHRpbGVtYXAgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgdGlsZW1hcC5wb3MueCArIEdldEdyaWRNYXBXaWR0aCh0aWxlbWFwLmdyaWRtYXApICogMC41LFxyXG4gICAgICAgIHRpbGVtYXAucG9zLnkgKyBHZXRHcmlkTWFwSGVpZ2h0KHRpbGVtYXAuZ3JpZG1hcCkgKiAwLjVcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFRpbGVtYXBDZW50ZXIodGlsZW1hcCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1Bvcyh0aWxlbWFwLnBvcy54LCB0aWxlbWFwLnBvcy55KTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0R3JpZFN0YXJ0KHRpbGVtYXAgPSBudWxsLCBncmlkID0gbnVsbCl7XHJcbiAgICBsZXQgc3RhcnQgPSBHZXRUaWxlbWFwU3RhcnQodGlsZW1hcCk7XHJcbiAgICByZXR1cm4gTmV3UG9zKFxyXG4gICAgICAgIHN0YXJ0LnggKyBHZXRHcmlkV2lkdGgodGlsZW1hcC5ncmlkbWFwKSAqIGdyaWQuY29sSW5kZXgsXHJcbiAgICAgICAgc3RhcnQueSArIEdldEdyaWRIZWlnaHQodGlsZW1hcC5ncmlkbWFwKSAqIGdyaWQucm93SW5kZXhcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldEdyaWRFbmQodGlsZW1hcCA9IG51bGwsIGdyaWQgPSBudWxsKXtcclxuICAgIGxldCBzdGFydCA9IEdldFRpbGVtYXBTdGFydCh0aWxlbWFwKTtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgc3RhcnQueCArIEdldEdyaWRXaWR0aCh0aWxlbWFwLmdyaWRtYXApICogKGdyaWQuY29sSW5kZXggKyAxKSxcclxuICAgICAgICBzdGFydC55ICsgR2V0R3JpZEhlaWdodCh0aWxlbWFwLmdyaWRtYXApICogKGdyaWQucm93SW5kZXggKyAxKVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0R3JpZENlbnRlcih0aWxlbWFwID0gbnVsbCwgZ3JpZCA9IG51bGwpe1xyXG4gICAgbGV0IHN0YXJ0ID0gR2V0VGlsZW1hcFN0YXJ0KHRpbGVtYXApO1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICBzdGFydC54ICsgR2V0R3JpZFdpZHRoKHRpbGVtYXAuZ3JpZG1hcCkgKiAoZ3JpZC5jb2xJbmRleCArIDAuNSksXHJcbiAgICAgICAgc3RhcnQueSArIEdldEdyaWRIZWlnaHQodGlsZW1hcC5ncmlkbWFwKSAqIChncmlkLnJvd0luZGV4ICsgMC41KVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIE5ld1RpbGVNYXAsIEdldFRpbGVtYXBTdGFydCwgR2V0VGlsZW1hcEVuZCwgR2V0VGlsZW1hcENlbnRlciwgXHJcbiAgICBHZXRHcmlkV2l0aFBvcywgR2V0R3JpZFN0YXJ0LCBHZXRHcmlkRW5kLCBHZXRHcmlkQ2VudGVyXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmib7lh7rkuI5yZWN055u45Lqk55qE5omA5pyJZ3JpZFxyXG4gKiBUT0RPIOacquWumu+8jOWPr+iDveS4jemcgOimgei/meenjeWBmuazlVxyXG4gKi9cclxuZnVuY3Rpb24gR2V0R3JpZHNCeVJlY3QodGlsZU1hcCA9IG51bGwsIHJlY3QgPSBudWxsKXtcclxuICAgIC8v5piv5ZCm5ZyodGlsZW1hcOS4rVxyXG4gICAgaWYoIUlzUmVjdENyb3NzKHRpbGVNYXAucmVjdCwgcmVjdCkpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGdyaWRzID0gW107XHJcbiAgICBsZXQgcG9zU3RhcnQgPSByZWN0LnBvc1N0YXJ0O1xyXG4gICAgbGV0IGNvbHVtblN0YXJ0ID0gcGFyc2VJbnQocG9zU3RhcnQueCAvIHRpbGVNYXAuZ3JpZFdpZHRoKTtcclxuICAgIGxldCByb3dTdGFydCA9IHBhcnNlSW50KHBvc1N0YXJ0LnkgLyB0aWxlTWFwLmdyaWRIZWlnaHQpO1xyXG4gICAgY29sdW1uU3RhcnQgPSBjb2x1bW5TdGFydCA8IDAgPyAwIDogY29sdW1uU3RhcnQ7XHJcbiAgICByb3dTdGFydCA9IHJvd1N0YXJ0IDwgMCA/IDAgOiByb3dTdGFydDtcclxuXHJcbiAgICBsZXQgcG9zRW5kID0gcmVjdC5wb3NFbmQ7XHJcbiAgICBsZXQgY29sdW1uRW5kID0gcGFyc2VJbnQocG9zRW5kLnggLyB0aWxlTWFwLmdyaWRXaWR0aCk7XHJcbiAgICBsZXQgcm93RW5kID0gcGFyc2VJbnQocG9zRW5kLnkgLyB0aWxlTWFwLmdyaWRIZWlnaHQpO1xyXG4gICAgY29sdW1uRW5kID0gY29sdW1uRW5kID4gdGlsZU1hcC5jb2x1bW5zIC0gMSA/IHRpbGVNYXAuY29sdW1ucyAtIDEgOiBjb2x1bW5FbmQ7XHJcbiAgICByb3dFbmQgPSByb3dFbmQgPiB0aWxlTWFwLnJvd3MgLSAxID8gdGlsZU1hcC5yb3dzIC0gMSA6IHJvd0VuZDtcclxuXHJcbiAgICBmb3IobGV0IHJvdz1yb3dTdGFydDsgcm93PD1yb3dFbmQ7IHJvdysrKXtcclxuICAgICAgICBmb3IobGV0IGNvbHVtbj1jb2x1bW5TdGFydDsgY29sdW1uPD1jb2x1bW5FbmQ7IGNvbHVtbisrKXtcclxuICAgICAgICAgICAgZ3JpZHMucHVzaCh0aWxlTWFwLmdyaWRzW3Jvd11bY29sdW1uXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdyaWRzO1xyXG59IiwiaW1wb3J0IHsgaW5pdFN5c3RlbXMgfSBmcm9tIFwiLi4vc3lzdGVtL3J1blwiO1xyXG5pbXBvcnQgeyBpbml0Q2FudmFzIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZW5naW5lL2g1L21vZGVsXCI7XHJcbmltcG9ydCB7IG9uS2V5Q2FsbGJhY2ssIG9uTW91c2VDYWxsYmFjayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9wcm9jZXNzb3JcIjtcclxuaW1wb3J0IHsgTmV3Q2FtZXJhIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgY3JlYXRlVGlsZU1hcFdpdGhEYXRhIH0gZnJvbSBcIi4vYWRhcHRlclwiO1xyXG5cclxuLyoqXHJcbiAqIOmAmui/h+WPguaVsOmFjee9ruWIneWni+WMluezu+e7n+i1hOa6kFxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdEdhbWUob3B0aW9ucyA9IG51bGwpIHtcclxuXHJcbiAgICAvL+W8leaTjuWIneWni+WMllxyXG4gICAgaW5pdENhbnZhcyhvcHRpb25zLnNjcmVlbi53aWR0aCwgb3B0aW9ucy5zY3JlZW4uaGVpZ2h0LCBvcHRpb25zLmZwcyk7XHJcblxyXG4gICAgLy/ms6jlhozmjInplK7lm57osINcclxuICAgIGlmKG9wdGlvbnMua2V5RG93bkhhbmRsZXIgJiYgb3B0aW9ucy5rZXlVcEhhbmxlcil7XHJcbiAgICAgICAgb25LZXlDYWxsYmFjayhvcHRpb25zLmtleURvd25IYW5kbGVyLCBvcHRpb25zLmtleVVwSGFubGVyKTtcclxuICAgIH1cclxuICAgIGlmKG9wdGlvbnMubW91c2Vkb3duSGFuZGxlciAmJiBvcHRpb25zLm1vdXNldXBIYW5kbGVyKXtcclxuICAgICAgICBvbk1vdXNlQ2FsbGJhY2sob3B0aW9ucy5tb3VzZWRvd25IYW5kbGVyLCBvcHRpb25zLm1vdXNldXBIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdENhbWVyYShvcHRpb25zLmNhbWVyYSwgb3B0aW9ucy5zY3JlZW4pO1xyXG4gICAgaW5pdFN5c3RlbXMob3B0aW9ucy5kZWJ1Zyk7XHJcblxyXG4gICAgLy/nk7fnoJblnLDlm77vvIzoiJ7lj7BcclxuICAgIGlmKG9wdGlvbnMudGlsZW1hcCl7XHJcbiAgICAgICAgaW5pdFRpbGUob3B0aW9ucy50aWxlbWFwKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+W8gOWQr+eisOaSnuezu+e7n1xyXG4gICAgaWYob3B0aW9ucy5jb2xsaWRlKXtcclxuICAgICAgICAvL09wZW5Db2xsaWRlcihvcHRpb25zLmNvbGxpZGUpO1xyXG5cclxuICAgICAgICAvLyBpZihvcHRpb25zLnVzZVRpbGVDb21iaW5lKXtcclxuICAgICAgICAvLyAgICAgbGV0IHJlc3VsdE5vZGVzID0gQ3JlYXRlQ29tYmluZU5vZGVzKHRpbGVtYXAsIGNvbGxpZGUuYm94SGFuZGxlcik7XHJcbiAgICAgICAgLy8gICAgIHJlc3VsdE5vZGVzLmZvckVhY2gocmVzdWx0ID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbGxpZGUubG9hZENhbGxiYWNrKHJlc3VsdC52YWx1ZSwgcmVzdWx0LnJlY3QpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmkYTlg4/mnLrvvIzlhajlsYDljZXkvotcclxuICovXHJcbnZhciBjYW1lcmEgPSBudWxsO1xyXG5mdW5jdGlvbiBpbml0Q2FtZXJhKGNhbWVyYURhdGEgPSBudWxsLCBzY3JlZW5EYXRhID0gbnVsbCl7XHJcbiAgICBsZXQgd2lkdGggPSBjYW1lcmFEYXRhLndpZHRoID8gY2FtZXJhRGF0YS53aWR0aCA6IHNjcmVlbkRhdGEud2lkdGg7XHJcbiAgICBsZXQgaGVpZ2h0ID0gY2FtZXJhRGF0YS5oZWlnaHQgPyBjYW1lcmFEYXRhLmhlaWdodCA6IHNjcmVlbkRhdGEuaGVpZ2h0O1xyXG4gICAgY2FtZXJhID0gTmV3Q2FtZXJhKGNhbWVyYURhdGEueCwgY2FtZXJhRGF0YS55LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5mdW5jdGlvbiBHZXRDYW1lcmEoKXtcclxuICAgIHJldHVybiBjYW1lcmE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55O356CW5Zyw5Zu+77yM6Iie5Y+w77yM5YWo5bGA5Y2V5L6LXHJcbiAqL1xyXG52YXIgdGlsZW1hcCA9IG51bGw7XHJcbmZ1bmN0aW9uIGluaXRUaWxlKHRpbGVtYXBEYXRhID0gbnVsbCl7XHJcbiAgICB0aWxlbWFwID0gY3JlYXRlVGlsZU1hcFdpdGhEYXRhKHRpbGVtYXBEYXRhLCB0aWxlbWFwRGF0YS5pbml0SGFuZGxlcik7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VGlsZW1hcCgpe1xyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcbmV4cG9ydHtpbml0R2FtZSwgaW5pdENhbWVyYSwgR2V0Q2FtZXJhLCBpbml0VGlsZSwgZ2V0VGlsZW1hcH0iLCJpbXBvcnQgeyBjcmVhdGVTcHJpdGVGcmFtZSwgZ2V0U3ByaXRlRnJhbWVCeU5hbWUgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZnJhbWVcIjtcclxuaW1wb3J0IHsgTmV3Q2FtZXJhIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgQ3JlYXRlQW5pbWF0ZUZyYW1lLCBDcmVhdGVBbmltYXRlQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2FjdGlvbi9hbmltYXRlXCI7XHJcbmltcG9ydCB7IE5ld1RpbGVNYXAgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3RpbGUvdGlsZW1hcFwiO1xyXG5pbXBvcnQgeyBJdGVyYXRvckdyaWRtYXAgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZ3JpZG1hcFwiO1xyXG5cclxuLyoqXHJcbiAqIOWIm+W7uueyvueBteW4p1xyXG4gKiB0ZXh0dXJlQXJlYURhdGEgPSB7XHJcbiAqICB4IDogMCxcclxuICogIHkgOiAwLFxyXG4gKiAgd2lkdGggOiAwLFxyXG4gKiAgaGVpZ2h0IDogMFxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTcHJpdGVGcmFtZVdpdGhEYXRhKG5hbWUgPSBcIlwiLCBiaXRtYXBEYXRhID0gbnVsbCwgdGV4dHVyZUFyZWFEYXRhID0gbnVsbCl7XHJcbiAgICBpZihuYW1lPT1cIlwiIHx8ICFiaXRtYXBEYXRhIHx8ICF0ZXh0dXJlQXJlYURhdGEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHdpZHRoID0gdGV4dHVyZUFyZWFEYXRhWyd3aWR0aCddO1xyXG4gICAgbGV0IGhlaWdodCA9IHRleHR1cmVBcmVhRGF0YVsnaGVpZ2h0J107XHJcbiAgICBpZighd2lkdGggfHwgIWhlaWdodCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlU3ByaXRlRnJhbWUobmFtZSwgYml0bWFwRGF0YSwgdGV4dHVyZUFyZWFEYXRhWyd4J10sIHRleHR1cmVBcmVhRGF0YVsneSddLCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHNjcmVlbk9wdGlvbnMgPSB7XHJcbiAqICAgICAgeCA6IDAsIHkgOiAwLCB3aWR0aCA6IDAsIGhlaWdodCA6IDBcclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ2FtZXJhV2l0aERhdGEoc2NyZWVuT3B0aW9ucyA9IG51bGwpe1xyXG4gICAgaWYoIXNjcmVlbk9wdGlvbnMpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IHdpZHRoID0gc2NyZWVuT3B0aW9uc1snd2lkdGgnXTtcclxuICAgIGxldCBoZWlnaHQgPSBzY3JlZW5PcHRpb25zWydoZWlnaHQnXTtcclxuICAgIGlmKCF3aWR0aCB8fCAhaGVpZ2h0KXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBOZXdDYW1lcmEoXHJcbiAgICAgICAgc2NyZWVuT3B0aW9uc1sneCddLCBzY3JlZW5PcHRpb25zWyd5J10sXHJcbiAgICAgICAgd2lkdGgsIGhlaWdodFxyXG4gICAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHRpbGVtYXDku6Xlj4pncmlk55qEcmVjdCwgcG9z5YWz57O7XHJcbiAqIHRpbGVtYXDnmoTnm7jlr7nlnZDmoIfmmK8oMCwgMCnvvIzljbPlt6bkuIrop5JcclxuICogZ3JpZOeahOWdkOagh+aYr2dyaWTnn6nlvaLkuK3pl7RcclxuICog5L6L5aaC77yadGlsZW1hcC5wb3MueCA9IDIwLCBncmlkV2lkdGggPSA1MCwgY29sdW1uID0gNTtcclxuICog6YKj5LmIZ3JpZFswXeeahHBvcy54PSAyMCArIDAqNTAgKyA1MC8yID0gNDUsIHBvc1N0YXJ0LnggPSA0NSAtIDUwLzIgPSAyMFxyXG4gKiDlkIznkIZncmlkWzRd55qEcG9zLng9IDIwICsgNCo1MCArIDUwLzIgPSAyNDUsIHBvc1N0YXJ0LnggPSAyNDUgLSA1MC8yID0gMjIwXHJcbiAqIFxyXG4gKiBvcHRpb25zOntcclxuICogICAgICBkYXRhIDogWyAgICAgICAgICAgICAgICDkuIDnu7TmlbDnu4RcclxuICogICAgICAgICAgMSwgMSwgMSwgMCwgMCwgMSxcclxuICogICAgICAgICAgMiwgMSwgMCwgMCwgMSwgMixcclxuICogICAgICAgICAgMiwgMiwgMSwgMSwgMSwgMVxyXG4gKiAgICAgICAgICBdXHJcbiAqICAgICAgY29sdW1ucyA6IDYgICAgIOWIl+aVsFxyXG4gKiAgICAgIGdyaWRXaWR0aCA6IDMyXHJcbiAqICAgICAgZ3JpZEhlaWdodCA6IDMyICAgICDmr4/kuKrmoLzlrZDnmoTlrr3pq5hcclxuICogICAgICB4IDogMFxyXG4gKiAgICAgIHkgOiAwICAgICAgICAgICDliJ3lp4vkvY3nva7vvIzpu5jorqTkuLpzdGFnZeS4reW/g++8jOWNsygwLCAwKVxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVUaWxlTWFwV2l0aERhdGEob3B0aW9ucyA9IG51bGwsIGluaXRIYW5kbGVyID0gbnVsbCl7XHJcbiAgICBpZighb3B0aW9ucyB8fCBvcHRpb25zLmNvbHVtbnMgPD0gMCB8fCAhb3B0aW9ucy5kYXRhIHx8IG9wdGlvbnMuZGF0YS5sZW5ndGggPT0gMCB8fCBvcHRpb25zLmdyaWRXaWR0aCA8PSAwIHx8IG9wdGlvbnMuZ3JpZEhlaWdodCA8PSAwKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8v5Lii5byD5bCP5pWw6YOo5YiGLOS/neeVmeaVtOaVsOmDqOWIhu+8jOmqjOivgXRpbGVtYXDmlbDmja7lrozmlbTmgKdcclxuICAgIGxldCBjb2x1bW5zID0gb3B0aW9ucy5jb2x1bW5zO1xyXG4gICAgbGV0IHJvd3MgPSBwYXJzZUludChvcHRpb25zLmRhdGEubGVuZ3RoIC8gY29sdW1ucyk7XHJcbiAgICBpZihyb3dzICogY29sdW1ucyAhPSBvcHRpb25zLmRhdGEubGVuZ3RoKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIHBhcmFtOiBsZW4oZ3JpZHMpOlwiLCBvcHRpb25zLmRhdGEubGVuZ3RoLCBcIiBjb2x1bW5zOlwiLCBjb2x1bW5zKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGlsZW1hcCA9IE5ld1RpbGVNYXAocm93cywgY29sdW1ucywgb3B0aW9ucy5ncmlkV2lkdGgsIG9wdGlvbnMuZ3JpZEhlaWdodCwgb3B0aW9ucy54LCBvcHRpb25zLnksIGluaXRIYW5kbGVyKTtcclxuICAgIGlmKGluaXRIYW5kbGVyKXtcclxuICAgICAgICBJdGVyYXRvckdyaWRtYXAodGlsZW1hcC5ncmlkbWFwLCBncmlkID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbCA9IG9wdGlvbnMuZGF0YVtncmlkLnJvd0luZGV4ICogY29sdW1ucyArIGdyaWQuY29sSW5kZXhdO1xyXG4gICAgICAgICAgICBpbml0SGFuZGxlcih2YWwsIHRpbGVtYXAsIGdyaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5Yib5bu65bqP5YiX5bin5Yqo55S7XHJcbiAqIGFuaW1hdGVEYXRhID0ge1xyXG4gKiAgdHlwZSA6IDAsXHJcbiAqICBmcmFtZXMgOiBbXHJcbiAqICAgICAge1xyXG4gKiAgICAgICAgICBkdXJhdGlvbiA6IDAsXHJcbiAqICAgICAgICAgIHhPZmZzZXQgOiAwLFxyXG4gKiAgICAgICAgICB5T2Zmc2V0IDogMFxyXG4gKiAgICAgIH1cclxuICogIF1cclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZVdpdGhEYXRhKGFuaW1hdGVEYXRhID0gbnVsbCl7XHJcbiAgICBpZighYW5pbWF0ZURhdGEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsZXQgZnJhbWVzRGF0YSA9IGFuaW1hdGVEYXRhWydmcmFtZXMnXTtcclxuICAgIGlmKCFmcmFtZXNEYXRhIHx8IGZyYW1lc0RhdGEubGVuZ3RoID09IDApe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhbmltYXRlRnJhbWVzID0gW107XHJcbiAgICBmcmFtZXNEYXRhLmZvckVhY2goZnJhbWVEYXRhID0+IHtcclxuICAgICAgICBhbmltYXRlRnJhbWVzLnB1c2goXHJcbiAgICAgICAgICAgIENyZWF0ZUFuaW1hdGVGcmFtZShnZXRTcHJpdGVGcmFtZUJ5TmFtZShzcHJpdGVGcmFtZU5hbWUpLFxyXG4gICAgICAgICAgICAgICAgZnJhbWVEYXRhWydkdXJhdGlvbiddLCBmcmFtZURhdGFbJ3hPZmZzZXQnXSwgZnJhbWVEYXRhWyd5T2Zmc2V0J10pKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIENyZWF0ZUFuaW1hdGVBY3Rpb24oYW5pbWF0ZURhdGFbJ3R5cGUnXSwgZW50aXR5SWQsIGFuaW1hdGVGcmFtZXMpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0e0xvYWRSZXNvdXJjZSwgY3JlYXRlU3ByaXRlRnJhbWVXaXRoRGF0YSwgY3JlYXRlQ2FtZXJhV2l0aERhdGEsIGNyZWF0ZVRpbGVNYXBXaXRoRGF0YSwgY3JlYXRlQW5pbWF0ZVdpdGhEYXRhfSIsImltcG9ydCB7IGRyYXdJbWFnZSwgZHJhd0xpbmUsIGRyYXdDaXJjbGUgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9lbmdpbmUvaDUvcmVuZGVyXCI7XHJcbmltcG9ydCB7IGdldFNwcml0ZUZyYW1lQnlOYW1lIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2ZyYW1lXCI7XHJcbmltcG9ydCB7IGRyYXdSZWN0SW5DYW1lcmEgfSBmcm9tIFwiLi4vc3lzdGVtL3JlbmRlclwiO1xyXG5pbXBvcnQgeyBOZXdSZWN0UG9zVHVwbGUgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3Bvcy9yZWN0L2NvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBOZXdSZWN0LCBVcGRhdGVSZWN0Q2VudGVyUG9zIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3JlY3RcIjtcclxuXHJcbiAvKipcclxuICAqIOiOt+WPlueyvueBteW4p1xyXG4gICogVE9ETyDlj6/og73kvJrmlLnmiJBpZOW9ouW8j1xyXG4gICovXHJcbiBmdW5jdGlvbiBHZXRTcHJpdGVGcmFtZShuYW1lID0gXCJcIil7XHJcbiAgICBpZihuYW1lID09IFwiXCIpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdldFNwcml0ZUZyYW1lQnlOYW1lKG5hbWUpO1xyXG59XHJcblxyXG4vKipcclxuICogVE9ETyDlj6/og73kvJrmlLnmiJBzcHJpdGVGcmFtZUlk5Y+C5pWwXHJcbiAqIOS7peS4i+eahHgsIHkg6YO95piv5bGP5bmV5Z2Q5qCHXHJcbiAqL1xyXG5mdW5jdGlvbiBEcmF3RnJhbWUoc3ByaXRlRnJhbWUgPSBudWxsLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBsZXQgdGV4dHVyZUFyZWEgPSBzcHJpdGVGcmFtZS50ZXh0dXJlQXJlYTtcclxuICAgIGRyYXdJbWFnZShzcHJpdGVGcmFtZS5iaXRtYXBEYXRhLFxyXG4gICAgICAgIHRleHR1cmVBcmVhLngsIHRleHR1cmVBcmVhLnksIHRleHR1cmVBcmVhLndpZHRoLCB0ZXh0dXJlQXJlYS5oZWlnaHQsXHJcbiAgICAgICAgeCwgeSAsIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG4vKipcclxuICogVE9ETyDku6XlkI7opoHlj5jkuLpyZWN0UG9zVHVwbGVcclxuICovXHJcbmZ1bmN0aW9uIERyYXdSZWN0KHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCByZWN0ID0gTmV3UmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIFVwZGF0ZVJlY3RDZW50ZXJQb3MocmVjdCwgeCwgeSk7XHJcbiAgICBkcmF3UmVjdEluQ2FtZXJhKHJlY3QpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEcmF3TGluZSh4MSA9IDAsIHkxID0gMCwgeDIgPSAwLCB5MiA9IDApe1xyXG4gICAgZHJhd0xpbmUoeDEsIHkxLCB4MiwgeTIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEcmF3Q2lyY2xlKHggPSAwLCB5ID0gMCwgcmFkaXVzID0gMCl7XHJcbiAgICBkcmF3Q2lyY2xlKHgsIHksIHJhZGl1cyk7XHJcbn1cclxuXHJcbmV4cG9ydHtHZXRTcHJpdGVGcmFtZSwgRHJhd0ZyYW1lLCBEcmF3UmVjdCwgRHJhd0xpbmUsIERyYXdDaXJjbGV9IiwiaW1wb3J0IGRhdGEgZnJvbSAnLi9kYXRhJztcclxuaW1wb3J0IHsgU3RhcnRUZXN0IH0gZnJvbSAnLi9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvZ2FtZSc7XHJcbmltcG9ydCB7IERyYXdDaXJjbGUsIERyYXdMaW5lLCBEcmF3UmVjdCB9IGZyb20gJy4vZnJhbWV3b3JrL2RpcmVjdG9yL3V0aWxzL3JlbmRlcic7XHJcbmltcG9ydCB7IEdldEdyaWRDZW50ZXIgfSBmcm9tICcuL2ZyYW1ld29yay9jb21wb25lbnQvdGlsZS90aWxlbWFwJztcclxuaW1wb3J0IHsgR2V0R3JpZFdpZHRoLCBHZXRHcmlkSGVpZ2h0IH0gZnJvbSAnLi9mcmFtZXdvcmsvZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZ3JpZG1hcCc7XHJcbmltcG9ydCB7IFRvV29ybGRQb3MgfSBmcm9tICcuL2ZyYW1ld29yay9jb21wb25lbnQvY2FtZXJhL3V0aWxzJztcclxuaW1wb3J0IHsgR2V0Q2FtZXJhIH0gZnJvbSAnLi9mcmFtZXdvcmsvZGlyZWN0b3Ivd29ybGQvcmVzJztcclxuXHJcbi8qKlxyXG4gKiAgMjAxOS4xMC4wOVxyXG4gKiAgICAgIHZz5b+954S25LiN5o+Q56S6aW1wb3J05LqG77yM5oyJ54Wn572R5LiK55qE5pa55rOV77yM5Yqg5LqG5LiqanNjb25maWcuanNvbuWwseWPr+S7peS6hlxyXG4gKi9cclxuXHJcbi8v6LCo6K6w5pWw5o2u6amx5YqoXHJcbnZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihkYXRhLCB7XHJcbiAgICBkZWJ1ZyA6IGZhbHNlLFxyXG4gICAgbW91c2Vkb3duSGFuZGxlciA6IG1vdXNlZG93bkhhbmRsZXIsXHJcbiAgICBtb3VzZXVwSGFuZGxlciA6IGZ1bmN0aW9uKCl7fVxyXG59KTtcclxub3B0aW9ucy50aWxlbWFwLmluaXRIYW5kbGVyID0gaW5pdEhhbmRsZXI7XHJcblxyXG5mdW5jdGlvbiBpbml0SGFuZGxlcih2YWwgPSAwLCB0aWxlbWFwID0gbnVsbCwgZ3JpZCA9IG51bGwpe1xyXG4gICAgbGV0IHBvcyA9IEdldEdyaWRDZW50ZXIodGlsZW1hcCwgZ3JpZCk7XHJcbiAgICBjb25zb2xlLmxvZyhwb3MueCwgcG9zLnkpO1xyXG4gICAgRHJhd1JlY3QocG9zLngsIHBvcy55LCBHZXRHcmlkV2lkdGgodGlsZW1hcC5ncmlkbWFwKSwgR2V0R3JpZEhlaWdodCh0aWxlbWFwLmdyaWRtYXApKTtcclxuICAgIERyYXdSZWN0KHBvcy54LCBwb3MueSwgMiwgMik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdXNlZG93bkhhbmRsZXIoc2NyZWVuWCA9IDAsIHNjcmVlblkgPSAwKXtcclxuICAgIGNvbnNvbGUubG9nKHNjcmVlblgsIHNjcmVlblkpO1xyXG4gICAgbGV0IHBvcyA9IFRvV29ybGRQb3MoR2V0Q2FtZXJhKCksIHNjcmVlblgsIHNjcmVlblkpO1xyXG4gICAgY29uc29sZS5sb2cocG9zLngsIHBvcy55KTtcclxuICAgIERyYXdSZWN0KHBvcy54LCBwb3MueSwgNSwgNSk7XHJcbn1cclxuXHJcbmNsYXNzIE15U2NlbmUge1xyXG4gICAgb25TdGFydCgpe1xyXG5cclxuICAgIH1cclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbihmdW5jdGlvbiAoKXtcclxuICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xyXG4gICAgU3RhcnRUZXN0KG9wdGlvbnMsIG5ldyBNeVNjZW5lKCkpO1xyXG59KSgpXHJcblxyXG4iLCJpbXBvcnQgeyBpbml0R2FtZSwgR2V0Q2FtZXJhIH0gZnJvbSBcIi4uL3dvcmxkL3Jlc1wiO1xyXG5pbXBvcnQgeyBydW5XaXRoU2NlbmUgfSBmcm9tIFwiLi4vc3lzdGVtL3J1blwiO1xyXG5cclxuLyoqXHJcbiAqIG9wdGlvbnMge1xyXG4gKiAgICAgIHRleHR1cmVzIDog5qC85byP6KeBTG9hZFJlc291cmNlKCnlhoVcclxuICogICAgICBzY3JlZW4gOiB7XHJcbiAqICAgICAgICAgIHdpZHRoIDogODAwLFxyXG4gKiAgICAgICAgICBoZWlnaHQgOiA4MDBcclxuICogICAgICB9LFxyXG4gKiAgICAgIGZwcyA6IDYwLFxyXG4gKiAgICAgIGRlYnVnIDogZmFsc2UsXHJcbiAqICAgICAgY2FtZXJhIDoge1xyXG4gKiAgICAgICAgICB4IDogMCxcclxuICogICAgICAgICAgeSA6IDBcclxuICogICAgICB9LFxyXG4gKiAgICAgIHRpbGVtYXAgOiDmoLzlvI/lj4LogIN0aWxlbWFw5LiA6IqCXHJcbiAqICAgICAga2V5SGFuZGxlciA6IGZ1bmN0aW9uKHR5cGUsIGtleUNvZGUpICAgdHlwZT0xID0gZG93biwgdHlwZT0yID0gdXBcclxuICogICAgICBjb2xsaWRlIDoge1xyXG4gKiAgICAgICAgICB1c2VCb3ggOiBmYWxzZSxcclxuICogICAgICAgICAgdXNlR3JvdXAgOiBmYWxzZSxcclxuICogICAgICAgICAgcGFpcnMgOiBbXHJcbiAqICAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICAgdGVhbTEgOiAxLFxyXG4gKiAgICAgICAgICAgICAgICAgIHRlYW0yIDogMlxyXG4gKiAgICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgICBdLFxyXG4gKiAgICAgICAgICBoYW5kbGVyIDogZnVuY3Rpb24oZHQsIGNvbGxpZGVyMSwgY29sbGlkZXIyKVxyXG4gKiAgICAgIH1cclxuICogfVxyXG4gKi9cclxuZnVuY3Rpb24gU3RhcnQob3B0aW9ucyA9IG51bGwsIHNjZW5lID0gbnVsbCl7XHJcbiAgICBMb2FkUmVzb3VyY2Uob3B0aW9ucy50ZXh0dXJlcywgbnVsbCwgKCkgPT4ge1xyXG4gICAgICAgIGluaXRHYW1lKG9wdGlvbnMpO1xyXG4gICAgICAgIHJ1bldpdGhTY2VuZShzY2VuZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gU3RvcCgpe1xyXG4gICAgR2V0U2NlbmUoKS5vbkVuZCgpO1xyXG4gICAgR2V0U3lzdGVtcygpLmZvckVhY2goc3lzdGVtID0+IHtcclxuICAgICAgICBzeXN0ZW0ub25FbmQoKTtcclxuICAgIH0pO1xyXG4gICAgZW5naW5lLlN0b3AoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gU3RhcnRUZXN0KG9wdGlvbnMsIHNjZW5lID0gbnVsbCl7XHJcbiAgICBpbml0R2FtZShvcHRpb25zKTtcclxuICAgIHJ1bldpdGhTY2VuZShzY2VuZSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5Yqg6L296LWE5rqQ77yM5Yib5bu657K+54G15binXHJcbiAqIHRleHR1cmVzIDogW1xyXG4gKiAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICBpbWcgOiBcInJlcy9hLnBuZ1wiLFxyXG4gKiAgICAgICAgICAgICAgZnJhbWVzIDogW1xyXG4gKiAgICAgICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IFwid2FsazFcIlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlQXJlYSA6IHtcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHggOiAwLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgeSA6IDAsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA6IDAsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgOiAwXHJcbiAqICAgICAgICAgICAgICAgICAgICAgIH1cclxuICogICAgICAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgICAgICBdXHJcbiAqICAgICAgICAgIH1cclxuICogICAgICBdLFxyXG4gKi9cclxuZnVuY3Rpb24gTG9hZFJlc291cmNlKHRleHR1cmVzRGF0YSA9IG51bGwsIE9ubG9hZENhbGxiYWNrID0gbnVsbCwgT25Db21wbGV0ZUNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICAvL+WKoOi9veWbvuWDj+W5tuWIm+W7uuaYvuekuuW4p1xyXG4gICAgaWYoIXRleHR1cmVzRGF0YSB8fCB0ZXh0dXJlc0RhdGEubGVuZ3RoID09IDApe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBfY291bnQgPSAwO1xyXG4gICAgdGV4dHVyZXNEYXRhLmZvckVhY2godCA9PntcclxuICAgICAgICBsb2FkSW1nKHQuaW1nLCBiaXRtYXBEYXRhID0+IHtcclxuICAgICAgICAgICAgdC5mcmFtZXMuZm9yRWFjaChmcmFtZURhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlU3ByaXRlRnJhbWVXaXRoRGF0YShmcmFtZURhdGEubmFtZSwgYml0bWFwRGF0YSwgZnJhbWVEYXRhLnRleHR1cmVBcmVhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF9jb3VudCsrO1xyXG4gICAgICAgICAgICBpZihPbmxvYWRDYWxsYmFjayl7XHJcbiAgICAgICAgICAgICAgICBPbmxvYWRDYWxsYmFjayhfY291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRleHR1cmVzRGF0YS5sZW5ndGggPT0gX2NvdW50ICYmIE9uQ29tcGxldGVDYWxsYmFjayl7XHJcbiAgICAgICAgICAgICAgICBPbkNvbXBsZXRlQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7U3RhcnQsIFN0b3AsIFN0YXJ0VGVzdCwgTG9hZFJlc291cmNlfSJdLCJzb3VyY2VSb290IjoiIn0=