!function(t){var n={};function e(r){if(n[r])return n[r].exports;var l=n[r]={i:r,l:!1,exports:{}};return t[r].call(l.exports,l,l.exports,e),l.l=!0,l.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var l in t)e.d(r,l,function(n){return t[n]}.bind(null,l));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t){t.exports={screen:{width:800,height:800},fps:60,camera:{x:400,y:400},stage:{width:1800,height:1800}}},function(t,n,e){"use strict";e.r(n);var r=e(0);class l{constructor(){this.id=i()}}var u=1;function i(){return u++}class o{constructor(t=0){this.entityId=t,this.id=t}}class s{constructor(t=0){this.priority=t,this.id=i()}onStart(){}onUpdate(t=0){}onEnd(){}}const c=2;function a(t=null,n=0){t.onUpdate(n)}function d(t=null){t.state=c,t.onEnd()}class f{constructor(t=null,n=null,e=null){this.data=t,this.prep=n,this.next=e}}class h{constructor(){this.head=new f,this.tail=new f,this.head.next=this.tail,this.tail.prep=this.head,this._map=new Map,this._size=0,this._delList=[],this._curr=this.head,this._lock=!1}}function p(){return new h}function x(t=null,n=0,e=!1){if(!t)return void console.error("link is null.");let r=t._map.get(n);return r?r.data:(e&&console.error("can't find keyId: ",n),null)}function y(t=null,n=null){return g(t,n,t.tail)}function g(t=null,n=null,e=null){if(!t||!n||!n.id)return console.error("error param: ",t,n,n.id),null;if(t._map.get(n.id))return console.error("error id:%d is exist",n.id),null;let r=e.prep,l=new f(n,r,e);return r.next=l,e.prep=l,t._map.set(n.id,l),t._size++,l}function w(t=null,n=0){let e=t._map.get(n);if(!e)return;t._map.delete(n);let r=e.prep,l=e.next;r.next=l,l.prep=r,t._size--}function m(t=null,n=null){if(!t||!n)return;t._lock=!0;let e=t.head.next;for(;e!=t.tail&&!n(e.data);)e=e.next;for(;t._delList.length>0;)w(t,t._delList.pop());t._lock=!1}var v=p();class k extends s{onUpdate(t=0){m(v,n=>{a(n,t),n.isEnd()&&d(n)})}}var _=null;p();var b=p();class H{constructor(t=0,n=0){this.x=t,this.y=n}}function I(t=0,n=0){return new H(t,n)}function U(t=null,n=null){return I(t.x-n.x,t.y-n.y)}class S{constructor(t=0,n=0){this.x=t,this.y=n,this.distance=t*t+n*n}}function M(t=0,n=0){return new S(t,n)}class P extends o{constructor(t=0,n=0,e=0){super(t),this.pos=I(n,e),this.vec=M()}}var E=p();function L(t=0){let n=x(E,t);return n||function(t=0){let n=new P(t);return y(E,n),n}(t)}function T(){return E}function j(t=0,n=0,e=0){let r=L(t).pos;return r.x=n,r.y=e,r}function O(){return T()}class R{constructor(t=null,n=0,e=0,r=null){this.offset=t,this.width=n,this.height=e,this.center=r}}function C(t=0,n=0,e=0,r=0){let l=M(t,n);return new R(l,e,r,I())}function D(t=null,n=0,e=0){t.center.x=n+t.offset.x,t.center.y=e+t.offset.y}function G(t=null){return I(t.center.x-W(t),t.center.y-z(t))}function W(t=null){return.5*t.width}function z(t=null){return.5*t.height}class A extends l{constructor(){super(),this.pos=null,this.rect=null}}function F(t=0,n=0,e=0,r=0){let l=new A;return l.pos=j(l.id,t,n),l.rect=C(0,0,e,r),D(l.rect,t,n),l}function B(t=null,n=null){return IsRectsCross(t.rect,n)}var N={ctx:null,canvas:null,fps:0,tick:0};function q(){return N}var J=q();Math.PI;function K(t,n=0,e=0,r=0,l=0,u=0,i=0,o=0,s=0){J.ctx.drawImage(t,n,e,r,l,u,i,o,s)}function Q(t=0,n=0,e=0,r=0){J.ctx.strokeRect(t,n,e,r)}class V extends s{onUpdate(t=0){m(b,t=>{let n=function(t=0){return L(t).pos}(t.entityId);D(t.displayArea,n.x,n.y),function(t=null){let n=gt(),e=t.displayArea;if(!B(n,e))return;let r=U(G(e),G(n.rect)),l=t.spriteFrame.textureArea;K(t.spriteFrame.bitmapData,l.x,l.y,l.width,l.height,r.x,r.y,GetRectWidth(e),GetRectHeight(e))}(t)})}}var X=null;class Y extends s{onUpdate(t=0){m(GetRectList(),t=>{!function(t=null){let n=gt();if(!B(n,t))return;let e=U(G(t),G(n.rect));Q(e.x,e.y,GetRectWidth(t),GetRectHeight(t))}(t.rect)})}}var Z=null;class $ extends s{onUpdate(t=0){m(O(),t=>{let n=t.vec,e=t.pos;e.x+=n.x,e.y+=n.y,n.x=0,n.y=0})}}var tt=null;var nt,et=q();var rt=!1;var lt=null,ut=(new Date).getTime();var it=new Map;tt||(tt=new $);var ot=null,st=null;function ct(t=!1){y(ot=p(),(_||(_=new k),_)),y(st=p(),(X||(X=new V),X)),t&&y(st,(Z||(Z=new Y),Z))}var at,dt=16,ft=41,ht=0;function pt(t){m(ot,t=>{t.onStart()}),m(st,t=>{t.onStart()}),t.onStart(),function(t=null){rt=!1,nt=t,setInterval(()=>{lt=(new Date).getTime(),rt||nt(lt-ut),ut=(new Date).getTime()},et.tick)}(n=>{(at+=n)>=dt&&(at-=dt,t.onUpdate(n),m(ot,t=>{t.onUpdate(n)})),(ht+=n)>=ft&&(ht-=ft,m(st,t=>{t.onUpdate(n)}))})}new Map;function xt(t=null){!function(t=0,n=0,e=10){let r=document.getElementById("canvas");r.width=t,r.height=n,N.canvas=r,N.ctx=r.getContext("2d"),N.ctx.strokeStyle="#0000ff",N.fps=e,N.tick=1e3/e}(t.screen.width,t.screen.height,t.fps),t.keyDownHandler&&t.keyUpHanler&&function(t=null,n=null){window.addEventListener("keydown",n=>{let e=n.keyCode;it.get(e)||(it.set(e,1),t(n.keyCode))}),window.addEventListener("keyup",t=>{let e=t.keyCode;it.delete(e),n(t.keyCode)})}(t.keyDownHandler,t.keyUpHanler),t.mousedownHandler&&t.mouseupHandler&&function(t=null,n=null){et.canvas.addEventListener("mousedown",n=>{t(n.x,n.y)}),et.canvas.addEventListener("mouseup",t=>{n(t.x,t.y)})}(t.mousedownHandler,t.mouseupHandler),function(t=null,n=null){let e=t.width?t.width:n.width,r=t.height?t.height:n.height;yt=F(t.x,t.y,e,r)}(t.camera,t.screen),ct(t.debug),t.tilemap&&function(t=null){(function(t=null,n=null){if(!t||t.columns<=0||!t.data||0==t.data.length||t.gridWidth<=0||t.gridHeight<=0)return null;let e=t.columns,r=parseInt(t.data.length/e);if(r*e!=t.data.length)return console.log("error param: len(grids):",t.data.length," columns:",e),null;let l=NewTileMap(r,e,t.gridWidth,t.gridHeight,t.x,t.y,n);return n&&IteratorGridmap(l.gridmap,r=>{let l=t.data[r.rowIndex*e+r.colIndex];n(l,r)}),l})(t,t.initHandler)}(t.tilemap),t.collide}var yt=null;function gt(){return yt}class wt{constructor(t=0,n=0,e=0){this.a=t,this.b=n,this.c=e}}class mt{constructor(t=null,n=null){this.start=t,this.vec=n,this.end=I(t.x+n.x,t.y+n.y),this.formula=null}}function vt(t=0,n=0,e=0,r=0){return kt(t,n,function(t=0,n=0,e=0,r=0){return new M(e-t,r-n)}(t,n,e,r))}function kt(t=0,n=0,e=null){if(0==function(t=null){return t.distance}(e))return null;let r=new mt(I(t,n),e),l=function(t=null){let n=t.end.y,e=t.start.y,r=t.end.x,l=t.start.x;return new wt(n-e,l-r,r*e-l*n)}(r);return r.formula=l,r}function _t(t=null,n=null){return function(t=null,n=null){let e=t.a,r=t.b,l=t.c,u=n.a,i=n.b,o=n.c,s=e*i-u*r;return 0==s?null:I((o*r-l*i)/s,(l*u-o*e)/s)}(t.formula,n.formula)}function bt(t=0,n=0,e=0,r=0){!function(t=0,n=0,e=0,r=0){let l=J.ctx;l.beginPath(),l.moveTo(t,n),l.lineTo(e,r),l.stroke()}(t,n,e,r)}function Ht(t=0,n=0,e=0){!function(t=0,n=0,e=0){let r=J.ctx;r.beginPath(),r.arc(t,n,e,0,2*Math.PI),r.stroke()}(t,n,e)}var It,Ut,St,Mt={debug:!1,fps:r.fps,screen:{width:r.screen.width,height:r.screen.height},stage:{width:r.stage.width,height:r.stage.height},camera:{x:r.camera.x,y:r.camera.y},mousedownHandler:function(t=0,n=0){It=I(t,n)},mouseupHandler:function(t=0,n=0){if(!It)return;Ut?St=vt(It.x,It.y,t,n):Ut=vt(It.x,It.y,t,n);if(bt(It.x,It.y,t,n),Ut&&St){let t=_t(Ut,St);console.log(t),Ht(t.x,t.y,10)}It=null}};class Pt{onStart(){}onUpdate(t=0){}}console.log(Mt),function(t,n=null){xt(t),pt(n)}(Mt,new Pt)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3MuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9hY3Rpb24vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9kaXJlY3Rvci9zeXN0ZW0vYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L3ZpZXcvY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9jb21wb25lbnQvcG9zL2NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudC9wb3MvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvY29tcG9uZW50L2NhbWVyYS91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZW5naW5lL2g1L21vZGVsLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9lbmdpbmUvaDUvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivc3lzdGVtL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2RpcmVjdG9yL3N5c3RlbS9tb3ZlLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9lbmdpbmUvaDUvcHJvY2Vzc29yLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivc3lzdGVtL3J1bi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vc3RydWN0dXJlL2ZyYW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivd29ybGQvcmVzLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3Ivd29ybGQvYWRhcHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL2Zvcm11bGEvYWJjLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvbGluZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvcmVuZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvZ2FtZS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkVudGl0eSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJpZCIsIk5ld0VudGl0eUlkIiwiQ29tcG9uZW50IiwiZW50aXR5SWQiLCJTeXN0ZW0iLCJwcmlvcml0eSIsImR0IiwiQUNUSU9OX1NUQVRFX0VORCIsImFjdGlvblVwZGF0ZSIsImFjdGlvbiIsIm9uVXBkYXRlIiwiYWN0aW9uRW5kIiwic3RhdGUiLCJvbkVuZCIsIkxpbmtOb2RlIiwiZGF0YSIsInByZXAiLCJuZXh0IiwiTGluayIsImhlYWQiLCJ0YWlsIiwiX21hcCIsIk1hcCIsIl9zaXplIiwiX2RlbExpc3QiLCJfY3VyciIsIl9sb2NrIiwiTmV3TGluayIsIkdldExpbmtEYXRhIiwibGluayIsImtleUlkIiwicmVxdWlyZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJub2RlIiwiUHVzaFRvTGluayIsImFkZFRvTGluayIsInNldCIsInJlbW92ZSIsImRlbGV0ZSIsIkxpbmtJdGVyYXRvciIsImNhbGxiYWNrIiwibGVuZ3RoIiwicG9wIiwiYWN0aW9uTGlzdCIsImFjdGlvbl9BY3Rpb25TeXN0ZW0iLCJpc0VuZCIsInN5cyIsImRpc3BsYXlMaXN0IiwiUG9zIiwieCIsInkiLCJOZXdQb3MiLCJUb0xvY2F0ZVBvcyIsInRhcmdldFBvcyIsInJlZmVyUG9zIiwiVmVjIiwiZGlzdGFuY2UiLCJwb2ludF9OZXdWZWMiLCJjb21wb25lbnRfUG9zQ29tcG9uZW50Iiwic3VwZXIiLCJwb3MiLCJ2ZWMiLCJwb3NDb21zIiwiZ2V0UG9zQ29tcG9uZW50IiwiY29tIiwiY3JlYXRlUG9zQ29tcG9uZW50IiwiZ2V0UG9zQ29tcG9uZW50TGlzdCIsIlNldFBvcyIsIkdldFBvc0NvbXBvbmVudExpc3QiLCJSZWN0YW5nbGUiLCJvZmZzZXQiLCJ3aWR0aCIsImhlaWdodCIsImNlbnRlciIsIk5ld1JlY3QiLCJ4T2Zmc2V0IiwieU9mZnNldCIsIlVwZGF0ZVJlY3RQb3NCeVVuaXQiLCJyZWN0IiwidW5pdFBvc1giLCJ1bml0UG9zWSIsIkdldFJlY3RTdGFydFBvcyIsIkdldFJlY3RIYWxmV2lkdGgiLCJHZXRSZWN0SGFsZkhlaWdodCIsInV0aWxzX0NhbWVyYSIsIk5ld0NhbWVyYSIsImNhbWVyYSIsIklzSW5DYW1lcmEiLCJJc1JlY3RzQ3Jvc3MiLCJfZW5naW5lIiwiY3R4IiwiY2FudmFzIiwiZnBzIiwidGljayIsImdldEVuZ2luZSIsInJlbmRlcl9lbmdpbmUiLCJNYXRoIiwiUEkiLCJkcmF3SW1hZ2UiLCJpbWdEYXRhIiwic3giLCJzeSIsInN3aWR0aCIsInNoZWlnaHQiLCJkcmF3UmVjdCIsInN0cm9rZVJlY3QiLCJyZW5kZXJfUmVuZGVyVXBkYXRlU3lzdGVtIiwiZGlzcGxheVR1cGxlIiwiR2V0UG9zIiwiZGlzcGxheUFyZWEiLCJHZXRDYW1lcmEiLCJzY3JlZW5Qb3MiLCJ0ZXh0dXJlQXJlYSIsInNwcml0ZUZyYW1lIiwiYml0bWFwRGF0YSIsIkdldFJlY3RXaWR0aCIsIkdldFJlY3RIZWlnaHQiLCJkcmF3RnJhbWVJbkNhbWVyYSIsInJlbmRlclN5cyIsInJlbmRlcl9EcmF3UmVjdFN5c3RlbSIsIkdldFJlY3RMaXN0IiwiY29sbGlkZXIiLCJkcmF3UmVjdEluQ2FtZXJhIiwiZGVidWdTeXMiLCJtb3ZlX1Bvc1VwZGF0ZVN5c3RlbSIsIm1vdmVDb20iLCJtb3ZlX3N5cyIsIl9jYWxsYmFjayIsInByb2Nlc3Nvcl9lbmdpbmUiLCJfaXNFbmQiLCJwcm9jZXNzb3Jfc3RhcnQiLCJsYXN0IiwiRGF0ZSIsImdldFRpbWUiLCJfa2V5RG93bk1hcCIsImxvZ2ljU3lzdGVtcyIsInJlbmRlclN5c3RlbXMiLCJpbml0U3lzdGVtcyIsImRlYnVnIiwiX3QxIiwibG9naWNUaWNrIiwicmVuZGVyVGljayIsIl90MiIsInJ1bldpdGhTY2VuZSIsInNjZW5lIiwic3lzdGVtIiwib25TdGFydCIsIm9uVXBkYXRlQ2FsbGJhY2siLCJzZXRJbnRlcnZhbCIsInJ1blRpY2siLCJpbml0R2FtZSIsIm9wdGlvbnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsInN0cm9rZVN0eWxlIiwiaW5pdENhbnZhcyIsInNjcmVlbiIsImtleURvd25IYW5kbGVyIiwia2V5VXBIYW5sZXIiLCJrZXlEb3duQ2FsbGJhY2siLCJrZXlVcENhbGxiYWNrIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjb2RlIiwia2V5Q29kZSIsIm9uS2V5Q2FsbGJhY2siLCJtb3VzZWRvd25IYW5kbGVyIiwibW91c2V1cEhhbmRsZXIiLCJtb3VzZWRvd25DYWxsYmFjayIsIm1vdXNldXBDYWxsYmFjayIsImV2ZW50Iiwib25Nb3VzZUNhbGxiYWNrIiwiY2FtZXJhRGF0YSIsInNjcmVlbkRhdGEiLCJyZXNfY2FtZXJhIiwiaW5pdENhbWVyYSIsInRpbGVtYXAiLCJ0aWxlbWFwRGF0YSIsImluaXRIYW5kbGVyIiwiY29sdW1ucyIsImdyaWRXaWR0aCIsImdyaWRIZWlnaHQiLCJyb3dzIiwicGFyc2VJbnQiLCJsb2ciLCJOZXdUaWxlTWFwIiwiSXRlcmF0b3JHcmlkbWFwIiwiZ3JpZG1hcCIsImdyaWQiLCJ2YWwiLCJyb3dJbmRleCIsImNvbEluZGV4IiwiY3JlYXRlVGlsZU1hcFdpdGhEYXRhIiwiaW5pdFRpbGUiLCJjb2xsaWRlIiwiRm9ybXVsYUMiLCJhIiwiYiIsImxpbmVfTGluZSIsInN0YXJ0IiwiZW5kIiwiZm9ybXVsYSIsIk5ld0xpbmVXaXRoUG9zIiwieDEiLCJ5MSIsIngyIiwieTIiLCJuZXdMaW5lIiwiTmV3VmVjV2l0aFBvcyIsIkdldERpc3RhbmNlIiwibGluZSIsIm5ld0Zvcm11bGFDIiwiSW50ZXJTZWN0aW9uUG9zIiwibGluZTEiLCJsaW5lMiIsImZvcm11bGExIiwiZm9ybXVsYTIiLCJhMSIsImIxIiwiYzEiLCJhMiIsImIyIiwiYzIiLCJpbnRlclNlY3Rpb25Qb3MiLCJEcmF3TGluZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsImRyYXdMaW5lIiwiRHJhd0NpcmNsZSIsInJhZGl1cyIsImFyYyIsImRyYXdDaXJjbGUiLCJtYWluX3N0YXJ0UG9zIiwibWFpbl9saW5lMSIsIm1haW5fbGluZTIiLCJtYWluX29wdGlvbnMiLCJzdGFnZSIsIk15U2NlbmUiLCJTdGFydFRlc3QiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FB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LE9BRVFDLEdBR0FDLEdBQVFsQyxHQUFlZ0MsR0FBUTNMLEVBQUkyTCxHQUFRMUwsRUFBQUQsRUFBQUMsR0FGM0MyTCxHQUFRakMsR0FBZWdDLEdBQVEzTCxFQUFJMkwsR0FBUTFMLEVBQUFELEVBQUFDLEdBS25ELEdBRElnTCxHQUFTVSxHQUFRM0wsRUFBSTJMLEdBQVExTCxFQUFBRCxFQUFBQyxHQUMxQjJMLElBQVNDLEdBQUssQ0FDckIsSUFBQWxMLEVBQWtCMEosR0FBZ0J1QixHQUFPQyxJQUN6Qy9NLFFBQUEySixJQUFBOUgsR0FDUTRLLEdBQVU1SyxFQUFBWCxFQUFBVyxFQUFBVixFQUFBLElBRWQwTCxHQUFRLE9BR1osTUFBQUssR0FDQXBQLFdBR0FBLFNBQUFRLEVBQUEsS0FNQTBCLFFBQUEySixJQUFnQnFELElDckJoQixTQUFBeEYsRUFBQVAsRUFBQSxNQUNJTSxHQUFRQyxHQUNSUixHQUFZQyxHRG9CWmtHLENBQVVILEdBQU8sSUFBQUUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiLyoqXHJcbiAqIDIwMTkuMTAuMTBcclxuICogXHTms6jmhI/vvIxsaW5rLWludGVyZmFjZe+8jOmcgOimgeaciWlkLCBwcmlvcml0eeS4pOS4quWxnuaAp1xyXG4gKi9cclxuXHJcblxyXG4vKipcclxuKiAgIFRoZSBCYXNlIFN0cnVjdFxyXG4qXHTlsL3nrqHmiJHku6zlj6rpnIDopoFOZXdFbnRpdHlJZCgp77yM5L2G5piv5omA5pyJ6ZyA6KaBaWTnmoTnsbvpg73opoHnu6fmib/mraTnsbtcclxuKi9cclxuY2xhc3MgRW50aXR5IHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuaWQgPSBOZXdFbnRpdHlJZCgpO1xyXG5cdH1cclxufVxyXG5cclxudmFyIGlkID0gMTtcclxuZnVuY3Rpb24gTmV3RW50aXR5SWQoKXtcclxuXHRyZXR1cm4gaWQrKztcclxufVxyXG5cclxuLyoqXHJcbipcdFRoZSBiYXNlIENvbXBvbmVudFxyXG4qXHTmr4/kuKplbnRpdHnlr7nmr4/np43nu4Tku7blj6rog73mjIHmnInkuIDkuKpcclxuKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuXHRjb25zdHJ1Y3RvcihlbnRpdHlJZCA9IDApIHtcclxuXHRcdHRoaXMuZW50aXR5SWQgPSBlbnRpdHlJZDtcclxuXHRcdHRoaXMuaWQgPSBlbnRpdHlJZDtcdFx0XHQvL+e7mWxpbmvkvb/nlKhcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rnoYDlhYPku7ZcclxuICogVE9ETyDmmoLml7bmsqHku4DkuYjnlKhcclxuICovXHJcbmNsYXNzIFR1cGxlIHtcclxuXHRjb25zdHJ1Y3Rvcihwcmlvcml0eSA9IDApe1xyXG5cdFx0dGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1x0Ly/nu5lsaW5r5L2/55SoXHJcblx0XHR0aGlzLmlkID0gTmV3RW50aXR5SWQoKTtcdC8v57uZbGlua+S9v+eUqFxyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbipcdFRoZSBiYXNlIFN5c3RlbVxyXG4qL1xyXG5jbGFzcyBTeXN0ZW0ge1xyXG5cdGNvbnN0cnVjdG9yKHByaW9yaXR5ID0gMCl7XHJcblx0XHR0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHQvL+e7mWxpbmvkvb/nlKhcclxuXHRcdHRoaXMuaWQgPSBOZXdFbnRpdHlJZCgpO1xyXG5cdH1cclxuICAgIG9uU3RhcnQoKXt9XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe31cclxuICAgIG9uRW5kKCl7fVxyXG59XHJcblxyXG5leHBvcnQge0VudGl0eSwgQ29tcG9uZW50LCBUdXBsZSwgU3lzdGVtfSIsImltcG9ydCB7IFR1cGxlIH0gZnJvbSBcIi4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiXHJcblxyXG5jb25zdCBBQ1RJT05fU1RBVEVfUlVOTklORyA9IDE7XHJcbmNvbnN0IEFDVElPTl9TVEFURV9FTkQgPSAyO1xyXG5cclxuLyoqXHJcbiogICBhY3Rpb27mqKHlnZfnmoTorr7orqHnkIblv7XmmK/vvJpcclxuKiAgICAgICDnu5nnrZbliJLkurrlkZjmk43kvZznmoTliqjmgIHphY3nva7vvIznlLFqc29u6amx5Yqo77yIZGF0YS1kcml2ZW7vvInvvIzlho3nlLHohJrmnKzns7vnu5/nlJ/miJDkuLrpnZnmgIHku6PnoIFcclxuKiAgIOebruWJjeWFiOeUqOemu+aVo+mFjee9ruS7o+abv1xyXG5cclxuKiAgIOeUn+WRveWRqOacn+euoeeQhlxyXG4gICAgICAgIG9uU3RhcnQgLT4g5Yid5aeL5YyW77yM55SxdXRpbHMuUnVuQWN0aW9u6Kem5Y+RXHJcbiAgICAgICAgb25VcGRhdGUgLT4g55Sxc3lzdGVt5Li75rWB56iL6LCD55So77yM5Y+q5omn6KGM5Li76YC76L6R77yM5LiN6ZyA6KaB5Yik5pat57uI5q2i5p2h5Lu2XHJcbiAgICAgICAgaXNFbmQ6IOeUsXN5c3RlbeWcqOaJp+ihjG9uVXBkYXRl5ZCO6K6/6Zeu77yM6L+U5ZueYm9vbO+8jOWGs+WumuaYr+WQpui+vuWIsOe7iOatouadoeS7tuS6hu+8jOi/lOWbnnRydWXliJnooajnpLrlj6/ku6Xnu4jmraLmraRhY3Rpb25cclxuICAgICAgICBvbkVuZDog5Zyoc3lzdGVt6K+35rGCaXNFbmQ9dHJ1ZeWQjuiwg+eUqO+8jOeUqOS6juaUtuWwvu+8jOWmgui1hOa6kOWbnuaUtlxyXG4gICAgICAgIG9uU3RvcDog55SxdXRpbHMuU3RvcEFjdGlvbuinpuWPke+8jOW8uuWItuS4reaWre+8jOS4jei1sGlzRW5k5rWB56iL77yM6buY6K6k6LCD55Sob25FbmTvvIzlm6DmraTmoLnmja7mg4XlhrXlj6/og73pnIDopoHpop3lpJblpITnkIZcclxuKi9cclxuY2xhc3MgQWN0aW9uIGV4dGVuZHMgVHVwbGUge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXR5SWQgPSAwLCBwcmlvcml0eSA9IDApe1xyXG4gICAgICAgIHN1cGVyKHByaW9yaXR5KTtcclxuICAgICAgICB0aGlzLmVudGl0eUlkID0gZW50aXR5SWQ7ICAgLy/miYDlsZ7ogIVcclxuICAgICAgICB0aGlzLnN0YXRlID0gQUNUSU9OX1NUQVRFX0VORDtcclxuICAgIH1cclxuICAgIG9uU3RhcnQoKXt9XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe31cclxuICAgIGlzRW5kKCl7ICAgIHJldHVybiBmYWxzZTsgICAgfVxyXG4gICAgb25FbmQoKXt9XHJcbiAgICBvblN0b3AoKXsgICB0aGlzLm9uRW5kKCk7ICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gYWN0aW9uU3RhcnQoYWN0aW9uID0gbnVsbCl7XHJcbiAgICBhY3Rpb24uc3RhdGUgPSBBQ1RJT05fU1RBVEVfUlVOTklORztcclxuICAgIGFjdGlvbi5vblN0YXJ0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFjdGlvblVwZGF0ZShhY3Rpb24gPSBudWxsLCBkdCA9IDApe1xyXG4gICAgYWN0aW9uLm9uVXBkYXRlKGR0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aW9uRW5kKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgYWN0aW9uLnN0YXRlID0gQUNUSU9OX1NUQVRFX0VORDtcclxuICAgIGFjdGlvbi5vbkVuZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3Rpb25TdG9wKGFjdGlvbiA9IG51bGwpe1xyXG4gICAgYWN0aW9uLnN0YXRlID0gQUNUSU9OX1NUQVRFX0VORDtcclxuICAgIGFjdGlvbi5vblN0b3AoKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGlzU3RhcnQoYWN0aW9uID0gbnVsbCl7XHJcbiAgICByZXR1cm4gYWN0aW9uLnN0YXRlID09IEFDVElPTl9TVEFURV9SVU5OSU5HO1xyXG59XHJcbmZ1bmN0aW9uIGlzU3RvcChhY3Rpb24gPSBudWxsKXtcclxuICAgIHJldHVybiBhY3Rpb24uc3RhdGUgPT0gQUNUSU9OX1NUQVRFX0VORDtcclxufVxyXG5cclxuZXhwb3J0IHtBY3Rpb24sIGFjdGlvblN0YXJ0LCBhY3Rpb25VcGRhdGUsIGFjdGlvbkVuZCwgYWN0aW9uU3RvcCwgaXNTdGFydCwgaXNTdG9wfSIsImNsYXNzIExpbmtOb2RlIHtcclxuXHRjb25zdHJ1Y3RvcihkYXRhID0gbnVsbCwgcHJlcCA9IG51bGwsIG5leHQgPSBudWxsKSB7XHJcblx0XHR0aGlzLmRhdGEgPSBkYXRhO1xyXG5cdFx0dGhpcy5wcmVwID0gcHJlcDtcclxuICAgICAgICB0aGlzLm5leHQgPSBuZXh0O1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgTGluayB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmhlYWQgPSBuZXcgTGlua05vZGUoKTtcdFx0Ly9lbXB0eSBkYXRhIG5vZGVcclxuXHRcdHRoaXMudGFpbCA9IG5ldyBMaW5rTm9kZSgpO1xyXG5cdFx0dGhpcy5oZWFkLm5leHQgPSB0aGlzLnRhaWw7XHJcblx0XHR0aGlzLnRhaWwucHJlcCA9IHRoaXMuaGVhZDtcclxuXHRcdHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcclxuXHRcdHRoaXMuX3NpemUgPSAwO1xyXG4gICAgICAgIHRoaXMuX2RlbExpc3QgPSBbXTtcclxuICAgICAgICB0aGlzLl9jdXJyID0gdGhpcy5oZWFkO1xyXG4gICAgICAgIHRoaXMuX2xvY2sgPSBmYWxzZTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld0xpbmsoKXtcclxuICAgIHJldHVybiBuZXcgTGluaygpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOiOt+WPllxyXG4gKi9cclxuZnVuY3Rpb24gR2V0TGlua0RhdGEobGluayA9IG51bGwsIGtleUlkID0gMCwgcmVxdWlyZWQgPSBmYWxzZSl7XHJcbiAgICBpZighbGluaykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJsaW5rIGlzIG51bGwuXCIpO1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG5vZGUgPSBsaW5rLl9tYXAuZ2V0KGtleUlkKTtcclxuICAgIGlmKG5vZGUpe1xyXG4gICAgICAgIHJldHVybiBub2RlLmRhdGE7XHJcbiAgICB9XHJcbiAgICBpZihyZXF1aXJlZCl7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImNhbid0IGZpbmQga2V5SWQ6IFwiLCBrZXlJZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0TGlua1NpemUobGluayA9IG51bGwpe1xyXG4gICAgaWYoIWxpbmspIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGluay5fc2l6ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOa3u+WKoOWIsOacq+WwvlxyXG4gKi9cclxuZnVuY3Rpb24gUHVzaFRvTGluayhsaW5rID0gbnVsbCwgZGF0YSA9IG51bGwpIHtcclxuICAgIHJldHVybiBhZGRUb0xpbmsobGluaywgZGF0YSwgbGluay50YWlsKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOaPkuWFpeWIsOWIl+ihqOS4rVxyXG4gKiBkYXRhLnByaW9yaXR56aG65bqP5Y+377yM55Sx5aSn5Yiw5bCP5o6S5bqP77yM6buY6K6k5Li6MFxyXG4gKi9cclxuZnVuY3Rpb24gSW5zZXJ0VG9MaW5rKGxpbmsgPSBudWxsLCBkYXRhID0gbnVsbCl7XHJcbiAgICBsZXQgcHJpb3JpdHkgPSBkYXRhICYmIGRhdGEucHJpb3JpdHkgPyBkYXRhLnByaW9yaXR5IDogMDtcclxuICAgIGxldCBub2RlID0gbGluay5oZWFkLm5leHQ7XHJcblx0d2hpbGUobm9kZSAhPSBsaW5rLnRhaWwpe1xyXG4gICAgICAgIGlmKHByaW9yaXR5ID4gbm9kZS5kYXRhLnByaW9yaXR5KXtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cdFx0bm9kZSA9IG5vZGUubmV4dDtcclxuICAgIH1cclxuICAgIHJldHVybiBhZGRUb0xpbmsobGluaywgZGF0YSwgbm9kZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFRvTGluayhsaW5rID0gbnVsbCwgZGF0YSA9IG51bGwsIG5leHQgPSBudWxsKXtcclxuICAgIGlmKCFsaW5rIHx8ICFkYXRhIHx8ICFkYXRhLmlkKXtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImVycm9yIHBhcmFtOiBcIiwgbGluaywgZGF0YSwgZGF0YS5pZCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvL+S4jeiDvemHjeWkjea3u+WKoFxyXG4gICAgaWYobGluay5fbWFwLmdldChkYXRhLmlkKSl7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcImVycm9yIGlkOiVkIGlzIGV4aXN0XCIsIGRhdGEuaWQpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy/mlrDoioLngrnov57mjqVcclxuICAgIGxldCBwcmVwID0gbmV4dC5wcmVwO1xyXG4gICAgbGV0IG5vZGUgPSBuZXcgTGlua05vZGUoZGF0YSwgcHJlcCwgbmV4dCk7XHJcbiAgICBwcmVwLm5leHQgPSBub2RlO1xyXG4gICAgbmV4dC5wcmVwID0gbm9kZTtcclxuXHJcbiAgICBsaW5rLl9tYXAuc2V0KGRhdGEuaWQsIG5vZGUpO1xyXG4gICAgbGluay5fc2l6ZSsrO1xyXG4gICAgcmV0dXJuIG5vZGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliKDpmaRcclxuICovXHJcbmZ1bmN0aW9uIFJlbW92ZUJ5S2V5SWQobGluayA9IG51bGwsIGtleUlkID0gMCl7XHJcbiAgICBpZighbGluayB8fCBrZXlJZD09MCkge1xyXG4gICAgICAgIC8vbG9nIGhlcmVcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiZXJyb3IgcGFyYW06IFwiLCBsaW5rLCBrZXlJZCk7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBpZihsaW5rLl9sb2NrKXtcclxuICAgICAgICBsaW5rLl9kZWxMaXN0LnB1c2goa2V5SWQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlbW92ZShsaW5rLCBrZXlJZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZShsaW5rID0gbnVsbCwga2V5SWQgPSAwKXtcclxuICAgIGxldCBub2RlID0gbGluay5fbWFwLmdldChrZXlJZCk7XHJcbiAgICBpZighbm9kZSl7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGluay5fbWFwLmRlbGV0ZShrZXlJZCk7XHJcbiAgICBsZXQgcCA9IG5vZGUucHJlcDtcclxuICAgIGxldCBuID0gbm9kZS5uZXh0O1xyXG4gICAgcC5uZXh0ID0gbjtcclxuICAgIG4ucHJlcCA9IHA7XHJcbiAgICBsaW5rLl9zaXplLS07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDova7or6IsIGNhbGxiYWNrID0gZnVuY3Rpb24oPD8gZXh0ZW5kcyBlbnRpdHk+KXt9XHJcbiAqL1xyXG5mdW5jdGlvbiBMaW5rSXRlcmF0b3IobGluayA9IG51bGwsIGNhbGxiYWNrID0gbnVsbCl7XHJcbiAgICBpZighbGluayB8fCAhY2FsbGJhY2spIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsaW5rLl9sb2NrID0gdHJ1ZTtcclxuICAgIGxldCBub2RlID0gbGluay5oZWFkLm5leHQ7XHJcblx0d2hpbGUobm9kZSAhPSBsaW5rLnRhaWwpe1xyXG5cdFx0aWYoY2FsbGJhY2sobm9kZS5kYXRhKSl7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHRcdG5vZGUgPSBub2RlLm5leHQ7XHJcbiAgICB9XHJcbiAgICB3aGlsZShsaW5rLl9kZWxMaXN0Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgIHJlbW92ZShsaW5rLCBsaW5rLl9kZWxMaXN0LnBvcCgpKTtcclxuICAgIH1cclxuICAgIGxpbmsuX2xvY2sgPSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0Rmlyc3QobGluayA9IG51bGwpe1xyXG4gICAgaWYoIWxpbmspIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsuaGVhZC5uZXh0O1xyXG4gICAgaWYobm9kZSl7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldExhc3QobGluayA9IG51bGwpe1xyXG4gICAgaWYoIWxpbmspIHtcclxuICAgICAgICAvL2xvZyBoZXJlXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBsZXQgbm9kZSA9IGxpbmsudGFpbC5wcmVwO1xyXG4gICAgaWYobm9kZSl7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlsIbliJfooajkuK3nmoTlhYPntKDkuKTkuKTlr7nmr5TvvIxjYWxsYmFjayA9IGZ1bmN0aW9uKDw/IGV4dGVuZHMgZW50aXR5IG9yIGNvbXBvbmVudD4gZnJvbnQsIG5leHQpe31cclxuICovXHJcbmZ1bmN0aW9uIExpbmtDb21wYXJlKGxpbmsgPSBudWxsLCBjYWxsYmFjayA9IG51bGwpe1xyXG4gICAgaWYoIWxpbmsgfHwgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy9sb2cgaGVyZVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGluay5fbG9jayA9IHRydWU7XHJcbiAgICBsZXQgb3V0Tm9kZSA9IGxpbmsuaGVhZC5uZXh0O1xyXG4gICAgd2hpbGUob3V0Tm9kZSAhPSBsaW5rLnRhaWwpe1xyXG4gICAgICAgIGxldCBpbk5vZGUgPSBvdXROb2RlLm5leHQ7XHJcbiAgICAgICAgd2hpbGUoaW5Ob2RlICE9IGxpbmsudGFpbCl7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKG91dE5vZGUuZGF0YSwgaW5Ob2RlLmRhdGEpO1xyXG4gICAgICAgICAgICBpbk5vZGUgPSBpbk5vZGUubmV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3V0Tm9kZSA9IG91dE5vZGUubmV4dDtcclxuICAgIH1cclxuICAgIGxpbmsuX2xvY2sgPSBmYWxzZTtcclxuICAgIGxpbmsuX2RlbExpc3QuZm9yRWFjaChrZXlJZCA9PiB7XHJcbiAgICAgICAgUmVtb3ZlQnlLZXlJZChsaW5rLCBrZXlJZCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IHtMaW5rLCBMaW5rTm9kZSwgTmV3TGluaywgR2V0Rmlyc3QsIEdldExhc3QsIEdldExpbmtEYXRhLCBHZXRMaW5rU2l6ZSwgUHVzaFRvTGluaywgSW5zZXJ0VG9MaW5rLCBSZW1vdmVCeUtleUlkLCBMaW5rSXRlcmF0b3IsIExpbmtDb21wYXJlfSIsImltcG9ydCB7IGlzU3RvcCwgaXNTdGFydCwgYWN0aW9uU3RhcnQsIGFjdGlvblN0b3AgfSBmcm9tICcuL2Jhc2UnO1xyXG5pbXBvcnQgeyBQdXNoVG9MaW5rLCBSZW1vdmVCeUtleUlkLCBOZXdMaW5rIH0gZnJvbSAnLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGluayc7XHJcblxyXG5cclxudmFyIGFjdGlvbkxpc3QgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIEdldFJ1bm5pZ0FjdGlvbkxpc3QoKXtcclxuICAgIHJldHVybiBhY3Rpb25MaXN0O1xyXG59XHJcblxyXG4vKipcclxuICog6L+Q6KGMYWN0aW9u77yM5bm25Yqg5YWl5YiwYWN0aW9u57O757ufbGlua+S4re+8jOS4gOiIrOS+m+WklumDqOiwg+eUqCBcclxuICovXHJcbmZ1bmN0aW9uIFJ1bkFjdGlvbihhY3Rpb24gPSBudWxsKXtcclxuICAgIGlmKGlzU3RvcChhY3Rpb24pKXtcclxuICAgICAgICBhY3Rpb25TdGFydChhY3Rpb24pO1xyXG4gICAgICAgIFB1c2hUb0xpbmsoYWN0aW9uTGlzdCwgYWN0aW9uLCBhY3Rpb24uaWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog56uL5Y2z57uI5q2iYWN0aW9u5bm256e75Ye6YWN0aW9u57O757ufbGlua++8jOS4gOiIrOS+m+WklumDqOiwg+eUqFxyXG4gKi9cclxuZnVuY3Rpb24gU3RvcEFjdGlvbihhY3Rpb24gPSBudWxsKXtcclxuICAgIGlmKGlzU3RhcnQoYWN0aW9uKSl7XHJcbiAgICAgICAgYWN0aW9uU3RvcChhY3Rpb24pO1xyXG4gICAgICAgIFJlbW92ZUJ5S2V5SWQoYWN0aW9uTGlzdCwgYWN0aW9uLmlkKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtHZXRSdW5uaWdBY3Rpb25MaXN0LCBSdW5BY3Rpb24sIFN0b3BBY3Rpb259IiwiaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiO1xyXG5pbXBvcnQgeyBHZXRSdW5uaWdBY3Rpb25MaXN0IH0gZnJvbSBcIi4uLy4uL2FjdGlvbi91dGlsc1wiO1xyXG5pbXBvcnQgeyBMaW5rSXRlcmF0b3IgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvbGlua1wiO1xyXG5pbXBvcnQgeyBhY3Rpb25VcGRhdGUsIGFjdGlvbkVuZCB9IGZyb20gXCIuLi8uLi9hY3Rpb24vYmFzZVwiO1xyXG5cclxuLyoqXHJcbiAqIOWKqOS9nOezu+e7n1xyXG4gKi9cclxuY2xhc3MgQWN0aW9uU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCkge1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRSdW5uaWdBY3Rpb25MaXN0KCksIGFjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGFjdGlvblVwZGF0ZShhY3Rpb24sIGR0KTtcclxuICAgICAgICAgICAgaWYoYWN0aW9uLmlzRW5kKCkpe1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uRW5kKGFjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHN5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldEFjdGlvblN5c3RlbSgpe1xyXG4gICAgaWYoIXN5cyl7XHJcbiAgICAgICAgc3lzID0gbmV3IEFjdGlvblN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN5cztcclxufVxyXG5cclxuZXhwb3J0e0dldEFjdGlvblN5c3RlbX0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZWNzXCI7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIEdldExpbmtEYXRhLCBSZW1vdmVCeUtleUlkLCBOZXdMaW5rIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuXHJcblxyXG4vKipcclxuICog5pi+56S657uE5Lu277yM5YyF5ZCr5LiA5Lqb55+p6Zi15pWw5o2uXHJcbiAqL1xyXG5jbGFzcyBSZW5kZXJDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cdGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgYW5nbGUgPSAwLCBzY2FsZSA9IDEpIHtcclxuICAgICAgICBzdXBlcihlbnRpdHlJZCk7XHJcbiAgICAgICAgdGhpcy5hbmdsZSA9IGFuZ2xlO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcclxuXHR9XHJcbn1cclxuXHJcbnZhciByZW5kZXJDb21zID0gTmV3TGluaygpO1xyXG5mdW5jdGlvbiBjcmVhdGVSZW5kZXJDb21wb25lbnQoZW50aXR5SWQgPSAwLCB2aWV3RGF0YSA9IG51bGwpIHtcclxuICAgIHZpZXdEYXRhID0gdmlld0RhdGEgPyB2aWV3RGF0YSA6IHt9O1xyXG4gICAgbGV0IGNvbSA9IG5ldyBSZW5kZXJDb21wb25lbnQoZW50aXR5SWQsIHZpZXdEYXRhLmFuZ2xlLCB2aWV3RGF0YS5zY2FsZSk7XHJcbiAgICBQdXNoVG9MaW5rKHJlbmRlckNvbXMsIGNvbSk7XHJcbiAgICByZXR1cm4gY29tO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHZXRSZW5kZXJDb21wb25lbnQoZW50aXR5SWQgPSAwLCB2aWV3RGF0YSA9IG51bGwpIHtcclxuICAgIGxldCBjb20gPSBHZXRMaW5rRGF0YShyZW5kZXJDb21zLCBlbnRpdHlJZCk7XHJcbiAgICByZXR1cm4gY29tID8gY29tIDogY3JlYXRlUmVuZGVyQ29tcG9uZW50KGVudGl0eUlkLCB2aWV3RGF0YSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5pi+56S65YWD5Lu2XHJcbiAqIOebruWJjeS9v+eUqHR1cGxl77yM5Y+v5Lul5YW85a655LiA5LiqdW5pdOWQjOaXtuaMguWkmuS4qnNwcml0ZUZyYW1l55qE6ZyA5rGCXHJcbiAqIOWmguaenOmcgOimgemZkOWItuS4gOS4qnVuaXTku4XmnInkuIDkuKpzcHJpdGVGcmFtZe+8jOWwseS9v+eUqGNvbXBvbmVudFxyXG4gKi9cclxuY2xhc3MgRGlzcGxheVR1cGxlIGV4dGVuZHMgVHVwbGUge1xyXG4gICAgY29uc3RydWN0b3IoZW50aXR5SWQgPSAwLCBzcHJpdGVGcmFtZSA9IG51bGwsIGRpc3BsYXlBcmVhID0gbnVsbCl7XHJcbiAgICAgICAgc3VwZXIoZW50aXR5SWQpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlRnJhbWUgPSBzcHJpdGVGcmFtZTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlBcmVhID0gZGlzcGxheUFyZWE7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDnlLvluIPkuIrnmoTmmL7npLrpmJ/liJdcclxuICovXHJcbnZhciBkaXNwbGF5TGlzdCA9IE5ld0xpbmsoKTtcclxuZnVuY3Rpb24gR2V0RGlzcGxheUxpc3QoKXtcclxuICAgIHJldHVybiBkaXNwbGF5TGlzdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWKoOWFpea4suafk+mYn+WIl1xyXG4gKiBAcGFyYW0geyp9IGRpc3BsYXlBcmVhIFJlY3TnsbvlnotcclxuICovXHJcbmZ1bmN0aW9uIEFkZERpc3BsYXkoZW50aXR5SWQgPSAwLCBzcHJpdGVGcmFtZSA9IG51bGwsIGRpc3BsYXlBcmVhID0gbnVsbCkge1xyXG4gICAgbGV0IHQgPSBuZXcgRGlzcGxheVR1cGxlKGVudGl0eUlkLCBzcHJpdGVGcmFtZSwgZGlzcGxheUFyZWEpO1xyXG4gICAgUHVzaFRvTGluayhkaXNwbGF5TGlzdCwgdCk7XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZnVuY3Rpb24gUmVtb3ZlRGlzcGxheShkaXNwbGF5SWQgPSAwKSB7XHJcbiAgICBSZW1vdmVCeUtleUlkKGRpc3BsYXlMaXN0LCBkaXNwbGF5SWQpO1xyXG59XHJcblxyXG5leHBvcnQge0dldFJlbmRlckNvbXBvbmVudCwgR2V0RGlzcGxheUxpc3QsIEFkZERpc3BsYXksIFJlbW92ZURpc3BsYXl9IiwiLyoqXHJcbiAqIOWfuuehgDJE5Z2Q5qCHXHJcbiAqL1xyXG5jbGFzcyBQb3Mge1xyXG4gICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwKXtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE5ld1Bvcyh4ID0gMCwgeSA9IDApe1xyXG4gICAgcmV0dXJuIG5ldyBQb3MoeCwgeSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDorqHnrpfnm7jlr7nlnZDmoIdcclxuICog5LuldGFyZ2V0UG9z5Li65YeG77yM6K6h566XcmVmZXJQb3Pkuo50YXJnZXRQb3PnmoTnm7jlr7nlnZDmoIdcclxuICog5Li+5L6L77yaXHJcbiAqICAgICAg5pGE5YOP5py65L2N5LqOKDUwLCA1MCnlpITvvIxyZWZlclBvc1xyXG4gKiAgICAgIOWNleS9jUHkvY3kuo4oMTIwLCAzMCnlpITvvIx0YXJnZXRQb3NcclxuICogICAgICDpgqPkuYjvvIzljZXkvY1B5Zyo5pGE5YOP5py655qEKDEyMC01MCwgMzAtNTAp5aSEXHJcbiAqL1xyXG5mdW5jdGlvbiBUb0xvY2F0ZVBvcyh0YXJnZXRQb3MgPSBudWxsLCByZWZlclBvcyA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICB0YXJnZXRQb3MueCAtIHJlZmVyUG9zLngsXHJcbiAgICAgICAgdGFyZ2V0UG9zLnkgLSByZWZlclBvcy55KTtcclxufVxyXG5cclxuLy8gZnVuY3Rpb24gVG9Mb2NhdGVYKHRhcmdldFggPSAwLCByZWZlclggPSAwKXtcclxuLy8gICAgIHJldHVybiB0YXJnZXRYIC0gcmVmZXJYO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBUb0xvY2F0ZVkodGFyZ2V0WSA9IDAsIHJlZmVyWSA9IDApe1xyXG4vLyAgICAgcmV0dXJuIHRhcmdldFkgLSByZWZlclk7XHJcbi8vIH1cclxuXHJcblxyXG4vKipcclxuICog5Z+656GA5ZCR6YePXHJcbiAqIGRpc3RhbmNlOiDot53nprvns7vmlbDvvIzms6jmhI/kuI3mmK/lrp7pmYXot53nprvvvIzlj6rnlKjkuo7mr5TovoPot53nprvlpKflsI9cclxuICovXHJcbmNsYXNzIFZlYyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDApe1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0geCAqIHggKyB5ICogeTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3VmVjKHggPSAwLCB5ID0gMCl7XHJcbiAgICByZXR1cm4gbmV3IFZlYyh4LCB5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gTmV3VmVjV2l0aFBvcyh4MSA9IDAsIHkxID0gMCwgeDIgPSAwLCB5MiA9IDApe1xyXG4gICAgcmV0dXJuIG5ldyBOZXdWZWMoeDIgLSB4MSwgeTIgLSB5MSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDot53nprvns7vmlbBcclxuICog5rOo5oSP77yM5bm26Z2e5a6e6ZmF6Led56a75YC877yM5Zug5Li65byA5qC55Y+36K6h566X5raI6ICX5aSnXHJcbiAqIOiLpeWPqueUqOS6juWvueavlOWkp+Wwj++8jOatpOezu+aVsOWNs+WPr1xyXG4gKi9cclxuZnVuY3Rpb24gR2V0RGlzdGFuY2UodmVjID0gbnVsbCl7XHJcbiAgICByZXR1cm4gdmVjLmRpc3RhbmNlO1xyXG59XHJcblxyXG5leHBvcnQge05ld1BvcywgVG9Mb2NhdGVQb3MsXHJcbiAgICBOZXdWZWMsIE5ld1ZlY1dpdGhQb3MsIEdldERpc3RhbmNlfSIsImltcG9ydCB7IE5ld1BvcywgTmV3VmVjIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50XCI7XHJcbmltcG9ydCB7IFB1c2hUb0xpbmssIEdldExpbmtEYXRhLCBOZXdMaW5rIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2Vjc1wiO1xyXG5cclxuLyoqXHJcbiAqIOS9jee9rue7hOS7tlxyXG4gKi9cclxuY2xhc3MgUG9zQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eUlkID0gMCwgeCA9IDAsIHkgPSAwKXtcclxuICAgICAgICBzdXBlcihlbnRpdHlJZCk7XHJcbiAgICAgICAgdGhpcy5wb3MgPSBOZXdQb3MoeCwgeSk7XHJcbiAgICAgICAgdGhpcy52ZWMgPSBOZXdWZWMoKTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHBvc0NvbXMgPSBOZXdMaW5rKCk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVBvc0NvbXBvbmVudChlbnRpdHlJZCA9IDApIHtcclxuICAgIGxldCBjb20gPSBuZXcgUG9zQ29tcG9uZW50KGVudGl0eUlkKTtcclxuICAgIFB1c2hUb0xpbmsocG9zQ29tcywgY29tKTtcclxuICAgIHJldHVybiBjb207XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCA9IDApIHtcclxuICAgIGxldCBjb20gPSBHZXRMaW5rRGF0YShwb3NDb21zLCBlbnRpdHlJZCk7XHJcbiAgICByZXR1cm4gY29tID8gY29tIDogY3JlYXRlUG9zQ29tcG9uZW50KGVudGl0eUlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UG9zQ29tcG9uZW50TGlzdCgpe1xyXG4gICAgcmV0dXJuIHBvc0NvbXM7XHJcbn1cclxuXHJcbmV4cG9ydHsgZ2V0UG9zQ29tcG9uZW50LCBnZXRQb3NDb21wb25lbnRMaXN0fSIsImltcG9ydCB7IGdldFBvc0NvbXBvbmVudCwgZ2V0UG9zQ29tcG9uZW50TGlzdCB9IGZyb20gJy4vY29tcG9uZW50JztcclxuaW1wb3J0IHsgUmVtb3ZlQnlLZXlJZCB9IGZyb20gJy4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmsnO1xyXG5cclxuZnVuY3Rpb24gU2V0UG9zKGVudGl0eUlkID0gMCwgeCA9IDAsIHkgPSAwKXtcclxuICAgIGxldCBwb3MgPSBnZXRQb3NDb21wb25lbnQoZW50aXR5SWQpLnBvcztcclxuICAgIHBvcy54ID0geDtcclxuICAgIHBvcy55ID0geTtcclxuICAgIHJldHVybiBwb3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFBvcyhlbnRpdHlJZCA9IDApe1xyXG4gICAgcmV0dXJuIGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCkucG9zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTZXRWZWMoZW50aXR5SWQgPSAwLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgbGV0IHZlYyA9IGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCkudmVjO1xyXG4gICAgdmVjLnggPSB4O1xyXG4gICAgdmVjLnkgPSB5O1xyXG4gICAgcmV0dXJuIHZlYztcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0VmVjKGVudGl0eUlkID0gMCl7XHJcbiAgICByZXR1cm4gZ2V0UG9zQ29tcG9uZW50KGVudGl0eUlkKS52ZWM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFBvc0NvbXBvbmVudChlbnRpdHlJZCA9IDApe1xyXG4gICAgcmV0dXJuIGdldFBvc0NvbXBvbmVudChlbnRpdHlJZCk7XHJcbn1cclxuZnVuY3Rpb24gR2V0UG9zQ29tcG9uZW50TGlzdCgpe1xyXG4gICAgcmV0dXJuIGdldFBvc0NvbXBvbmVudExpc3QoKTtcclxufVxyXG5mdW5jdGlvbiBSZW1vdmVQb3NDb21wb25lbnQoZW50aXR5SWQgPSAwKXtcclxuICAgIFJlbW92ZUJ5S2V5SWQoZ2V0UG9zQ29tcG9uZW50TGlzdCgpLCBlbnRpdHlJZCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7U2V0UG9zLCBHZXRQb3MsIEdldFZlYywgU2V0VmVjLCBHZXRQb3NDb21wb25lbnQsIEdldFBvc0NvbXBvbmVudExpc3QsIFJlbW92ZVBvc0NvbXBvbmVudH0iLCJpbXBvcnQgeyBOZXdQb3MsIE5ld1ZlYyB9IGZyb20gXCIuL3BvaW50XCI7XHJcblxyXG5cclxuLyoqXHJcbiAqIDJE5Z+656GA55+p5b2i77yM55Sx5Y+C6ICD5Z2Q5qCH77yM5YGP56e76YeP77yM5a696auY57uE5oiQXHJcbiAqIOS9jee9ruaYr+agueaNruebuOWvueWdkOagh+eul+WHuuadpVxyXG4gKiB4T2Zmc2V0LCB5T2Zmc2V0IDog55u45a+55Z2Q5qCH5YGP56e76YePXHJcbiAqIHdpZHRoLCBoZWlnaHQgOiDlrr3pq5hcclxuICogY2VudGVyIDog5a6e6ZmF5L2N572u77yI55+p5b2i5Lit5b+D77yJ77yM5YaF6YOo5L2/55So77yMY2VudGVyID0gdW5pdC5wb3MgKyByZWN0Lm9mZnNldFxyXG4gKi9cclxuY2xhc3MgUmVjdGFuZ2xlIHtcclxuICAgIGNvbnN0cnVjdG9yKG9mZnNldCA9IG51bGwsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCwgY2VudGVyID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOefqeW9oum7mOiupOWxheS4reS6jm93bmVyXHJcbiAqIOatpOaWueazleS4gOiIrOeUsWNvbGxpZGVy6LCD55SoXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdSZWN0KHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIGxldCBvZmZzZXQgPSBOZXdWZWMoeE9mZnNldCwgeU9mZnNldCk7XHJcbiAgICByZXR1cm4gbmV3IFJlY3RhbmdsZShvZmZzZXQsIHdpZHRoLCBoZWlnaHQsIE5ld1BvcygpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOabtOaWsOW9k+WJjeefqeW9ouWxnuaAp++8iOS9jee9ruOAgeWBj+enu+mHj+OAgeWkp+Wwj+etie+8ie+8jOWQjumdouaJgOaciea2ieWPiuefqeW9ouiuoeeul+eahOWHveaVsO+8jOmDveW/hemhu+W7uueri+WcqOW3suabtOaWsOS6hue7neWvueWdkOagh+eahOefqeW9oueahOWfuuehgOS5i+S4ilxyXG4gKiB4LCB55piv57ud5a+55Z2Q5qCHXHJcbiAqL1xyXG5mdW5jdGlvbiBVcGRhdGVSZWN0U2l6ZShyZWN0ID0gbnVsbCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgIHJlY3Qud2lkdGggPSB3aWR0aDtcclxuICAgIHJlY3QuaGVpZ2h0ID0gaGVpZ2h0O1xyXG59XHJcbmZ1bmN0aW9uIFVwZGF0ZVJlY3RPZmZzZXQocmVjdCA9IG51bGwsIHhPZmZzZXQgPSAwLCB5T2Zmc2V0ID0gMCl7XHJcbiAgICByZWN0Lm9mZnNldC54ID0geE9mZnNldDtcclxuICAgIHJlY3Qub2Zmc2V0LnkgPSB5T2Zmc2V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBVcGRhdGVSZWN0Q2VudGVyUG9zKHJlY3QgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgcmVjdC5jZW50ZXIueCA9IHg7XHJcbiAgICByZWN0LmNlbnRlci55ID0geTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOagueaNruaJgOWxnuWNleS9jeeahOS9jee9ruabtOaWsOefqeW9ouS9jee9ru+8iOS4gOiIrOWcuuaZr+iwg+eUqO+8iVxyXG4gKi9cclxuZnVuY3Rpb24gVXBkYXRlUmVjdFBvc0J5VW5pdChyZWN0ID0gbnVsbCwgdW5pdFBvc1ggPSAwLCB1bml0UG9zWSA9IDApe1xyXG4gICAgcmVjdC5jZW50ZXIueCA9IHVuaXRQb3NYICsgcmVjdC5vZmZzZXQueDtcclxuICAgIHJlY3QuY2VudGVyLnkgPSB1bml0UG9zWSArIHJlY3Qub2Zmc2V0Lnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlj43lkJHkv67lpI11bml05L2N572u77yIZml4SW5SZWN06LCD55So77yJXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhVbml0UG9zKHJlY3QgPSBudWxsLCB1bml0UG9zID0gbnVsbCl7XHJcbiAgICB1bml0UG9zLnggPSByZWN0LmNlbnRlci54IC0gcmVjdC5vZmZzZXQueDtcclxuICAgIHVuaXRQb3MueSA9IHJlY3QuY2VudGVyLnkgLSByZWN0Lm9mZnNldC55O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOefqeW9ouWQhOS4queCueS9jee9ruWSjOWPguaVsO+8jOiusOS9j+imgeWcqHVwZGF0ZeWQjuWGjeiwg+eUqO+8jOS7peWFjeaVsOaNruacieivr1xyXG4gKi9cclxuZnVuY3Rpb24gR2V0UmVjdE9mZnNldFZlYyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5vZmZzZXQ7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdENlbnRlclBvcyhyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC5jZW50ZXI7XHJcbn1cclxuZnVuY3Rpb24gR2V0UmVjdFN0YXJ0UG9zKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiBOZXdQb3MoXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueCAtIEdldFJlY3RIYWxmV2lkdGgocmVjdCksXHJcbiAgICAgICAgcmVjdC5jZW50ZXIueSAtIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3QpXHJcbiAgICApO1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RFbmRQb3MocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIE5ld1BvcyhcclxuICAgICAgICByZWN0LmNlbnRlci54ICsgR2V0UmVjdEhhbGZXaWR0aChyZWN0KSxcclxuICAgICAgICByZWN0LmNlbnRlci55ICsgR2V0UmVjdEhhbGZIZWlnaHQocmVjdClcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFJlY3RXaWR0aChyZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gcmVjdC53aWR0aDtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0SGVpZ2h0KHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LmhlaWdodDtcclxufVxyXG5mdW5jdGlvbiBHZXRSZWN0SGFsZldpZHRoKHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LndpZHRoICogMC41O1xyXG59XHJcbmZ1bmN0aW9uIEdldFJlY3RIYWxmSGVpZ2h0KHJlY3QgPSBudWxsKXtcclxuICAgIHJldHVybiByZWN0LmhlaWdodCAqIDAuNTtcclxufVxyXG5cclxuXHJcbi8v5rGC6Z2i56evXHJcbmZ1bmN0aW9uIEdldEFyZWEocmVjdCA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHJlY3Qud2lkdGggKiByZWN0LmhlaWdodDtcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBOZXdSZWN0LCBVcGRhdGVSZWN0U2l6ZSwgVXBkYXRlUmVjdE9mZnNldCwgVXBkYXRlUmVjdENlbnRlclBvcywgVXBkYXRlUmVjdFBvc0J5VW5pdCwgRml4VW5pdFBvcyxcclxuICAgIEdldFJlY3RPZmZzZXRWZWMsIEdldFJlY3RDZW50ZXJQb3MsIEdldFJlY3RTdGFydFBvcywgR2V0UmVjdEVuZFBvcyxcclxuICAgIEdldFJlY3RXaWR0aCwgR2V0UmVjdEhhbGZXaWR0aCwgR2V0UmVjdEhlaWdodCwgR2V0UmVjdEhhbGZIZWlnaHQsXHJcbiAgICBHZXRBcmVhXHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RDZW50ZXJYKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiByZWN0LmNlbnRlci54O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RYMShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclgocmVjdCkgLSByZWN0LndpZHRoICogMC41O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RYMihyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclgocmVjdCkgKyByZWN0LndpZHRoICogMC41O1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBHZXRSZWN0T2Zmc2V0WShyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gcmVjdC5vZmZzZXQueTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gR2V0UmVjdENlbnRlclkocmVjdCA9IG51bGwpe1xyXG4vLyAgICAgcmV0dXJuIHJlY3QuY2VudGVyLnk7XHJcbi8vIH1cclxuLy8gZnVuY3Rpb24gR2V0UmVjdFkxKHJlY3QgPSBudWxsKXtcclxuLy8gICAgIHJldHVybiBHZXRSZWN0Q2VudGVyWShyZWN0KSAtIHJlY3QuaGVpZ2h0ICogMC41O1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIEdldFJlY3RZMihyZWN0ID0gbnVsbCl7XHJcbi8vICAgICByZXR1cm4gR2V0UmVjdENlbnRlclkocmVjdCkgKyByZWN0LmhlaWdodCAqIDAuNTtcclxuLy8gfSIsImltcG9ydCB7IFNldFBvcyB9IGZyb20gXCIuLi9wb3MvdXRpbHNcIjtcclxuaW1wb3J0IHsgTmV3UmVjdCwgVXBkYXRlUmVjdFBvc0J5VW5pdCB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IFRvTG9jYXRlUG9zIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50XCI7XHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuXHJcblxyXG4vKipcclxuICog5Luj56CB6YeP5bCR77yM5pqC5pe26L+Z5qC35pS+XHJcbiAqL1xyXG5jbGFzcyBDYW1lcmEgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMucG9zID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlY3QgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdDYW1lcmEoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgbGV0IGNhbWVyYSA9IG5ldyBDYW1lcmEoKTtcclxuICAgIGNhbWVyYS5wb3MgPSBTZXRQb3MoY2FtZXJhLmlkLCB4LCB5KTtcclxuICAgIGNhbWVyYS5yZWN0ID0gTmV3UmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIFVwZGF0ZVJlY3RQb3NCeVVuaXQoY2FtZXJhLnJlY3QsIHgsIHkpO1xyXG4gICAgcmV0dXJuIGNhbWVyYTtcclxufVxyXG5cclxuLy/nm67moIfnn6nlvaLmmK/lkKblnKjplZzlpLTlhoVcclxuZnVuY3Rpb24gSXNJbkNhbWVyYShjYW1lcmEgPSBudWxsLCByZWN0ID0gbnVsbCl7XHJcbiAgICByZXR1cm4gSXNSZWN0c0Nyb3NzKGNhbWVyYS5yZWN0LCByZWN0KTtcclxufVxyXG5cclxuLy/ovazkuLrplZzlpLTlnZDmoIdcclxuZnVuY3Rpb24gVG9DYW1lcmFQb3MoY2FtZXJhID0gbnVsbCwgdGFyZ2V0UG9zID0gbnVsbCl7XHJcbiAgICByZXR1cm4gVG9Mb2NhdGVQb3ModGFyZ2V0UG9zLCBjYW1lcmEucG9zKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIOmVnOWktOenu+WKqFxyXG4gKi9cclxuZnVuY3Rpb24gQ2FtZXJhTW92ZShjYW1lcmEgPSBudWxsLCB4ID0gMCwgeSA9IDApe1xyXG4gICAgU2V0UG9zKGNhbWVyYS5pZCwgeCwgeSk7XHJcbiAgICBVcGRhdGVSZWN0UG9zQnlVbml0KGNhbWVyYS5yZWN0LCB4LCB5KTtcclxufVxyXG5cclxuZXhwb3J0e05ld0NhbWVyYSwgSXNJbkNhbWVyYSwgVG9DYW1lcmFQb3MsIENhbWVyYU1vdmV9IiwiXHJcbi8qKlxyXG4gKiDmtY/op4jlmajnmoRrZXktY29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEtFWV9SSUdIVCA9IDM5O1xyXG5leHBvcnQgY29uc3QgS0VZX0xFRlQgPSAzNztcclxuZXhwb3J0IGNvbnN0IEtFWV9VUCA9IDM4O1xyXG5leHBvcnQgY29uc3QgS0VZX0RPV04gPSA0MDtcclxuXHJcbmV4cG9ydCBjb25zdCBLRVlfU1BBQ0UgPSAzMjtcclxuXHJcbmV4cG9ydCBjb25zdCBLRVlfVyA9IDg3O1xyXG5leHBvcnQgY29uc3QgS0VZX0EgPSA2NTtcclxuZXhwb3J0IGNvbnN0IEtFWV9TID0gODM7XHJcbmV4cG9ydCBjb25zdCBLRVlfRCA9IDY4O1xyXG5cclxuLyoqXHJcbiAqICBlbmdpbmUgPSB3ZWItYnJvd3NlciwgY2FudmFzXHJcbiAqL1xyXG52YXIgX2VuZ2luZSA9IHtcclxuXHRjdHggOiBudWxsLFxyXG4gICAgY2FudmFzIDogbnVsbCxcclxuICAgIGZwcyA6IDAsXHJcbiAgICB0aWNrIDogMFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0RW5naW5lKCl7XHJcbiAgICByZXR1cm4gX2VuZ2luZTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdENhbnZhcyh3aWR0aCA9IDAsIGhlaWdodCA9IDAsIGZwcyA9IDEwKXtcclxuICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcclxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIF9lbmdpbmUuY2FudmFzID0gY2FudmFzO1xyXG4gICAgX2VuZ2luZS5jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgX2VuZ2luZS5jdHguc3Ryb2tlU3R5bGU9XCIjMDAwMGZmXCI7ICAgICAgICAgIC8v55S755+p5b2i5qGG55So55qEXHJcbiAgICBfZW5naW5lLmZwcyA9IGZwcztcclxuICAgIF9lbmdpbmUudGljayA9IDEwMDAgLyBmcHM7XHJcbn1cclxuXHJcbmV4cG9ydHtnZXRFbmdpbmUsIGluaXRDYW52YXN9IiwiaW1wb3J0IHsgZ2V0RW5naW5lIH0gZnJvbSBcIi4vbW9kZWxcIjtcclxuXHJcbnZhciBfZW5naW5lID0gZ2V0RW5naW5lKCk7XHJcblxyXG5mdW5jdGlvbiBjbGVhcigpIHtcclxuICAgIGxldCBjID0gX2VuZ2luZS5jYW52YXM7XHJcbiAgICBfZW5naW5lLmN0eC5jbGVhclJlY3QoMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEcmF3KGltZ0RhdGEsIHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKSB7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcblx0Y3R4LmRyYXdJbWFnZShpbWdEYXRhLCB4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuY29uc3QgUmFkaXVzID0gTWF0aC5QSS8xODA7XHJcbmZ1bmN0aW9uIERyYXdJbWFnZVdpdGhBbmdsZShhbmdsZSA9IDAsIGltZ0RhdGEsIHN4ID0gMCwgc3kgPSAwLCBzd2lkdGggPSAwLCBzaGVpZ2h0ID0gMCwgeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApIHtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuICAgIGN0eC5zYXZlKCk7XHJcbiAgICBjdHgudHJhbnNsYXRlKHggKyB3aWR0aC8yLCB5ICsgaGVpZ2h0LzIpO1xyXG4gICAgY3R4LnJvdGF0ZShhbmdsZSAqIFJhZGl1cyk7XHJcbiAgICBEcmF3SW1hZ2UoaW1nRGF0YSwgc3gsIHN5LCBzd2lkdGgsIHNoZWlnaHQsIC13aWR0aC8yLCAtaGVpZ2h0LzIsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgY3R4LnJlc3RvcmUoKTtcclxuXHJcbiAgICAvLyBjdHgudHJhbnNsYXRlKDEwMCwgMTAwKTtcclxuXHQvLyBjdHgucm90YXRlKDkwICogTWF0aC5QSS8xODApO1x0Ly/ku6XkuIrpnaLnmoTlgY/np7vngrnkuLrlh4bvvIzov5vooYzml4vovaxcclxuXHQvLyBjdHguZHJhd0ltYWdlKGksIDE4NywgMCwgMTg2LCAxMzAsIC0wLCAtMCwgMTAwLCAxMDApO1xyXG59XHJcblxyXG4vL+WPguiAg++8mmNvbnRleHQuZHJhd0ltYWdlKGltZyxzeCxzeSxzd2lkdGgsc2hlaWdodCx4LHksd2lkdGgsaGVpZ2h0KTtcclxuZnVuY3Rpb24gZHJhd0ltYWdlKGltZ0RhdGEsIHN4ID0gMCwgc3kgPSAwLCBzd2lkdGggPSAwLCBzaGVpZ2h0ID0gMCwgeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApIHtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuXHRjdHguZHJhd0ltYWdlKGltZ0RhdGEsIHN4LCBzeSwgc3dpZHRoLCBzaGVpZ2h0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1JlY3QoeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgbGV0IGN0eCA9IF9lbmdpbmUuY3R4O1xyXG4gICAgY3R4LnN0cm9rZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdMaW5lKHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICBsZXQgY3R4ID0gX2VuZ2luZS5jdHg7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgubW92ZVRvKHgxLCB5MSk7XHJcbiAgICBjdHgubGluZVRvKHgyLCB5Mik7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdDaXJjbGUoeCA9IDAsIHkgPSAwLCByYWRpdXMgPSAwKXtcclxuICAgIGxldCBjdHggPSBfZW5naW5lLmN0eDtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5hcmMoeCwgeSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbn1cclxuXHJcbmV4cG9ydHtjbGVhciwgZHJhd0ltYWdlLCBkcmF3UmVjdCwgZHJhd0xpbmUsIGRyYXdDaXJjbGV9IiwiaW1wb3J0IHsgR2V0RGlzcGxheUxpc3QgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L3ZpZXcvY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IExpbmtJdGVyYXRvciB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcbmltcG9ydCB7IEdldFBvcyB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvcG9zL3V0aWxzXCI7XHJcbmltcG9ydCB7IFVwZGF0ZVJlY3RQb3NCeVVuaXQsIEdldFJlY3RTdGFydFBvcyB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2dlb21ldHJpYy9yZWN0XCI7XHJcbmltcG9ydCB7IEdldENhbWVyYSB9IGZyb20gXCIuLi93b3JsZC9yZXNcIjtcclxuaW1wb3J0IHsgSXNJbkNhbWVyYSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvY2FtZXJhL3V0aWxzXCI7XHJcbmltcG9ydCB7IFRvTG9jYXRlUG9zIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZ2VvbWV0cmljL3BvaW50XCI7XHJcbmltcG9ydCB7IGRyYXdJbWFnZSwgZHJhd1JlY3QgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9lbmdpbmUvaDUvcmVuZGVyXCI7XHJcbmltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuXHJcbi8qKlxyXG4gKiDmuLLmn5Pns7vnu5/vvIzpgLvovpHmraXpqqTvvJpcclxuICogMS4gICDmuIXpmaTnlLvluINcclxuICogMi4gICDph43lrprkvY3mkYTlg4/mnLpcclxuICogMy4gICDorqHnrpfljZXkvY3mmL7npLrnn6nlvaLmmK/lkKblnKjmkYTlg4/mnLrnn6nlvaLlhoVcclxuICogNC4gICDovazmjaLkuLrnlLvluIPlnZDmoIdcclxuICogNS4gICDnlLvlh7rlm77lg49cclxuICovXHJcbmNsYXNzIFJlbmRlclVwZGF0ZVN5c3RlbSBleHRlbmRzIFN5c3RlbSB7XHJcbiAgICBvblVwZGF0ZShkdCA9IDApe1xyXG4gICAgICAgIC8vY2FudmFzQ2xlYXIoKTtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0RGlzcGxheUxpc3QoKSwgZGlzcGxheVR1cGxlID0+IHtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IEdldFBvcyhkaXNwbGF5VHVwbGUuZW50aXR5SWQpO1xyXG4gICAgICAgICAgICBVcGRhdGVSZWN0UG9zQnlVbml0KGRpc3BsYXlUdXBsZS5kaXNwbGF5QXJlYSwgcG9zLngsIHBvcy55KTtcclxuICAgICAgICAgICAgZHJhd0ZyYW1lSW5DYW1lcmEoZGlzcGxheVR1cGxlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIHJlbmRlclN5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldFJlbmRlclVwZGF0ZVN5c3RlbSgpe1xyXG4gICAgaWYoIXJlbmRlclN5cyl7XHJcbiAgICAgICAgcmVuZGVyU3lzID0gbmV3IFJlbmRlclVwZGF0ZVN5c3RlbSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlbmRlclN5cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDlsIbmiYDmnInnn6nlvaLnlLvlh7rmnaVcclxuICovXHJcbmNsYXNzIERyYXdSZWN0U3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgLy9EcmF3UmVjdChHZXRDYW1lcmEoKSwgdGhpcy5fY2FtZXJhLnJlY3QpO1xyXG4gICAgICAgIExpbmtJdGVyYXRvcihHZXRSZWN0TGlzdCgpLCBjb2xsaWRlciA9PiB7XHJcbiAgICAgICAgICAgIGRyYXdSZWN0SW5DYW1lcmEoY29sbGlkZXIucmVjdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBkZWJ1Z1N5cyA9IG51bGw7XHJcbmZ1bmN0aW9uIEdldERyYXdSZWN0U3lzdGVtKCl7XHJcbiAgICBpZighZGVidWdTeXMpe1xyXG4gICAgICAgIGRlYnVnU3lzID0gbmV3IERyYXdSZWN0U3lzdGVtKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVidWdTeXM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5riy5p+T5Yiw55S75biD77yM5Y+q5riy5p+T5Zyo6ZWc5aS05YaF55qEXHJcbiAqL1xyXG5mdW5jdGlvbiBkcmF3RnJhbWVJbkNhbWVyYShkaXNwbGF5VHVwbGUgPSBudWxsKXtcclxuICAgIGxldCBjYW1lcmEgPSBHZXRDYW1lcmEoKTtcclxuICAgIGxldCBkaXNwbGF5QXJlYSA9IGRpc3BsYXlUdXBsZS5kaXNwbGF5QXJlYTtcclxuICAgIGlmKCFJc0luQ2FtZXJhKGNhbWVyYSwgZGlzcGxheUFyZWEpKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvL+i9rOS4uueUu+W4g+WdkOagh1xyXG4gICAgbGV0IHNjcmVlblBvcyA9IFRvTG9jYXRlUG9zKFxyXG4gICAgICAgIEdldFJlY3RTdGFydFBvcyhkaXNwbGF5QXJlYSksXHJcbiAgICAgICAgR2V0UmVjdFN0YXJ0UG9zKGNhbWVyYS5yZWN0KSk7XHJcblxyXG4gICAgbGV0IHRleHR1cmVBcmVhID0gZGlzcGxheVR1cGxlLnNwcml0ZUZyYW1lLnRleHR1cmVBcmVhO1xyXG4gICAgZHJhd0ltYWdlKGRpc3BsYXlUdXBsZS5zcHJpdGVGcmFtZS5iaXRtYXBEYXRhLFxyXG4gICAgICAgIHRleHR1cmVBcmVhLngsIHRleHR1cmVBcmVhLnksIHRleHR1cmVBcmVhLndpZHRoLCB0ZXh0dXJlQXJlYS5oZWlnaHQsXHJcbiAgICAgICAgc2NyZWVuUG9zLngsIHNjcmVlblBvcy55LCBHZXRSZWN0V2lkdGgoZGlzcGxheUFyZWEpLCBHZXRSZWN0SGVpZ2h0KGRpc3BsYXlBcmVhKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdSZWN0SW5DYW1lcmEoZGlzcGxheUFyZWEgPSBudWxsKXtcclxuICAgIGxldCBjYW1lcmEgPSBHZXRDYW1lcmEoKTtcclxuICAgIGlmKCFJc0luQ2FtZXJhKGNhbWVyYSwgZGlzcGxheUFyZWEpKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvL+i9rOS4uueUu+W4g+WdkOagh1xyXG4gICAgbGV0IHNjcmVlblBvcyA9IFRvTG9jYXRlUG9zKFxyXG4gICAgICAgIEdldFJlY3RTdGFydFBvcyhkaXNwbGF5QXJlYSksIFxyXG4gICAgICAgIEdldFJlY3RTdGFydFBvcyhjYW1lcmEucmVjdCkpO1xyXG4gICAgZHJhd1JlY3QoXHJcbiAgICAgICAgc2NyZWVuUG9zLngsIHNjcmVlblBvcy55LFxyXG4gICAgICAgIEdldFJlY3RXaWR0aChkaXNwbGF5QXJlYSksIEdldFJlY3RIZWlnaHQoZGlzcGxheUFyZWEpKTtcclxufVxyXG5cclxuZXhwb3J0IHtHZXRSZW5kZXJVcGRhdGVTeXN0ZW0sIEdldERyYXdSZWN0U3lzdGVtfSIsImltcG9ydCB7IFN5c3RlbSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9lY3NcIjtcclxuaW1wb3J0IHsgTGlua0l0ZXJhdG9yIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vc3RydWN0dXJlL2xpbmtcIjtcclxuaW1wb3J0IHsgR2V0UG9zQ29tcG9uZW50TGlzdCB9IGZyb20gXCIuLi8uLi9jb21wb25lbnQvcG9zL3V0aWxzXCI7XHJcblxyXG4vKipcclxuICogMjAxOS4wOS4yOVxyXG4gKiAgICAgIOe7j+i/h+iAg+iZke+8jOebruWJjeWPquWBmueugOWNleeJiOacrO+8jOS4jeimgeaDs+W+l+WkqumVv+i/nFxyXG4gKiAgICAgIOaJgOS7peWFiOS4jeeUqOezu+e7n+e7n+S4gOabtOaWsOS9jee9ru+8jOebtOaOpeWcqGFjdGlvbuS4rXNldHBvc+WwseWlvVxyXG4gKi9cclxuY2xhc3MgUG9zVXBkYXRlU3lzdGVtIGV4dGVuZHMgU3lzdGVtIHtcclxuICAgIG9uVXBkYXRlKGR0ID0gMCl7XHJcbiAgICAgICAgTGlua0l0ZXJhdG9yKEdldFBvc0NvbXBvbmVudExpc3QoKSwgbW92ZUNvbSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2ZWMgPSBtb3ZlQ29tLnZlYztcclxuICAgICAgICAgICAgbGV0IHBvcyA9IG1vdmVDb20ucG9zO1xyXG4gICAgICAgICAgICBwb3MueCArPSB2ZWMueDtcclxuICAgICAgICAgICAgcG9zLnkgKz0gdmVjLnk7XHJcbiAgICAgICAgICAgIHZlYy54ID0gMDtcclxuICAgICAgICAgICAgdmVjLnkgPSAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgc3lzID0gbnVsbDtcclxuZnVuY3Rpb24gR2V0UG9zVXBkYXRlU3lzdGVtKCl7XHJcbiAgICBpZighc3lzKXtcclxuICAgICAgICBzeXMgPSBuZXcgUG9zVXBkYXRlU3lzdGVtKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3lzO1xyXG59XHJcblxyXG4vKipcclxuICog5pqC5pe25pS+552A77yM5Lul5ZCO5Y+v6IO96KaB5pS+5Zyoc3lzdGVtTGlzdFswXe+8jOS7peS+v+avj+W4p+WIneWni+WMluS4tOaXtuaVsOaNrlxyXG4gKi9cclxuY2xhc3MgQ2xlYXJTeXN0ZW0gZXh0ZW5kcyBTeXN0ZW0ge1xyXG4gICAgb25VcGRhdGUoZHQgPSAwKXtcclxuICAgICAgICBMaW5rSXRlcmF0b3IoR2V0UG9zQ29tcG9uZW50TGlzdCgpLCBtb3ZlQ29tID0+IHtcclxuICAgICAgICAgICAgbGV0IHZlYyA9IG1vdmVDb20udmVjO1xyXG4gICAgICAgICAgICB2ZWMueCA9IDA7XHJcbiAgICAgICAgICAgIHZlYy55ID0gMDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0e0dldFBvc1VwZGF0ZVN5c3RlbX0iLCJpbXBvcnQgeyBnZXRFbmdpbmUgfSBmcm9tIFwiLi9tb2RlbFwiO1xyXG5cclxudmFyIF9lbmdpbmUgPSBnZXRFbmdpbmUoKTtcclxuXHJcbmZ1bmN0aW9uIGxvYWRJbWcoaW1nU3JjLCBvbkxvYWRDYWxsYmFjayl7XHJcbiAgICBsZXQgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICBpbWcuc3JjID0gaW1nU3JjO1xyXG4gICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBvbkxvYWRDYWxsYmFjayhpbWcpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgX2NhbGxiYWNrO1xyXG52YXIgX2ZyYW1lTm8gPSAwO1xyXG52YXIgX2R0ID0gMDtcclxudmFyIF9sYXN0ID0gMDtcclxudmFyIF9pc0VuZCA9IGZhbHNlO1xyXG5mdW5jdGlvbiB0aWNrKHRpbWVzdGFtcCkge1xyXG4gICAgX2R0ID0gdGltZXN0YW1wIC0gX2xhc3Q7XHJcbiAgICBfbGFzdCA9IHRpbWVzdGFtcDtcclxuICAgIF9jYWxsYmFjayhfZHQpO1xyXG4gICAgaWYoIV9pc0VuZCl7XHJcbiAgICAgICAgX2ZyYW1lTm8gPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBSdW4yMjIyKG9uVXBkYXRlQ2FsbGJhY2sgPSBudWxsKSB7XHJcbiAgICBfaXNFbmQgPSBmYWxzZTtcclxuICAgIF9jYWxsYmFjayA9IG9uVXBkYXRlQ2FsbGJhY2s7XHJcbiAgICBfZnJhbWVObyA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBkZWJ1Z1xyXG4gKi9cclxudmFyIHN0YXJ0ID0gbnVsbDtcclxudmFyIGxhc3QgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuZnVuY3Rpb24gcnVuVGljayhvblVwZGF0ZUNhbGxiYWNrID0gbnVsbCkge1xyXG4gICAgX2lzRW5kID0gZmFsc2U7XHJcbiAgICBfY2FsbGJhY2sgPSBvblVwZGF0ZUNhbGxiYWNrO1xyXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIHN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgaWYoIV9pc0VuZCl7XHJcbiAgICAgICAgICAgIF9jYWxsYmFjayhzdGFydCAtIGxhc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXN0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICB9LCBfZW5naW5lLnRpY2spO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9wKCl7XHJcbiAgICBfaXNFbmQgPSB0cnVlO1xyXG59XHJcblxyXG5cclxuLy/lm6DkuLrmjInkvY/plK7nmoTor53vvIzkvJrkuI3mlq3op6blj5FvbktleWRvd27vvIzmiYDku6XlgZrkuKptYXDliKTmlq1cclxudmFyIF9rZXlEb3duTWFwID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBvbktleUNhbGxiYWNrKGtleURvd25DYWxsYmFjayA9IG51bGwsIGtleVVwQ2FsbGJhY2sgPSBudWxsKXtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlID0+IHtcclxuICAgICAgICBsZXQgY29kZSA9IGUua2V5Q29kZTtcclxuICAgICAgICBpZihfa2V5RG93bk1hcC5nZXQoY29kZSkpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9rZXlEb3duTWFwLnNldChjb2RlLCAxKTtcclxuICAgICAgICBrZXlEb3duQ2FsbGJhY2soZS5rZXlDb2RlKTtcclxuICAgIH0pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBlID0+IHtcclxuICAgICAgICBsZXQgY29kZSA9IGUua2V5Q29kZTtcclxuICAgICAgICBfa2V5RG93bk1hcC5kZWxldGUoY29kZSk7XHJcbiAgICAgICAga2V5VXBDYWxsYmFjayhlLmtleUNvZGUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uTW91c2VDYWxsYmFjayhtb3VzZWRvd25DYWxsYmFjayA9IG51bGwsIG1vdXNldXBDYWxsYmFjayA9IG51bGwpe1xyXG4gICAgX2VuZ2luZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgbW91c2Vkb3duQ2FsbGJhY2soZXZlbnQueCwgZXZlbnQueSk7XHJcbiAgICB9KTtcclxuICAgIF9lbmdpbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICBtb3VzZXVwQ2FsbGJhY2soZXZlbnQueCwgZXZlbnQueSk7XHJcbiAgICB9KTtcclxuICAgIC8vX2VuZ2luZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGRvTW91c2VNb3ZlLGZhbHNlKTtcclxuICAgIC8vX2VuZ2luZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsZG9Nb3VzZU91dCxmYWxzZSk7XHJcbn1cclxuXHJcbmV4cG9ydHtcclxuICAgIGxvYWRJbWcsIHJ1blRpY2ssIHN0b3AsIG9uS2V5Q2FsbGJhY2ssIG9uTW91c2VDYWxsYmFja1xyXG59IiwiaW1wb3J0IHsgR2V0QWN0aW9uU3lzdGVtIH0gZnJvbSBcIi4vYWN0aW9uXCI7XHJcbmltcG9ydCB7IEdldFJlbmRlclVwZGF0ZVN5c3RlbSwgR2V0RHJhd1JlY3RTeXN0ZW0gfSBmcm9tIFwiLi9yZW5kZXJcIjtcclxuaW1wb3J0IHsgR2V0UG9zVXBkYXRlU3lzdGVtIH0gZnJvbSBcIi4vbW92ZVwiO1xyXG5pbXBvcnQgeyBydW5UaWNrIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZW5naW5lL2g1L3Byb2Nlc3NvclwiO1xyXG5pbXBvcnQgeyBQdXNoVG9MaW5rLCBOZXdMaW5rLCBMaW5rSXRlcmF0b3IsIEluc2VydFRvTGluayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL3N0cnVjdHVyZS9saW5rXCI7XHJcblxyXG4vKipcclxuICog5Li757O757uf5YiX6KGoXHJcbiAqL1xyXG52YXIgcG9zU3lzID0gR2V0UG9zVXBkYXRlU3lzdGVtKCk7XHJcbnZhciBsb2dpY1N5c3RlbXMgPSBudWxsO1xyXG52YXIgcmVuZGVyU3lzdGVtcyA9IG51bGw7XHJcbmZ1bmN0aW9uIGluaXRTeXN0ZW1zKGRlYnVnID0gZmFsc2Upe1xyXG4gICAgbG9naWNTeXN0ZW1zID0gTmV3TGluaygpO1xyXG4gICAgUHVzaFRvTGluayhsb2dpY1N5c3RlbXMsIEdldEFjdGlvblN5c3RlbSgpKTtcclxuICAgIHJlbmRlclN5c3RlbXMgPSBOZXdMaW5rKCk7XHJcbiAgICBQdXNoVG9MaW5rKHJlbmRlclN5c3RlbXMsIEdldFJlbmRlclVwZGF0ZVN5c3RlbSgpKTtcclxuXHJcbiAgICAvL+WIneWni+m7mOiupOezu+e7n1xyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIFB1c2hUb0xpbmsocmVuZGVyU3lzdGVtcywgR2V0RHJhd1JlY3RTeXN0ZW0oKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbnZhciBsb2dpY1RpY2sgPSAxNjsgICAgIC8vNjBmcHNcclxudmFyIHJlbmRlclRpY2sgPSA0MTsgICAgLy8yNGZwc1xyXG52YXIgX3QxLCBfdDIgPSAwO1xyXG5mdW5jdGlvbiBydW5XaXRoU2NlbmUoc2NlbmUpe1xyXG4gICAgTGlua0l0ZXJhdG9yKGxvZ2ljU3lzdGVtcywgc3lzdGVtID0+IHtcclxuICAgICAgICBzeXN0ZW0ub25TdGFydCgpO1xyXG4gICAgfSk7XHJcbiAgICBMaW5rSXRlcmF0b3IocmVuZGVyU3lzdGVtcywgc3lzdGVtID0+IHtcclxuICAgICAgICBzeXN0ZW0ub25TdGFydCgpO1xyXG4gICAgfSk7XHJcbiAgICBzY2VuZS5vblN0YXJ0KCk7XHJcblxyXG4gICAgLy9tYWluIGxvb3BcclxuICAgIHJ1blRpY2soKGR0KT0+e1xyXG4gICAgICAgIF90MSArPSBkdDtcclxuICAgICAgICBpZihfdDEgPj0gbG9naWNUaWNrKXtcclxuICAgICAgICAgICAgX3QxIC09IGxvZ2ljVGljaztcclxuICAgICAgICAgICAgc2NlbmUub25VcGRhdGUoZHQpO1xyXG4gICAgICAgICAgICBMaW5rSXRlcmF0b3IobG9naWNTeXN0ZW1zLCBzeXN0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgc3lzdGVtLm9uVXBkYXRlKGR0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfdDIgKz0gZHQ7XHJcbiAgICAgICAgaWYoX3QyID49IHJlbmRlclRpY2spe1xyXG4gICAgICAgICAgICBfdDIgLT0gcmVuZGVyVGljaztcclxuICAgICAgICAgICAgTGlua0l0ZXJhdG9yKHJlbmRlclN5c3RlbXMsIHN5c3RlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzeXN0ZW0ub25VcGRhdGUoZHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gQWRkU3lzdGVtKHN5c3RlbSA9IG51bGwpe1xyXG4gICAgaWYoIXN5c3RlbSl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgSW5zZXJ0VG9MaW5rKGxvZ2ljU3lzdGVtcywgc3lzdGVtKTtcclxufVxyXG5cclxuZXhwb3J0e2luaXRTeXN0ZW1zLCBydW5XaXRoU2NlbmUsIEFkZFN5c3RlbX0iLCJcclxuLyoqXHJcbiAqIOiusOW9lWJpdG1hcERhdGHnmoTliaroo4HljLrln59cclxuICovXHJcbmNsYXNzIFRleHR1cmVBcmVhIHtcclxuICAgIGNvbnN0cnVjdG9yKHggPSAwLCB5ID0gMCwgd2lkdGggPSAwLCBoZWlnaHQgPSAwKXtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog5LiA5byg5Zu+5Lit55qE5LiA5Liq5Yy65Z+f77yM57q555CG5bin5oiW57K+54G15bin77yM5Y2V5L6L77yM5ZKM5byV5pOO5pyJ5YWzXHJcbiAqIOeyvueBteW4p+eUqOS6juagh+WHuuS4gOW8oOe6ueeQhuWbvueahOaMh+WumuWPluadkOWMuuWfn++8jOS7peWPiuebuOWvueeahOaYvuekuuS9jee9rlxyXG4gKi9cclxuY2xhc3MgU3ByaXRlRnJhbWUge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwiXCIsIGJpdG1hcERhdGEgPSBudWxsLCB0ZXh0dXJlQXJlYSA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuYml0bWFwRGF0YSA9IGJpdG1hcERhdGE7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlQXJlYSA9IHRleHR1cmVBcmVhO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOaJvuS4jeWIsOW4p+aXtueahOm7mOiupOepuuW4p++8jOWPr+S7peaYr+S4gOW8oOe6ouWPieWbvueJh++8jFxyXG4gKiBUT0RPIOW8leWFpem7mOiupOi1hOa6kOacuuWItlxyXG4gKi9cclxudmFyIF9zcHJpdGVGcmFtZU1hcCA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gZ2V0U3ByaXRlRnJhbWVCeU5hbWUobmFtZSA9IFwiXCIpe1xyXG4gICAgbGV0IGYgPSBfc3ByaXRlRnJhbWVNYXAuZ2V0KG5hbWUpO1xyXG4gICAgcmV0dXJuIGYgPyBmIDogX3Nwcml0ZUZyYW1lTWFwLmdldChcImRlZmFsdXRcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVNwcml0ZUZyYW1lKG5hbWUgPSBcIlwiLCBiaXRtYXBEYXRhID0gbnVsbCwgeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApe1xyXG4gICAgaWYoX3Nwcml0ZUZyYW1lTWFwLmdldChuYW1lKSl7XHJcbiAgICAgICAgLy9leGlzdHNcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGxldCBmID0gbmV3IFNwcml0ZUZyYW1lKG5hbWUsIGJpdG1hcERhdGEsIG5ldyBUZXh0dXJlQXJlYSh4LCB5LCB3aWR0aCwgaGVpZ2h0KSk7XHJcbiAgICBfc3ByaXRlRnJhbWVNYXAuc2V0KG5hbWUsIGYpO1xyXG4gICAgcmV0dXJuIGY7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldFNwcml0ZUZyYW1lV2lkdGgoc3ByaXRlRnJhbWUgPSBudWxsKXtcclxuICAgIHJldHVybiBzcHJpdGVGcmFtZS50ZXh0dXJlQXJlYS53aWR0aDtcclxufVxyXG5mdW5jdGlvbiBHZXRTcHJpdGVGcmFtZUhlaWdodChzcHJpdGVGcmFtZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIHNwcml0ZUZyYW1lLnRleHR1cmVBcmVhLmhlaWdodDtcclxufVxyXG5cclxuZXhwb3J0e2dldFNwcml0ZUZyYW1lQnlOYW1lLCBjcmVhdGVTcHJpdGVGcmFtZSwgR2V0U3ByaXRlRnJhbWVXaWR0aCwgR2V0U3ByaXRlRnJhbWVIZWlnaHR9IiwiaW1wb3J0IHsgaW5pdFN5c3RlbXMgfSBmcm9tIFwiLi4vc3lzdGVtL3J1blwiO1xyXG5pbXBvcnQgeyBpbml0Q2FudmFzIH0gZnJvbSBcIi4uLy4uL2ZvdW5kYXRpb24vZW5naW5lL2g1L21vZGVsXCI7XHJcbmltcG9ydCB7IG9uS2V5Q2FsbGJhY2ssIG9uTW91c2VDYWxsYmFjayB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9wcm9jZXNzb3JcIjtcclxuaW1wb3J0IHsgTmV3Q2FtZXJhIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgY3JlYXRlVGlsZU1hcFdpdGhEYXRhIH0gZnJvbSBcIi4vYWRhcHRlclwiO1xyXG5cclxuLyoqXHJcbiAqIOmAmui/h+WPguaVsOmFjee9ruWIneWni+WMluezu+e7n+i1hOa6kFxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdEdhbWUob3B0aW9ucyA9IG51bGwpIHtcclxuXHJcbiAgICAvL+W8leaTjuWIneWni+WMllxyXG4gICAgaW5pdENhbnZhcyhvcHRpb25zLnNjcmVlbi53aWR0aCwgb3B0aW9ucy5zY3JlZW4uaGVpZ2h0LCBvcHRpb25zLmZwcyk7XHJcblxyXG4gICAgLy/ms6jlhozmjInplK7lm57osINcclxuICAgIGlmKG9wdGlvbnMua2V5RG93bkhhbmRsZXIgJiYgb3B0aW9ucy5rZXlVcEhhbmxlcil7XHJcbiAgICAgICAgb25LZXlDYWxsYmFjayhvcHRpb25zLmtleURvd25IYW5kbGVyLCBvcHRpb25zLmtleVVwSGFubGVyKTtcclxuICAgIH1cclxuICAgIGlmKG9wdGlvbnMubW91c2Vkb3duSGFuZGxlciAmJiBvcHRpb25zLm1vdXNldXBIYW5kbGVyKXtcclxuICAgICAgICBvbk1vdXNlQ2FsbGJhY2sob3B0aW9ucy5tb3VzZWRvd25IYW5kbGVyLCBvcHRpb25zLm1vdXNldXBIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdENhbWVyYShvcHRpb25zLmNhbWVyYSwgb3B0aW9ucy5zY3JlZW4pO1xyXG4gICAgaW5pdFN5c3RlbXMob3B0aW9ucy5kZWJ1Zyk7XHJcblxyXG4gICAgLy/nk7fnoJblnLDlm77vvIzoiJ7lj7BcclxuICAgIGlmKG9wdGlvbnMudGlsZW1hcCl7XHJcbiAgICAgICAgaW5pdFRpbGUob3B0aW9ucy50aWxlbWFwKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+W8gOWQr+eisOaSnuezu+e7n1xyXG4gICAgaWYob3B0aW9ucy5jb2xsaWRlKXtcclxuICAgICAgICAvL09wZW5Db2xsaWRlcihvcHRpb25zLmNvbGxpZGUpO1xyXG5cclxuICAgICAgICAvLyBpZihvcHRpb25zLnVzZVRpbGVDb21iaW5lKXtcclxuICAgICAgICAvLyAgICAgbGV0IHJlc3VsdE5vZGVzID0gQ3JlYXRlQ29tYmluZU5vZGVzKHRpbGVtYXAsIGNvbGxpZGUuYm94SGFuZGxlcik7XHJcbiAgICAgICAgLy8gICAgIHJlc3VsdE5vZGVzLmZvckVhY2gocmVzdWx0ID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGNvbGxpZGUubG9hZENhbGxiYWNrKHJlc3VsdC52YWx1ZSwgcmVzdWx0LnJlY3QpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmkYTlg4/mnLrvvIzlhajlsYDljZXkvotcclxuICovXHJcbnZhciBjYW1lcmEgPSBudWxsO1xyXG5mdW5jdGlvbiBpbml0Q2FtZXJhKGNhbWVyYURhdGEgPSBudWxsLCBzY3JlZW5EYXRhID0gbnVsbCl7XHJcbiAgICBsZXQgd2lkdGggPSBjYW1lcmFEYXRhLndpZHRoID8gY2FtZXJhRGF0YS53aWR0aCA6IHNjcmVlbkRhdGEud2lkdGg7XHJcbiAgICBsZXQgaGVpZ2h0ID0gY2FtZXJhRGF0YS5oZWlnaHQgPyBjYW1lcmFEYXRhLmhlaWdodCA6IHNjcmVlbkRhdGEuaGVpZ2h0O1xyXG4gICAgY2FtZXJhID0gTmV3Q2FtZXJhKGNhbWVyYURhdGEueCwgY2FtZXJhRGF0YS55LCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG5mdW5jdGlvbiBHZXRDYW1lcmEoKXtcclxuICAgIHJldHVybiBjYW1lcmE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55O356CW5Zyw5Zu+77yM6Iie5Y+w77yM5YWo5bGA5Y2V5L6LXHJcbiAqL1xyXG52YXIgdGlsZW1hcCA9IG51bGw7XHJcbmZ1bmN0aW9uIGluaXRUaWxlKHRpbGVtYXBEYXRhID0gbnVsbCl7XHJcbiAgICB0aWxlbWFwID0gY3JlYXRlVGlsZU1hcFdpdGhEYXRhKHRpbGVtYXBEYXRhLCB0aWxlbWFwRGF0YS5pbml0SGFuZGxlcik7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VGlsZW1hcCgpe1xyXG4gICAgcmV0dXJuIHRpbGVtYXA7XHJcbn1cclxuXHJcbmV4cG9ydHtpbml0R2FtZSwgaW5pdENhbWVyYSwgR2V0Q2FtZXJhLCBpbml0VGlsZSwgZ2V0VGlsZW1hcH0iLCJpbXBvcnQgeyBjcmVhdGVTcHJpdGVGcmFtZSwgZ2V0U3ByaXRlRnJhbWVCeU5hbWUgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZnJhbWVcIjtcclxuaW1wb3J0IHsgTmV3Q2FtZXJhIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9jYW1lcmEvdXRpbHNcIjtcclxuaW1wb3J0IHsgQ3JlYXRlQW5pbWF0ZUZyYW1lLCBDcmVhdGVBbmltYXRlQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2FjdGlvbi9hbmltYXRlXCI7XHJcblxyXG4vKipcclxuICog5Yib5bu657K+54G15binXHJcbiAqIHRleHR1cmVBcmVhRGF0YSA9IHtcclxuICogIHggOiAwLFxyXG4gKiAgeSA6IDAsXHJcbiAqICB3aWR0aCA6IDAsXHJcbiAqICBoZWlnaHQgOiAwXHJcbiAqIH1cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVNwcml0ZUZyYW1lV2l0aERhdGEobmFtZSA9IFwiXCIsIGJpdG1hcERhdGEgPSBudWxsLCB0ZXh0dXJlQXJlYURhdGEgPSBudWxsKXtcclxuICAgIGlmKG5hbWU9PVwiXCIgfHwgIWJpdG1hcERhdGEgfHwgIXRleHR1cmVBcmVhRGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgd2lkdGggPSB0ZXh0dXJlQXJlYURhdGFbJ3dpZHRoJ107XHJcbiAgICBsZXQgaGVpZ2h0ID0gdGV4dHVyZUFyZWFEYXRhWydoZWlnaHQnXTtcclxuICAgIGlmKCF3aWR0aCB8fCAhaGVpZ2h0KXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBjcmVhdGVTcHJpdGVGcmFtZShuYW1lLCBiaXRtYXBEYXRhLCB0ZXh0dXJlQXJlYURhdGFbJ3gnXSwgdGV4dHVyZUFyZWFEYXRhWyd5J10sIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG4vKipcclxuICogc2NyZWVuT3B0aW9ucyA9IHtcclxuICogICAgICB4IDogMCwgeSA6IDAsIHdpZHRoIDogMCwgaGVpZ2h0IDogMFxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDYW1lcmFXaXRoRGF0YShzY3JlZW5PcHRpb25zID0gbnVsbCl7XHJcbiAgICBpZighc2NyZWVuT3B0aW9ucyl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgd2lkdGggPSBzY3JlZW5PcHRpb25zWyd3aWR0aCddO1xyXG4gICAgbGV0IGhlaWdodCA9IHNjcmVlbk9wdGlvbnNbJ2hlaWdodCddO1xyXG4gICAgaWYoIXdpZHRoIHx8ICFoZWlnaHQpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE5ld0NhbWVyYShcclxuICAgICAgICBzY3JlZW5PcHRpb25zWyd4J10sIHNjcmVlbk9wdGlvbnNbJ3knXSxcclxuICAgICAgICB3aWR0aCwgaGVpZ2h0XHJcbiAgICApO1xyXG59XHJcblxyXG4vKipcclxuICogdGlsZW1hcOS7peWPimdyaWTnmoRyZWN0LCBwb3PlhbPns7tcclxuICogdGlsZW1hcOeahOebuOWvueWdkOagh+aYrygwLCAwKe+8jOWNs+W3puS4iuinklxyXG4gKiBncmlk55qE5Z2Q5qCH5pivZ3JpZOefqeW9ouS4remXtFxyXG4gKiDkvovlpoLvvJp0aWxlbWFwLnBvcy54ID0gMjAsIGdyaWRXaWR0aCA9IDUwLCBjb2x1bW4gPSA1O1xyXG4gKiDpgqPkuYhncmlkWzBd55qEcG9zLng9IDIwICsgMCo1MCArIDUwLzIgPSA0NSwgcG9zU3RhcnQueCA9IDQ1IC0gNTAvMiA9IDIwXHJcbiAqIOWQjOeQhmdyaWRbNF3nmoRwb3MueD0gMjAgKyA0KjUwICsgNTAvMiA9IDI0NSwgcG9zU3RhcnQueCA9IDI0NSAtIDUwLzIgPSAyMjBcclxuICogXHJcbiAqIG9wdGlvbnM6e1xyXG4gKiAgICAgIGRhdGEgOiBbICAgICAgICAgICAgICAgIOS4gOe7tOaVsOe7hFxyXG4gKiAgICAgICAgICAxLCAxLCAxLCAwLCAwLCAxLFxyXG4gKiAgICAgICAgICAyLCAxLCAwLCAwLCAxLCAyLFxyXG4gKiAgICAgICAgICAyLCAyLCAxLCAxLCAxLCAxXHJcbiAqICAgICAgICAgIF1cclxuICogICAgICBjb2x1bW5zIDogNiAgICAg5YiX5pWwXHJcbiAqICAgICAgZ3JpZFdpZHRoIDogMzJcclxuICogICAgICBncmlkSGVpZ2h0IDogMzIgICAgIOavj+S4quagvOWtkOeahOWuvemrmFxyXG4gKiAgICAgIHggOiAwXHJcbiAqICAgICAgeSA6IDAgICAgICAgICAgIOWIneWni+S9jee9ru+8jOm7mOiupOS4unN0YWdl5Lit5b+D77yM5Y2zKDAsIDApXHJcbiAqIH1cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVRpbGVNYXBXaXRoRGF0YShvcHRpb25zID0gbnVsbCwgaW5pdEhhbmRsZXIgPSBudWxsKXtcclxuICAgIGlmKCFvcHRpb25zIHx8IG9wdGlvbnMuY29sdW1ucyA8PSAwIHx8ICFvcHRpb25zLmRhdGEgfHwgb3B0aW9ucy5kYXRhLmxlbmd0aCA9PSAwIHx8IG9wdGlvbnMuZ3JpZFdpZHRoIDw9IDAgfHwgb3B0aW9ucy5ncmlkSGVpZ2h0IDw9IDApe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy/kuKLlvIPlsI/mlbDpg6jliIYs5L+d55WZ5pW05pWw6YOo5YiG77yM6aqM6K+BdGlsZW1hcOaVsOaNruWujOaVtOaAp1xyXG4gICAgbGV0IGNvbHVtbnMgPSBvcHRpb25zLmNvbHVtbnM7XHJcbiAgICBsZXQgcm93cyA9IHBhcnNlSW50KG9wdGlvbnMuZGF0YS5sZW5ndGggLyBjb2x1bW5zKTtcclxuICAgIGlmKHJvd3MgKiBjb2x1bW5zICE9IG9wdGlvbnMuZGF0YS5sZW5ndGgpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgcGFyYW06IGxlbihncmlkcyk6XCIsIG9wdGlvbnMuZGF0YS5sZW5ndGgsIFwiIGNvbHVtbnM6XCIsIGNvbHVtbnMpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aWxlbWFwID0gTmV3VGlsZU1hcChyb3dzLCBjb2x1bW5zLCBvcHRpb25zLmdyaWRXaWR0aCwgb3B0aW9ucy5ncmlkSGVpZ2h0LCBvcHRpb25zLngsIG9wdGlvbnMueSwgaW5pdEhhbmRsZXIpO1xyXG4gICAgaWYoaW5pdEhhbmRsZXIpe1xyXG4gICAgICAgIEl0ZXJhdG9yR3JpZG1hcCh0aWxlbWFwLmdyaWRtYXAsIGdyaWQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmFsID0gb3B0aW9ucy5kYXRhW2dyaWQucm93SW5kZXggKiBjb2x1bW5zICsgZ3JpZC5jb2xJbmRleF07XHJcbiAgICAgICAgICAgIGluaXRIYW5kbGVyKHZhbCwgZ3JpZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGlsZW1hcDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDliJvlu7rluo/liJfluKfliqjnlLtcclxuICogYW5pbWF0ZURhdGEgPSB7XHJcbiAqICB0eXBlIDogMCxcclxuICogIGZyYW1lcyA6IFtcclxuICogICAgICB7XHJcbiAqICAgICAgICAgIGR1cmF0aW9uIDogMCxcclxuICogICAgICAgICAgeE9mZnNldCA6IDAsXHJcbiAqICAgICAgICAgIHlPZmZzZXQgOiAwXHJcbiAqICAgICAgfVxyXG4gKiAgXVxyXG4gKiB9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVBbmltYXRlV2l0aERhdGEoYW5pbWF0ZURhdGEgPSBudWxsKXtcclxuICAgIGlmKCFhbmltYXRlRGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGxldCBmcmFtZXNEYXRhID0gYW5pbWF0ZURhdGFbJ2ZyYW1lcyddO1xyXG4gICAgaWYoIWZyYW1lc0RhdGEgfHwgZnJhbWVzRGF0YS5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGFuaW1hdGVGcmFtZXMgPSBbXTtcclxuICAgIGZyYW1lc0RhdGEuZm9yRWFjaChmcmFtZURhdGEgPT4ge1xyXG4gICAgICAgIGFuaW1hdGVGcmFtZXMucHVzaChcclxuICAgICAgICAgICAgQ3JlYXRlQW5pbWF0ZUZyYW1lKGdldFNwcml0ZUZyYW1lQnlOYW1lKHNwcml0ZUZyYW1lTmFtZSksXHJcbiAgICAgICAgICAgICAgICBmcmFtZURhdGFbJ2R1cmF0aW9uJ10sIGZyYW1lRGF0YVsneE9mZnNldCddLCBmcmFtZURhdGFbJ3lPZmZzZXQnXSkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ3JlYXRlQW5pbWF0ZUFjdGlvbihhbmltYXRlRGF0YVsndHlwZSddLCBlbnRpdHlJZCwgYW5pbWF0ZUZyYW1lcyk7XHJcbn1cclxuXHJcblxyXG5leHBvcnR7TG9hZFJlc291cmNlLCBjcmVhdGVTcHJpdGVGcmFtZVdpdGhEYXRhLCBjcmVhdGVDYW1lcmFXaXRoRGF0YSwgY3JlYXRlVGlsZU1hcFdpdGhEYXRhLCBjcmVhdGVBbmltYXRlV2l0aERhdGF9IiwiaW1wb3J0IHsgTmV3UG9zIH0gZnJvbSBcIi4uL3BvaW50XCI7XHJcblxyXG4vKipcclxuICog5bey55+l55u057q/5LiK55qE5Lik54K5UDEoWDEsWTEp5ZKMUDIoWDIsWTIp77yMUDHlkoxQMuS4pOeCueS4jemHjeWQiO+8jOWvueS6jkFYK0JZK0M9MO+8jOWImeaciTpcclxuICogQT1ZMi1ZMVxyXG4gKiBCPVgxLVgyXHJcbiAqIEM9WDIqWTEtWDEqWTJcclxuICogXHJcbiAqIOaOqOWvvO+8mmh0dHBzOi8vYmFpa2UuYmFpZHUuY29tL2l0ZW0vJUU3JTlCJUI0JUU3JUJBJUJGJUU3JTlBJTg0JUU0JUI4JTgwJUU4JTg4JUFDJUU1JUJDJThGJUU2JTk2JUI5JUU3JUE4JThCXHJcbiAqL1xyXG5jbGFzcyBGb3JtdWxhQyB7XHJcbiAgICBjb25zdHJ1Y3RvcihhID0gMCwgYiA9IDAsIGMgPSAwKXtcclxuICAgICAgICB0aGlzLmEgPSBhO1xyXG4gICAgICAgIHRoaXMuYiA9IGI7XHJcbiAgICAgICAgdGhpcy5jID0gYztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbmV3Rm9ybXVsYUMobGluZSA9IG51bGwpe1xyXG4gICAgbGV0IHkyID0gbGluZS5lbmQueTtcclxuICAgIGxldCB5MSA9IGxpbmUuc3RhcnQueTtcclxuICAgIGxldCB4MiA9IGxpbmUuZW5kLng7XHJcbiAgICBsZXQgeDEgPSBsaW5lLnN0YXJ0Lng7XHJcbiAgICBcclxuICAgIGxldCBhID0geTIgLSB5MTtcclxuICAgIGxldCBiID0geDEgLSB4MjtcclxuICAgIGxldCBjID0geDIgKiB5MSAtIHgxICogeTI7XHJcbiAgICByZXR1cm4gbmV3IEZvcm11bGFDKGEsIGIsIGMpO1xyXG59XHJcblxyXG4vKipcclxuICog5rGC5Lik55u057q/5Lqk54K5XHJcbiAqIOeUqOebtOe6v+S4gOiIrOaWueeoi+W8j1xyXG4gKi9cclxuZnVuY3Rpb24gaW50ZXJTZWN0aW9uUG9zKGZvcm11bGExID0gbnVsbCwgZm9ybXVsYTIgPSBudWxsKXtcclxuICAgIGxldCBhMSA9IGZvcm11bGExLmE7XHJcbiAgICBsZXQgYjEgPSBmb3JtdWxhMS5iO1xyXG4gICAgbGV0IGMxID0gZm9ybXVsYTEuYztcclxuICAgIGxldCBhMiA9IGZvcm11bGEyLmE7XHJcbiAgICBsZXQgYjIgPSBmb3JtdWxhMi5iO1xyXG4gICAgbGV0IGMyID0gZm9ybXVsYTIuYztcclxuXHJcbiAgICBsZXQgbSA9IGExICogYjIgLSBhMiAqIGIxXHJcbiAgICBpZihtID09IDApe1xyXG4gICAgICAgIC8v5peg5Lqk54K5XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgeCA9IChjMiAqIGIxIC0gYzEgKiBiMikgLyBtO1xyXG4gICAgbGV0IHkgPSAoYzEgKiBhMiAtIGMyICogYTEpIC8gbTtcclxuICAgIHJldHVybiBOZXdQb3MoeCwgeSk7XHJcbn1cclxuXHJcbmV4cG9ydHtuZXdGb3JtdWxhQywgaW50ZXJTZWN0aW9uUG9zfSIsImltcG9ydCB7IE5ld1BvcywgTmV3VmVjV2l0aFBvcywgR2V0RGlzdGFuY2UgfSBmcm9tIFwiLi9wb2ludFwiO1xyXG5pbXBvcnQgeyBuZXdGb3JtdWxhQyB9IGZyb20gXCIuL2Zvcm11bGEvYWJjXCI7XHJcblxyXG4vKipcclxuICog5Z+656GA57q/5q61XHJcbiAqIHN0YXJ0ID0gUG9zKHgsIHkpXHJcbiAqIGVuZCA9IFBvcyh4LCB5KVxyXG4gKi9cclxuY2xhc3MgTGluZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdGFydCA9IG51bGwsIHZlYyA9IG51bGwpe1xyXG4gICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcclxuICAgICAgICB0aGlzLnZlYyA9IHZlYztcclxuICAgICAgICB0aGlzLmVuZCA9IE5ld1BvcyhzdGFydC54ICsgdmVjLngsIHN0YXJ0LnkgKyB2ZWMueSk7XHJcbiAgICAgICAgdGhpcy5mb3JtdWxhID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gTmV3TGluZVdpdGhWZWMoeCA9IDAsIHkgPSAwLCB2eCA9IDAsIHZ5ID0gMCl7XHJcbiAgICBsZXQgdmVjID0gTmV3VmVjKHZ4LCB2eSk7XHJcbiAgICByZXR1cm4gbmV3TGluZSh4LCB5LCB2ZWMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBOZXdMaW5lV2l0aFBvcyh4MSA9IDAsIHkxID0gMCwgeDIgPSAwLCB5MiA9IDApe1xyXG4gICAgbGV0IHZlYyA9IE5ld1ZlY1dpdGhQb3MoeDEsIHkxLCB4MiwgeTIpO1xyXG4gICAgcmV0dXJuIG5ld0xpbmUoeDEsIHkxLCB2ZWMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBuZXdMaW5lKHggPSAwLCB5ID0gMCwgdmVjID0gbnVsbCl7XHJcbiAgICBpZihHZXREaXN0YW5jZSh2ZWMpID09IDApe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGxpbmUgPSBuZXcgTGluZShOZXdQb3MoeCwgeSksIHZlYyk7XHJcbiAgICBsZXQgZm9ybXVsYSA9IG5ld0Zvcm11bGFDKGxpbmUpO1xyXG4gICAgbGluZS5mb3JtdWxhID0gZm9ybXVsYTtcclxuICAgIHJldHVybiBsaW5lO1xyXG59XHJcblxyXG4vKipcclxuICog5Z+656GA5bGe5oCnIFxyXG4gKi9cclxuZnVuY3Rpb24gR2V0U3RhcnRQb3MobGluZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGxpbmUuc3RhcnQ7XHJcbn1cclxuZnVuY3Rpb24gR2V0RW5kUG9zKGxpbmUgPSBudWxsKXtcclxuICAgIHJldHVybiBsaW5lLmVuZDtcclxufVxyXG5mdW5jdGlvbiBHZXRWZWMobGluZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGxpbmUudmVjO1xyXG59XHJcblxyXG5leHBvcnR7IE5ld0xpbmVXaXRoVmVjLCBOZXdMaW5lV2l0aFBvcywgXHJcbiAgICBHZXRTdGFydFBvcywgR2V0RW5kUG9zLCBHZXRWZWN9IiwiaW1wb3J0IHsgTmV3UG9zIH0gZnJvbSBcIi4vcG9pbnRcIjtcclxuaW1wb3J0IHsgTmV3UmVjdCwgR2V0UmVjdFN0YXJ0UG9zLCBHZXRSZWN0RW5kUG9zLCBHZXRSZWN0Q2VudGVyUG9zLCBHZXRSZWN0SGFsZldpZHRoLCBHZXRSZWN0SGFsZkhlaWdodCwgRml4VW5pdFBvcywgVXBkYXRlUmVjdENlbnRlclBvcyB9IGZyb20gXCIuL3JlY3RcIjtcclxuaW1wb3J0IHsgaW50ZXJTZWN0aW9uUG9zIH0gZnJvbSBcIi4vZm9ybXVsYS9hYmNcIjtcclxuXHJcblxyXG4vKipcclxuICog5rGC5Lik55u057q/5Lqk54K5XHJcbiAqIOeUqOebtOe6v+S4gOiIrOaWueeoi+W8j1xyXG4gKi9cclxuZnVuY3Rpb24gSW50ZXJTZWN0aW9uUG9zKGxpbmUxID0gbnVsbCwgbGluZTIgPSBudWxsKXtcclxuICAgIHJldHVybiBpbnRlclNlY3Rpb25Qb3MobGluZTEuZm9ybXVsYSwgbGluZTIuZm9ybXVsYSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmmK/lkKblubPooYzkuo54LHnovbTnmoTnur9cclxuICovXHJcbmZ1bmN0aW9uIElzSG9yaXpvbnRhbExpbmUobGluZSA9IG51bGwpe1xyXG4gICAgcmV0dXJuIGxpbmUudmVjLnkgPT0gMDtcclxufVxyXG5mdW5jdGlvbiBJc1ZlcnRpY2FsTGluZShsaW5lID0gbnVsbCl7XHJcbiAgICByZXR1cm4gbGluZS52ZWMueCA9PSAwO1xyXG59XHJcblxyXG4vKipcclxuICog5Lik5Liq55+p5b2i5piv5ZCm55u45Lqk77yM5Z+656GA56Kw5pKe5qOA5rWL77yI6ZyA6KaB5YWI5pu05paw5Z2Q5qCH77yJXHJcbiAqIOWOn+eQhu+8mlxyXG4gKiAg5bemeO+8jOWPluS4pOiAheacgOWkp+WAvFxyXG4gKiAg5Y+zeO+8jOWPluS4pOiAheacgOWwj+WAvFxyXG4gKiAg5aaC5p6c5Y+zeOWkp+S6juW3pnjvvIzliJl46L2055u45LqkXHJcbiAqIFnlkIznkIbvvJpcclxuICogIOS4innvvIzlj5bkuKTogIXmnIDlpKflgLxcclxuICogIOS4i3nvvIzlj5bkuKTogIXmnIDlsI/lgLxcclxuICogIOWmguaenOS4i3nlpKfkuo7kuIp577yM5YiZeei9tOebuOS6pFxyXG4gKiAg55uu5YmN77yM5Y2z5L2/5Lik6L656YeN5Y+g77yM5Lmf5LiN566X55u45Lqk77yM6L+Z5qC36IO96YG/5YWN5b6I5aSa6Zeu6aKYXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdJbm5lclJlY3QocmVjdDEgPSBudWxsLCByZWN0MiA9IG51bGwpe1xyXG5cclxuICAgIGxldCBzdGFydDEgPSBHZXRSZWN0U3RhcnRQb3MocmVjdDEpO1xyXG4gICAgbGV0IHN0YXJ0MiA9IEdldFJlY3RTdGFydFBvcyhyZWN0Mik7XHJcbiAgICBsZXQgZW5kMSA9IEdldFJlY3RFbmRQb3MocmVjdDEpO1xyXG4gICAgbGV0IGVuZDIgPSBHZXRSZWN0RW5kUG9zKHJlY3QyKTtcclxuXHJcbiAgICBsZXQgcjF4MSA9IHN0YXJ0MS54O1xyXG4gICAgbGV0IHIyeDEgPSBzdGFydDIueDtcclxuICAgIGxldCBtYXhYMSA9IHIxeDEgPiByMngxID8gcjF4MSA6IHIyeDE7XHJcblxyXG4gICAgbGV0IHIxeDIgPSBlbmQxLng7XHJcbiAgICBsZXQgcjJ4MiA9IGVuZDIueDtcclxuICAgIGxldCBtaW5YMiA9IHIxeDIgPCByMngyID8gcjF4MiA6IHIyeDI7XHJcbiAgICBpZihtaW5YMiA+IG1heFgxKXtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcjF5MSA9IHN0YXJ0MS55O1xyXG4gICAgbGV0IHIyeTEgPSBzdGFydDIueTtcclxuICAgIGxldCBtYXhZMSA9IHIxeTEgPiByMnkxID8gcjF5MSA6IHIyeTE7XHJcbiAgICBsZXQgcjF5MiA9IGVuZDEueTtcclxuICAgIGxldCByMnkyID0gZW5kMi55O1xyXG4gICAgbGV0IG1pblkyID0gcjF5MiA8IHIyeTIgPyByMXkyIDogcjJ5MjtcclxuICAgIGlmKG1pblkyID4gbWF4WTEpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXdSZWN0KDAsIDAsIG1pblgyIC0gbWF4WDEsIG1pblkyIC0gbWF4WTEpO1xyXG59XHJcblxyXG4vKipcclxuICog5Yik5pat5piv5ZCm55u45LqkXHJcbiAqIOaaguaXtuS9v+eUqE5ld0lubmVyUmVjdO+8jOWQjuacn+eci+aDheWGteaYr+WQpumcgOimgeaJi+WKqOWbnuaUtui1hOa6kCBcclxuICovXHJcbmZ1bmN0aW9uIElzUmVjdHNDcm9zcyhyZWN0MSA9IG51bGwsIHJlY3QyID0gbnVsbCl7XHJcbiAgICBsZXQgcmVjdCA9IE5ld0lubmVyUmVjdChyZWN0MSwgcmVjdDIpO1xyXG4gICAgcmV0dXJuIHJlY3QgPyB0cnVlIDogZmFsc2U7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogaW5uZXIucmVjdOS4jeWHhui2iuWHum91dHRlci5yZWN077yM5L+u5q2jcG9z5L2N572uXHJcbiAqIGlubmVy5ZKMb3V0dGVy6YO95pivcmVjdFR1cGxlXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhJblJlY3Qob3V0dGVyID0gbnVsbCwgaW5uZXIgPSBudWxsLCBpbm5lclVuaXRQb3MgPSBudWxsKXtcclxuICAgIGxldCBpbm5lclBvcyA9IEdldFJlY3RDZW50ZXJQb3MoaW5uZXIpO1xyXG4gICAgbGV0IGlubmVyU3RhcnRQb3MgPSBHZXRSZWN0U3RhcnRQb3MoaW5uZXIpO1xyXG4gICAgbGV0IGlubmVyRW5kUG9zID0gR2V0UmVjdEVuZFBvcyhpbm5lcik7XHJcbiAgICBsZXQgb3V0dGVyU3RhcnRQb3MgPSBHZXRSZWN0U3RhcnRQb3Mob3V0dGVyKTtcclxuICAgIGxldCBvdXR0ZXJFbmRQb3MgPSBHZXRSZWN0RW5kUG9zKG91dHRlcik7XHJcblxyXG4gICAgbGV0IHggPSBpbm5lclBvcy54O1xyXG4gICAgaWYoaW5uZXJTdGFydFBvcy54IDwgb3V0dGVyU3RhcnRQb3MueCl7XHJcbiAgICAgICAgeCA9IG91dHRlclN0YXJ0UG9zLnggKyBHZXRSZWN0SGFsZldpZHRoKGlubmVyKTtcclxuICAgIH1lbHNlIGlmKGlubmVyRW5kUG9zLnggPiBvdXR0ZXJFbmRQb3MueCl7XHJcbiAgICAgICAgeCA9IG91dHRlckVuZFBvcy54IC0gR2V0UmVjdEhhbGZXaWR0aChpbm5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHkgPSBpbm5lclBvcy55O1xyXG4gICAgaWYoaW5uZXJTdGFydFBvcy55IDwgb3V0dGVyU3RhcnRQb3MueSl7XHJcbiAgICAgICAgeSA9IG91dHRlclN0YXJ0UG9zLnkgKyBHZXRSZWN0SGFsZkhlaWdodChpbm5lcik7XHJcbiAgICB9ZWxzZSBpZihpbm5lckVuZFBvcy55ID4gb3V0dGVyRW5kUG9zLnkpe1xyXG4gICAgICAgIHkgPSBvdXR0ZXJTdGFydFBvcy55IC0gR2V0UmVjdEhhbGZIZWlnaHQoaW5uZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHggIT0gaW5uZXJQb3MueCB8fCB5ICE9IGlubmVyUG9zLnkpe1xyXG4gICAgICAgIFVwZGF0ZVJlY3RDZW50ZXJQb3MoaW5uZXIsIHgsIHkpO1xyXG4gICAgICAgIEZpeFVuaXRQb3MocmVjdCwgaW5uZXJVbml0UG9zKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiDlvZPliY3kvY3nva7mmK/lkKblnKjnn6nlvaLkuK3vvIjlkIzmoLfpnIDopoHlhYjmm7TmlrByZWN05L2N572u77yJXHJcbiAqIOi/memHjOS4jeWMheWQq+i4qee6v++8jOWboOatpOS4jeiDveeUqD495ZKMPD1cclxuICog5Li65LqG6YG/5YWN57G75Ly8IHRpbGXnmoQgcm93SW5kZXggPSB4L2dyaWRXaWR0aOWvvOiHtOaVsOe7hOi2iueVjOmXrumimFxyXG4gKi9cclxuZnVuY3Rpb24gSXNQb3NJblJlY3QoeCA9IDAsIHkgPSAwLCByZWN0ID0gbnVsbCl7XHJcbiAgICBsZXQgc3RhcnRQb3MgPSBHZXRSZWN0U3RhcnRQb3MocmVjdCk7XHJcbiAgICBsZXQgZW5kUG9zID0gR2V0UmVjdEVuZFBvcyhyZWN0KTtcclxuICAgIHJldHVybiB4ID4gc3RhcnRQb3MueCAmJiB4IDwgZW5kUG9zLnhcclxuICAgICAgICAmJiB5ID4gc3RhcnRQb3MueSAmJiB5IDwgZW5kUG9zLnk7XHJcbn1cclxuXHJcbmV4cG9ydCB7SW50ZXJTZWN0aW9uUG9zLCBcclxuICAgIElzSG9yaXpvbnRhbExpbmUsIElzVmVydGljYWxMaW5lLFxyXG4gICAgSXNSZWN0c0Nyb3NzLCBGaXhJblJlY3QsIElzUG9zSW5SZWN0fVxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLSDku6XkuIvlvoXlrppcclxuXHJcbi8qKlxyXG4gKiDmoLnmja7nur/mrrXkvZznn6nlvaJcclxuICovXHJcbmZ1bmN0aW9uIE5ld091dHRlclJlY3QoeDEgPSAwLCB5MSA9IDAsIHgyID0gMCwgeTIgPSAwKXtcclxuICAgIGxldCB3aWR0aCA9IHgyIC0geDE7XHJcbiAgICBsZXQgaGVpZ2h0ID0geTIgLSB5MTtcclxuICAgIGlmKHdpZHRoIDw9IDAgfHwgaGVpZ2h0IDw9IDApe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgbGV0IGNlbnRlclggPSB4MSArICh4MiAtIHgxKSAqIDAuNTtcclxuICAgIGxldCBjZW50ZXJZID0geTEgKyAoeTIgLSB5MSkgKiAwLjU7XHJcbiAgICBsZXQgcmVjdCA9IE5ld1JlY3REZWZhdWx0KHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgVXBkYXRlUmVjdFBvcyhyZWN0LCBjZW50ZXJYLCBjZW50ZXJZKTtcclxuICAgIHJldHVybiByZWN0O1xyXG59XHJcblxyXG4vKipcclxuICog5Lik5Liq55+p5b2i6Ze055qE5aSW5o6l55+p5b2iXHJcbiAqL1xyXG5mdW5jdGlvbiBOZXdPdXR0ZXJSZWN0QnlSZWN0cyhyZWN0MSA9IG51bGwsIHJlY3QyID0gbnVsbCl7XHJcbiAgICBsZXQgcjF4MSA9IEdldFJlY3RYMShyZWN0MSk7XHJcbiAgICBsZXQgcjJ4MSA9IEdldFJlY3RYMShyZWN0Mik7XHJcbiAgICBsZXQgeDEgPSByMXgxIDwgcjJ4MSA/IHIxeDEgOiByMngxO1xyXG4gICAgbGV0IHIxeDIgPSBHZXRSZWN0WDIocmVjdDEpO1xyXG4gICAgbGV0IHIyeDIgPSBHZXRSZWN0WDIocmVjdDIpO1xyXG4gICAgbGV0IHgyID0gcjF4MiA+IHIyeDIgPyByMXgyIDogcjJ4MjtcclxuXHJcbiAgICBsZXQgcjF5MSA9IEdldFJlY3RZMShyZWN0MSk7XHJcbiAgICBsZXQgcjJ5MSA9IEdldFJlY3RZMShyZWN0Mik7XHJcbiAgICBsZXQgeTEgPSByMXkxIDwgcjJ5MSA/IHIxeTEgOiByMnkxO1xyXG4gICAgbGV0IHIxeTIgPSBHZXRSZWN0WTIocmVjdDEpO1xyXG4gICAgbGV0IHIyeTIgPSBHZXRSZWN0WTIocmVjdDIpO1xyXG4gICAgbGV0IHkyID0gcjF5MiA+IHIyeTIgPyByMXkyIDogcjJ5MjtcclxuXHJcbiAgICByZXR1cm4gTmV3T3V0dGVyUmVjdCh4MSwgeTEsIHgyLCB5Mik7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICog55+p5b2i5o6S5pal77yMdGFyZ2V0UmVjdOS8muiiq2Jsb2NrUmVjdOW8ueWHuuWOu1xyXG4gKiBUT0RP77yM5Lul5ZCO5a6M5ZaE5rOo6YeKXHJcbiAqL1xyXG5mdW5jdGlvbiBGaXhFeGNsdWRlUmVjdChibG9ja1JlY3QgPSBudWxsLCB0YXJnZXRSZWN0ID0gbnVsbCl7XHJcbiAgICBsZXQgcG9zMSA9IGJsb2NrUmVjdC5wb3M7XHJcbiAgICBsZXQgcG9zMiA9IHRhcmdldFJlY3QucG9zO1xyXG4gICAgLy/orqHnrpflhbPns7vvvIzkuIrkuIvlt6blj7NcclxuICAgIGxldCB2eCA9IHBvczEueCAtIHBvczIueDtcclxuICAgIGxldCB2eSA9IHBvczEueSAtIHBvczIueTtcclxuICAgIGxldCB4ID0gdnggPCAwID8gdngqLTEgOiB2eDtcclxuICAgIGxldCB5ID0gdnkgPCAwID8gdnkqLTEgOiB2eTtcclxuICAgIGlmKHggPiB5KXtcclxuICAgICAgICAvL+W3puWPs1xyXG4gICAgICAgIGlmKHZ4ID4gMCl7XHJcbiAgICAgICAgICAgIC8vcmVjdDLlnKjlt6ZcclxuICAgICAgICAgICAgcG9zMi54ID0gYmxvY2tSZWN0LnBvc1N0YXJ0LnggLSB0YXJnZXRSZWN0LndpZHRoIC0gdGFyZ2V0UmVjdC54T2Zmc2V0O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL3JlY3Qy5Zyo5Y+zXHJcbiAgICAgICAgICAgIHBvczIueCA9IGJsb2NrUmVjdC5wb3NFbmQueCAtIHRhcmdldFJlY3QueE9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICAvL+S4iuS4i1xyXG4gICAgICAgIGlmKHZ5ID4gMCl7XHJcbiAgICAgICAgICAgIC8vcmVjdDLlnKjkuIpcclxuICAgICAgICAgICAgcG9zMi55ID0gYmxvY2tSZWN0LnBvc1N0YXJ0LnkgLSB0YXJnZXRSZWN0LmhlaWdodCAtIHRhcmdldFJlY3QueU9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgLy9yZWN0MuWcqOS4i1xyXG4gICAgICAgICAgICBwb3MyLnkgPSBibG9ja1JlY3QucG9zRW5kLnkgLSB0YXJnZXRSZWN0LnlPZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgVXBkYXRlUmVjdCh0YXJnZXRSZWN0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHJlY3Qx5piv5ZCm5a6M5YWo6L+H5LqGcmVjdDJcclxuICovXHJcbmZ1bmN0aW9uIElzUmVjdHNDcm9zc092ZXIocmVjdDEgPSBudWxsLCByZWN0MiA9IG51bGwpe1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gSXNSZWN0c0Nyb3NzV2l0aFZlYyhyZWN0MSA9IG51bGwsIHZ4ID0gMCwgdnkgPSAwLCByZWN0MiA9IG51bGwpe1xyXG4gICAgXHJcbn0iLCJpbXBvcnQgeyBkcmF3SW1hZ2UsIGRyYXdSZWN0LCBkcmF3TGluZSwgZHJhd0NpcmNsZSB9IGZyb20gXCIuLi8uLi9mb3VuZGF0aW9uL2VuZ2luZS9oNS9yZW5kZXJcIjtcclxuaW1wb3J0IHsgZ2V0U3ByaXRlRnJhbWVCeU5hbWUgfSBmcm9tIFwiLi4vLi4vZm91bmRhdGlvbi9zdHJ1Y3R1cmUvZnJhbWVcIjtcclxuXHJcbiAvKipcclxuICAqIOiOt+WPlueyvueBteW4p1xyXG4gICogVE9ETyDlj6/og73kvJrmlLnmiJBpZOW9ouW8j1xyXG4gICovXHJcbiBmdW5jdGlvbiBHZXRTcHJpdGVGcmFtZShuYW1lID0gXCJcIil7XHJcbiAgICBpZihuYW1lID09IFwiXCIpe1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdldFNwcml0ZUZyYW1lQnlOYW1lKG5hbWUpO1xyXG59XHJcblxyXG4vKipcclxuICogVE9ETyDlj6/og73kvJrmlLnmiJBzcHJpdGVGcmFtZUlk5Y+C5pWwXHJcbiAqIOS7peS4i+eahHgsIHkg6YO95piv5bGP5bmV5Z2Q5qCHXHJcbiAqL1xyXG5mdW5jdGlvbiBEcmF3RnJhbWUoc3ByaXRlRnJhbWUgPSBudWxsLCB4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBsZXQgdGV4dHVyZUFyZWEgPSBzcHJpdGVGcmFtZS50ZXh0dXJlQXJlYTtcclxuICAgIGRyYXdJbWFnZShzcHJpdGVGcmFtZS5iaXRtYXBEYXRhLFxyXG4gICAgICAgIHRleHR1cmVBcmVhLngsIHRleHR1cmVBcmVhLnksIHRleHR1cmVBcmVhLndpZHRoLCB0ZXh0dXJlQXJlYS5oZWlnaHQsXHJcbiAgICAgICAgeCwgeSAsIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBEcmF3UmVjdCh4ID0gMCwgeSA9IDAsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCl7XHJcbiAgICBkcmF3UmVjdCh4LCB5ICwgd2lkdGgsIGhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERyYXdMaW5lKHgxID0gMCwgeTEgPSAwLCB4MiA9IDAsIHkyID0gMCl7XHJcbiAgICBkcmF3TGluZSh4MSwgeTEsIHgyLCB5Mik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERyYXdDaXJjbGUoeCA9IDAsIHkgPSAwLCByYWRpdXMgPSAwKXtcclxuICAgIGRyYXdDaXJjbGUoeCwgeSwgcmFkaXVzKTtcclxufVxyXG5cclxuZXhwb3J0e0dldFNwcml0ZUZyYW1lLCBEcmF3RnJhbWUsIERyYXdSZWN0LCBEcmF3TGluZSwgRHJhd0NpcmNsZX0iLCJpbXBvcnQgZGF0YSBmcm9tICcuL2RhdGEnO1xyXG5pbXBvcnQgeyBTdGFydFRlc3QgfSBmcm9tICcuL2ZyYW1ld29yay9kaXJlY3Rvci91dGlscy9nYW1lJztcclxuaW1wb3J0IHsgTmV3UG9zIH0gZnJvbSAnLi9mcmFtZXdvcmsvZm91bmRhdGlvbi9nZW9tZXRyaWMvcG9pbnQnO1xyXG5pbXBvcnQgeyBOZXdMaW5lV2l0aFBvcyB9IGZyb20gJy4vZnJhbWV3b3JrL2ZvdW5kYXRpb24vZ2VvbWV0cmljL2xpbmUnO1xyXG5pbXBvcnQgeyBJbnRlclNlY3Rpb25Qb3MgfSBmcm9tICcuL2ZyYW1ld29yay9mb3VuZGF0aW9uL2dlb21ldHJpYy91dGlscyc7XHJcbmltcG9ydCB7IERyYXdDaXJjbGUsIERyYXdMaW5lIH0gZnJvbSAnLi9mcmFtZXdvcmsvZGlyZWN0b3IvdXRpbHMvcmVuZGVyJztcclxuXHJcbi8qKlxyXG4gKiAgMjAxOS4xMC4wOVxyXG4gKiAgICAgIHZz5b+954S25LiN5o+Q56S6aW1wb3J05LqG77yM5oyJ54Wn572R5LiK55qE5pa55rOV77yM5Yqg5LqG5LiqanNjb25maWcuanNvbuWwseWPr+S7peS6hlxyXG4gKi9cclxuXHJcbi8v6LCo6K6w5pWw5o2u6amx5YqoXHJcbnZhciBvcHRpb25zID0ge1xyXG4gICAgZGVidWcgOiBmYWxzZSxcclxuICAgIGZwcyA6IGRhdGEuZnBzLFxyXG4gICAgc2NyZWVuIDoge1xyXG4gICAgICAgIHdpZHRoIDogZGF0YS5zY3JlZW4ud2lkdGgsXHJcbiAgICAgICAgaGVpZ2h0IDogZGF0YS5zY3JlZW4uaGVpZ2h0XHJcbiAgICB9LFxyXG4gICAgc3RhZ2UgOiB7XHJcbiAgICAgICAgd2lkdGggOiBkYXRhLnN0YWdlLndpZHRoLFxyXG4gICAgICAgIGhlaWdodCA6IGRhdGEuc3RhZ2UuaGVpZ2h0XHJcbiAgICB9LFxyXG4gICAgY2FtZXJhIDoge1xyXG4gICAgICAgIHggOiBkYXRhLmNhbWVyYS54LFxyXG4gICAgICAgIHkgOiBkYXRhLmNhbWVyYS55XHJcbiAgICB9LFxyXG4gICAgbW91c2Vkb3duSGFuZGxlciA6IG1vdXNlZG93bkhhbmRsZXIsXHJcbiAgICBtb3VzZXVwSGFuZGxlciA6IG1vdXNldXBIYW5kbGVyXHJcbn1cclxuXHJcbnZhciBzdGFydFBvcztcclxudmFyIGxpbmUxO1xyXG52YXIgbGluZTI7XHJcblxyXG5mdW5jdGlvbiBtb3VzZWRvd25IYW5kbGVyKHggPSAwLCB5ID0gMCl7XHJcbiAgICBzdGFydFBvcyA9IE5ld1Bvcyh4LCB5KTtcclxufVxyXG5mdW5jdGlvbiBtb3VzZXVwSGFuZGxlcih4ID0gMCwgeSA9IDApe1xyXG4gICAgaWYoIXN0YXJ0UG9zKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZighbGluZTEpe1xyXG4gICAgICAgIGxpbmUxID0gTmV3TGluZVdpdGhQb3Moc3RhcnRQb3MueCwgc3RhcnRQb3MueSwgeCwgeSk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBsaW5lMiA9IE5ld0xpbmVXaXRoUG9zKHN0YXJ0UG9zLngsIHN0YXJ0UG9zLnksIHgsIHkpO1xyXG4gICAgfVxyXG4gICAgRHJhd0xpbmUoc3RhcnRQb3MueCwgc3RhcnRQb3MueSwgeCwgeSk7XHJcbiAgICBpZihsaW5lMSAmJiBsaW5lMil7XHJcbiAgICAgICAgbGV0IHBvcyA9IEludGVyU2VjdGlvblBvcyhsaW5lMSwgbGluZTIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBvcyk7XHJcbiAgICAgICAgRHJhd0NpcmNsZShwb3MueCwgcG9zLnksIDEwKTtcclxuICAgIH1cclxuICAgIHN0YXJ0UG9zID0gbnVsbDtcclxufVxyXG5cclxuY2xhc3MgTXlTY2VuZSB7XHJcbiAgICBvblN0YXJ0KCl7XHJcblxyXG4gICAgfVxyXG4gICAgb25VcGRhdGUoZHQgPSAwKXtcclxuICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuKGZ1bmN0aW9uICgpe1xyXG4gICAgY29uc29sZS5sb2cob3B0aW9ucyk7XHJcbiAgICBTdGFydFRlc3Qob3B0aW9ucywgbmV3IE15U2NlbmUoKSk7XHJcbn0pKCkiLCJpbXBvcnQgeyBpbml0R2FtZSB9IGZyb20gXCIuLi93b3JsZC9yZXNcIjtcclxuaW1wb3J0IHsgcnVuV2l0aFNjZW5lIH0gZnJvbSBcIi4uL3N5c3RlbS9ydW5cIjtcclxuXHJcbi8qKlxyXG4gKiBvcHRpb25zIHtcclxuICogICAgICB0ZXh0dXJlcyA6IOagvOW8j+ingUxvYWRSZXNvdXJjZSgp5YaFXHJcbiAqICAgICAgc2NyZWVuIDoge1xyXG4gKiAgICAgICAgICB3aWR0aCA6IDgwMCxcclxuICogICAgICAgICAgaGVpZ2h0IDogODAwXHJcbiAqICAgICAgfSxcclxuICogICAgICBmcHMgOiA2MCxcclxuICogICAgICBkZWJ1ZyA6IGZhbHNlLFxyXG4gKiAgICAgIGNhbWVyYSA6IHtcclxuICogICAgICAgICAgeCA6IDAsXHJcbiAqICAgICAgICAgIHkgOiAwXHJcbiAqICAgICAgfSxcclxuICogICAgICB0aWxlbWFwIDog5qC85byP5Y+C6ICDdGlsZW1hcOS4gOiKglxyXG4gKiAgICAgIGtleUhhbmRsZXIgOiBmdW5jdGlvbih0eXBlLCBrZXlDb2RlKSAgIHR5cGU9MSA9IGRvd24sIHR5cGU9MiA9IHVwXHJcbiAqICAgICAgY29sbGlkZSA6IHtcclxuICogICAgICAgICAgdXNlQm94IDogZmFsc2UsXHJcbiAqICAgICAgICAgIHVzZUdyb3VwIDogZmFsc2UsXHJcbiAqICAgICAgICAgIHBhaXJzIDogW1xyXG4gKiAgICAgICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgICAgIHRlYW0xIDogMSxcclxuICogICAgICAgICAgICAgICAgICB0ZWFtMiA6IDJcclxuICogICAgICAgICAgICAgIH1cclxuICogICAgICAgICAgXSxcclxuICogICAgICAgICAgaGFuZGxlciA6IGZ1bmN0aW9uKGR0LCBjb2xsaWRlcjEsIGNvbGxpZGVyMilcclxuICogICAgICB9XHJcbiAqIH1cclxuICovXHJcbmZ1bmN0aW9uIFN0YXJ0KG9wdGlvbnMgPSBudWxsLCBzY2VuZSA9IG51bGwpe1xyXG4gICAgTG9hZFJlc291cmNlKG9wdGlvbnMudGV4dHVyZXMsIG51bGwsICgpID0+IHtcclxuICAgICAgICBpbml0R2FtZShvcHRpb25zKTtcclxuICAgICAgICBydW5XaXRoU2NlbmUoc2NlbmUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFN0b3AoKXtcclxuICAgIEdldFNjZW5lKCkub25FbmQoKTtcclxuICAgIEdldFN5c3RlbXMoKS5mb3JFYWNoKHN5c3RlbSA9PiB7XHJcbiAgICAgICAgc3lzdGVtLm9uRW5kKCk7XHJcbiAgICB9KTtcclxuICAgIGVuZ2luZS5TdG9wKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFN0YXJ0VGVzdChvcHRpb25zLCBzY2VuZSA9IG51bGwpe1xyXG4gICAgaW5pdEdhbWUob3B0aW9ucyk7XHJcbiAgICBydW5XaXRoU2NlbmUoc2NlbmUpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIOWKoOi9vei1hOa6kO+8jOWIm+W7uueyvueBteW4p1xyXG4gKiB0ZXh0dXJlcyA6IFtcclxuICogICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgaW1nIDogXCJyZXMvYS5wbmdcIixcclxuICogICAgICAgICAgICAgIGZyYW1lcyA6IFtcclxuICogICAgICAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBcIndhbGsxXCJcclxuICogICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZUFyZWEgOiB7XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB4IDogMCxcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgIHkgOiAwLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggOiAwLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0IDogMFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgICAgICAgXVxyXG4gKiAgICAgICAgICB9XHJcbiAqICAgICAgXSxcclxuICovXHJcbmZ1bmN0aW9uIExvYWRSZXNvdXJjZSh0ZXh0dXJlc0RhdGEgPSBudWxsLCBPbmxvYWRDYWxsYmFjayA9IG51bGwsIE9uQ29tcGxldGVDYWxsYmFjayA9IG51bGwpe1xyXG4gICAgLy/liqDovb3lm77lg4/lubbliJvlu7rmmL7npLrluKdcclxuICAgIGlmKCF0ZXh0dXJlc0RhdGEgfHwgdGV4dHVyZXNEYXRhLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgX2NvdW50ID0gMDtcclxuICAgIHRleHR1cmVzRGF0YS5mb3JFYWNoKHQgPT57XHJcbiAgICAgICAgbG9hZEltZyh0LmltZywgYml0bWFwRGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHQuZnJhbWVzLmZvckVhY2goZnJhbWVEYXRhID0+IHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVNwcml0ZUZyYW1lV2l0aERhdGEoZnJhbWVEYXRhLm5hbWUsIGJpdG1hcERhdGEsIGZyYW1lRGF0YS50ZXh0dXJlQXJlYSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfY291bnQrKztcclxuICAgICAgICAgICAgaWYoT25sb2FkQ2FsbGJhY2spe1xyXG4gICAgICAgICAgICAgICAgT25sb2FkQ2FsbGJhY2soX2NvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0ZXh0dXJlc0RhdGEubGVuZ3RoID09IF9jb3VudCAmJiBPbkNvbXBsZXRlQ2FsbGJhY2spe1xyXG4gICAgICAgICAgICAgICAgT25Db21wbGV0ZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQge1N0YXJ0LCBTdG9wLCBTdGFydFRlc3QsIExvYWRSZXNvdXJjZX0iXSwic291cmNlUm9vdCI6IiJ9